<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Flink 运行架构 | 技术博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="人民万岁">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/1.styles.014bf4fe.css" as="style"><link rel="preload" href="/assets/js/app.f42ea2bf.js" as="script"><link rel="preload" href="/assets/js/11.5871899e.js" as="script"><link rel="preload" href="/assets/js/144.ed2b16a8.js" as="script">
    <link rel="stylesheet" href="/assets/css/1.styles.014bf4fe.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo1.png" alt="技术博客" class="logo"> <span class="site-name can-hide">技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><!----> <span class="title" style="display:;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/java/base/1/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/language/cj/1/" class="nav-link">仓颉</a></li><li class="dropdown-item"><!----> <a href="/language/mode/1/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/spring/200/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/frame/mybatis/300/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/frame/maven/2300/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/frame/git/1/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kafka/1400/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/rabbitmq/1/" class="nav-link">RabbitMQ</a></li><li class="dropdown-item"><!----> <a href="/rocketmq/1/" class="nav-link">RocketMQ</a></li><li class="dropdown-item"><!----> <a href="/redis/1600/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/zookeeper/1/" class="nav-link">Zookeeper </a></li><li class="dropdown-item"><!----> <a href="/nginx/1/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/mycat/1/" class="nav-link">数据库套件</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/1/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/es/1/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/mongodb/1/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/hadoop/1/" class="nav-link">Hadoop</a></li><li class="dropdown-item"><!----> <a href="/clickhouse/1/" class="nav-link">ClickHouse</a></li><li class="dropdown-item"><!----> <a href="/hbase/1/" class="nav-link">Hbase</a></li><li class="dropdown-item"><!----> <a href="/hive/1/" class="nav-link">Hive</a></li><li class="dropdown-item"><!----> <a href="/flink/1/" class="nav-link">Flink</a></li><li class="dropdown-item"><!----> <a href="/flume/1/" class="nav-link">Flume</a></li><li class="dropdown-item"><!----> <a href="/sqlite/1/" class="nav-link">SQLite</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/2300/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/docker/400/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/jenkins/500/" class="nav-link">Jenkins</a></li><li class="dropdown-item"><!----> <a href="/kubernetes/600/" class="nav-link">Kubernetes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/1/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/front/1/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/ai/1/" class="nav-link">AI</a></li></ul></div></div> <a href="https://github.com/landashu?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><!----> <span class="title" style="display:;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/java/base/1/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/language/cj/1/" class="nav-link">仓颉</a></li><li class="dropdown-item"><!----> <a href="/language/mode/1/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/spring/200/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/frame/mybatis/300/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/frame/maven/2300/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/frame/git/1/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kafka/1400/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/rabbitmq/1/" class="nav-link">RabbitMQ</a></li><li class="dropdown-item"><!----> <a href="/rocketmq/1/" class="nav-link">RocketMQ</a></li><li class="dropdown-item"><!----> <a href="/redis/1600/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/zookeeper/1/" class="nav-link">Zookeeper </a></li><li class="dropdown-item"><!----> <a href="/nginx/1/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/mycat/1/" class="nav-link">数据库套件</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/1/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/es/1/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/mongodb/1/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/hadoop/1/" class="nav-link">Hadoop</a></li><li class="dropdown-item"><!----> <a href="/clickhouse/1/" class="nav-link">ClickHouse</a></li><li class="dropdown-item"><!----> <a href="/hbase/1/" class="nav-link">Hbase</a></li><li class="dropdown-item"><!----> <a href="/hive/1/" class="nav-link">Hive</a></li><li class="dropdown-item"><!----> <a href="/flink/1/" class="nav-link">Flink</a></li><li class="dropdown-item"><!----> <a href="/flume/1/" class="nav-link">Flume</a></li><li class="dropdown-item"><!----> <a href="/sqlite/1/" class="nav-link">SQLite</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/2300/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/docker/400/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/jenkins/500/" class="nav-link">Jenkins</a></li><li class="dropdown-item"><!----> <a href="/kubernetes/600/" class="nav-link">Kubernetes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/1/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/front/1/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/ai/1/" class="nav-link">AI</a></li></ul></div></div> <a href="https://github.com/landashu?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>mysql</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mysql/1/" class="sidebar-link">MySQL 索引介绍</a></li><li><a href="/mysql/2/" class="sidebar-link">MySQL 锁介绍</a></li><li><a href="/mysql/3/" class="sidebar-link">MySQL 索引优化工具 explain</a></li><li><a href="/mysql/4/" class="sidebar-link">MySQL 主从复制（GTID）</a></li><li><a href="/mysql/5/" class="sidebar-link">MySQL 8安装</a></li><li><a href="/mysql/6/" class="sidebar-link">MySQL 8.x新特性总结</a></li><li><a href="/mysql/7/" class="sidebar-link">MySQL UDF以及新类型JSON</a></li><li><a href="/mysql/8/" class="sidebar-link">MySQL 高可用MGR(一) 理论</a></li><li><a href="/mysql/9/" class="sidebar-link">MySQL 高可用MGR(二) 搭建</a></li><li><a href="/mysql/10/" class="sidebar-link">MySQL 高可用MGR(三) 测试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Elasticsearch</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/es/1/" class="sidebar-link">ES 7.8.0（一） 入门介绍</a></li><li><a href="/es/2/" class="sidebar-link">ES 7.8.0（二） 读、写和写索引流程以及文档分析过程</a></li><li><a href="/es/3/" class="sidebar-link">ES 7.8.0（三） 文档冲突</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>mongodb</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mongodb/1/" class="sidebar-link">mongodb</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>hadoop</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hadoop/1/" class="sidebar-link">Hadoop 伪分布式及集群</a></li><li><a href="/hadoop/2/" class="sidebar-link">Hadoop 指令</a></li><li><a href="/hadoop/3/" class="sidebar-link">Hadoop 读写流程详解</a></li><li><a href="/hadoop/4/" class="sidebar-link">Hadoop SpringBoot集成</a></li><li><a href="/hadoop/5/" class="sidebar-link">Hadoop MapReduce机制</a></li><li><a href="/hadoop/6/" class="sidebar-link">Hadoop YARN</a></li><li><a href="/hadoop/7/" class="sidebar-link">Hadoop MapReduce配置和编写job及数据倾斜的解决</a></li><li><a href="/hadoop/8/" class="sidebar-link">Hadoop MapReduce自定义格式输入输出</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>clickhouse</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/clickhouse/1/" class="sidebar-link">ClickHouse 介绍及安装</a></li><li><a href="/clickhouse/2/" class="sidebar-link">ClickHouse 数据类型</a></li><li><a href="/clickhouse/3/" class="sidebar-link">ClickHouse 表引擎</a></li><li><a href="/clickhouse/4/" class="sidebar-link">ClickHouse SQL操作</a></li><li><a href="/clickhouse/5/" class="sidebar-link">ClickHouse 副本配置</a></li><li><a href="/clickhouse/6/" class="sidebar-link">ClickHouse 分片与集群部署</a></li><li><a href="/clickhouse/7/" class="sidebar-link">ClickHouse Explain及建表优化</a></li><li><a href="/clickhouse/8/" class="sidebar-link">ClickHouse 语法优化规则</a></li><li><a href="/clickhouse/9/" class="sidebar-link">ClickHouse 查询优化</a></li><li><a href="/clickhouse/10/" class="sidebar-link">ClickHouse 数据一致性</a></li><li><a href="/clickhouse/11/" class="sidebar-link">ClickHouse 物化视图</a></li><li><a href="/clickhouse/12/" class="sidebar-link">ClickHouse MaterializeMySQL引擎</a></li><li><a href="/clickhouse/13/" class="sidebar-link">ClickHouse 监控及备份</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>hbase</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hbase/1/" class="sidebar-link">Hbase 介绍及安装</a></li><li><a href="/hbase/2/" class="sidebar-link">Hbase 优化</a></li><li><a href="/hbase/3/" class="sidebar-link">Hbase phoenix安装及使用</a></li><li><a href="/hbase/4/" class="sidebar-link">Hbase LSM-TREE</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>hive</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hive/1/" class="sidebar-link">Hive 介绍及安装</a></li><li><a href="/hive/2/" class="sidebar-link">Hive 内外部表、分区表、分桶表概念及hiveSQL命令</a></li><li><a href="/hive/3/" class="sidebar-link">Hive 数据类型</a></li><li><a href="/hive/4/" class="sidebar-link">Hive 函数 MySQL联合</a></li><li><a href="/hive/5/" class="sidebar-link">Hive 数据倾斜和优化</a></li><li><a href="/hive/56/" class="sidebar-link">Hive Sqoop安装及指令</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>flink</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/flink/1/" class="sidebar-link">Flink 介绍及安装</a></li><li><a href="/flink/2/" class="sidebar-link">Flink 配置介绍及Demo</a></li><li><a href="/flink/3/" class="sidebar-link">Flink API讲解</a></li><li><a href="/flink/4/" aria-current="page" class="active sidebar-link">Flink 运行架构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/flink/4/#flink-运行时的组件" class="sidebar-link">flink 运行时的组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/flink/4/#jobmanager" class="sidebar-link">JobManager</a></li><li class="sidebar-sub-header level3"><a href="/flink/4/#taskmanager" class="sidebar-link">TaskManager</a></li><li class="sidebar-sub-header level3"><a href="/flink/4/#resourcemanager" class="sidebar-link">ResourceManager</a></li><li class="sidebar-sub-header level3"><a href="/flink/4/#dispatcher" class="sidebar-link">Dispatcher</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/flink/4/#任务提交流程" class="sidebar-link">任务提交流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/flink/4/#任务提交过程" class="sidebar-link">任务提交过程</a></li><li class="sidebar-sub-header level3"><a href="/flink/4/#yarn-模式" class="sidebar-link">YARN 模式</a></li><li class="sidebar-sub-header level4"><a href="/flink/4/#详细提交流程" class="sidebar-link">详细提交流程</a></li><li class="sidebar-sub-header level4"><a href="/flink/4/#优缺点" class="sidebar-link">优缺点</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/flink/4/#taskmanager-与-slots" class="sidebar-link">TaskManager 与 Slots</a></li><li class="sidebar-sub-header level2"><a href="/flink/4/#并行度-parallelism" class="sidebar-link">并行度（Parallelism）</a></li><li class="sidebar-sub-header level2"><a href="/flink/4/#任务链-operator-chains" class="sidebar-link">任务链（Operator Chains）</a></li></ul></li><li><a href="/flink/5/" class="sidebar-link">Flink 时间语义及Watermark</a></li><li><a href="/flink/6/" class="sidebar-link">Flink 状态管理</a></li><li><a href="/flink/7/" class="sidebar-link">Flink 容错，检查点，保存点</a></li><li><a href="/flink/8/" class="sidebar-link">Flink 状态一致性</a></li><li><a href="/flink/9/" class="sidebar-link">Flink Table API 和 Flink SQL</a></li><li><a href="/flink/10/" class="sidebar-link">Flink CEP编程</a></li><li><a href="/flink/11/" class="sidebar-link">Flink Joining编程</a></li><li><a href="/flink/12/" class="sidebar-link">Flink CDC</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>flume</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/flume/1/" class="sidebar-link">Flume 日志收集系统介绍及安装</a></li><li><a href="/flume/2/" class="sidebar-link">Flume Source支持的类型</a></li><li><a href="/flume/3/" class="sidebar-link">Flume Sink支持的类型</a></li><li><a href="/flume/4/" class="sidebar-link">Flume Channel支持的类型</a></li><li><a href="/flume/5/" class="sidebar-link">Flume Selector</a></li><li><a href="/flume/6/" class="sidebar-link">Flume Interceptor拦截器类型</a></li><li><a href="/flume/7/" class="sidebar-link">Flume Process</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span> sqlite</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/sqlite/1/" class="sidebar-link">SQLite介绍</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="placeholder"></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Flink 运行架构<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="flink-运行时的组件"><a href="#flink-运行时的组件" class="header-anchor">#</a> flink 运行时的组件</h2> <p><img src="/assets/img/flink/4/img.png" alt=""></p> <h3 id="jobmanager"><a href="#jobmanager" class="header-anchor">#</a> JobManager</h3> <p>控制一个应用程序执行的主进程，也就是说，每个应用程序都会被一个不同的 JobManager 所控制执行。</p> <p>JobManager 会先接收到要执行的应用程序，这个应用程序回包括：作业图（JobGraph）、逻辑数据流图（logical dataflow graph）和打包了所有类、库和其他资源的 JAR 包。JobManager 会把 JobGraph 转换成一个物理层面的数据流图，这个图被叫做 &quot;执行图&quot;，包含了所有可以并发执行的任务。</p> <p>JobManager 会向资源管理器（ResourceManager）请求执行任务必要的资源，也就是任务管理器（TaskManager）上的插槽（Slot）。一旦它获取到了足够的资源，就会将执行图分发到真正运行他们的 TaskManager 上。而在运行过程中，JobManager 会负载所有需要中央协调的操作，比如说检查点（checkpoints）的协调。</p> <h3 id="taskmanager"><a href="#taskmanager" class="header-anchor">#</a> TaskManager</h3> <p>Flink 中的工作进程。通常在 Flink 中会有多个 TaskManager 运行，每一个 TaskManager 都包含了一定数量的插槽（slots）。插槽的数量限制了 TaskManager 能够执行的任务数量。启动之后，TaskManager 会向资源管理器注册它的插槽；收到资源管理器的指令后，TaskManager 就会将一个或者多个插槽提供给 JobManager 调用。JobManager 就可以向插槽分配任务（tasks）来执行了。</p> <p>在执行过程中，一个 TaskManager 可以跟其他运行同一应用程序的 TaskManager 交换数据。</p> <h3 id="resourcemanager"><a href="#resourcemanager" class="header-anchor">#</a> ResourceManager</h3> <p>主要负责管理任务管理器（TaskManager）的插槽（slot），TaskManager 插槽是 Flink 中定义的处理资源单元。</p> <p>Flink 为不同的环境和资源管理工具提供了不同资源管理器，比如 YARN、MEsos、K8s，以及 standalone 部署。</p> <p>当 JobManager 申请插槽资源时，ResourceManager 会将有空闲插槽的 TaskManager 分配给 JobManager。如果 ResourceManager 没有足够的插槽来满足 JobManager 的请求，它还可以向资源提供平台发起会话，以提供启动 TaskManager 进程的容器。</p> <h3 id="dispatcher"><a href="#dispatcher" class="header-anchor">#</a> Dispatcher</h3> <p>可以跨作业运行，它为 应用提交提供了 REST 接口。当一个应用被提交执行时，分发器就会启动并将移交给一个 JobManager。Dispatcher 也会启动一个 Web UI，用来方便地展示和监控作业执行的信息。</p> <p>Dispatcher 在架构中可能并不是必须的，这取决于应用提交运行的方式。</p> <h2 id="任务提交流程"><a href="#任务提交流程" class="header-anchor">#</a> 任务提交流程</h2> <h3 id="任务提交过程"><a href="#任务提交过程" class="header-anchor">#</a> 任务提交过程</h3> <p><img src="/assets/img/flink/4/img_1.png" alt=""></p> <h3 id="yarn-模式"><a href="#yarn-模式" class="header-anchor">#</a> YARN 模式</h3> <p><img src="/assets/img/flink/4/img_2.png" alt=""></p> <h4 id="详细提交流程"><a href="#详细提交流程" class="header-anchor">#</a> 详细提交流程</h4> <ol><li>Flink 任务提交后，client 向 HDFS 上传 Flink 的 jar 包和配置</li> <li>Client 向 Yarn ResourceManager 提交任务</li> <li>ResourceManager 分配 Container 资源并通知对应的 NodeManager 启动 ApplicationMaster</li> <li>ApplicationMaster 启动后加载 Flink 的 jar 包和配置构建环境</li> <li>ApplicationMaster 启动 JobManager</li> <li>ApplicationMaster 向 ResourceManager 申请资源启动 TaskManager</li> <li>ResourceManager 分配 Container 资源后</li> <li>由 ApplicationMaster 通知资源所在节点的 NodeManager 启动 TaskManager</li> <li>NodeManager 加载 Flink 的 jar 包和配置构建环境并启动 TaskManager</li> <li>TaskManager 启动后向 JobManager 发送心跳包</li> <li>等待 JobManager 向其分配任务</li></ol> <h4 id="优缺点"><a href="#优缺点" class="header-anchor">#</a> 优缺点</h4> <p>YARN 资源的统一管理和调度。Yarn 集群中所有节点的资源（内存、CPU、磁盘、网络等）被抽象为 Container。计算框架需要资源进行运算任务时需要向 Resource Manager 申请 Container，Yarn 按照特定的策略对资源进行调度和进行 Container 的分配。Yarn 模式能通过多种任务调度策略来利用提高集群资源利用率。例如 FIFO Scheduler、Capacity Scheduler、Fair Scheduler，并能设置任务优先级。</p> <p>资源隔离。Yarn 使用了轻量级资源隔离机制 Cgroups 进行资源隔离以避免相互干扰，一旦 Container 使用的资源量超过事先定义的上限值，就将其杀死。</p> <p>自动 failover 处理。例如 Yarn NodeManager 监控、Yarn ApplicationManager 异常恢复。</p> <h2 id="taskmanager-与-slots"><a href="#taskmanager-与-slots" class="header-anchor">#</a> TaskManager 与 Slots</h2> <p><img src="/assets/img/flink/4/img_3.png" alt=""></p> <p>Flink 中每一个 worker（TaskManager）都是一个 JVM 进程，它可能会在独立的线程上执行一个或多个 subtask。为了控制一个 worker 能接收多少个 task，worker 通过 task slot 来进行控制（一个 worker 至少有一个 taskslot）</p> <p>每个 task slot 表示 TaskManager 拥有资源的一个固定大小的子集。 假如一个 TaskManager 有三个 slot，那么它会将其管理的内存分成三份给各个 slot。资源 slot 化意味着一个 subtask 将不需要跟来自其他 job 的 subtask 竞争被管理的内存，取而代之的是它将拥有一定数量的内存储备。 需要注意的是，这里不会涉及到 CPU 的隔离（CPU 是靠抢的），slot 目前仅仅用来隔离 task 的受管理的内存。</p> <p>通过调整 task slot 的数量，允许用户定义 subtask 之间如何互相隔离。如果一个 TaskManager 一个 slot，那将意味着每个 task group 运行在独立的 JVM 中（该 JVM 可能是通过一个特定的容器启动的），而一个 TaskManager 多个 slot 意味着更多的 subtask 可以共享同一个 JVM。而在同一个 JVM 进程中的 task 将共享 TCP 连接（基于多路复用）和心跳消息。它们也可能共享数据集和数据结构，因此这减少了每个 task 的负载。</p> <p>默认情况下，Flink 允许子任务共享 slot，即使他们是不同任务的子任务（前提是他们来自同一个 job）。 这样的结果是，一个 slot 可以保存作业的整个管道。</p> <p>Task Slot 是静态的概念，是指 TaskManager 具有的并发执行能力，可以通过参数 taskmanager.numberOfTaskSlots 进行配置</p> <p>并行度 parallelism 是动态概念，即 TaskManager 运行程序时实际使用的并发能力，可以通过参数 parallelism.default 进行配置。</p> <p>设一共有 3 个 TaskManager，每一个 TaskManager 中的分配 3 个 TaskSlot，也就是每个 TaskManager 可以接收 3 个 task，一共 9 个 TaskSlot，如果我们设置 parallelism.default=1，即运行程序默认的并行度为 1，9 个 TaskSlot 只用了 1 个，有 8 个空闲，因此，设置合适的并行度才能提高效率。</p> <h2 id="并行度-parallelism"><a href="#并行度-parallelism" class="header-anchor">#</a> 并行度（Parallelism）</h2> <p>Flink 程序的执行具有并行、分布式的特性</p> <p>在执行过程中，一个流（stream）包含一个或多个分区（stream partition），而每一个算子（operator）可以包含一个或多个子任务（operator subtask），这些子任务在不同的线程、不同的物理机或不同的容器中彼此互不依赖地执行。</p> <p>一个特定算子的子任务（subtask）的个数被称之为其并行度（parallelism）</p> <p>一般情况下，一个流程序的并行度，可以认为就是其所有算子中最大的并行度。一个程序中，不同的算子可能具有不同的并行度。</p> <p>Stream 在算子之间传输数据的形式可以是 one-to-one (forwarding) 的模式也可以是 redistributing 的模式，具体是哪一种形式，取决于算子的种类。</p> <ol><li>one-to-one：stream (比如在 source 和 map operator 之间) 维护着分区以及元素的顺序。那意味着 map 算子的子任务看到的元素的个数以及顺序跟 source 算子的子任务生产的元素的个数、顺序相同，map、fliter、flatMap 等算子都是 one-to-one 的对应关系。类似于 spark 中的窄依赖</li> <li>redistributing（重新分配）：stream (map () 跟 keyBy/window 之间或者 keyBy/window 跟 sink 之间) 的分区会发生改变。每一个算子的子任务依据所选择的 transformation 发送数据到不同的目标任务。例如，keyBy () 基于 hashCode 重分区、broadcast 和 rebalance 会随机重新分区，这些算子都会引起 redistribute 过程，而 redistribute 过程就类似于 Spark 中的 shuffle 过程。类似于 spark 中的宽依赖</li></ol> <h2 id="任务链-operator-chains"><a href="#任务链-operator-chains" class="header-anchor">#</a> 任务链（Operator Chains）</h2> <p>相同并行度的 one to one 操作，Flink 这样相连的算子链接在一起形成一个 task，原来的算子成为里面的一部分</p> <p>将算子链接成 task 是非常有效的优化：它能减少线程之间的切换和基于缓存区的数据交换，在减少时延的同时提升吞吐量。</p> <p>链接的行为可以在编程 API 中进行指定；任务链必须满足两个条件：one-to-one 的数据传输并且并行度相同</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2/18/2025, 4:04:05 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/flink/3/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Flink API讲解</div></a> <a href="/flink/5/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Flink 时间语义及Watermark</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/flink/3/" class="prev">Flink API讲解</a></span> <span class="next"><a href="/flink/5/">Flink 时间语义及Watermark</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://gitee.com/dashboard" title="gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://github.com/landashu?tab=repositories" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2025
    <span>
<!--      <a href='https://doc.xugaoyi.com/' target='_blank'>Theme by Vdoing</a> | <a href='http://doc.aizuda.com/' rel='external nofollow' target='_blank'>Copyright © 2022-2023 AiZuDa</a>-->
<!--      <br>-->
<!--      <a href="http://beian.miit.gov.cn/" target="_blank">鲁ICP备2021041554号-1</a>-->
    </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f42ea2bf.js" defer></script><script src="/assets/js/11.5871899e.js" defer></script><script src="/assets/js/144.ed2b16a8.js" defer></script>
  </body>
</html>
