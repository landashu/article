<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Flink 介绍及安装 | 技术博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="人民万岁">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/1.styles.014bf4fe.css" as="style"><link rel="preload" href="/assets/js/app.010049a7.js" as="script"><link rel="preload" href="/assets/js/11.5871899e.js" as="script"><link rel="preload" href="/assets/js/138.bf787e53.js" as="script">
    <link rel="stylesheet" href="/assets/css/1.styles.014bf4fe.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo1.png" alt="技术博客" class="logo"> <span class="site-name can-hide">技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><!----> <span class="title" style="display:;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/java/base/1/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/language/cj/1/" class="nav-link">仓颉</a></li><li class="dropdown-item"><!----> <a href="/language/mode/1/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/spring/200/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/frame/mybatis/300/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/frame/maven/2300/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/frame/git/1/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kafka/1400/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/rabbitmq/1/" class="nav-link">RabbitMQ</a></li><li class="dropdown-item"><!----> <a href="/rocketmq/1/" class="nav-link">RocketMQ</a></li><li class="dropdown-item"><!----> <a href="/redis/1600/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/zookeeper/1/" class="nav-link">Zookeeper </a></li><li class="dropdown-item"><!----> <a href="/nginx/1/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/mycat/1/" class="nav-link">数据库套件</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/1/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/es/1/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/mongodb/1/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/hadoop/1/" class="nav-link">Hadoop</a></li><li class="dropdown-item"><!----> <a href="/clickhouse/1/" class="nav-link">ClickHouse</a></li><li class="dropdown-item"><!----> <a href="/hbase/1/" class="nav-link">Hbase</a></li><li class="dropdown-item"><!----> <a href="/hive/1/" class="nav-link">Hive</a></li><li class="dropdown-item"><!----> <a href="/flink/1/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Flink</a></li><li class="dropdown-item"><!----> <a href="/flume/1/" class="nav-link">Flume</a></li><li class="dropdown-item"><!----> <a href="/sqlite/1/" class="nav-link">SQLite</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/2300/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/docker/400/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/jenkins/500/" class="nav-link">Jenkins</a></li><li class="dropdown-item"><!----> <a href="/kubernetes/600/" class="nav-link">Kubernetes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/1/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/front/1/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/ai/1/" class="nav-link">AI</a></li></ul></div></div> <a href="https://github.com/landashu?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><!----> <span class="title" style="display:;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/java/base/1/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/language/cj/1/" class="nav-link">仓颉</a></li><li class="dropdown-item"><!----> <a href="/language/mode/1/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/spring/200/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/frame/mybatis/300/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/frame/maven/2300/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/frame/git/1/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kafka/1400/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/rabbitmq/1/" class="nav-link">RabbitMQ</a></li><li class="dropdown-item"><!----> <a href="/rocketmq/1/" class="nav-link">RocketMQ</a></li><li class="dropdown-item"><!----> <a href="/redis/1600/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/zookeeper/1/" class="nav-link">Zookeeper </a></li><li class="dropdown-item"><!----> <a href="/nginx/1/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/mycat/1/" class="nav-link">数据库套件</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/1/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/es/1/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/mongodb/1/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/hadoop/1/" class="nav-link">Hadoop</a></li><li class="dropdown-item"><!----> <a href="/clickhouse/1/" class="nav-link">ClickHouse</a></li><li class="dropdown-item"><!----> <a href="/hbase/1/" class="nav-link">Hbase</a></li><li class="dropdown-item"><!----> <a href="/hive/1/" class="nav-link">Hive</a></li><li class="dropdown-item"><!----> <a href="/flink/1/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Flink</a></li><li class="dropdown-item"><!----> <a href="/flume/1/" class="nav-link">Flume</a></li><li class="dropdown-item"><!----> <a href="/sqlite/1/" class="nav-link">SQLite</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/2300/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/docker/400/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/jenkins/500/" class="nav-link">Jenkins</a></li><li class="dropdown-item"><!----> <a href="/kubernetes/600/" class="nav-link">Kubernetes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/1/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/front/1/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/ai/1/" class="nav-link">AI</a></li></ul></div></div> <a href="https://github.com/landashu?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>mysql</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mysql/1/" class="sidebar-link">MySQL 索引介绍</a></li><li><a href="/mysql/2/" class="sidebar-link">MySQL 锁介绍</a></li><li><a href="/mysql/3/" class="sidebar-link">MySQL 索引优化工具 explain</a></li><li><a href="/mysql/4/" class="sidebar-link">MySQL 主从复制（GTID）</a></li><li><a href="/mysql/5/" class="sidebar-link">MySQL 8安装</a></li><li><a href="/mysql/6/" class="sidebar-link">MySQL 8.x新特性总结</a></li><li><a href="/mysql/7/" class="sidebar-link">MySQL UDF以及新类型JSON</a></li><li><a href="/mysql/8/" class="sidebar-link">MySQL 高可用MGR(一) 理论</a></li><li><a href="/mysql/9/" class="sidebar-link">MySQL 高可用MGR(二) 搭建</a></li><li><a href="/mysql/10/" class="sidebar-link">MySQL 高可用MGR(三) 测试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Elasticsearch</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/es/1/" class="sidebar-link">ES 7.8.0（一） 入门介绍</a></li><li><a href="/es/2/" class="sidebar-link">ES 7.8.0（二） 读、写和写索引流程以及文档分析过程</a></li><li><a href="/es/3/" class="sidebar-link">ES 7.8.0（三） 文档冲突</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>mongodb</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mongodb/1/" class="sidebar-link">mongodb</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>hadoop</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hadoop/1/" class="sidebar-link">Hadoop 伪分布式及集群</a></li><li><a href="/hadoop/2/" class="sidebar-link">Hadoop 指令</a></li><li><a href="/hadoop/3/" class="sidebar-link">Hadoop 读写流程详解</a></li><li><a href="/hadoop/4/" class="sidebar-link">Hadoop SpringBoot集成</a></li><li><a href="/hadoop/5/" class="sidebar-link">Hadoop MapReduce机制</a></li><li><a href="/hadoop/6/" class="sidebar-link">Hadoop YARN</a></li><li><a href="/hadoop/7/" class="sidebar-link">Hadoop MapReduce配置和编写job及数据倾斜的解决</a></li><li><a href="/hadoop/8/" class="sidebar-link">Hadoop MapReduce自定义格式输入输出</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>clickhouse</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/clickhouse/1/" class="sidebar-link">ClickHouse 介绍及安装</a></li><li><a href="/clickhouse/2/" class="sidebar-link">ClickHouse 数据类型</a></li><li><a href="/clickhouse/3/" class="sidebar-link">ClickHouse 表引擎</a></li><li><a href="/clickhouse/4/" class="sidebar-link">ClickHouse SQL操作</a></li><li><a href="/clickhouse/5/" class="sidebar-link">ClickHouse 副本配置</a></li><li><a href="/clickhouse/6/" class="sidebar-link">ClickHouse 分片与集群部署</a></li><li><a href="/clickhouse/7/" class="sidebar-link">ClickHouse Explain及建表优化</a></li><li><a href="/clickhouse/8/" class="sidebar-link">ClickHouse 语法优化规则</a></li><li><a href="/clickhouse/9/" class="sidebar-link">ClickHouse 查询优化</a></li><li><a href="/clickhouse/10/" class="sidebar-link">ClickHouse 数据一致性</a></li><li><a href="/clickhouse/11/" class="sidebar-link">ClickHouse 物化视图</a></li><li><a href="/clickhouse/12/" class="sidebar-link">ClickHouse MaterializeMySQL引擎</a></li><li><a href="/clickhouse/13/" class="sidebar-link">ClickHouse 监控及备份</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>hbase</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hbase/1/" class="sidebar-link">Hbase 介绍及安装</a></li><li><a href="/hbase/2/" class="sidebar-link">Hbase 优化</a></li><li><a href="/hbase/3/" class="sidebar-link">Hbase phoenix安装及使用</a></li><li><a href="/hbase/4/" class="sidebar-link">Hbase LSM-TREE</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>hive</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hive/1/" class="sidebar-link">Hive 介绍及安装</a></li><li><a href="/hive/2/" class="sidebar-link">Hive 内外部表、分区表、分桶表概念及hiveSQL命令</a></li><li><a href="/hive/3/" class="sidebar-link">Hive 数据类型</a></li><li><a href="/hive/4/" class="sidebar-link">Hive 函数 MySQL联合</a></li><li><a href="/hive/5/" class="sidebar-link">Hive 数据倾斜和优化</a></li><li><a href="/hive/56/" class="sidebar-link">Hive Sqoop安装及指令</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>flink</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/flink/1/" aria-current="page" class="active sidebar-link">Flink 介绍及安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/flink/1/#概要" class="sidebar-link">概要</a></li><li class="sidebar-sub-header level2"><a href="/flink/1/#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header level2"><a href="/flink/1/#单机搭建" class="sidebar-link">单机搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/flink/1/#环境信息" class="sidebar-link">环境信息</a></li><li class="sidebar-sub-header level3"><a href="/flink/1/#ssh免密登录" class="sidebar-link">ssh免密登录</a></li><li class="sidebar-sub-header level4"><a href="/flink/1/#_1-为各服务器生成密钥" class="sidebar-link">1. 为各服务器生成密钥</a></li><li class="sidebar-sub-header level4"><a href="/flink/1/#_2-服务器之间交换密钥" class="sidebar-link">2. 服务器之间交换密钥</a></li><li class="sidebar-sub-header level4"><a href="/flink/1/#_3-创建文件并赋权" class="sidebar-link">3. 创建文件并赋权</a></li><li class="sidebar-sub-header level3"><a href="/flink/1/#workermanager" class="sidebar-link">workermanager</a></li><li class="sidebar-sub-header level4"><a href="/flink/1/#_103、104-操作" class="sidebar-link">103、104 操作</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/flink/1/#jobmanager-高可用" class="sidebar-link">jobManager 高可用</a></li><li class="sidebar-sub-header level2"><a href="/flink/1/#yarn模式" class="sidebar-link">Yarn模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/flink/1/#方式一" class="sidebar-link">方式一</a></li><li class="sidebar-sub-header level3"><a href="/flink/1/#方式二" class="sidebar-link">方式二</a></li><li class="sidebar-sub-header level3"><a href="/flink/1/#flink-yarn-的好处" class="sidebar-link">flink-yarn 的好处</a></li></ul></li></ul></li><li><a href="/flink/2/" class="sidebar-link">Flink 配置介绍及Demo</a></li><li><a href="/flink/3/" class="sidebar-link">Flink API讲解</a></li><li><a href="/flink/4/" class="sidebar-link">Flink 运行架构</a></li><li><a href="/flink/5/" class="sidebar-link">Flink 时间语义及Watermark</a></li><li><a href="/flink/6/" class="sidebar-link">Flink 状态管理</a></li><li><a href="/flink/7/" class="sidebar-link">Flink 容错，检查点，保存点</a></li><li><a href="/flink/8/" class="sidebar-link">Flink 状态一致性</a></li><li><a href="/flink/9/" class="sidebar-link">Flink Table API 和 Flink SQL</a></li><li><a href="/flink/10/" class="sidebar-link">Flink CEP编程</a></li><li><a href="/flink/11/" class="sidebar-link">Flink Joining编程</a></li><li><a href="/flink/12/" class="sidebar-link">Flink CDC</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>flume</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/flume/1/" class="sidebar-link">Flume 日志收集系统介绍及安装</a></li><li><a href="/flume/2/" class="sidebar-link">Flume Source支持的类型</a></li><li><a href="/flume/3/" class="sidebar-link">Flume Sink支持的类型</a></li><li><a href="/flume/4/" class="sidebar-link">Flume Channel支持的类型</a></li><li><a href="/flume/5/" class="sidebar-link">Flume Selector</a></li><li><a href="/flume/6/" class="sidebar-link">Flume Interceptor拦截器类型</a></li><li><a href="/flume/7/" class="sidebar-link">Flume Process</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span> sqlite</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/sqlite/1/" class="sidebar-link">SQLite介绍</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="placeholder"></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Flink 介绍及安装<!----></h1> <!----> <div class="theme-vdoing-content content__default"><blockquote><p>本文及后续所有文章都以 1.12 做为版本讲解和入门学习</p></blockquote> <h2 id="概要"><a href="#概要" class="header-anchor">#</a> 概要</h2> <p>Flink 是一个可以帮助我们做实时计算的框架。实时计算分为两种，一种是 Stream，即可以一条一条处理；一种是 batch，即批处理，待数据存储到一定数量再处理。</p> <p>Flink 提供了很好的故障恢复能力，当我们的一个流处理程序故障后，一个新的流程服务会自动启动并替代它继续执行。我们并不需要担心故障机当时的状态，因为 Flink 已经帮我们做了记录 (checkPoint)。</p> <p>Flink 支持 (exactly-once) 一次而且仅一次地接收数据，保证收到数据而且不重复收到数据。支持 (EventTime) 把事件实际产生的时间做为处理数据的时间，除了 EventTime 还要 Ingestion Time (数据进入 Flink 时间)、Processing Time (flink 真正处理数据的时间)。支持有状态的计算。</p> <p>Flink 的 window 可以将无限数据流切割为有限数据流，主要分为两类：TimeWingdow (又可分为 Tumbling Window 滚动出窗口、Sliding Window 滑动窗口) 和 CountWindow。</p> <p>Flink 的 Watermark (水位线) 用于处理乱序事件，类似于一个延迟触发机制</p> <p>Flink 组件分为 jobManager (工作管理) 和 TaskManager (任务管理)，听起来好像没什么不同，但程序真正运行在 TaskManager，JobManager 负责整个 Flink 集群任务的调度以及资源的管理。</p> <p><img src="/assets/img/flink/1/img.png" alt=""></p> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">wget</span> https://mirrors.bfsu.edu.cn/apache/flink/flink-1.12.2/flink-1.12.2-bin-scala_2.11.tgz
<span class="token function">tar</span> -xvf flink-1.12.0-bin-scala_2.11.tgz
<span class="token builtin class-name">cd</span> flink-1.12.0-bin-scala_2.11
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>启动</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost flink-1.12.2<span class="token punctuation">]</span><span class="token comment"># ./bin/start-cluster.sh </span>
Starting cluster.
Starting standalonesession daemon on <span class="token function">host</span> localhost.localdomain.
Starting taskexecutor daemon on <span class="token function">host</span> localhost.localdomain.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>测试用例</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 执行一个测试程序</span>
./bin/flink run examples/streaming/WordCount.jar
<span class="token comment"># 查看测试结果</span>
<span class="token function">tail</span> log/flink-*-taskexecutor-*.out
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>停止运行</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>./bin/stop-cluster.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>Flink 默认提供了 webUI，端口为 8081，可以直接在浏览器中访问</p></blockquote> <h2 id="单机搭建"><a href="#单机搭建" class="header-anchor">#</a> 单机搭建</h2> <h3 id="环境信息"><a href="#环境信息" class="header-anchor">#</a> 环境信息</h3> <table><thead><tr><th>IP</th> <th>模式</th></tr></thead> <tbody><tr><td>xx.xxx.xx.103</td> <td>master</td></tr> <tr><td>xx.xxx.xx.104</td> <td>slave</td></tr></tbody></table> <h3 id="ssh免密登录"><a href="#ssh免密登录" class="header-anchor">#</a> ssh 免密登录</h3> <p>在集群的启动的时候 flink 会要求认证对方的登录密码，设置 ssh 免密登录可以为我们快速启动。</p> <h4 id="_1-为各服务器生成密钥"><a href="#_1-为各服务器生成密钥" class="header-anchor">#</a> 1. 为各服务器生成密钥</h4> <p>一路 enter 即可</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># rea是一种加密规则</span>
ssh-keygen -t rsa
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>查看密钥</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># cd ~/.ssh/</span>
<span class="token punctuation">[</span>root@localhost .ssh<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">12</span>
-rw-------. <span class="token number">1</span> root root <span class="token number">1679</span> Apr <span class="token number">17</span> <span class="token number">14</span>:46 id_rsa
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">408</span> Apr <span class="token number">17</span> <span class="token number">14</span>:46 id_rsa.pub
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>id_rsa : 生成的私钥文件<br>
 id_rsa.pub ： 生成的公钥文</p> <h4 id="_2-服务器之间交换密钥"><a href="#_2-服务器之间交换密钥" class="header-anchor">#</a> 2. 服务器之间交换密钥</h4> <p>生成的密钥两边文件名字一样，所以交换的时候需要更换文件名称，以防覆盖。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 这种方式后可以直接测试连接 103 或 104</span>
ssh-copy-id xx.xxx.xx.103
ssh-copy-id xx.xxx.xx.104

<span class="token comment"># 这种方式需要完整的执行以下步骤</span>
<span class="token function">scp</span> id_rsa.pub root@xx.xxx.xx.103:/root/.ssh/104.id_rsa.pub
<span class="token function">scp</span> id_rsa.pub root@xx.xxx.xx.104:/root/.ssh/103.id_rsa.pub
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3-创建文件并赋权"><a href="#_3-创建文件并赋权" class="header-anchor">#</a> 3. 创建文件并赋权</h4> <p>在各服务机的～/.ssh 目录下创建一个文件 authorized_keys</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">touch</span> authorized_keys
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>把 xxx.id_rsa.pub 内容追加到 authorized_keys 文件末尾（追加后可以把文件 xxx.id_rsa.pub 删除）</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">cat</span> <span class="token number">103</span>.id_rsa.pub <span class="token operator">&gt;&gt;</span> authorized_keys
<span class="token function">cat</span> <span class="token number">104</span>.id_rsa.pub <span class="token operator">&gt;&gt;</span> authorized_keys
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>把本机生成的公钥也得 <strong>追加到</strong> authorized_keys 文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code> <span class="token function">cat</span> id_rsa.pub <span class="token operator">&gt;&gt;</span> authorized_keys 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>赋权</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">chmod</span> <span class="token number">600</span> authorized_keys 
<span class="token function">chmod</span> <span class="token number">700</span> -R .ssh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>测试 连接</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">ssh</span> root@xx.xxx.xx.103
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="workermanager"><a href="#workermanager" class="header-anchor">#</a> workermanager</h3> <p>一个 Flink 应用会携带 JobManager 和 TaskManager 两个组件，我们可以部署两个 Flink 应用实现以下简单的 TaskManager 的集群模式，FlinkA 可以启动 Job 和 Task 两个组件，FlinkB 启动 Task 组件。</p> <p><img src="/assets/img/flink/1/img_1.png" alt=""></p> <blockquote><p>启动前每台服务器最好把 Hostname 改掉，并修改 hosts。这里还有一点需要注意，两台的 flink 配置都需要改掉，否则你会看到 Task 只有那台启动 job 的才有连接上。</p></blockquote> <h4 id="_103、104-操作"><a href="#_103、104-操作" class="header-anchor">#</a> 103、104 操作</h4> <ol><li>修改 jobmanager 工作地点</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">vim</span> flink-conf.yaml
<span class="token comment"># 加入如下</span>
jobmanager.rpc.address: xx.xxx.xx.103
jobmanager.rpc.port: <span class="token number">6123</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>修改 workers 文件，指定 workermanager 工作地点</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">vim</span> workers
<span class="token comment"># 加入如下</span>
xx.xxx.xx.103
xx.xxx.xx.104
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="3"><li>启动 xx.xxx.xx.103 flink 节点</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@node103 bin<span class="token punctuation">]</span><span class="token comment"># ./start-cluster.sh </span>
Starting cluster.
Starting standalonesession daemon on <span class="token function">host</span> node103.
Starting taskexecutor daemon on <span class="token function">host</span> node103.
Starting taskexecutor daemon on <span class="token function">host</span> node104.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="4"><li>访问 http://xx.xxx.xx.103:8081/#/overview</li></ol> <p><img src="/assets/img/flink/1/img_2.png" alt=""></p> <blockquote><p>建议修改一下属性值：<br>
每个 JobManager 的可用内存值（ <code>jobmanager.memory.process.size</code> ）<br>
每个 TaskManager 的可用内存值 （ <code>taskmanager.memory.process.size</code> ，并检查 <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.12/zh/deployment/memory/mem_tuning.html#configure-memory-for-standalone-deployment" target="_blank" rel="noopener noreferrer">内存调优指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）<br>
每台机器的可用 CPU 数（ <code>taskmanager.numberOfTaskSlots</code> ）<br>
集群中所有 CPU 数（ <code>parallelism.default</code> ）和 临时目录（ <code>io.tmp.dirs</code> ）</p></blockquote> <p>命令运行 jar，可以到 flink/bin 目录下，执行</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>./flink run -c com.example.demo.SocketStreamWordCount -p <span class="token number">3</span> /opt/software/flink-1.12.2/examples/xxxxxx.jar --host <span class="token number">10</span>.xxx.xx.103 --port <span class="token number">7777</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>-c 是程序的主入口</li> <li>-p 是并行度</li> <li>--host --port 是 args 参数</li></ul> <p>查看当前运行的所有 jobs，-a 可以查看被取消运行的 job</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>./flink list <span class="token punctuation">[</span>-a<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>取消 JobID 的运行</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>./flink cancel JobID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="jobmanager-高可用"><a href="#jobmanager-高可用" class="header-anchor">#</a> jobManager 高可用</h2> <p><img src="/assets/img/flink/1/img_3.png" alt=""></p> <ol><li>在 flink-1.12.2/conf 下的 flink-conf.yaml 中添加 zookeeper 配置</li></ol> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># 1. 配置jobmanager rpc 地址</span>
<span class="token attr-name">jobmanager.rpc.address</span><span class="token punctuation">:</span> <span class="token attr-value">xx.xxx.xx.103</span>
<span class="token comment"># 2. 修改taskmanager内存大小，可改可不改</span>
<span class="token attr-name">taskmanager.memory.process.size</span><span class="token punctuation">:</span> <span class="token attr-value">2048m</span>
<span class="token comment"># 3. 修改一个taskmanager中对于的taskslot个数，可改可不改</span>
<span class="token attr-name">taskmanager.numberOfTaskSlots</span><span class="token punctuation">:</span> <span class="token attr-value">4</span>
<span class="token comment"># 4. 修改并行度，可改可不改</span>
<span class="token attr-name">parallelism.default</span><span class="token punctuation">:</span> <span class="token attr-value">4</span>

<span class="token comment"># 5. 配置状态后端存储方式</span>
<span class="token attr-name">state.backend</span><span class="token punctuation">:</span><span class="token attr-value">filesystem</span>
<span class="token comment"># 6. 配置启用检查点，可以将快照保存到HDFS</span>
<span class="token attr-name">state.backend.fs.checkpointdir</span><span class="token punctuation">:</span> <span class="token attr-value">hdfs://192.168.244.129:9000/flink-checkpoints</span>
<span class="token comment"># 7. 配置保存点，可以将快照保存到HDFS</span>
<span class="token attr-name">state.savepoints.dir</span><span class="token punctuation">:</span> <span class="token attr-value">hdfs://192.168.244.129:9000/flink-savepoints</span>

<span class="token comment"># 8. 使用zookeeper搭建高可用</span>
<span class="token attr-name">high-availability</span><span class="token punctuation">:</span> <span class="token attr-value">zookeeper</span>
<span class="token comment"># 9. 配置ZK集群地址</span>
<span class="token attr-name">high-availability.zookeeper.quorum</span><span class="token punctuation">:</span> <span class="token attr-value">xx.xxx.xx.103:2181</span>
<span class="token comment"># 10. 存储JobManager的元数据到HDFS</span>
<span class="token attr-name">high-availability.storageDir</span><span class="token punctuation">:</span> <span class="token attr-value">hdfs://xx.xxx.xx.103:9000/flink/ha/</span>
<span class="token comment"># 11. 配置zookeeper client默认是 open，如果 zookeeper security 启用了更改成 creator</span>
<span class="token attr-name">high-availability.zookeeper.client.acl</span><span class="token punctuation">:</span> <span class="token attr-value">open</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ol start="2"><li>将配置过的 HA 的 flink-conf.yaml 分发到另外节点</li> <li>分别到另外两个节点中修改 flink-conf.yaml 中的配置</li> <li>在 masters 配置文件中添加多个节点</li> <li>分发 masters 配置文件到另外两个节点</li> <li>配置每个 flink 下的 zoo.cfg 文件</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 新建snapshot存放的目录，在flink-1.12.2目录下建</span>
<span class="token function">mkdir</span> tmp
<span class="token builtin class-name">cd</span> tmp
<span class="token function">mkdir</span> zookeeper
<span class="token comment">#修改conf下zoo.cfg配置</span>
<span class="token function">vim</span> zoo.cfg
<span class="token comment">#snapshot存放的目录</span>
<span class="token assign-left variable">dataDir</span><span class="token operator">=</span>/opt/software/flink-1.12.2/tmp/zookeeper
<span class="token comment">#配置zookeeper 地址</span>
server.1<span class="token operator">=</span>xx.xxx.xx.103:2888:3888
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="7"><li>下载 hadoop 依赖包，每个 flink 节点都需要</li></ol> <div class="language-text line-numbers-mode"><pre class="language-text"><code>下载地址：https://flink.apache.org/downloads.html#additional-components
将包复制到flink-1.13.2/lib目录下
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="8"><li>启动 flink 集群</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>./start-cluster.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="yarn模式"><a href="#yarn模式" class="header-anchor">#</a> Yarn 模式</h2> <p>以 Yarn 模式部署 Flink 任务时，要求 Flink 是有 Hadoop 支持的版本，Hadoop 环境需要保证版本在 2.2 以上，并且集中安装有 HDFS 服务以及配置了相关 flink、hadoop 的环境变量。yarn 部署有两种方式，如下图介绍：</p> <p><img src="/assets/img/flink/1/img_4.png" alt=""></p> <p>实际工作过程中推荐第二种方式进行部署，比较方便管理。</p> <h3 id="方式一"><a href="#方式一" class="header-anchor">#</a> 方式一</h3> <ol><li>检查 hadoop 环境变量是否配置 HADOOP_CLASSPATH</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">HADOOP_CLASSPATH</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>$<span class="token punctuation">{</span>HADOOP_HOME<span class="token punctuation">}</span>/bin/hadoop classpath<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>启动 flink/bin/yarn-session.sh</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>bin/yarn-session.sh -jm 1024m -tm 1024m -d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>jm jonmanager 的内存</li> <li>tm 每个 taskmanager 的内存</li> <li>d 后台运行</li> <li>额外参数 -D &lt;arg&gt; 动态属性</li> <li>额外参数 -j,--jar &lt;arg&gt; 指定 Flink 任务依赖的 jar 包</li> <li>额外参数 -nm,--name  在 yarn 上为一个自定义的应用设置一个名字</li> <li>额外参数 -q,--query 显示 yarn 中可用的资源 (内存，cpu 核数)</li> <li>额外参数 -qu,--queue &lt;arg&gt; 指定 yarn 队列</li> <li>额外参数 -s,--slots &lt;arg&gt; 每个 taskManager 使用的 slots 数量</li></ul> <ol start="3"><li>停止集群</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> application -kill <span class="token punctuation">(</span>yarn的flink <span class="token function">id</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="方式二"><a href="#方式二" class="header-anchor">#</a> 方式二</h3> <p>直接在 flink/bin 下运行命令即可，运行完成后会在 yarn 集群中创建一个临时的 flink 集群，当任务结束后对应的临时集群结束。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>bin/flink run -m yarn-cluster -yjm <span class="token number">1024</span> -ytm <span class="token number">1024</span> ./要运行任务的jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>-m,--jobmanager <a href="host:port">host:port</a> 动态指定 jobmanager (主节点) 地址</li> <li>-c,--class &lt;classname&gt; 动态指定 jar 包入口</li> <li>-p,--parallelism &lt;parallelism&gt; 动态指定程序的并行度，可以覆盖配置文件中的默认值</li></ul> <blockquote><p>bin/flink run ./examples/batch/WordCount.jar 会从本机 /tmp.yarn-properties-root 中的节点中找到 applicationId 来找到对应的那个 Flink 集群，提交到对应的 Flink 集群中</p></blockquote> <blockquote><p>bin/flink run -m hostname:port ./examples/batch/WordCount.jar 通过 - m 来指定 Flink 集群里面主节点的主机名，端口号，就是指定 jobmanager 的 host 和 port，表示你已知一个 Flink 集群了，提交到这个集群中</p></blockquote> <blockquote><p>bin/flink run -m yarn-cluster -yn 2 ./examples/batch/WordCount.jar 表示在 yarn 集群里面去创建一个临时的 Flink 集群，并且把这个任务提交到临时的 Flink 集群中执行。</p></blockquote> <h3 id="flink-yarn-的好处"><a href="#flink-yarn-的好处" class="header-anchor">#</a> flink-yarn 的好处</h3> <ol><li>提高大数据集群中机器的利用率</li> <li>一套集群，可以执行 MR 任务，Spark 任务，Flink 任务等</li></ol></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2/18/2025, 3:17:15 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/hive/56/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Hive Sqoop安装及指令</div></a> <a href="/flink/2/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Flink 配置介绍及Demo</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/hive/56/" class="prev">Hive Sqoop安装及指令</a></span> <span class="next"><a href="/flink/2/">Flink 配置介绍及Demo</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://gitee.com/dashboard" title="gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://github.com/landashu?tab=repositories" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2025
    <span>
<!--      <a href='https://doc.xugaoyi.com/' target='_blank'>Theme by Vdoing</a> | <a href='http://doc.aizuda.com/' rel='external nofollow' target='_blank'>Copyright © 2022-2023 AiZuDa</a>-->
<!--      <br>-->
<!--      <a href="http://beian.miit.gov.cn/" target="_blank">鲁ICP备2021041554号-1</a>-->
    </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.010049a7.js" defer></script><script src="/assets/js/11.5871899e.js" defer></script><script src="/assets/js/138.bf787e53.js" defer></script>
  </body>
</html>
