<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis 命令介绍 | 技术博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="人民万岁">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/1.styles.014bf4fe.css" as="style"><link rel="preload" href="/assets/js/app.7e941bd4.js" as="script"><link rel="preload" href="/assets/js/11.5871899e.js" as="script"><link rel="preload" href="/assets/js/78.aa1f632a.js" as="script">
    <link rel="stylesheet" href="/assets/css/1.styles.014bf4fe.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo1.png" alt="技术博客" class="logo"> <span class="site-name can-hide">技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><!----> <span class="title" style="display:;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/java/base/1/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/language/cj/1/" class="nav-link">仓颉</a></li><li class="dropdown-item"><!----> <a href="/language/mode/1/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/language/python/1/" class="nav-link">人工智能</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/spring/200/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/frame/mybatis/300/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/frame/maven/2300/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/frame/git/1/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kafka/1400/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/rabbitmq/1/" class="nav-link">RabbitMQ</a></li><li class="dropdown-item"><!----> <a href="/rocketmq/1/" class="nav-link">RocketMQ</a></li><li class="dropdown-item"><!----> <a href="/redis/1600/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/zookeeper/1/" class="nav-link">Zookeeper </a></li><li class="dropdown-item"><!----> <a href="/nginx/1/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/mycat/1/" class="nav-link">数据库套件</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/1/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/es/1/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/mongodb/1/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/hadoop/1/" class="nav-link">Hadoop</a></li><li class="dropdown-item"><!----> <a href="/clickhouse/1/" class="nav-link">ClickHouse</a></li><li class="dropdown-item"><!----> <a href="/hbase/1/" class="nav-link">Hbase</a></li><li class="dropdown-item"><!----> <a href="/hive/1/" class="nav-link">Hive</a></li><li class="dropdown-item"><!----> <a href="/flink/1/" class="nav-link">Flink</a></li><li class="dropdown-item"><!----> <a href="/flume/1/" class="nav-link">Flume</a></li><li class="dropdown-item"><!----> <a href="/sqlite/1/" class="nav-link">SQLite</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/2300/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/docker/400/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/jenkins/500/" class="nav-link">Jenkins</a></li><li class="dropdown-item"><!----> <a href="/kubernetes/600/" class="nav-link">Kubernetes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/1/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/front/1/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/ai/1/" class="nav-link">AI</a></li></ul></div></div> <a href="https://github.com/landashu?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><!----> <span class="title" style="display:;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/java/base/1/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/language/cj/1/" class="nav-link">仓颉</a></li><li class="dropdown-item"><!----> <a href="/language/mode/1/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/language/python/1/" class="nav-link">人工智能</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/spring/200/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/frame/mybatis/300/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/frame/maven/2300/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/frame/git/1/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kafka/1400/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/rabbitmq/1/" class="nav-link">RabbitMQ</a></li><li class="dropdown-item"><!----> <a href="/rocketmq/1/" class="nav-link">RocketMQ</a></li><li class="dropdown-item"><!----> <a href="/redis/1600/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/zookeeper/1/" class="nav-link">Zookeeper </a></li><li class="dropdown-item"><!----> <a href="/nginx/1/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/mycat/1/" class="nav-link">数据库套件</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/1/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/es/1/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/mongodb/1/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/hadoop/1/" class="nav-link">Hadoop</a></li><li class="dropdown-item"><!----> <a href="/clickhouse/1/" class="nav-link">ClickHouse</a></li><li class="dropdown-item"><!----> <a href="/hbase/1/" class="nav-link">Hbase</a></li><li class="dropdown-item"><!----> <a href="/hive/1/" class="nav-link">Hive</a></li><li class="dropdown-item"><!----> <a href="/flink/1/" class="nav-link">Flink</a></li><li class="dropdown-item"><!----> <a href="/flume/1/" class="nav-link">Flume</a></li><li class="dropdown-item"><!----> <a href="/sqlite/1/" class="nav-link">SQLite</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/2300/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/docker/400/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/jenkins/500/" class="nav-link">Jenkins</a></li><li class="dropdown-item"><!----> <a href="/kubernetes/600/" class="nav-link">Kubernetes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/1/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/front/1/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/ai/1/" class="nav-link">AI</a></li></ul></div></div> <a href="https://github.com/landashu?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>kafka</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kafka/1400/" class="sidebar-link">kafka-2.7.0 基本概念</a></li><li><a href="/kafka/1401/" class="sidebar-link">Kafka-2.7.0 搭建及参数解析</a></li><li><a href="/kafka/1402/" class="sidebar-link">kafka-2.7.0 spring boot 集成 kafka</a></li><li><a href="/kafka/1403/" class="sidebar-link">kafka-2.7.0 kafka Connect</a></li><li><a href="/kafka/1404/" class="sidebar-link">kafka-2.7.0 Kafka Streams 流处理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>RabbitMQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rabbitmq/1/" class="sidebar-link">rabbitmq 简介</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>RocketMQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rocketmq/1/" class="sidebar-link">RocketMQ 基础概念</a></li><li><a href="/rocketmq/2/" class="sidebar-link">RocketMQ 搭建</a></li><li><a href="/rocketmq/3/" class="sidebar-link">RocketMQ 整合spring boot</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis/1600/" class="sidebar-link">Redis 介绍及安装</a></li><li><a href="/redis/1601/" aria-current="page" class="active sidebar-link">Redis 命令介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/redis/1601/#公用命令" class="sidebar-link">公用命令</a></li><li class="sidebar-sub-header level2"><a href="/redis/1601/#处理时间" class="sidebar-link">处理时间</a></li><li class="sidebar-sub-header level2"><a href="/redis/1601/#自增和自减" class="sidebar-link">自增和自减</a></li><li class="sidebar-sub-header level2"><a href="/redis/1601/#字符串-string" class="sidebar-link">字符串 String</a></li><li class="sidebar-sub-header level2"><a href="/redis/1601/#列表-list" class="sidebar-link">列表 list</a></li><li class="sidebar-sub-header level2"><a href="/redis/1601/#集合-set" class="sidebar-link">集合 set</a></li><li class="sidebar-sub-header level2"><a href="/redis/1601/#散列-hash-哈希类型" class="sidebar-link">散列 hash 哈希类型</a></li><li class="sidebar-sub-header level2"><a href="/redis/1601/#有序集合-zset" class="sidebar-link">有序集合 zset</a></li><li class="sidebar-sub-header level2"><a href="/redis/1601/#订阅-发布" class="sidebar-link">订阅/发布</a></li><li class="sidebar-sub-header level2"><a href="/redis/1601/#redis5-之-streams-数据类型" class="sidebar-link">Redis5 之 Streams 数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/redis/1601/#streams数据结构" class="sidebar-link">streams数据结构</a></li><li class="sidebar-sub-header level3"><a href="/redis/1601/#streams基础" class="sidebar-link">streams基础</a></li><li class="sidebar-sub-header level3"><a href="/redis/1601/#streams命令" class="sidebar-link">streams命令</a></li><li class="sidebar-sub-header level3"><a href="/redis/1601/#streams三种查询模式" class="sidebar-link">streams三种查询模式</a></li></ul></li></ul></li><li><a href="/redis/1602/" class="sidebar-link">Redis 分布式锁介绍</a></li><li><a href="/Redis/1603/" class="sidebar-link">Redis 事务介绍</a></li><li><a href="/Redis/1604/" class="sidebar-link">Redis 的key失效通知介绍</a></li><li><a href="/Redis/1605/" class="sidebar-link">Redis 配置文件解读</a></li><li><a href="/Redis/1606/" class="sidebar-link">Redis 记一次宕机排查</a></li><li><a href="/Redis/1607/" class="sidebar-link">Redis 高可用(一) 主从理论</a></li><li><a href="/Redis/1608/" class="sidebar-link">Redis 高可用(二) 哨兵理论</a></li><li><a href="/Redis/1609/" class="sidebar-link">Redis 高可用(三) 搭建</a></li><li><a href="/Redis/1610/" class="sidebar-link">Redis 集群搭建</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>zookeeper</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zookeeper/1/" class="sidebar-link">Zookeeper 介绍及安装</a></li><li><a href="/zookeeper/2/" class="sidebar-link">Zookeeper 做为锁使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>nginx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nginx/1/" class="sidebar-link">nginx-1.18.0 安装</a></li><li><a href="/nginx/2/" class="sidebar-link">nginx 常见问题总结</a></li><li><a href="/nginx/3/" class="sidebar-link">nginx 高可用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库套件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mycat/1/" class="sidebar-link">MyCat 1.6.7（一）MySQL高可用及分库分表</a></li><li><a href="/mycat/2/" class="sidebar-link">MyCat 1.6.7（二）高可用及权限</a></li><li><a href="/shardingsphere/1/" class="sidebar-link">shardingsphere 4.x（一）Sharding-JDBC使用</a></li><li><a href="/shardingsphere/2/" class="sidebar-link">shardingsphere 4.x（二）Sharding-Proxy使用</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="placeholder"></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Redis 命令介绍<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="公用命令"><a href="#公用命令" class="header-anchor">#</a> 公用命令</h2> <p>可以删除任意数据结构的 key</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>del key 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看所有 key</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>keys *
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>根据给定的选项，对输入列表、集合或者有序集合进行排序，然后返回或者存储排序的结果。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sort source-key [by pattern] [limit offset count] [get pattern [get pattern ...]] [asc|desc] [alpha] [store dest-key] 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看数据库有多少个 key</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>dbsize
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>清除所有库的数据</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>flushall
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>清除当前库的所有数据</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>flushdb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看 reids 内存信息等</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>info
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>监控所有客户发送的命令（redis 编译执行成功的命令）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>monitor
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="处理时间"><a href="#处理时间" class="header-anchor">#</a> 处理时间</h2> <p>移除键的过期时间</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>persist key 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看给定键距离过期还有多少秒</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ttl key 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>给定键在指定的秒数后过期</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>expire key seconds 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将给定键的过期时间设置为给定的 unix 时间戳</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>expireat key timestamp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看给定键距离过期时间还有多少毫秒，这个命令在 reids2.6 以上版本可用。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pttl key 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>让给定键在指定的毫秒数之后过期，这个命令在 redis2.6 以上版本可用。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pexpire key milliseconds 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将一个毫秒级精度的 unix 时间戳设置为给定键的过期时间，这个命令在 redis2.6 以上版本可用。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pexpireat key timestamp-milliseconds 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="自增和自减"><a href="#自增和自减" class="header-anchor">#</a> 自增和自减</h2> <p>将键存储的值 + 1</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>incr key 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将键存储的值 - 1</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>decr key 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将键存储的值加上整数 amount</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>incrby key amount 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将键存储的值减去整数 amount</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>decrby key amount 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将键存储的值加上浮点数 amount，这个命令在 Redis2.6 以上版本可用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>incrbyfloat key amount 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="字符串-string"><a href="#字符串-string" class="header-anchor">#</a> 字符串 String</h2> <p>可以是字符串（简单的字符串、复杂的字符串（例如 JSON、XML））、数字（整数、浮点数），甚至是二进制（图片、音频、视频），但是值最大不能超过 512MB</p> <p>创建一个键值对 set key value</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; set a 1234567890
OK
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>获取 key 存储的值 get key</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; get a
&quot;1234567890&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>将值 value 追加到给定 key 当前存储的值的末尾，追加成功的发返回值为这个字符串的长度 (length) append key value</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; append a a
(integer) 11
127.0.0.1:6379&gt; get a
&quot;1234567890a&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>获取一个由偏移量 start 至 end 范围内的所有字符组成的字串，包括 start 和 end 在内。getrange key start end</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; getrange a 0 3
&quot;1234&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>将从 start 偏移量开始的字串设置为给定值 setrange key offset value</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; setrange a 3 bcde
(integer) 11
127.0.0.1:6379&gt; get a
&quot;123bcde890a&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="列表-list"><a href="#列表-list" class="header-anchor">#</a> 列表 list</h2> <p>用来存储多个有序的字符串，列表中的每个字符串称为元素（element），一个列表最多可以存储 2^32 -1 个元素</p> <p>将一个或多个值推入列表的右端 rpush key value [...]</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; LRANGE b 0 -1
1) &quot;5&quot;
2) &quot;6&quot;
127.0.0.1:6379&gt; RPUSH b 7 8
(integer) 4
127.0.0.1:6379&gt; LRANGE b 0 -1
1) &quot;5&quot;
2) &quot;6&quot;
3) &quot;7&quot;
4) &quot;8&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>获取 list 元素数量 llen</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379[1]&gt; llen 32021420001:90000300009999:10002:1601198414621
(integer) 2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>lpush key value [...] -&gt; 将一个或多个值推入列表的左端</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; LPUSH b 1 2
(integer) 6
127.0.0.1:6379&gt; LRANGE b 0 -1
1) &quot;2&quot;
2) &quot;1&quot;
3) &quot;5&quot;
4) &quot;6&quot;
5) &quot;7&quot;
6) &quot;8&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>rpop key -&gt; 移除并返回列表最右端的元素</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; rpop b
&quot;8&quot;
127.0.0.1:6379&gt; LRANGE b 0 -1
1) &quot;2&quot;
2) &quot;1&quot;
3) &quot;5&quot;
4) &quot;6&quot;
5) &quot;7&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>lpop key -&gt; 移除并返回列表最左端的元素</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; lpop b
&quot;2&quot;
127.0.0.1:6379&gt; LRANGE b 0 -1
1) &quot;1&quot;
2) &quot;5&quot;
3) &quot;6&quot;
4) &quot;7&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>lindex key offset -&gt; 返回列表中偏移量为 offset 的元素 (下标从 0 开始)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; lindex b 3
&quot;7&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>lrange key start end -&gt; 返回列表从 start 偏移量到 end 偏移量范围的所有元素。包含 start 和 end 本身。lrange key 0 -1 为查询所有</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; LRANGE b 0 2
1) &quot;1&quot;
2) &quot;5&quot;
3) &quot;6&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ltrim key start end -&gt; 对列表进行修键，只保留从 start 至 end 偏移量的元素，包含 start 和 end。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; LTRIM b 1 2
OK
127.0.0.1:6379&gt; LRANGE b 0 -1
1) &quot;5&quot;
2) &quot;6&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>blpop key [...] timeout -&gt; 从第一个非空列表中弹出位于最左端的元素，或者在 timeout 秒之内阻塞并等待可弹出的元素出现 (一下测试没有元素所以 nil)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; BLPOP c 10
(nil)
(10.03s)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>brpop key [...] timeout -&gt; 从第一个非空列表中弹出位于最右端的元素，或者在 timeout 秒之内阻塞并等待可弹出的元素出现 (一下测试没有元素所以 nil)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; brpop c 10
(nil)
(10.07s)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>rpoplpush source-key dest-key -&gt; 从 source-key 列表中弹出位于最右端的元素，然后将这个元素推入 dest-key 列表的最左端，并向用户返回这个元素</p> <p>brpoplpush source-key dest-key timeout -&gt; 从 source-key 列表中弹出位于最右端的元素，然后将这个元素推入 dest-key 列表的最左端，并向用户返回这个元素；如果 source-key 为空，那么在 timeout 秒之内阻塞并等待可弹出的元素出现。</p> <h2 id="集合-set"><a href="#集合-set" class="header-anchor">#</a> 集合 set</h2> <p>用来保存多个的字符串元素，但和列表类型不一样的是，集合中不允许有重复元素，并且集合中的元素是无序的，不能通过索引下标获取元素</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>sadd key item<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 将一个或多个元素添加到集合里面，并返回被添加元素当中原本并不存在于集合里面的元素数量。

srem key item<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 从集合里面删除一个或多个元素，并返回被移除元素的数量。

sismember key item -<span class="token operator">&gt;</span> 检查元素item是否存在于集合key里面。

scard key -<span class="token operator">&gt;</span> 返回集合包含的元素数量。

smembers key -<span class="token operator">&gt;</span> 返回集合包含的所有元素。

srandmember key <span class="token punctuation">[</span>count<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 从集合里随机的返回一个或多个元素，当count 为正整数时，命令返回的随机元素不会重复；当count为负数时，命令返回的随机元素可能会出现重复。

spop key -<span class="token operator">&gt;</span> 随机的移除集合中的一个元素，并返回被移除的元素。

smove source-key dest-key item -<span class="token operator">&gt;</span> 如果集合source-key包含元素item，那么从集合source-key 里面移除y元素item，并将元素item添加到集合dest-key中；如果item成功移除，那么命令返回1，否则返回0；

<span class="token function">sdiff</span> key<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 返回那些存在于第一个集合、但不存在于其他集合中的元素<span class="token punctuation">(</span>数学上的差集运算<span class="token punctuation">)</span>

sdiffstore dest-key key<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 将那些存在于第一个集合但不存在于其他集合的元素<span class="token punctuation">(</span>数学上的差集运算<span class="token punctuation">)</span>存储到dest-key 键里面

sinter key<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 返回那些同时存在于所有集合中的元素<span class="token punctuation">(</span>数学上的交集运算<span class="token punctuation">)</span>

sinter dest-key key<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 那些同时存在于所有集合中的元素<span class="token punctuation">(</span>数学上的交集运算<span class="token punctuation">)</span>存储到dest-key键里面。

sunion key<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 返回那些至少存在于一个集合中的元素<span class="token punctuation">(</span>数学上讲的并集运算<span class="token punctuation">)</span>

sunionstore dest-key key<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 那些至少存在于一个集合中的元素<span class="token punctuation">(</span>数学上讲的并集运算<span class="token punctuation">)</span>存储到dest-key键里面。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="散列-hash-哈希类型"><a href="#散列-hash-哈希类型" class="header-anchor">#</a> 散列 hash 哈希类型</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>
hset key-name key value -<span class="token operator">&gt;</span> 创建一个散列并赋值

hget key-name key -<span class="token operator">&gt;</span> 返回指定散列键的值

hgetall key-name -<span class="token operator">&gt;</span> 获取散列包含的所有键值对

hmset key-name key value<span class="token punctuation">[</span>key value <span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 为散列里面的一个或多个键设置值

hmget key-name key<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 从散列里面获取一个或多个键的值

hlen key-name -<span class="token operator">&gt;</span> 返回散列包含的键值对数量

hdel key-name key<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 删除散列里面的一个或多个键值对，返回成功找到并删除的键值对数量。

hexists key-name key -<span class="token operator">&gt;</span> 检查给定的键是否存在于散列中

hkeys key-name -<span class="token operator">&gt;</span> 获取散列包含的所有键

hvals key-name -<span class="token operator">&gt;</span> 获取散列包含的所有值

hincrby key-name key increment -<span class="token operator">&gt;</span> 将键key存储的值加上整数increment

hincrbyfloat key-name key increment -<span class="token operator">&gt;</span> 将键key存储的值加上浮点数increment
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="有序集合-zset"><a href="#有序集合-zset" class="header-anchor">#</a> 有序集合 zset</h2> <p>不能有重复的元素，而且还可以排序，它和列表使用索引下标作为排序依据不同的是，它给每个元素设置一个分数 (score) 作为排序的依据（默认升序）</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>
zadd key score member <span class="token punctuation">[</span>score member <span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 将带有给定分值的成员添加到有序集合里面

zrem key member<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 从有序集合里面移除给定的成员，并返回被移除成员的数量

zcard key -<span class="token operator">&gt;</span> 返回有序集合包含的成员数量

zincrby key increment member -<span class="token operator">&gt;</span> 将member成员的分值加上increment

zcount key min max -<span class="token operator">&gt;</span> 返回分值介于min 和max 之间的成员数量

zrank key member -<span class="token operator">&gt;</span> 返回成员member在有序集合中的排名

zscore key member -<span class="token operator">&gt;</span> 返回成员member的分值

zrange key start stop <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 返回有序集合中排名介于start 和 stop 之间的成员，如果给定了可选的 withscores 选项，那么会将成员的分值一并返回。zrange key <span class="token number">0</span> -1 查询所有成员

zrevrank key member -<span class="token operator">&gt;</span> 返回有序集合里成员member的排名，成员按照分值从大到小排列

zrevrange key start stop <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 返回有序集合给定排名范围内的成员，按照分值从大到小排列

zrangebyscore key min max <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span> <span class="token punctuation">[</span>left offset count<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 返回有序集合中，分值介于min和max之间的所有成员

zrevrangebyscore key max min <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span> <span class="token punctuation">[</span>left offset count<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 获取有序集合中分值介于min和max之间的所有成员，并按照分值从大到小的顺序来返回他们。

zremrangebyrank key start <span class="token function">top</span> -<span class="token operator">&gt;</span> 移除有序集合中排名介于start 和 stop 之间的成员。

zremrangebyscore key min max -<span class="token operator">&gt;</span> 移除有序集合中分值介于min和max 之间的成员。

zinterstore dest-key key-count key<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>weights weight<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span>aggregate <span class="token function">sum</span><span class="token operator">|</span>min<span class="token operator">|</span>max<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 对给定的有序集合执行类似于集合的交集运算

zunionstore dest-key key-count key<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>weights weight<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span>aggregate <span class="token function">sum</span><span class="token operator">|</span>min<span class="token operator">|</span>max<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 对指定的有序集合执行类似于集合的并集运算
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="订阅-发布"><a href="#订阅-发布" class="header-anchor">#</a> 订阅 / 发布</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>
subscribe channel<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 订阅给定的一个或多个频道

unsubscribe channel<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 退订给定的一个或多个频道，如果执行时没有给定任何频道，那么退订所有频道

publish channel message -<span class="token operator">&gt;</span> 向给定的频道发送消息

psubscribe pattern<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 订阅与给定模式相匹配的所有频道

punsubscribe pattern<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> -<span class="token operator">&gt;</span> 退订给定的模式，如果执行时没有给定任何模式，那么退订所有模式。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="redis5-之-streams-数据类型"><a href="#redis5-之-streams-数据类型" class="header-anchor">#</a> Redis5 之 Streams 数据类型</h2> <p>Redis 5.0 全新的数据类型：streams，官方把它定义为：以更抽象的方式建模日志的数据结构。Redis 的 streams 主要是一个 append only 的数据结构，至少在概念上它是一种在内存中表示的抽象数据类型，只不过它们实现了更强大的操作，以克服日志文件本身的限制。</p> <p>如果你了解 MQ，那么可以把 streams 当做 MQ。如果你还了解 kafka，那么甚至可以把 streams 当做 kafka。</p> <p>另外，这个功能有点类似于 redis 以前的 Pub/Sub，但是也有基本的不同：</p> <ul><li><p>streams 支持多个客户端（消费者）等待数据（Linux 环境开多个窗口执行 XREAD 即可模拟），并且每个客户端得到的是完全相同的数据。</p></li> <li><p>Pub/Sub 是发送忘记的方式，并且不存储任何数据；而 streams 模式下，所有消息被无限期追加在 streams 中，除非用于显示执行删除（XDEL）。</p></li> <li><p>streams 的 Consumer Groups 也是 Pub/Sub 无法实现的控制方式。</p></li></ul> <h3 id="streams数据结构"><a href="#streams数据结构" class="header-anchor">#</a> streams 数据结构</h3> <p>streams 数据结构本身非常简单，但是 streams 依然是 Redis 到目前为止最复杂的类型，其原因是实现的一些额外的功能：一系列的阻塞操作允许消费者等待生产者加入到 streams 的新数据。另外还有一个称为 Consumer Groups (消费组) 的概念，这个概念最先由 kafka 提出，Redis 有一个类似实现，和 kafka 的 Consumer Groups 的目的是一样的：允许一组客户端协调消费相同的信息流！</p> <h3 id="streams基础"><a href="#streams基础" class="header-anchor">#</a> streams 基础</h3> <p>为了理解 streams 的目的，以及如何使用它，我们先忽略掉所有高级特性，只把注意力放在数据结构本身，以及那些操作和访问 streams 的命令。这基本上也是大多数其他 Redis 数据类型共有的部分，例如 Lists，Sets，Sorted Sets 等。然而需要注意的是，Lists 也有一个更复杂的阻塞式的 API，例如 BLPOP，BRPOP 等。streams 这方便的 API 也没什么不同，只是更复杂，更强大（更牛逼，哈）！</p> <h3 id="streams命令"><a href="#streams命令" class="header-anchor">#</a> streams 命令</h3> <p>废话不多说，先上手玩玩这个全新的数据类型。streams 这个数据类型对应有如下 13 个操作命令，所有命令都以 &quot;X&quot; 开头：<br>
XADD</p> <ul><li><p>用法：XADD key ID field string [field string …]</p></li> <li><p>正如其名，这个命令就是用来添加的，给 streams 追加（append，前面提到过：streams 主要是一个 append only 的数据结构）一个新的 entry（和 Java 里的 Map 类似，Redis 里的 streams 中的数据也称为 entry）。</p></li> <li><p>key：的含义就是同一类型 streams 的名称；</p></li> <li><p>ID: streams 中 entry 的唯一标识符，如果执行 XADD 命令时，传入星号（*），那么，ID 会自动生成，且自动生成的 ID 会在执行 XADD 后返回，默认生成的 ID 格式为 millisecondsTime+sequenceNumber，即当前毫秒级别的时间戳加上一个自增序号值，例如 &quot;1540013735401-0&quot;。并且执行 XADD 时，不接受少于或等于上一次执行 XADD 的 ID，否则会报错：ERR The ID specified in XADD is equal or smaller than the target stream top item；</p></li> <li><p>field&amp;string：接下来就是若干组 field string。可以把它理解为表示属性的 json 中的 key-value。例如，某一 streams 的 key 命名为 userInfo，且某个用户信息为 {&quot;username&quot;:&quot;afei&quot;, &quot;password&quot;:&quot;123456&quot;}，那么执行 XADD 命令如下：</p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; xadd userInfo * name afei password 123456
&quot;1594456377383-0&quot;
127.0.0.1:6379&gt; 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>由于命令中 ID 字段的值是 * ，所以自定生成 ID，1594456377383-0 就是自动生成的 ID。 XADD 命令也支持显示指定 ID，例如：XADD key 0-2 field string。</p> <p>需要注意的是，ID 的时间戳部分是部署 Redis 服务器的本地时间，如果发生时钟回拨会怎么样？如果发生时钟回拨，生成的 ID 的时间戳部分就是回拨后的时间，然后加上这个时间的递增序列号。例如当前时间戳 1540014082060，然后这时候发生了时钟回拨，且回拨 5ms，那么时间戳就是 1540014082055。假设以前已经生成了 1540014082055-0，1540014082055-1，那么这次由于时钟回拨，生成的 ID 就是 1540014082055-2。所以允许自动生成的 ID 在发生时钟回拨时少于上次的 ID，但是不允许显示指定一个少于上次的 ID。</p> <p>如果我们以相同的 key 插入一遍，他不会像普通的 key-value 一样做替换，而是在相同 key 维护这一个列表。</p> <p>xdel</p> <ul><li>用法：XDEL key ID [ID …]<br>
 和 XADD 相反，这是命令用来从 streams 中删除若干个 entry，并且会返回实际删除数，这个删除数可能和参数 ID 个数不等，因为某些 ID 表示的消息可能不存在。执行命令如下，第二个参数 ID 是不存在的，所以 XDEL 的返回结果是 1：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; xdel userInfo 1594456377383-0
(integer) 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>xlen</p> <ul><li>用法：XLEN key<br>
 很好理解，这个命令就是用来返回相同 key 的数量，上面又说相同 key 是不会覆盖的，是维护了一个列表，所以这个是相同 key 列表的 size。执行如下：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; xadd user * name zhangsan
&quot;1594457206541-0&quot;
127.0.0.1:6379&gt; xlen user
(integer) 1
127.0.0.1:6379&gt; xadd user * name zhangsan sex 0 
&quot;1594457274424-0&quot;
127.0.0.1:6379&gt; xlen user
(integer) 2
127.0.0.1:6379&gt; xadd user * name zhangsan sex 0 password 123
&quot;1594457287981-0&quot;
127.0.0.1:6379&gt; xlen user
(integer) 3
127.0.0.1:6379&gt; xdel user 1594457287981-0
(integer) 1
127.0.0.1:6379&gt; xlen user
(integer) 2
127.0.0.1:6379&gt; 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="streams三种查询模式"><a href="#streams三种查询模式" class="header-anchor">#</a> streams 三种查询模式</h3> <p>redis 提供了三种查询 streams 数据的模式：</p> <ul><li><p>范围查询：因为 streams 的每个 entry，其默认生成的 ID 是基于时间且递增的；</p></li> <li><p>监听模式：类比 linux 中的 tailf 命令，实时接收新增加到 streams 中的 entry（也有点像一个消息系统，事实上笔者认为它就是借鉴了 kafka）；</p></li> <li><p>消费者组：即 Consumer Groups，特殊的监听模式。从一个消费者的角度来看 streams，一个 streams 能被分区到多个处理消息的消费者，对于任意一条消息，同一个消费者组中只有一个消费者可以处理（和 kafka 的消费者组完全一样）。这样还能够横向扩容消费者，从而提升处理消息的能力，而不需要只让把让一个消费者处理所有消息。</p></li></ul> <p>xrange</p> <ul><li>用法：XRANGE key start end [COUNT count]<br>
 这个命令属于第 1 种模式，即基于范围查询。这个命令用来返回 streams 某个顺序范围下的元素，start 参数是更小的 ID，end 参数是更大的 ID。有两个特殊的 ID 用符号 &quot;-&quot; 和 &quot;+&quot; 表示，符号 &quot;-&quot; 表示最小的 ID，符号 &quot;+&quot; 表示最大的 ID：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; XRANGE user 1540014096298-0 1594457274424-0
1) 1) &quot;1594457206541-0&quot;
   2) 1) &quot;name&quot;
      2) &quot;zhangsan&quot;
2) 1) &quot;1594457274424-0&quot;
   2) 1) &quot;name&quot;
      2) &quot;zhangsan&quot;
      3) &quot;sex&quot;
      4) &quot;0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; xrange user - +
1) 1) &quot;1594457206541-0&quot;
   2) 1) &quot;name&quot;
      2) &quot;zhangsan&quot;
2) 1) &quot;1594457274424-0&quot;
   2) 1) &quot;name&quot;
      2) &quot;zhangsan&quot;
      3) &quot;sex&quot;
      4) &quot;0&quot;
3) 1) &quot;1594458356220-0&quot;
   2) 1) &quot;name&quot;
      2) &quot;wu&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>XRANGE 还能实现遍历某个范围区间的功能，例如我想遍历 2018-10-20 号新增的用户信息。首先得到 2018-10-20 00:00:00 对应的时间戳为 1539964800000，再得到 2018-10-20 23:59:59 对应的时间戳为 1540051199000，然后执行如下命令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; xrange user 1594457206541-0 1594458356220-0 count 1
1) 1) &quot;1594457206541-0&quot;
   2) 1) &quot;name&quot;
      2) &quot;zhangsan&quot;
127.0.0.1:6379&gt; xrange user 1594457206541-0 1594458356220-0 count 2
1) 1) &quot;1594457206541-0&quot;
   2) 1) &quot;name&quot;
      2) &quot;zhangsan&quot;
2) 1) &quot;1594457274424-0&quot;
   2) 1) &quot;name&quot;
      2) &quot;zhangsan&quot;
      3) &quot;sex&quot;
      4) &quot;0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>xrevrange</p> <ul><li>用法：XREVRANGE key end start [COUNT count]<br>
 这个命令也属于第 1 种模式，且和 XRANGE 相反，返回一个逆序范围。end 参数是更大的 ID，start 参数是更小的 ID</li></ul> <p>xread</p> <ul><li>用法：XREAD [COUNT count] [BLOCK milliseconds] STREAMS key [key …] ID [ID …]<br>
 很明显，这个命令就是用来实现第 2 个模式，即监听模式。其作用是返回 streams 中从来没有读取的，且比参数 ID 更大的元素。<br>
这里我开了两个窗口测试，且第一个没有做新增，第二个做了新增.</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; XREAD COUNT 10 BLOCK 60000 STREAMS user 1594458356220-0



(nil)
(60.02s)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; XREAD COUNT 10 BLOCK 60000 STREAMS user 1594458356220-0
1) 1) &quot;user&quot;
   2) 1) 1) &quot;1594458985980-0&quot;
         2) 1) &quot;name&quot;
            2) &quot;ceshi&quot;
(13.37s)
127.0.0.1:6379&gt; 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>使用 xread 会阻塞特定时间，等待比我 ID 大的数据，如果使用最小 ID 进行测试，会跟 xrange user - + 效果是一样的。</p> <p>注意：BLOCK 为 0 表示一致等待知道有新的数据，否则永远不会超时。并且 ID 的值我们用特殊字符 <code>$</code>  表示，这个特殊字符表示我们只获取最新添加的消息。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; xread count 10 block 0 streams user $


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>xread 还支持同时监听多个 streams</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; XREAD BLOCK 0 STREAMS user_01 user_02 user_03 user_04  $ $ $ $



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>XREAD 除了 COUNT 和 BLOCK，没有其他选项了。所有 XREAD 是一个非常基本的命令。更多高级特性可以往下看接下来要介绍的 XREADGROUP。</p> <p>XREADGROUP</p> <ul><li>用法：XREADGROUP GROUP group consumer [COUNT count] [BLOCK milliseconds] STREAMS key [key …] ID [ID …]<br>
 很明显，这就是第三种模式：消费者组模式。</li> <li>如果你了解 kafka 的消费者组，那么你就也了解了 streams 的消费者组。如果不了解也没关系，笔者简单解释一下，假设有三个消费者 C1，C2，C3。在 streams 中总计有 7 条消息：1， 2， 3， 4， 5， 6， 7，那么消费关系如下所示：<br>
1 -&gt; C1<br>
2 -&gt; C2<br>
3 -&gt; C3<br>
4 -&gt; C1<br>
5 -&gt; C2<br>
6 -&gt; C3<br>
7 -&gt; C1</li> <li>消费者组具备如下几个特点：
<ul><li><p>同一个消息不会被投递到一个消费者组下的多个消费者，只可能是一个消费者。</p></li> <li><p>同一个消费者组下，每个消费者都是唯一的，通过大小写敏感的名字区分。</p></li> <li><p>消费者组中的消费者请求的消息，一定是新的，从来没有投递过的消息。</p></li> <li><p>消费一个消息后，需要用命令（XACK）确认，意思是说：这条消息已经给成功处理。正因为如此，当访问 streams 的历史消息时，每个消费者只能看到投递给它自己的消息。</p></li></ul></li></ul> <p>XACK</p> <ul><li>用法：XACK key group ID [ID …]</li> <li>这是消费者组相关的另一个重要的命令。标记一个处理中的消息为已被正确处理，如此一来，这条消息就会被从消费者组的 pending 消息集合中删除，类似 MQ 中的 ack。</li></ul> <p>XGROUP</p> <ul><li>用法：xgroup create key groupname id</li> <li>这也是消费者组的一个重要命令，这个命令用来管理消费者组，例如创建，删除等。<br>
XREADGROUP，XACK，XGROUP 三种命令构成了消费者组相关的操作命令。<br>
目前 XGROUP CREATE 的 streams 必须是一个存在的 streams，否则会报错。<br>
创建一个消费组</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; XGROUP CREATE user GRP-AFEI $
OK
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/28/2025, 10:05:36 AM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/redis/1600/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Redis 介绍及安装</div></a> <a href="/redis/1602/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Redis 分布式锁介绍</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/redis/1600/" class="prev">Redis 介绍及安装</a></span> <span class="next"><a href="/redis/1602/">Redis 分布式锁介绍</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://gitee.com/dashboard" title="gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://github.com/landashu?tab=repositories" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2025
    <span>
<!--      <a href='https://doc.xugaoyi.com/' target='_blank'>Theme by Vdoing</a> | <a href='http://doc.aizuda.com/' rel='external nofollow' target='_blank'>Copyright © 2022-2023 AiZuDa</a>-->
<!--      <br>-->
<!--      <a href="http://beian.miit.gov.cn/" target="_blank">鲁ICP备2021041554号-1</a>-->
    </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7e941bd4.js" defer></script><script src="/assets/js/11.5871899e.js" defer></script><script src="/assets/js/78.aa1f632a.js" defer></script>
  </body>
</html>
