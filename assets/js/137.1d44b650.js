(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{614:function(t,s,a){"use strict";a.r(s);var e=a(41),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("本文及后续所有文章都以 3.1.2 做为版本讲解和入门学习")])]),t._v(" "),a("h2",{attrs:{id:"常用的基本数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用的基本数据类型"}},[t._v("#")]),t._v(" 常用的基本数据类型")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("基本数据类型")]),t._v(" "),a("th",[t._v("所占字节")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("int")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("boolean")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("float")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("double")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("string")]),t._v(" "),a("td")])])]),t._v(" "),a("h2",{attrs:{id:"复杂数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#复杂数据类型"}},[t._v("#")]),t._v(" 复杂数据类型")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("基本数据类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("array")]),t._v(" "),a("td",[t._v("array 类型是由一系列相同数据类型的元素组成。并且可以通过下标来进行访问。下标从 0 开始计")])]),t._v(" "),a("tr",[a("td",[t._v("map")]),t._v(" "),a("td",[t._v("map 包含 key-value 键值对，可以通过 key 来访问元素")])]),t._v(" "),a("tr",[a("td",[t._v("struct")]),t._v(" "),a("td",[t._v("struct 可以包含不同的数据类型元素。相当于一个对象结构。可以通过 对象。属性 来访问")])])])]),t._v(" "),a("h2",{attrs:{id:"array类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#array类型"}},[t._v("#")]),t._v(" array 类型")]),t._v(" "),a("p",[t._v("现有外部数据路径为 /a1/a1.txt 结构如下：")]),t._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("100,300,200 aa,v,cc\n442,245,214 dd,ee,dd\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("把外部数据创建到 hive 里，terminated by ' ' 为列分隔符，terminated by ',' 集合元素分隔符")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("create external table table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 array"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("int"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(",t2 array"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" row "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v(" delimited fields terminated by "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("' '")]),t._v(" collection items terminated by "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),t._v(" location "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/a1'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("查看 t1 列的元素个数")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" from table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("通过下标获取 t1 列的集合元素的第一个数据")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" from table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"map类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#map类型"}},[t._v("#")]),t._v(" map 类型")]),t._v(" "),a("p",[t._v("现有外部数据路径为 /a2/a2.txt 结构如下：")]),t._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("test1,100\ntest2,200\ntest3,300\ntest1,200\ntest2,200\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("把外部数据创建到 hive 里，terminated by '\\t' 为列分隔符（必须），terminated by ','  key-value 分隔符")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("create external table table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 map"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string,int"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" row "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v(" delimited fields terminated by "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\t'")]),t._v(" map keys terminated by "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),t._v(" location "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/a2'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("查询 t1 列 为 test2 的 key 的值，并去重，distinct 函数会触发 mapreduce。")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" distinct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" from table_name where  t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test1'")]),t._v(" is not null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"struct类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#struct类型"}},[t._v("#")]),t._v(" struct 类型")]),t._v(" "),a("p",[t._v("现有外部数据路径为 /a3/a3.txt 结构如下：")]),t._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1 zs 22\n1 ls 23\n1 ww 18\n1 zl 25\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("把外部数据创建到 hive 里，terminated by '\\t' 为列分隔符（必须），terminated by ',' key-value 分隔符")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("create external table table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 struct"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("id:int,name:string,age:int"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" row "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v(" delimited collection items terminated by "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("' '")]),t._v(" location "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/a2'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("查看 ls 的年龄")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" t1.age from table_name y1.name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ls'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);