(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[]]);!function(n){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(n[r]=c[r]);for(u&&u(e);d.length;)d.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var n,e=0;e<o.length;e++){for(var t=o[e],r=!0,s=1;s<t.length;s++){var c=t[s];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),n=i(i.s=t[0]))}return n}var r={},a={2:0},o=[];function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(n){var e=[],t=a[n];if(0!==t)if(t)e.push(t[2]);else{var r=new Promise((function(e,r){t=a[n]=[e,r]}));e.push(t[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(n){return i.p+"assets/js/"+({3:"vendors~aplayer",4:"vendors~artplayer",5:"vendors~dash",6:"vendors~dplayer",7:"vendors~hls",8:"vendors~mpegts",9:"vendors~shaka-player",10:"vendors~webtorrent"}[n]||n)+"."+{0:"e0c47f53",3:"e8507ad6",4:"66bb087d",5:"0bbb404d",6:"78936917",7:"1bdfaf9f",8:"97ee1f4b",9:"301276db",10:"5c2abfbd",11:"5871899e",12:"e08d9769",13:"fb76bc65",14:"53b53f71",15:"738c619e",16:"b7269f07",17:"358fbd0d",18:"56612b72",19:"90fea329",20:"02702658",21:"072b1546",22:"244801d1",23:"ac26616b",24:"107cc536",25:"e581e078",26:"79644b08",27:"257350d2",28:"158ce3cc",29:"e48e3167",30:"d92a193a",31:"28966785",32:"822c907a",33:"9c50b5ad",34:"22fbdb31",35:"e55a335e",36:"3e06ce4e",37:"8fe50a6c",38:"964add04",39:"bc898e3d"}[n]+".js"}(n);var c=new Error;o=function(e){s.onerror=s.onload=null,clearTimeout(l);var t=a[n];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+n+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,t[1](c)}a[n]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(e)},i.m=n,i.c=r,i.d=function(n,e,t){i.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,e){if(1&e&&(n=i(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)i.d(t,r,function(e){return n[e]}.bind(null,r));return t},i.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(e,"a",e),e},i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},i.p="/",i.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([240,1]),t()}([function(n,e){var t=function(n){return n&&n.Math==Math&&n};n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(n,e,t){var r=t(68),a=Function.prototype,o=a.bind,i=a.call,s=r&&o.bind(i,i);n.exports=r?function(n){return n&&s(n)}:function(n){return n&&function(){return i.apply(n,arguments)}}},function(n,e,t){var r=t(0),a=t(39).f,o=t(32),i=t(15),s=t(118),c=t(125),l=t(93);n.exports=function(n,e){var t,u,p,d,f,m=n.target,h=n.global,v=n.stat;if(t=h?r:v?r[m]||s(m,{}):(r[m]||{}).prototype)for(u in e){if(d=e[u],p=n.noTargetGet?(f=a(t,u))&&f.value:t[u],!l(h?u:m+(v?".":"#")+u,n.forced)&&void 0!==p){if(typeof d==typeof p)continue;c(d,p)}(n.sham||p&&p.sham)&&o(d,"sham",!0),i(t,u,d,n)}}},function(n,e){n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(5);function r(n,e,t,r,a,o,i){try{var s=n[o](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,a)}function a(n){return function(){var e=this,t=arguments;return new Promise((function(a,o){var i=n.apply(e,t);function s(n){r(i,a,o,s,c,"next",n)}function c(n){r(i,a,o,s,c,"throw",n)}s(void 0)}))}}},function(n,e,t){var r=t(128),a=t(15),o=t(256);r||a(Object.prototype,"toString",o,{unsafe:!0})},function(n,e,t){var r=t(0),a=t(84),o=t(12),i=t(85),s=t(119),c=t(159),l=a("wks"),u=r.Symbol,p=u&&u.for,d=c?u:u&&u.withoutSetter||i;n.exports=function(n){if(!o(l,n)||!s&&"string"!=typeof l[n]){var e="Symbol."+n;s&&o(u,n)?l[n]=u[n]:l[n]=c&&p?p(e):d(e)}return l[n]}},function(n,e){n.exports=function(n){return"function"==typeof n}},function(n,e,t){var r=t(3);n.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e,t){var r=t(0),a=t(10),o=r.String,i=r.TypeError;n.exports=function(n){if(a(n))return n;throw i(o(n)+" is not an object")}},function(n,e,t){var r=t(7);n.exports=function(n){return"object"==typeof n?null!==n:r(n)}},function(n,e,t){var r=t(0),a=t(82),o=r.String;n.exports=function(n){if("Symbol"===a(n))throw TypeError("Cannot convert a Symbol value to a string");return o(n)}},function(n,e,t){var r=t(1),a=t(21),o=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return o(a(n),e)}},function(n,e,t){var r=t(0),a=t(8),o=t(161),i=t(160),s=t(9),c=t(87),l=r.TypeError,u=Object.defineProperty,p=Object.getOwnPropertyDescriptor;e.f=a?i?function(n,e,t){if(s(n),e=c(e),s(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var r=p(n,e);r&&r.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return u(n,e,t)}:u:function(n,e,t){if(s(n),e=c(e),s(t),o)try{return u(n,e,t)}catch(n){}if("get"in t||"set"in t)throw l("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){var r=t(68),a=Function.prototype.call;n.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},function(n,e,t){var r=t(0),a=t(7),o=t(12),i=t(32),s=t(118),c=t(92),l=t(35),u=t(81).CONFIGURABLE,p=l.get,d=l.enforce,f=String(String).split("String");(n.exports=function(n,e,t,c){var l,p=!!c&&!!c.unsafe,m=!!c&&!!c.enumerable,h=!!c&&!!c.noTargetGet,v=c&&void 0!==c.name?c.name:e;a(t)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(t,"name")||u&&t.name!==v)&&i(t,"name",v),(l=d(t)).source||(l.source=f.join("string"==typeof v?v:""))),n!==r?(p?!h&&n[e]&&(m=!0):delete n[e],m?n[e]=t:i(n,e,t)):m?n[e]=t:s(e,t)})(Function.prototype,"toString",(function(){return a(this)&&p(this).source||c(this)}))},function(n,e,t){"use strict";var r=t(179).charAt,a=t(11),o=t(35),i=t(165),s=o.set,c=o.getterFor("String Iterator");i(String,"String",(function(n){s(this,{type:"String Iterator",string:a(n),index:0})}),(function(){var n,e=c(this),t=e.string,a=e.index;return a>=t.length?{value:void 0,done:!0}:(n=r(t,a),e.index+=n.length,{value:n,done:!1})}))},function(n,e,t){"use strict";t.d(e,"a",(function(){return r}));t(105);function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}},function(n,e,t){var r=t(0),a=t(180),o=t(181),i=t(152),s=t(32),c=t(6),l=c("iterator"),u=c("toStringTag"),p=i.values,d=function(n,e){if(n){if(n[l]!==p)try{s(n,l,p)}catch(e){n[l]=p}if(n[u]||s(n,u,e),a[e])for(var t in i)if(n[t]!==i[t])try{s(n,t,i[t])}catch(e){n[t]=i[t]}}};for(var f in a)d(r[f]&&r[f].prototype,f);d(o,"DOMTokenList")},function(n,e,t){var r=t(0).TypeError;n.exports=function(n){if(null==n)throw r("Can't call method on "+n);return n}},function(n,e,t){var r=function(n){"use strict";var e=Object.prototype,t=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{s({},"")}catch(n){s=function(n,e,t){return n[e]=t}}function c(n,e,t,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),i=new j(r||[]);return o._invoke=function(n,e,t){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return O()}for(t.method=a,t.arg=o;;){var i=t.delegate;if(i){var s=x(i,t);if(s){if(s===u)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=l(n,e,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}(n,t,i),o}function l(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=c;var u={};function p(){}function d(){}function f(){}var m={};s(m,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(S([])));v&&v!==e&&t.call(v,a)&&(m=v);var g=f.prototype=p.prototype=Object.create(m);function b(n){["next","throw","return"].forEach((function(e){s(n,e,(function(n){return this._invoke(e,n)}))}))}function y(n,e){var r;this._invoke=function(a,o){function i(){return new e((function(r,i){!function r(a,o,i,s){var c=l(n[a],n,o);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==typeof p&&t.call(p,"__await")?e.resolve(p.__await).then((function(n){r("next",n,i,s)}),(function(n){r("throw",n,i,s)})):e.resolve(p).then((function(n){u.value=n,i(u)}),(function(n){return r("throw",n,i,s)}))}s(c.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function x(n,e){var t=n.iterator[e.method];if(void 0===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=void 0,x(n,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(t,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var a=r.arg;return a?a.done?(e[n.resultName]=a.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function k(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function j(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function S(n){if(n){var e=n[a];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=f,s(g,"constructor",f),s(f,"constructor",d),d.displayName=s(f,i,"GeneratorFunction"),n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,s(n,i,"GeneratorFunction")),n.prototype=Object.create(g),n},n.awrap=function(n){return{__await:n}},b(y.prototype),s(y.prototype,o,(function(){return this})),n.AsyncIterator=y,n.async=function(e,t,r,a,o){void 0===o&&(o=Promise);var i=new y(c(e,t,r,a),o);return n.isGeneratorFunction(t)?i:i.next().then((function(n){return n.done?n.value:i.next()}))},b(g),s(g,i,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=S,j.prototype={constructor:j,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t,r){return i.type="throw",i.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=t.call(o,"catchLoc"),c=t.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(n,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&t.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===n||"continue"===n)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=n,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),u},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),k(t),u}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var a=r.arg;k(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:S(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),u}},n}(n.exports);try{regeneratorRuntime=r}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(n,e,t){var r=t(0),a=t(19),o=r.Object;n.exports=function(n){return o(a(n))}},function(n,e,t){var r=t(0),a=t(7),o=function(n){return a(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?o(r[n]):r[n]&&r[n][e]}},function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));t(46),t(74),t(34),t(5),t(383),t(26),t(27),t(182),t(384),t(105);var r=t(17);function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){Object(r.a)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}},function(n,e,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var a in e=arguments[t])Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}).apply(this,arguments)},a=this&&this.__read||function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var r,a,o=t.call(n),i=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(n){a={error:n}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(n,e,t){if(t||2===arguments.length)for(var r,a=0,o=e.length;a<o;a++)!r&&a in e||(r||(r=Array.prototype.slice.call(e,0,a)),r[a]=e[a]);return n.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){if("object"==typeof n&&null!==n){if("function"==typeof Object.getPrototypeOf){var e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(n)}return!1},s=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.reduce((function(n,e){return Object.keys(e).forEach((function(t){Array.isArray(n[t])&&Array.isArray(e[t])?n[t]=s.options.mergeArrays?Array.from(new Set(n[t].concat(e[t]))):e[t]:i(n[t])&&i(e[t])?n[t]=s(n[t],e[t]):n[t]=e[t]})),n}),{})},c={mergeArrays:!0};s.options=c,s.withOptions=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];s.options=r({mergeArrays:!0},n);var i=s.apply(void 0,o([],a(e),!1));return s.options=c,i},e.default=s},function(n,e,t){var r=t(67),a=t(19);n.exports=function(n){return r(a(n))}},function(n,e,t){"use strict";var r=t(2),a=t(184);r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},function(n,e,t){var r=t(0),a=t(180),o=t(181),i=t(184),s=t(32),c=function(n){if(n&&n.forEach!==i)try{s(n,"forEach",i)}catch(e){n.forEach=i}};for(var l in a)a[l]&&c(r[l]&&r[l].prototype);c(o)},function(n,e,t){"use strict";var r=t(2),a=t(98);r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},function(n,e){n.exports=!1},function(n,e,t){var r=t(15),a=t(272),o=Error.prototype;o.toString!==a&&r(o,"toString",a)},function(n,e,t){var r=t(1),a=r({}.toString),o=r("".slice);n.exports=function(n){return o(a(n),8,-1)}},function(n,e,t){var r=t(8),a=t(13),o=t(56);n.exports=r?function(n,e,t){return a.f(n,e,o(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){var r=t(47);n.exports=function(n){return r(n.length)}},function(n,e,t){"use strict";var r=t(2),a=t(57).filter;r({target:"Array",proto:!0,forced:!t(96)("filter")},{filter:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){var r,a,o,i=t(242),s=t(0),c=t(1),l=t(10),u=t(32),p=t(12),d=t(117),f=t(91),m=t(69),h=s.TypeError,v=s.WeakMap;if(i||d.state){var g=d.state||(d.state=new v),b=c(g.get),y=c(g.has),x=c(g.set);r=function(n,e){if(y(g,n))throw new h("Object already initialized");return e.facade=n,x(g,n,e),e},a=function(n){return b(g,n)||{}},o=function(n){return y(g,n)}}else{var w=f("state");m[w]=!0,r=function(n,e){if(p(n,w))throw new h("Object already initialized");return e.facade=n,u(n,w,e),e},a=function(n){return p(n,w)?n[w]:{}},o=function(n){return p(n,w)}}n.exports={set:r,get:a,has:o,enforce:function(n){return o(n)?a(n):r(n,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=a(e)).type!==n)throw h("Incompatible receiver, "+n+" required");return t}}}},function(n,e){var t=Array.isArray;n.exports=t},function(n,e,t){var r=t(22);n.exports=r("navigator","userAgent")||""},function(n,e,t){var r=t(1);n.exports=r({}.isPrototypeOf)},function(n,e,t){var r=t(8),a=t(14),o=t(124),i=t(56),s=t(25),c=t(87),l=t(12),u=t(161),p=Object.getOwnPropertyDescriptor;e.f=r?p:function(n,e){if(n=s(n),e=c(e),u)try{return p(n,e)}catch(n){}if(l(n,e))return i(!a(o.f,n,e),n[e])}},function(n,e,t){var r=t(194),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();n.exports=o},function(n,e,t){"use strict";function r(n,e,t,r,a,o,i,s){var c,l="function"==typeof n?n.options:n;if(e&&(l.render=e,l.staticRenderFns=t,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),i?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),a&&a.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(i)},l._ssrRegister=c):a&&(c=s?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(n,e){return c.call(e),u(n,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:n,options:l}}t.d(e,"a",(function(){return r}))},function(n,e,t){var r,a=t(9),o=t(120),i=t(123),s=t(69),c=t(164),l=t(86),u=t(91),p=u("IE_PROTO"),d=function(){},f=function(n){return"<script>"+n+"<\/script>"},m=function(n){n.write(f("")),n.close();var e=n.parentWindow.Object;return n=null,e},h=function(){try{r=new ActiveXObject("htmlfile")}catch(n){}var n,e;h="undefined"!=typeof document?document.domain&&r?m(r):((e=l("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(n=e.contentWindow.document).open(),n.write(f("document.F=Object")),n.close(),n.F):m(r);for(var t=i.length;t--;)delete h.prototype[i[t]];return h()};s[p]=!0,n.exports=Object.create||function(n,e){var t;return null!==n?(d.prototype=a(n),t=new d,d.prototype=null,t[p]=n):t=h(),void 0===e?t:o.f(t,e)}},function(n,e,t){var r=t(68),a=Function.prototype,o=a.apply,i=a.call;n.exports="object"==typeof Reflect&&Reflect.apply||(r?i.bind(o):function(){return i.apply(o,arguments)})},function(n,e,t){var r=t(0),a=t(7),o=t(89),i=r.TypeError;n.exports=function(n){if(a(n))return n;throw i(o(n)+" is not a function")}},function(n,e,t){"use strict";var r=t(2),a=t(57).map;r({target:"Array",proto:!0,forced:!t(96)("map")},{map:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(2),a=t(21),o=t(90);r({target:"Object",stat:!0,forced:t(3)((function(){o(1)}))},{keys:function(n){return o(a(n))}})},function(n,e,t){var r=t(62),a=Math.min;n.exports=function(n){return n>0?a(r(n),9007199254740991):0}},function(n,e,t){var r=t(2),a=t(0),o=t(43),i=t(268),s=a.WebAssembly,c=7!==Error("e",{cause:7}).cause,l=function(n,e){var t={};t[n]=i(n,e,c),r({global:!0,forced:c},t)},u=function(n,e){if(s&&s[n]){var t={};t[n]=i("WebAssembly."+n,e,c),r({target:"WebAssembly",stat:!0,forced:c},t)}};l("Error",(function(n){return function(e){return o(n,this,arguments)}})),l("EvalError",(function(n){return function(e){return o(n,this,arguments)}})),l("RangeError",(function(n){return function(e){return o(n,this,arguments)}})),l("ReferenceError",(function(n){return function(e){return o(n,this,arguments)}})),l("SyntaxError",(function(n){return function(e){return o(n,this,arguments)}})),l("TypeError",(function(n){return function(e){return o(n,this,arguments)}})),l("URIError",(function(n){return function(e){return o(n,this,arguments)}})),u("CompileError",(function(n){return function(e){return o(n,this,arguments)}})),u("LinkError",(function(n){return function(e){return o(n,this,arguments)}})),u("RuntimeError",(function(n){return function(e){return o(n,this,arguments)}}))},function(n,e,t){var r=t(293),a=t(296);n.exports=function(n,e){var t=a(n,e);return r(t)?t:void 0}},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(83);t(74),t(97),t(5),t(134),t(16),t(18);var r=t(108);t(48),t(30);function a(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o=[],i=!0,s=!1;try{for(t=t.call(n);!(i=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(n){s=!0,a=n}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}}(n,e)||Object(r.a)(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,e,t){"use strict";var r=t(2),a=t(0),o=t(3),i=t(65),s=t(10),c=t(21),l=t(33),u=t(73),p=t(155),d=t(96),f=t(6),m=t(60),h=f("isConcatSpreadable"),v=a.TypeError,g=m>=51||!o((function(){var n=[];return n[h]=!1,n.concat()[0]!==n})),b=d("concat"),y=function(n){if(!s(n))return!1;var e=n[h];return void 0!==e?!!e:i(n)};r({target:"Array",proto:!0,forced:!g||!b},{concat:function(n){var e,t,r,a,o,i=c(this),s=p(i,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(y(o=-1===e?i:arguments[e])){if(d+(a=l(o))>9007199254740991)throw v("Maximum allowed index exceeded");for(t=0;t<a;t++,d++)t in o&&u(s,d,o[t])}else{if(d>=9007199254740991)throw v("Maximum allowed index exceeded");u(s,d++,o)}return s.length=d,s}})},function(n,e,t){"use strict";t.d(e,"e",(function(){return r})),t.d(e,"b",(function(){return o})),t.d(e,"j",(function(){return i})),t.d(e,"g",(function(){return c})),t.d(e,"h",(function(){return l})),t.d(e,"i",(function(){return u})),t.d(e,"c",(function(){return p})),t.d(e,"f",(function(){return d})),t.d(e,"l",(function(){return f})),t.d(e,"m",(function(){return m})),t.d(e,"d",(function(){return v})),t.d(e,"k",(function(){return g})),t.d(e,"n",(function(){return b})),t.d(e,"a",(function(){return x}));t(28),t(53),t(226),t(80),t(225),t(156),t(45),t(26),t(5),t(27),t(34),t(83),t(148),t(116),t(51),t(213),t(30),t(111);var r=/#.*$/,a=/\.(md|html)$/,o=/\/$/,i=/^[a-z]+:/i;function s(n){return decodeURI(n).replace(r,"").replace(a,"")}function c(n){return i.test(n)}function l(n){return/^mailto:/.test(n)}function u(n){return/^tel:/.test(n)}function p(n){if(c(n))return n;if(!n)return"404";var e=n.match(r),t=e?e[0]:"",a=s(n);return o.test(a)?n:a+".html"+t}function d(n,e){var t=n.hash,a=function(n){var e=n&&n.match(r);if(e)return e[0]}(e);return(!a||t===a)&&s(n.path)===s(e)}function f(n,e,t){if(c(e))return{type:"external",path:e};t&&(e=function(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var a=e.split("/");t&&a[a.length-1]||a.pop();for(var o=n.replace(/^\//,"").split("/"),i=0;i<o.length;i++){var s=o[i];".."===s?a.pop():"."!==s&&a.push(s)}""!==a[0]&&a.unshift("");return a.join("/")}(e,t));for(var r=s(e),a=0;a<n.length;a++)if(s(n[a].regularPath)===r)return Object.assign({},n[a],{type:"page",path:p(n[a].path)});return console.error('[vuepress] No matching page found for sidebar item "'.concat(e,'"')),{}}function m(n,e,t,r){var a=t.pages,o=t.themeConfig,i=r&&o.locales&&o.locales[r]||o;if("auto"===(n.frontmatter.sidebar||i.sidebar||o.sidebar))return h(n);var s=i.sidebar||o.sidebar;if(s){var c=function(n,e){if(Array.isArray(e))return{base:"/",config:e};for(var t in e)if(0===(r=n,/(\.html|\/)$/.test(r)?r:r+"/").indexOf(encodeURI(t)))return{base:t,config:e[t]};var r;return{}}(e,s),l=c.base,u=c.config;return"auto"===u?h(n):u?u.map((function(n){return function n(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if("string"==typeof e)return f(t,e,r);if(Array.isArray(e))return Object.assign(f(t,e[0],r),{title:e[1]});a>3&&console.error("[vuepress] detected a too deep nested sidebar group.");var o=e.children||[];return 0===o.length&&e.path?Object.assign(f(t,e.path,r),{title:e.title}):{type:"group",path:e.path,title:e.title,sidebarDepth:e.sidebarDepth,initialOpenGroupIndex:e.initialOpenGroupIndex,children:o.map((function(e){return n(e,t,r,a+1)})),collapsable:!1!==e.collapsable}}(n,a,l)})):[]}return[]}function h(n){var e=v(n.headers||[]);return[{type:"group",collapsable:!1,title:n.title,path:null,children:e.map((function(e){return{type:"auto",title:e.title,basePath:n.path,path:n.path+"#"+e.slug,children:e.children||[]}}))}]}function v(n){var e;return(n=n.map((function(n){return Object.assign({},n)}))).forEach((function(n){2===n.level?e=n:e&&(e.children||(e.children=[])).push(n)})),n.filter((function(n){return 2===n.level}))}function g(n){return Object.assign(n,{type:n.items&&n.items.length?"links":"link"})}function b(n){return Object.prototype.toString.call(n).match(/\[object (.*?)\]/)[1].toLowerCase()}function y(n){var e=n.frontmatter.date||n.lastUpdated||new Date,t=new Date(e);return"Invalid Date"==t&&e&&(t=new Date(e.replace(/-/g,"/"))),t.getTime()}function x(n,e){return y(e)-y(n)}},function(n,e,t){"use strict";var r=t(43),a=t(14),o=t(1),i=t(114),s=t(3),c=t(9),l=t(7),u=t(62),p=t(47),d=t(11),f=t(19),m=t(138),h=t(55),v=t(273),g=t(115),b=t(6)("replace"),y=Math.max,x=Math.min,w=o([].concat),k=o([].push),j=o("".indexOf),S=o("".slice),O="$0"==="a".replace(/./,"$0"),C=!!/./[b]&&""===/./[b]("a","$0");i("replace",(function(n,e,t){var o=C?"$":"$0";return[function(n,t){var r=f(this),o=null==n?void 0:h(n,b);return o?a(o,n,r,t):a(e,d(r),n,t)},function(n,a){var i=c(this),s=d(n);if("string"==typeof a&&-1===j(a,o)&&-1===j(a,"$<")){var f=t(e,i,s,a);if(f.done)return f.value}var h=l(a);h||(a=d(a));var b=i.global;if(b){var O=i.unicode;i.lastIndex=0}for(var C=[];;){var E=g(i,s);if(null===E)break;if(k(C,E),!b)break;""===d(E[0])&&(i.lastIndex=m(s,p(i.lastIndex),O))}for(var A,_="",B=0,P=0;P<C.length;P++){for(var T=d((E=C[P])[0]),I=y(x(u(E.index),s.length),0),M=[],D=1;D<E.length;D++)k(M,void 0===(A=E[D])?A:String(A));var L=E.groups;if(h){var q=w([T],M,I,s);void 0!==L&&k(q,L);var R=d(r(a,void 0,q))}else R=v(T,s,I,M,L,a);I>=B&&(_+=S(s,B,I)+R,B=I+T.length)}return _+S(s,B)}]}),!!s((function(){var n=/./;return n.exec=function(){var n=[];return n.groups={a:"7"},n},"7"!=="".replace(n,"$<a>")}))||!O||C)},function(n,e,t){"use strict";var r=t(3);n.exports=function(n,e){var t=[][n];return!!t&&r((function(){t.call(null,e||function(){return 1},1)}))}},function(n,e,t){var r=t(44);n.exports=function(n,e){var t=n[e];return null==t?void 0:r(t)}},function(n,e){n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e,t){var r=t(63),a=t(1),o=t(67),i=t(21),s=t(33),c=t(155),l=a([].push),u=function(n){var e=1==n,t=2==n,a=3==n,u=4==n,p=6==n,d=7==n,f=5==n||p;return function(m,h,v,g){for(var b,y,x=i(m),w=o(x),k=r(h,v),j=s(w),S=0,O=g||c,C=e?O(m,j):t||d?O(m,0):void 0;j>S;S++)if((f||S in w)&&(y=k(b=w[S],S,x),n))if(e)C[S]=y;else if(y)switch(n){case 3:return!0;case 5:return b;case 6:return S;case 2:l(C,b)}else switch(n){case 4:return!1;case 7:l(C,b)}return p?-1:a||u?u:C}};n.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},function(n,e,t){var r=t(8),a=t(81).EXISTS,o=t(1),i=t(13).f,s=Function.prototype,c=o(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(l.exec);r&&!a&&i(s,"name",{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(n){return""}}})},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var r,a,o=t(0),i=t(37),s=o.process,c=o.Deno,l=s&&s.versions||c&&c.version,u=l&&l.v8;u&&(a=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(a=+r[1]),n.exports=a},function(n,e,t){var r=t(163),a=t(123).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return r(n,a)}},function(n,e){var t=Math.ceil,r=Math.floor;n.exports=function(n){var e=+n;return e!=e||0===e?0:(e>0?r:t)(e)}},function(n,e,t){var r=t(1),a=t(44),o=t(68),i=r(r.bind);n.exports=function(n,e){return a(n),void 0===e?n:o?i(n,e):function(){return n.apply(e,arguments)}}},function(n,e,t){var r=t(13).f,a=t(12),o=t(6)("toStringTag");n.exports=function(n,e,t){n&&!t&&(n=n.prototype),n&&!a(n,o)&&r(n,o,{configurable:!0,value:e})}},function(n,e,t){var r=t(31);n.exports=Array.isArray||function(n){return"Array"==r(n)}},function(n,e,t){var r=t(75),a=t(278),o=t(279),i=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":i&&i in Object(n)?a(n):o(n)}},function(n,e,t){var r=t(0),a=t(1),o=t(3),i=t(31),s=r.Object,c=a("".split);n.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(n){return"String"==i(n)?c(n,""):s(n)}:s},function(n,e,t){var r=t(3);n.exports=!r((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e){n.exports={}},function(n,e){n.exports={}},function(n,e,t){var r=t(1),a=t(9),o=t(243);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch(n){}return function(t,r){return a(t),o(r),e?n(t,r):t.__proto__=r,t}}():void 0)},function(n,e,t){var r=t(1);n.exports=r([].slice)},function(n,e,t){"use strict";var r=t(87),a=t(13),o=t(56);n.exports=function(n,e,t){var i=r(e);i in n?a.f(n,i,o(0,t)):n[i]=t}},function(n,e,t){"use strict";var r=t(2),a=t(0),o=t(22),i=t(43),s=t(14),c=t(1),l=t(29),u=t(8),p=t(119),d=t(3),f=t(12),m=t(65),h=t(7),v=t(10),g=t(38),b=t(88),y=t(9),x=t(21),w=t(25),k=t(87),j=t(11),S=t(56),O=t(42),C=t(90),E=t(61),A=t(186),_=t(126),B=t(39),P=t(13),T=t(120),I=t(124),M=t(72),D=t(15),L=t(84),q=t(91),R=t(69),N=t(85),z=t(6),$=t(187),F=t(188),U=t(64),V=t(35),H=t(57).forEach,W=q("hidden"),G=z("toPrimitive"),K=V.set,X=V.getterFor("Symbol"),J=Object.prototype,Q=a.Symbol,Y=Q&&Q.prototype,Z=a.TypeError,nn=a.QObject,en=o("JSON","stringify"),tn=B.f,rn=P.f,an=A.f,on=I.f,sn=c([].push),cn=L("symbols"),ln=L("op-symbols"),un=L("string-to-symbol-registry"),pn=L("symbol-to-string-registry"),dn=L("wks"),fn=!nn||!nn.prototype||!nn.prototype.findChild,mn=u&&d((function(){return 7!=O(rn({},"a",{get:function(){return rn(this,"a",{value:7}).a}})).a}))?function(n,e,t){var r=tn(J,e);r&&delete J[e],rn(n,e,t),r&&n!==J&&rn(J,e,r)}:rn,hn=function(n,e){var t=cn[n]=O(Y);return K(t,{type:"Symbol",tag:n,description:e}),u||(t.description=e),t},vn=function(n,e,t){n===J&&vn(ln,e,t),y(n);var r=k(e);return y(t),f(cn,r)?(t.enumerable?(f(n,W)&&n[W][r]&&(n[W][r]=!1),t=O(t,{enumerable:S(0,!1)})):(f(n,W)||rn(n,W,S(1,{})),n[W][r]=!0),mn(n,r,t)):rn(n,r,t)},gn=function(n,e){y(n);var t=w(e),r=C(t).concat(wn(t));return H(r,(function(e){u&&!s(bn,t,e)||vn(n,e,t[e])})),n},bn=function(n){var e=k(n),t=s(on,this,e);return!(this===J&&f(cn,e)&&!f(ln,e))&&(!(t||!f(this,e)||!f(cn,e)||f(this,W)&&this[W][e])||t)},yn=function(n,e){var t=w(n),r=k(e);if(t!==J||!f(cn,r)||f(ln,r)){var a=tn(t,r);return!a||!f(cn,r)||f(t,W)&&t[W][r]||(a.enumerable=!0),a}},xn=function(n){var e=an(w(n)),t=[];return H(e,(function(n){f(cn,n)||f(R,n)||sn(t,n)})),t},wn=function(n){var e=n===J,t=an(e?ln:w(n)),r=[];return H(t,(function(n){!f(cn,n)||e&&!f(J,n)||sn(r,cn[n])})),r};(p||(D(Y=(Q=function(){if(g(Y,this))throw Z("Symbol is not a constructor");var n=arguments.length&&void 0!==arguments[0]?j(arguments[0]):void 0,e=N(n),t=function(n){this===J&&s(t,ln,n),f(this,W)&&f(this[W],e)&&(this[W][e]=!1),mn(this,e,S(1,n))};return u&&fn&&mn(J,e,{configurable:!0,set:t}),hn(e,n)}).prototype,"toString",(function(){return X(this).tag})),D(Q,"withoutSetter",(function(n){return hn(N(n),n)})),I.f=bn,P.f=vn,T.f=gn,B.f=yn,E.f=A.f=xn,_.f=wn,$.f=function(n){return hn(z(n),n)},u&&(rn(Y,"description",{configurable:!0,get:function(){return X(this).description}}),l||D(J,"propertyIsEnumerable",bn,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:Q}),H(C(dn),(function(n){F(n)})),r({target:"Symbol",stat:!0,forced:!p},{for:function(n){var e=j(n);if(f(un,e))return un[e];var t=Q(e);return un[e]=t,pn[t]=e,t},keyFor:function(n){if(!b(n))throw Z(n+" is not a symbol");if(f(pn,n))return pn[n]},useSetter:function(){fn=!0},useSimple:function(){fn=!1}}),r({target:"Object",stat:!0,forced:!p,sham:!u},{create:function(n,e){return void 0===e?O(n):gn(O(n),e)},defineProperty:vn,defineProperties:gn,getOwnPropertyDescriptor:yn}),r({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:xn,getOwnPropertySymbols:wn}),r({target:"Object",stat:!0,forced:d((function(){_.f(1)}))},{getOwnPropertySymbols:function(n){return _.f(x(n))}}),en)&&r({target:"JSON",stat:!0,forced:!p||d((function(){var n=Q();return"[null]"!=en([n])||"{}"!=en({a:n})||"{}"!=en(Object(n))}))},{stringify:function(n,e,t){var r=M(arguments),a=e;if((v(e)||void 0!==n)&&!b(n))return m(e)||(e=function(n,e){if(h(a)&&(e=s(a,this,n,e)),!b(e))return e}),r[1]=e,i(en,null,r)}});if(!Y[G]){var kn=Y.valueOf;D(Y,G,(function(n){return s(kn,this)}))}U(Q,"Symbol"),R[W]=!0},function(n,e,t){var r=t(40).Symbol;n.exports=r},function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));t(83);var r=t(77);t(74),t(97),t(5),t(134),t(16),t(18),t(189);var a=t(108);t(48),t(30);function o(n){return function(n){if(Array.isArray(n))return Object(r.a)(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Object(a.a)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,e,t){"use strict";function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r=t(2),a=t(0),o=t(65),i=t(94),s=t(10),c=t(122),l=t(33),u=t(25),p=t(73),d=t(6),f=t(96),m=t(72),h=f("slice"),v=d("species"),g=a.Array,b=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(n,e){var t,r,a,d=u(this),f=l(d),h=c(n,f),y=c(void 0===e?f:e,f);if(o(d)&&(t=d.constructor,(i(t)&&(t===g||o(t.prototype))||s(t)&&null===(t=t[v]))&&(t=void 0),t===g||void 0===t))return m(d,h,y);for(r=new(void 0===t?g:t)(b(y-h,0)),a=0;h<y;h++,a++)h in d&&p(r,a,d[h]);return r.length=a,r}})},function(n,e,t){"use strict";var r=t(8),a=t(0),o=t(1),i=t(93),s=t(15),c=t(12),l=t(137),u=t(38),p=t(88),d=t(162),f=t(3),m=t(61).f,h=t(39).f,v=t(13).f,g=t(371),b=t(227).trim,y=a.Number,x=y.prototype,w=a.TypeError,k=o("".slice),j=o("".charCodeAt),S=function(n){var e=d(n,"number");return"bigint"==typeof e?e:O(e)},O=function(n){var e,t,r,a,o,i,s,c,l=d(n,"number");if(p(l))throw w("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=b(l),43===(e=j(l,0))||45===e){if(88===(t=j(l,2))||120===t)return NaN}else if(48===e){switch(j(l,1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(i=(o=k(l,2)).length,s=0;s<i;s++)if((c=j(o,s))<48||c>a)return NaN;return parseInt(o,r)}return+l};if(i("Number",!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var C,E=function(n){var e=arguments.length<1?0:y(S(n)),t=this;return u(x,t)&&f((function(){g(t)}))?l(Object(e),t,E):e},A=r?m(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),_=0;A.length>_;_++)c(y,C=A[_])&&!c(E,C)&&v(E,C,h(y,C));E.prototype=x,x.constructor=E,s(a,"Number",E)}},function(n,e,t){"use strict";t(28);var r,a,o=t(2),i=t(0),s=t(14),c=t(1),l=t(7),u=t(10),p=(r=!1,(a=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===a.test("abc")&&r),d=i.Error,f=c(/./.test);o({target:"RegExp",proto:!0,forced:!p},{test:function(n){var e=this.exec;if(!l(e))return f(this,n);var t=s(e,this,n);if(null!==t&&!u(t))throw new d("RegExp exec method returned something other than an Object or null");return!!t}})},function(n,e,t){var r=t(8),a=t(12),o=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,s=a(o,"name"),c=s&&"something"===function(){}.name,l=s&&(!r||r&&i(o,"name").configurable);n.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},function(n,e,t){var r=t(0),a=t(128),o=t(7),i=t(31),s=t(6)("toStringTag"),c=r.Object,l="Arguments"==i(function(){return arguments}());n.exports=a?i:function(n){var e,t,r;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=c(n),s))?t:l?i(e):"Object"==(r=i(e))&&o(e.callee)?"Arguments":r}},function(n,e,t){t(2)({target:"Array",stat:!0},{isArray:t(65)})},function(n,e,t){var r=t(29),a=t(117);(n.exports=function(n,e){return a[n]||(a[n]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e,t){var r=t(1),a=0,o=Math.random(),i=r(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+i(++a+o,36)}},function(n,e,t){var r=t(0),a=t(10),o=r.document,i=a(o)&&a(o.createElement);n.exports=function(n){return i?o.createElement(n):{}}},function(n,e,t){var r=t(162),a=t(88);n.exports=function(n){var e=r(n,"string");return a(e)?e:e+""}},function(n,e,t){var r=t(0),a=t(22),o=t(7),i=t(38),s=t(159),c=r.Object;n.exports=s?function(n){return"symbol"==typeof n}:function(n){var e=a("Symbol");return o(e)&&i(e.prototype,c(n))}},function(n,e,t){var r=t(0).String;n.exports=function(n){try{return r(n)}catch(n){return"Object"}}},function(n,e,t){var r=t(163),a=t(123);n.exports=Object.keys||function(n){return r(n,a)}},function(n,e,t){var r=t(84),a=t(85),o=r("keys");n.exports=function(n){return o[n]||(o[n]=a(n))}},function(n,e,t){var r=t(1),a=t(7),o=t(117),i=r(Function.toString);a(o.inspectSource)||(o.inspectSource=function(n){return i(n)}),n.exports=o.inspectSource},function(n,e,t){var r=t(3),a=t(7),o=/#|\.prototype\./,i=function(n,e){var t=c[s(n)];return t==u||t!=l&&(a(e)?r(e):!!e)},s=i.normalize=function(n){return String(n).replace(o,".").toLowerCase()},c=i.data={},l=i.NATIVE="N",u=i.POLYFILL="P";n.exports=i},function(n,e,t){var r=t(1),a=t(3),o=t(7),i=t(82),s=t(22),c=t(92),l=function(){},u=[],p=s("Reflect","construct"),d=/^\s*(?:class|function)\b/,f=r(d.exec),m=!d.exec(l),h=function(n){if(!o(n))return!1;try{return p(l,u,n),!0}catch(n){return!1}},v=function(n){if(!o(n))return!1;switch(i(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!f(d,c(n))}catch(n){return!0}};v.sham=!0,n.exports=!p||a((function(){var n;return h(h.call)||!h(Object)||!h((function(){n=!0}))||n}))?v:h},function(n,e,t){var r=t(31),a=t(0);n.exports="process"==r(a.process)},function(n,e,t){var r=t(3),a=t(6),o=t(60),i=a("species");n.exports=function(n){return o>=51||!r((function(){var e=[];return(e.constructor={})[i]=function(){return{foo:1}},1!==e[n](Boolean).foo}))}},function(n,e,t){"use strict";var r=t(2),a=t(8),o=t(0),i=t(1),s=t(12),c=t(7),l=t(38),u=t(11),p=t(13).f,d=t(125),f=o.Symbol,m=f&&f.prototype;if(a&&c(f)&&(!("description"in m)||void 0!==f().description)){var h={},v=function(){var n=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),e=l(m,this)?new f(n):void 0===n?f():f(n);return""===n&&(h[e]=!0),e};d(v,f),v.prototype=m,m.constructor=v;var g="Symbol(test)"==String(f("test")),b=i(m.toString),y=i(m.valueOf),x=/^Symbol\((.*)\)[^)]+$/,w=i("".replace),k=i("".slice);p(m,"description",{configurable:!0,get:function(){var n=y(this),e=b(n);if(s(h,n))return"";var t=g?k(e,7,-1):w(e,x,"$1");return""===t?void 0:t}}),r({global:!0,forced:!0},{Symbol:v})}},function(n,e,t){"use strict";var r,a,o=t(14),i=t(1),s=t(11),c=t(135),l=t(99),u=t(84),p=t(42),d=t(35).get,f=t(136),m=t(190),h=u("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,g=v,b=i("".charAt),y=i("".indexOf),x=i("".replace),w=i("".slice),k=(a=/b*/g,o(v,r=/a/,"a"),o(v,a,"a"),0!==r.lastIndex||0!==a.lastIndex),j=l.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(k||S||j||f||m)&&(g=function(n){var e,t,r,a,i,l,u,f=this,m=d(f),O=s(n),C=m.raw;if(C)return C.lastIndex=f.lastIndex,e=o(g,C,O),f.lastIndex=C.lastIndex,e;var E=m.groups,A=j&&f.sticky,_=o(c,f),B=f.source,P=0,T=O;if(A&&(_=x(_,"y",""),-1===y(_,"g")&&(_+="g"),T=w(O,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==b(O,f.lastIndex-1))&&(B="(?: "+B+")",T=" "+T,P++),t=new RegExp("^(?:"+B+")",_)),S&&(t=new RegExp("^"+B+"$(?!\\s)",_)),k&&(r=f.lastIndex),a=o(v,A?t:f,T),A?a?(a.input=w(a.input,P),a[0]=w(a[0],P),a.index=f.lastIndex,f.lastIndex+=a[0].length):f.lastIndex=0:k&&a&&(f.lastIndex=f.global?a.index+a[0].length:r),S&&a&&a.length>1&&o(h,a[0],t,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(a[i]=void 0)})),a&&E)for(a.groups=l=p(null),i=0;i<E.length;i++)l[(u=E[i])[0]]=a[u[1]];return a}),n.exports=g},function(n,e,t){var r=t(3),a=t(0).RegExp,o=r((function(){var n=a("a","y");return n.lastIndex=2,null!=n.exec("abcd")})),i=o||r((function(){return!a("a","y").sticky})),s=o||r((function(){var n=a("^r","gy");return n.lastIndex=2,null!=n.exec("str")}));n.exports={BROKEN_CARET:s,MISSED_STICKY:i,UNSUPPORTED_Y:o}},function(n,e,t){var r=t(283),a=t(284),o=t(285),i=t(286),s=t(287);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(196);n.exports=function(n,e){for(var t=n.length;t--;)if(r(n[t][0],e))return t;return-1}},function(n,e,t){var r=t(49)(Object,"create");n.exports=r},function(n,e,t){var r=t(305);n.exports=function(n,e){var t=n.__data__;return r(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var r=t(146);n.exports=function(n){if("string"==typeof n||r(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){var r=t(2),a=t(8),o=t(13).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!a},{defineProperty:o})},function(n,e,t){"use strict";var r,a=t(2),o=t(1),i=t(39).f,s=t(47),c=t(11),l=t(130),u=t(19),p=t(132),d=t(29),f=o("".endsWith),m=o("".slice),h=Math.min,v=p("endsWith");a({target:"String",proto:!0,forced:!!(d||v||(r=i(String.prototype,"endsWith"),!r||r.writable))&&!v},{endsWith:function(n){var e=c(u(this));l(n);var t=arguments.length>1?arguments[1]:void 0,r=e.length,a=void 0===t?r:h(s(t),r),o=c(n);return f?f(e,o,a):m(e,a-o.length,a)===o}})},function(n,e,t){"use strict";var r=t(2),a=t(236);r({target:"String",proto:!0,forced:t(237)("fixed")},{fixed:function(){return a(this,"tt","","")}})},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(78),t(5),t(58),t(189),t(16),t(28),t(80);var r=t(77);function a(n,e){if(n){if("string"==typeof n)return Object(r.a)(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Object(r.a)(n,e):void 0}}},function(n,e,t){var r,a;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(a="function"==typeof(r=function(){var n,e,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function a(n,e,t){return n<e?e:n>t?t:n}function o(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(r[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=a(n,r.minimum,1),t.status=1===n?null:n;var c=t.render(!e),l=c.querySelector(r.barSelector),u=r.speed,p=r.easing;return c.offsetWidth,i((function(e){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(l,function(n,e,t){var a;return(a="translate3d"===r.positionUsing?{transform:"translate3d("+o(n)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+o(n)+"%,0)"}:{"margin-left":o(n)+"%"}).transition="all "+e+"ms "+t,a}(n,u,p)),1===n?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+u+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),u)}),u)):setTimeout(e,u)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),r.trickleSpeed)};return r.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*a(Math.random()*e,.1,.95)),e=a(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},n=0,e=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===e&&t.start(),n++,e++,r.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=r.template;var a,i=e.querySelector(r.barSelector),c=n?"-100":o(t.status||0),u=document.querySelector(r.parent);return s(i,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),r.showSpinner||(a=e.querySelector(r.spinnerSelector))&&d(a),u!=document.body&&l(u,"nprogress-custom-parent"),u.appendChild(e),e},t.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(r.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&d(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var i=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),s=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var r,a=n.length,o=e.charAt(0).toUpperCase()+e.slice(1);a--;)if((r=n[a]+o)in t)return r;return e}(t))}function r(n,e,r){e=t(e),n.style[e]=r}return function(n,e){var t,a,o=arguments;if(2==o.length)for(t in e)void 0!==(a=e[t])&&e.hasOwnProperty(t)&&r(n,t,a);else r(n,o[1],o[2])}}();function c(n,e){return("string"==typeof n?n:p(n)).indexOf(" "+e+" ")>=0}function l(n,e){var t=p(n),r=t+e;c(t,e)||(n.className=r.substring(1))}function u(n,e){var t,r=p(n);c(n,e)&&(t=r.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function p(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function d(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?r.call(e,t,e,n):r)||(n.exports=a)},function(n,e,t){var r=t(2),a=t(0),o=t(43),i=t(7),s=t(37),c=t(72),l=t(154),u=/MSIE .\./.test(s),p=a.Function,d=function(n){return function(e,t){var r=l(arguments.length,1)>2,a=i(e)?e:p(e),s=r?c(arguments,2):void 0;return n(r?function(){o(a,this,s)}:a,t)}};r({global:!0,bind:!0,forced:u},{setTimeout:d(a.setTimeout),setInterval:d(a.setInterval)})},function(n,e,t){"use strict";var r=t(1),a=t(81).PROPER,o=t(15),i=t(9),s=t(38),c=t(11),l=t(3),u=t(135),p=RegExp.prototype,d=p.toString,f=r(u),m=l((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),h=a&&"toString"!=d.name;(m||h)&&o(RegExp.prototype,"toString",(function(){var n=i(this),e=c(n.source),t=n.flags;return"/"+e+"/"+c(void 0===t&&s(p,n)&&!("flags"in p)?f(n):t)}),{unsafe:!0})},function(n,e,t){var r=t(6),a=t(42),o=t(13),i=r("unscopables"),s=Array.prototype;null==s[i]&&o.f(s,i,{configurable:!0,value:a(null)}),n.exports=function(n){s[i][n]=!0}},function(n,e,t){var r=t(82),a=t(55),o=t(70),i=t(6)("iterator");n.exports=function(n){if(null!=n)return a(n,i)||a(n,"@@iterator")||o[r(n)]}},function(n,e,t){"use strict";t(28);var r=t(1),a=t(15),o=t(98),i=t(3),s=t(6),c=t(32),l=s("species"),u=RegExp.prototype;n.exports=function(n,e,t,p){var d=s(n),f=!i((function(){var e={};return e[d]=function(){return 7},7!=""[n](e)})),m=f&&!i((function(){var e=!1,t=/a/;return"split"===n&&((t={}).constructor={},t.constructor[l]=function(){return t},t.flags="",t[d]=/./[d]),t.exec=function(){return e=!0,null},t[d](""),!e}));if(!f||!m||t){var h=r(/./[d]),v=e(d,""[n],(function(n,e,t,a,i){var s=r(n),c=e.exec;return c===o||c===u.exec?f&&!i?{done:!0,value:h(e,t,a)}:{done:!0,value:s(t,e,a)}:{done:!1}}));a(String.prototype,n,v[0]),a(u,d,v[1])}p&&c(u[d],"sham",!0)}},function(n,e,t){var r=t(0),a=t(14),o=t(9),i=t(7),s=t(31),c=t(98),l=r.TypeError;n.exports=function(n,e){var t=n.exec;if(i(t)){var r=a(t,n,e);return null!==r&&o(r),r}if("RegExp"===s(n))return a(c,n,e);throw l("RegExp#exec called on incompatible receiver")}},function(n,e,t){var r=t(1),a=t(15),o=Date.prototype,i=r(o.toString),s=r(o.getTime);"Invalid Date"!=String(new Date(NaN))&&a(o,"toString",(function(){var n=s(this);return n==n?i(this):"Invalid Date"}))},function(n,e,t){var r=t(0),a=t(118),o=r["__core-js_shared__"]||a("__core-js_shared__",{});n.exports=o},function(n,e,t){var r=t(0),a=Object.defineProperty;n.exports=function(n,e){try{a(r,n,{value:e,configurable:!0,writable:!0})}catch(t){r[n]=e}return e}},function(n,e,t){var r=t(60),a=t(3);n.exports=!!Object.getOwnPropertySymbols&&!a((function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(n,e,t){var r=t(8),a=t(160),o=t(13),i=t(9),s=t(25),c=t(90);e.f=r&&!a?Object.defineProperties:function(n,e){i(n);for(var t,r=s(e),a=c(e),l=a.length,u=0;l>u;)o.f(n,t=a[u++],r[t]);return n}},function(n,e,t){var r=t(25),a=t(122),o=t(33),i=function(n){return function(e,t,i){var s,c=r(e),l=o(c),u=a(i,l);if(n&&t!=t){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((n||u in c)&&c[u]===t)return n||u||0;return!n&&-1}};n.exports={includes:i(!0),indexOf:i(!1)}},function(n,e,t){var r=t(62),a=Math.max,o=Math.min;n.exports=function(n,e){var t=r(n);return t<0?a(t+e,0):o(t,e)}},function(n,e){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e,t){"use strict";var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!r.call({1:2},1);e.f=o?function(n){var e=a(this,n);return!!e&&e.enumerable}:r},function(n,e,t){var r=t(12),a=t(166),o=t(39),i=t(13);n.exports=function(n,e,t){for(var s=a(e),c=i.f,l=o.f,u=0;u<s.length;u++){var p=s[u];r(n,p)||t&&r(t,p)||c(n,p,l(e,p))}}},function(n,e){e.f=Object.getOwnPropertySymbols},function(n,e,t){var r=t(0),a=t(12),o=t(7),i=t(21),s=t(91),c=t(168),l=s("IE_PROTO"),u=r.Object,p=u.prototype;n.exports=c?u.getPrototypeOf:function(n){var e=i(n);if(a(e,l))return e[l];var t=e.constructor;return o(t)&&e instanceof t?t.prototype:e instanceof u?p:null}},function(n,e,t){var r={};r[t(6)("toStringTag")]="z",n.exports="[object z]"===String(r)},function(n,e,t){var r=t(9),a=t(174),o=t(6)("species");n.exports=function(n,e){var t,i=r(n).constructor;return void 0===i||null==(t=r(i)[o])?e:a(t)}},function(n,e,t){var r=t(0),a=t(131),o=r.TypeError;n.exports=function(n){if(a(n))throw o("The method doesn't accept regular expressions");return n}},function(n,e,t){var r=t(10),a=t(31),o=t(6)("match");n.exports=function(n){var e;return r(n)&&(void 0!==(e=n[o])?!!e:"RegExp"==a(n))}},function(n,e,t){var r=t(6)("match");n.exports=function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[r]=!1,"/./"[n](e)}catch(n){}}return!1}},function(n,e,t){var r=t(0),a=t(122),o=t(33),i=t(73),s=r.Array,c=Math.max;n.exports=function(n,e,t){for(var r=o(n),l=a(e,r),u=a(void 0===t?r:t,r),p=s(c(u-l,0)),d=0;l<u;l++,d++)i(p,d,n[l]);return p.length=d,p}},function(n,e,t){t(188)("iterator")},function(n,e,t){"use strict";var r=t(9);n.exports=function(){var n=r(this),e="";return n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.sticky&&(e+="y"),e}},function(n,e,t){var r=t(3),a=t(0).RegExp;n.exports=r((function(){var n=a(".","s");return!(n.dotAll&&n.exec("\n")&&"s"===n.flags)}))},function(n,e,t){var r=t(7),a=t(10),o=t(71);n.exports=function(n,e,t){var i,s;return o&&r(i=e.constructor)&&i!==t&&a(s=i.prototype)&&s!==t.prototype&&o(n,s),n}},function(n,e,t){"use strict";var r=t(179).charAt;n.exports=function(n,e,t){return e+(t?r(n,e).length:1)}},function(n,e,t){var r=t(277),a=t(59),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(n){return a(n)&&i.call(n,"callee")&&!s.call(n,"callee")};n.exports=c},function(n,e,t){var r=t(49)(t(40),"Map");n.exports=r},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var r=t(297),a=t(304),o=t(306),i=t(307),s=t(308);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var r=t(36),a=t(146),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;n.exports=function(n,e){if(r(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!a(n))||(i.test(n)||!o.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var r=t(66),a=t(59);n.exports=function(n){return"symbol"==typeof n||a(n)&&"[object Symbol]"==r(n)}},function(n,e){n.exports=function(n){return n}},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(121).indexOf,i=t(54),s=a([].indexOf),c=!!s&&1/s([1],1,-0)<0,l=i("indexOf");r({target:"Array",proto:!0,forced:c||!l},{indexOf:function(n){var e=arguments.length>1?arguments[1]:void 0;return c?s(this,n,e)||0:o(this,n,e)}})},function(n,e,t){"use strict";var r=t(2),a=t(57).some;r({target:"Array",proto:!0,forced:!t(54)("some")},{some:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e,t){"use strict";var r=t(2),a=t(57).find,o=t(112),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),r({target:"Array",proto:!0,forced:i},{find:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(n,e,t){"use strict";var r=t(25),a=t(112),o=t(70),i=t(35),s=t(13).f,c=t(165),l=t(29),u=t(8),p=i.set,d=i.getterFor("Array Iterator");n.exports=c(Array,"Array",(function(n,e){p(this,{type:"Array Iterator",target:r(n),index:0,kind:e})}),(function(){var n=d(this),e=n.target,t=n.kind,r=n.index++;return!e||r>=e.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:r,done:!1}:"values"==t?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var f=o.Arguments=o.Array;if(a("keys"),a("values"),a("entries"),!l&&u&&"values"!==f.name)try{s(f,"name",{value:"values"})}catch(n){}},function(n,e,t){var r=t(0),a=t(14),o=t(44),i=t(9),s=t(89),c=t(113),l=r.TypeError;n.exports=function(n,e){var t=arguments.length<2?c(n):e;if(o(t))return i(a(t,n));throw l(s(n)+" is not iterable")}},function(n,e,t){var r=t(0).TypeError;n.exports=function(n,e){if(n<e)throw r("Not enough arguments");return n}},function(n,e,t){var r=t(257);n.exports=function(n,e){return new(r(n))(0===e?0:e)}},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(67),i=t(25),s=t(54),c=a([].join),l=o!=Object,u=s("join",",");r({target:"Array",proto:!0,forced:l||!u},{join:function(n){return c(i(this),void 0===n?",":n)}})},function(n,e){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,p=Math.max,d=Math.min,f=function(){return l.Date.now()};function m(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function h(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==u.call(n)}(n))return NaN;if(m(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=m(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var s=a.test(n);return s||o.test(n)?i(n.slice(2),s?2:8):r.test(n)?NaN:+n}n.exports=function(n,e,t){var r,a,o,i,s,c,l=0,u=!1,v=!1,g=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function b(e){var t=r,o=a;return r=a=void 0,l=e,i=n.apply(o,t)}function y(n){return l=n,s=setTimeout(w,e),u?b(n):i}function x(n){var t=n-c;return void 0===c||t>=e||t<0||v&&n-l>=o}function w(){var n=f();if(x(n))return k(n);s=setTimeout(w,function(n){var t=e-(n-c);return v?d(t,o-(n-l)):t}(n))}function k(n){return s=void 0,g&&r?b(n):(r=a=void 0,i)}function j(){var n=f(),t=x(n);if(r=arguments,a=this,c=n,t){if(void 0===s)return y(c);if(v)return s=setTimeout(w,e),b(c)}return void 0===s&&(s=setTimeout(w,e)),i}return e=h(e)||0,m(t)&&(u=!!t.leading,o=(v="maxWait"in t)?p(h(t.maxWait)||0,e):o,g="trailing"in t?!!t.trailing:g),j.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},j.flush=function(){return void 0===s?i:k(f())},j}},function(n,e,t){var r=t(0),a=t(8),o=t(99).MISSED_STICKY,i=t(31),s=t(13).f,c=t(35).get,l=RegExp.prototype,u=r.TypeError;a&&o&&s(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===i(this))return!!c(this).sticky;throw u("Incompatible receiver, RegExp required")}}})},function(n,e,t){var r=t(119);n.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){var r=t(8),a=t(3);n.exports=r&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){var r=t(8),a=t(3),o=t(86);n.exports=!r&&!a((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){var r=t(0),a=t(14),o=t(10),i=t(88),s=t(55),c=t(241),l=t(6),u=r.TypeError,p=l("toPrimitive");n.exports=function(n,e){if(!o(n)||i(n))return n;var t,r=s(n,p);if(r){if(void 0===e&&(e="default"),t=a(r,n,e),!o(t)||i(t))return t;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(n,e)}},function(n,e,t){var r=t(1),a=t(12),o=t(25),i=t(121).indexOf,s=t(69),c=r([].push);n.exports=function(n,e){var t,r=o(n),l=0,u=[];for(t in r)!a(s,t)&&a(r,t)&&c(u,t);for(;e.length>l;)a(r,t=e[l++])&&(~i(u,t)||c(u,t));return u}},function(n,e,t){var r=t(22);n.exports=r("document","documentElement")},function(n,e,t){"use strict";var r=t(2),a=t(14),o=t(29),i=t(81),s=t(7),c=t(229),l=t(127),u=t(71),p=t(64),d=t(32),f=t(15),m=t(6),h=t(70),v=t(167),g=i.PROPER,b=i.CONFIGURABLE,y=v.IteratorPrototype,x=v.BUGGY_SAFARI_ITERATORS,w=m("iterator"),k=function(){return this};n.exports=function(n,e,t,i,m,v,j){c(t,e,i);var S,O,C,E=function(n){if(n===m&&T)return T;if(!x&&n in B)return B[n];switch(n){case"keys":case"values":case"entries":return function(){return new t(this,n)}}return function(){return new t(this)}},A=e+" Iterator",_=!1,B=n.prototype,P=B[w]||B["@@iterator"]||m&&B[m],T=!x&&P||E(m),I="Array"==e&&B.entries||P;if(I&&(S=l(I.call(new n)))!==Object.prototype&&S.next&&(o||l(S)===y||(u?u(S,y):s(S[w])||f(S,w,k)),p(S,A,!0,!0),o&&(h[A]=k)),g&&"values"==m&&P&&"values"!==P.name&&(!o&&b?d(B,"name","values"):(_=!0,T=function(){return a(P,this)})),m)if(O={values:E("values"),keys:v?T:E("keys"),entries:E("entries")},j)for(C in O)(x||_||!(C in B))&&f(B,C,O[C]);else r({target:e,proto:!0,forced:x||_},O);return o&&!j||B[w]===T||f(B,w,T,{name:m}),h[e]=T,O}},function(n,e,t){var r=t(22),a=t(1),o=t(61),i=t(126),s=t(9),c=a([].concat);n.exports=r("Reflect","ownKeys")||function(n){var e=o.f(s(n)),t=i.f;return t?c(e,t(n)):e}},function(n,e,t){"use strict";var r,a,o,i=t(3),s=t(7),c=t(42),l=t(127),u=t(15),p=t(6),d=t(29),f=p("iterator"),m=!1;[].keys&&("next"in(o=[].keys())?(a=l(l(o)))!==Object.prototype&&(r=a):m=!0),null==r||i((function(){var n={};return r[f].call(n)!==n}))?r={}:d&&(r=c(r)),s(r[f])||u(r,f,(function(){return this})),n.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},function(n,e,t){var r=t(3);n.exports=!r((function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}))},function(n,e,t){var r=t(0);n.exports=r.Promise},function(n,e,t){"use strict";var r=t(22),a=t(13),o=t(6),i=t(8),s=o("species");n.exports=function(n){var e=r(n),t=a.f;i&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},function(n,e,t){var r=t(6),a=t(70),o=r("iterator"),i=Array.prototype;n.exports=function(n){return void 0!==n&&(a.Array===n||i[o]===n)}},function(n,e,t){var r=t(14),a=t(9),o=t(55);n.exports=function(n,e,t){var i,s;a(n);try{if(!(i=o(n,"return"))){if("throw"===e)throw t;return t}i=r(i,n)}catch(n){s=!0,i=n}if("throw"===e)throw t;if(s)throw i;return a(i),t}},function(n,e,t){var r=t(6)("iterator"),a=!1;try{var o=0,i={next:function(){return{done:!!o++}},return:function(){a=!0}};i[r]=function(){return this},Array.from(i,(function(){throw 2}))}catch(n){}n.exports=function(n,e){if(!e&&!a)return!1;var t=!1;try{var o={};o[r]=function(){return{next:function(){return{done:t=!0}}}},n(o)}catch(n){}return t}},function(n,e,t){var r=t(0),a=t(94),o=t(89),i=r.TypeError;n.exports=function(n){if(a(n))return n;throw i(o(n)+" is not a constructor")}},function(n,e,t){var r,a,o,i,s=t(0),c=t(43),l=t(63),u=t(7),p=t(12),d=t(3),f=t(164),m=t(72),h=t(86),v=t(154),g=t(176),b=t(95),y=s.setImmediate,x=s.clearImmediate,w=s.process,k=s.Dispatch,j=s.Function,S=s.MessageChannel,O=s.String,C=0,E={};try{r=s.location}catch(n){}var A=function(n){if(p(E,n)){var e=E[n];delete E[n],e()}},_=function(n){return function(){A(n)}},B=function(n){A(n.data)},P=function(n){s.postMessage(O(n),r.protocol+"//"+r.host)};y&&x||(y=function(n){v(arguments.length,1);var e=u(n)?n:j(n),t=m(arguments,1);return E[++C]=function(){c(e,void 0,t)},a(C),C},x=function(n){delete E[n]},b?a=function(n){w.nextTick(_(n))}:k&&k.now?a=function(n){k.now(_(n))}:S&&!g?(i=(o=new S).port2,o.port1.onmessage=B,a=l(i.postMessage,i)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!d(P)?(a=P,s.addEventListener("message",B,!1)):a="onreadystatechange"in h("script")?function(n){f.appendChild(h("script")).onreadystatechange=function(){f.removeChild(this),A(n)}}:function(n){setTimeout(_(n),0)}),n.exports={set:y,clear:x}},function(n,e,t){var r=t(37);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(n,e,t){var r=t(9),a=t(10),o=t(178);n.exports=function(n,e){if(r(n),a(e)&&e.constructor===n)return e;var t=o.f(n);return(0,t.resolve)(e),t.promise}},function(n,e,t){"use strict";var r=t(44),a=function(n){var e,t;this.promise=new n((function(n,r){if(void 0!==e||void 0!==t)throw TypeError("Bad Promise constructor");e=n,t=r})),this.resolve=r(e),this.reject=r(t)};n.exports.f=function(n){return new a(n)}},function(n,e,t){var r=t(1),a=t(62),o=t(11),i=t(19),s=r("".charAt),c=r("".charCodeAt),l=r("".slice),u=function(n){return function(e,t){var r,u,p=o(i(e)),d=a(t),f=p.length;return d<0||d>=f?n?"":void 0:(r=c(p,d))<55296||r>56319||d+1===f||(u=c(p,d+1))<56320||u>57343?n?s(p,d):r:n?l(p,d,d+2):u-56320+(r-55296<<10)+65536}};n.exports={codeAt:u(!1),charAt:u(!0)}},function(n,e){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,e,t){var r=t(86)("span").classList,a=r&&r.constructor&&r.constructor.prototype;n.exports=a===Object.prototype?void 0:a},function(n,e,t){var r=t(2),a=t(8),o=t(166),i=t(25),s=t(39),c=t(73);r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(n){for(var e,t,r=i(n),a=s.f,l=o(r),u={},p=0;l.length>p;)void 0!==(t=a(r,e=l[p++]))&&c(u,e,t);return u}})},function(n,e,t){var r=t(2),a=t(3),o=t(21),i=t(127),s=t(168);r({target:"Object",stat:!0,forced:a((function(){i(1)})),sham:!s},{getPrototypeOf:function(n){return i(o(n))}})},function(n,e,t){"use strict";var r=t(57).forEach,a=t(54)("forEach");n.exports=a?[].forEach:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}},function(n,e,t){var r=t(3);n.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(n,e,t){var r=t(31),a=t(25),o=t(61).f,i=t(133),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(n){return s&&"Window"==r(n)?function(n){try{return o(n)}catch(n){return i(s)}}(n):o(a(n))}},function(n,e,t){var r=t(6);e.f=r},function(n,e,t){var r=t(265),a=t(12),o=t(187),i=t(13).f;n.exports=function(n){var e=r.Symbol||(r.Symbol={});a(e,n)||i(e,n,{value:o.f(n)})}},function(n,e,t){var r=t(2),a=t(266);r({target:"Array",stat:!0,forced:!t(173)((function(n){Array.from(n)}))},{from:a})},function(n,e,t){var r=t(3),a=t(0).RegExp;n.exports=r((function(){var n=a("(?<a>b)","g");return"b"!==n.exec("b").groups.a||"bc"!=="b".replace(n,"$<a>c")}))},function(n,e,t){var r=t(11);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:r(n)}},function(n,e,t){t(2)({target:"Object",stat:!0,sham:!t(8)},{create:t(42)})},function(n,e){n.exports=function(n,e){for(var t=-1,r=e.length,a=n.length;++t<r;)n[a+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var r=t(100),a=t(288),o=t(289),i=t(290),s=t(291),c=t(292);function l(n){var e=this.__data__=new r(n);this.size=e.size}l.prototype.clear=a,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=s,l.prototype.set=c,n.exports=l},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var r=t(66),a=t(141);n.exports=function(n){if(!a(n))return!1;var e=r(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var r=t(309),a=t(59);n.exports=function n(e,t,o,i,s){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!=e&&t!=t:r(e,t,o,i,n,s))}},function(n,e,t){var r=t(201),a=t(312),o=t(202);n.exports=function(n,e,t,i,s,c){var l=1&t,u=n.length,p=e.length;if(u!=p&&!(l&&p>u))return!1;var d=c.get(n),f=c.get(e);if(d&&f)return d==e&&f==n;var m=-1,h=!0,v=2&t?new r:void 0;for(c.set(n,e),c.set(e,n);++m<u;){var g=n[m],b=e[m];if(i)var y=l?i(b,g,m,e,n,c):i(g,b,m,n,e,c);if(void 0!==y){if(y)continue;h=!1;break}if(v){if(!a(e,(function(n,e){if(!o(v,e)&&(g===n||s(g,n,t,i,c)))return v.push(e)}))){h=!1;break}}else if(g!==b&&!s(g,b,t,i,c)){h=!1;break}}return c.delete(n),c.delete(e),h}},function(n,e,t){var r=t(142),a=t(310),o=t(311);function i(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new r;++e<t;)this.add(n[e])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,n.exports=i},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var r=t(322),a=t(328),o=t(207);n.exports=function(n){return o(n)?r(n):a(n)}},function(n,e,t){(function(n){var r=t(40),a=t(324),o=e&&!e.nodeType&&e,i=o&&"object"==typeof n&&n&&!n.nodeType&&n,s=i&&i.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||a;n.exports=c}).call(this,t(150)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var r=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var r=t(325),a=t(326),o=t(327),i=o&&o.isTypedArray,s=i?a(i):r;n.exports=s},function(n,e,t){var r=t(197),a=t(144);n.exports=function(n){return null!=n&&a(n.length)&&!r(n)}},function(n,e,t){var r=t(49)(t(40),"Set");n.exports=r},function(n,e,t){var r=t(141);n.exports=function(n){return n==n&&!r(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var r=t(212),a=t(104);n.exports=function(n,e){for(var t=0,o=(e=r(e,n)).length;null!=n&&t<o;)n=n[a(e[t++])];return t&&t==o?n:void 0}},function(n,e,t){var r=t(36),a=t(145),o=t(339),i=t(342);n.exports=function(n,e){return r(n)?n:a(n,e)?[n]:o(i(n))}},function(n,e,t){"use strict";var r=t(2),a=t(372).start;r({target:"String",proto:!0,forced:t(374)},{padStart:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){},function(n,e,t){},function(n,e,t){t(2)({target:"Object",stat:!0},{setPrototypeOf:t(71)})},function(n,e,t){var r=t(2),a=t(22),o=t(43),i=t(385),s=t(174),c=t(9),l=t(10),u=t(42),p=t(3),d=a("Reflect","construct"),f=Object.prototype,m=[].push,h=p((function(){function n(){}return!(d((function(){}),[],n)instanceof n)})),v=!p((function(){d((function(){}))})),g=h||v;r({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(n,e){s(n),c(e);var t=arguments.length<3?n:s(arguments[2]);if(v&&!h)return d(n,e,t);if(n==t){switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3])}var r=[null];return o(m,r,e),new(o(i,n,r))}var a=t.prototype,p=u(l(a)?a:f),g=o(n,p,e);return l(g)?g:p}})},function(n,e,t){var r=t(2),a=t(0),o=t(64);r({global:!0},{Reflect:{}}),o(a.Reflect,"Reflect",!0)},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(275),a=t(280),o=t(351),i=t(359),s=t(368),c=t(234),l=o((function(n){var e=c(n);return s(e)&&(e=void 0),i(r(n,1,s,!0),a(e,2))}));n.exports=l},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;n.exports=function(n){var e,t=""+n,a=r.exec(t);if(!a)return t;var o="",i=0,s=0;for(i=a.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==i&&(o+=t.substring(s,i)),s=i+1,o+=e}return s!==i?o+t.substring(s,i):o}},function(n,e,t){"use strict";t.r(e);var r={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},a=(t(375),t(41)),o=Object(a.a)(r,(function(){var n=this.$createElement;return(this._self._c||n)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);e.default=o.exports},function(n,e,t){"use strict";t.r(e);t(26),t(5),t(27),t(45),t(34);var r={name:"CodeGroup",data:function(){return{codeTabs:[],activeCodeTabIndex:-1}},watch:{activeCodeTabIndex:function(n){this.codeTabs.forEach((function(n){n.elm.classList.remove("theme-code-block__active")})),this.codeTabs[n].elm.classList.add("theme-code-block__active")}},mounted:function(){var n=this;this.codeTabs=(this.$slots.default||[]).filter((function(n){return Boolean(n.componentOptions)})).map((function(e,t){return""===e.componentOptions.propsData.active&&(n.activeCodeTabIndex=t),{title:e.componentOptions.propsData.title,elm:e.elm}})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab:function(n){this.activeCodeTabIndex=n}}},a=(t(376),t(41)),o=Object(a.a)(r,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"theme-code-group"},[t("div",{staticClass:"theme-code-group__nav"},[t("ul",{staticClass:"theme-code-group__ul"},n._l(n.codeTabs,(function(e,r){return t("li",{key:e.title,staticClass:"theme-code-group__li"},[t("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":r===n.activeCodeTabIndex},on:{click:function(e){return n.changeCodeTab(r)}}},[n._v("\n            "+n._s(e.title)+"\n          ")])])})),0)]),n._v(" "),n._t("default"),n._v(" "),n.codeTabs.length<1?t("pre",{staticClass:"pre-blank"},[n._v("// Make sure to add code blocks to your code group")]):n._e()],2)}),[],!1,null,"2f5f1757",null);e.default=o.exports},function(n,e,t){"use strict";var r=t(43),a=t(14),o=t(1),i=t(114),s=t(131),c=t(9),l=t(19),u=t(129),p=t(138),d=t(47),f=t(11),m=t(55),h=t(133),v=t(115),g=t(98),b=t(99),y=t(3),x=b.UNSUPPORTED_Y,w=Math.min,k=[].push,j=o(/./.exec),S=o(k),O=o("".slice);i("split",(function(n,e,t){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(n,t){var o=f(l(this)),i=void 0===t?4294967295:t>>>0;if(0===i)return[];if(void 0===n)return[o];if(!s(n))return a(e,o,n,i);for(var c,u,p,d=[],m=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(n.sticky?"y":""),v=0,b=new RegExp(n.source,m+"g");(c=a(g,b,o))&&!((u=b.lastIndex)>v&&(S(d,O(o,v,c.index)),c.length>1&&c.index<o.length&&r(k,d,h(c,1)),p=c[0].length,v=u,d.length>=i));)b.lastIndex===c.index&&b.lastIndex++;return v===o.length?!p&&j(b,"")||S(d,""):S(d,O(o,v)),d.length>i?h(d,0,i):d}:"0".split(void 0,0).length?function(n,t){return void 0===n&&0===t?[]:a(e,this,n,t)}:e,[function(e,t){var r=l(this),i=null==e?void 0:m(e,n);return i?a(i,e,r,t):a(o,f(r),e,t)},function(n,r){var a=c(this),i=f(n),s=t(o,a,i,r,o!==e);if(s.done)return s.value;var l=u(a,RegExp),m=a.unicode,h=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(x?"g":"y"),g=new l(x?"^(?:"+a.source+")":a,h),b=void 0===r?4294967295:r>>>0;if(0===b)return[];if(0===i.length)return null===v(g,i)?[i]:[];for(var y=0,k=0,j=[];k<i.length;){g.lastIndex=x?0:k;var C,E=v(g,x?O(i,k):i);if(null===E||(C=w(d(g.lastIndex+(x?k:0)),i.length))===y)k=p(i,k,m);else{if(S(j,O(i,y,k)),j.length===b)return j;for(var A=1;A<=E.length-1;A++)if(S(j,E[A]),j.length===b)return j;k=y=C}}return S(j,O(i,y)),j}]}),!!y((function(){var n=/(?:)/,e=n.exec;n.exec=function(){return e.apply(this,arguments)};var t="ab".split(n);return 2!==t.length||"a"!==t[0]||"b"!==t[1]})),x)},function(n,e,t){"use strict";var r=t(14),a=t(114),o=t(9),i=t(47),s=t(11),c=t(19),l=t(55),u=t(138),p=t(115);a("match",(function(n,e,t){return[function(e){var t=c(this),a=null==e?void 0:l(e,n);return a?r(a,e,t):new RegExp(e)[n](s(t))},function(n){var r=o(this),a=s(n),c=t(e,r,a);if(c.done)return c.value;if(!r.global)return p(r,a);var l=r.unicode;r.lastIndex=0;for(var d,f=[],m=0;null!==(d=p(r,a));){var h=s(d[0]);f[m]=h,""===h&&(r.lastIndex=u(a,i(r.lastIndex),l)),m++}return 0===m?null:f}]}))},function(n,e,t){var r=t(1),a=t(19),o=t(11),i=t(228),s=r("".replace),c="["+i+"]",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),p=function(n){return function(e){var t=o(a(e));return 1&n&&(t=s(t,l,"")),2&n&&(t=s(t,u,"")),t}};n.exports={start:p(1),end:p(2),trim:p(3)}},function(n,e){n.exports="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff"},function(n,e,t){"use strict";var r=t(167).IteratorPrototype,a=t(42),o=t(56),i=t(64),s=t(70),c=function(){return this};n.exports=function(n,e,t,l){var u=e+" Iterator";return n.prototype=a(r,{next:o(+!l,t)}),i(n,u,!1,!0),s[u]=c,n}},function(n,e,t){var r=t(15);n.exports=function(n,e,t){for(var a in e)r(n,a,e[a],t);return n}},function(n,e,t){var r=t(0),a=t(38),o=r.TypeError;n.exports=function(n,e){if(a(e,n))return n;throw o("Incorrect invocation")}},function(n,e,t){"use strict";var r=t(2),a=t(121).includes,o=t(112);r({target:"Array",proto:!0},{includes:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(130),i=t(19),s=t(11),c=t(132),l=a("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(n){return!!~l(s(i(this)),s(o(n)),arguments.length>1?arguments[1]:void 0)}})},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){var r=t(133),a=Math.floor,o=function(n,e){var t=n.length,c=a(t/2);return t<8?i(n,e):s(n,o(r(n,0,c),e),o(r(n,c),e),e)},i=function(n,e){for(var t,r,a=n.length,o=1;o<a;){for(r=o,t=n[o];r&&e(n[r-1],t)>0;)n[r]=n[--r];r!==o++&&(n[r]=t)}return n},s=function(n,e,t,r){for(var a=e.length,o=t.length,i=0,s=0;i<a||s<o;)n[i+s]=i<a&&s<o?r(e[i],t[s])<=0?e[i++]:t[s++]:i<a?e[i++]:t[s++];return n};n.exports=o},function(n,e,t){var r=t(1),a=t(19),o=t(11),i=/"/g,s=r("".replace);n.exports=function(n,e,t,r){var c=o(a(n)),l="<"+e;return""!==t&&(l+=" "+t+'="'+s(o(r),i,"&quot;")+'"'),l+">"+c+"</"+e+">"}},function(n,e,t){var r=t(3);n.exports=function(n){return r((function(){var e=""[n]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},function(n,e,t){var r=t(8),a=t(0),o=t(1),i=t(93),s=t(137),c=t(32),l=t(13).f,u=t(61).f,p=t(38),d=t(131),f=t(11),m=t(135),h=t(99),v=t(15),g=t(3),b=t(12),y=t(35).enforce,x=t(170),w=t(6),k=t(136),j=t(190),S=w("match"),O=a.RegExp,C=O.prototype,E=a.SyntaxError,A=o(m),_=o(C.exec),B=o("".charAt),P=o("".replace),T=o("".indexOf),I=o("".slice),M=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,D=/a/g,L=/a/g,q=new O(D)!==D,R=h.MISSED_STICKY,N=h.UNSUPPORTED_Y,z=r&&(!q||R||k||j||g((function(){return L[S]=!1,O(D)!=D||O(L)==L||"/a/i"!=O(D,"i")})));if(i("RegExp",z)){for(var $=function(n,e){var t,r,a,o,i,l,u=p(C,this),m=d(n),h=void 0===e,v=[],g=n;if(!u&&m&&h&&n.constructor===$)return n;if((m||p(C,n))&&(n=n.source,h&&(e="flags"in g?g.flags:A(g))),n=void 0===n?"":f(n),e=void 0===e?"":f(e),g=n,k&&"dotAll"in D&&(r=!!e&&T(e,"s")>-1)&&(e=P(e,/s/g,"")),t=e,R&&"sticky"in D&&(a=!!e&&T(e,"y")>-1)&&N&&(e=P(e,/y/g,"")),j&&(n=(o=function(n){for(var e,t=n.length,r=0,a="",o=[],i={},s=!1,c=!1,l=0,u="";r<=t;r++){if("\\"===(e=B(n,r)))e+=B(n,++r);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:_(M,I(n,r+1))&&(r+=2,c=!0),a+=e,l++;continue;case">"===e&&c:if(""===u||b(i,u))throw new E("Invalid capture group name");i[u]=!0,o[o.length]=[u,l],c=!1,u="";continue}c?u+=e:a+=e}return[a,o]}(n))[0],v=o[1]),i=s(O(n,e),u?this:C,$),(r||a||v.length)&&(l=y(i),r&&(l.dotAll=!0,l.raw=$(function(n){for(var e,t=n.length,r=0,a="",o=!1;r<=t;r++)"\\"!==(e=B(n,r))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),a+=e):a+="[\\s\\S]":a+=e+B(n,++r);return a}(n),t)),a&&(l.sticky=!0),v.length&&(l.groups=v)),n!==g)try{c(i,"source",""===g?"(?:)":g)}catch(n){}return i},F=function(n){n in $||l($,n,{configurable:!0,get:function(){return O[n]},set:function(e){O[n]=e}})},U=u(O),V=0;U.length>V;)F(U[V++]);C.constructor=$,$.prototype=C,v(a,"RegExp",$)}x("RegExp")},function(n,e,t){var r=t(0),a=t(8),o=t(136),i=t(31),s=t(13).f,c=t(35).get,l=RegExp.prototype,u=r.TypeError;a&&o&&s(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===i(this))return!!c(this).dotAll;throw u("Incompatible receiver, RegExp required")}}})},function(n,e,t){n.exports=t(388)},function(n,e,t){var r=t(0),a=t(14),o=t(7),i=t(10),s=r.TypeError;n.exports=function(n,e){var t,r;if("string"===e&&o(t=n.toString)&&!i(r=a(t,n)))return r;if(o(t=n.valueOf)&&!i(r=a(t,n)))return r;if("string"!==e&&o(t=n.toString)&&!i(r=a(t,n)))return r;throw s("Can't convert object to primitive value")}},function(n,e,t){var r=t(0),a=t(7),o=t(92),i=r.WeakMap;n.exports=a(i)&&/native code/.test(o(i))},function(n,e,t){var r=t(0),a=t(7),o=r.String,i=r.TypeError;n.exports=function(n){if("object"==typeof n||a(n))return n;throw i("Can't set "+o(n)+" as a prototype")}},function(n,e,t){"use strict";var r,a,o,i,s=t(2),c=t(29),l=t(0),u=t(22),p=t(14),d=t(169),f=t(15),m=t(230),h=t(71),v=t(64),g=t(170),b=t(44),y=t(7),x=t(10),w=t(231),k=t(92),j=t(245),S=t(173),O=t(129),C=t(175).set,E=t(246),A=t(177),_=t(249),B=t(178),P=t(250),T=t(251),I=t(35),M=t(93),D=t(6),L=t(252),q=t(95),R=t(60),N=D("species"),z="Promise",$=I.getterFor(z),F=I.set,U=I.getterFor(z),V=d&&d.prototype,H=d,W=V,G=l.TypeError,K=l.document,X=l.process,J=B.f,Q=J,Y=!!(K&&K.createEvent&&l.dispatchEvent),Z=y(l.PromiseRejectionEvent),nn=!1,en=M(z,(function(){var n=k(H),e=n!==String(H);if(!e&&66===R)return!0;if(c&&!W.finally)return!0;if(R>=51&&/native code/.test(n))return!1;var t=new H((function(n){n(1)})),r=function(n){n((function(){}),(function(){}))};return(t.constructor={})[N]=r,!(nn=t.then((function(){}))instanceof r)||!e&&L&&!Z})),tn=en||!S((function(n){H.all(n).catch((function(){}))})),rn=function(n){var e;return!(!x(n)||!y(e=n.then))&&e},an=function(n,e){var t,r,a,o=e.value,i=1==e.state,s=i?n.ok:n.fail,c=n.resolve,l=n.reject,u=n.domain;try{s?(i||(2===e.rejection&&un(e),e.rejection=1),!0===s?t=o:(u&&u.enter(),t=s(o),u&&(u.exit(),a=!0)),t===n.promise?l(G("Promise-chain cycle")):(r=rn(t))?p(r,t,c,l):c(t)):l(o)}catch(n){u&&!a&&u.exit(),l(n)}},on=function(n,e){n.notified||(n.notified=!0,E((function(){for(var t,r=n.reactions;t=r.get();)an(t,n);n.notified=!1,e&&!n.rejection&&cn(n)})))},sn=function(n,e,t){var r,a;Y?((r=K.createEvent("Event")).promise=e,r.reason=t,r.initEvent(n,!1,!0),l.dispatchEvent(r)):r={promise:e,reason:t},!Z&&(a=l["on"+n])?a(r):"unhandledrejection"===n&&_("Unhandled promise rejection",t)},cn=function(n){p(C,l,(function(){var e,t=n.facade,r=n.value;if(ln(n)&&(e=P((function(){q?X.emit("unhandledRejection",r,t):sn("unhandledrejection",t,r)})),n.rejection=q||ln(n)?2:1,e.error))throw e.value}))},ln=function(n){return 1!==n.rejection&&!n.parent},un=function(n){p(C,l,(function(){var e=n.facade;q?X.emit("rejectionHandled",e):sn("rejectionhandled",e,n.value)}))},pn=function(n,e,t){return function(r){n(e,r,t)}},dn=function(n,e,t){n.done||(n.done=!0,t&&(n=t),n.value=e,n.state=2,on(n,!0))},fn=function(n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(n.facade===e)throw G("Promise can't be resolved itself");var r=rn(e);r?E((function(){var t={done:!1};try{p(r,e,pn(fn,t,n),pn(dn,t,n))}catch(e){dn(t,e,n)}})):(n.value=e,n.state=1,on(n,!1))}catch(e){dn({done:!1},e,n)}}};if(en&&(W=(H=function(n){w(this,W),b(n),p(r,this);var e=$(this);try{n(pn(fn,e),pn(dn,e))}catch(n){dn(e,n)}}).prototype,(r=function(n){F(this,{type:z,done:!1,notified:!1,parent:!1,reactions:new T,rejection:!1,state:0,value:void 0})}).prototype=m(W,{then:function(n,e){var t=U(this),r=J(O(this,H));return t.parent=!0,r.ok=!y(n)||n,r.fail=y(e)&&e,r.domain=q?X.domain:void 0,0==t.state?t.reactions.add(r):E((function(){an(r,t)})),r.promise},catch:function(n){return this.then(void 0,n)}}),a=function(){var n=new r,e=$(n);this.promise=n,this.resolve=pn(fn,e),this.reject=pn(dn,e)},B.f=J=function(n){return n===H||n===o?new a(n):Q(n)},!c&&y(d)&&V!==Object.prototype)){i=V.then,nn||(f(V,"then",(function(n,e){var t=this;return new H((function(n,e){p(i,t,n,e)})).then(n,e)}),{unsafe:!0}),f(V,"catch",W.catch,{unsafe:!0}));try{delete V.constructor}catch(n){}h&&h(V,W)}s({global:!0,wrap:!0,forced:en},{Promise:H}),v(H,z,!1,!0),g(z),o=u(z),s({target:z,stat:!0,forced:en},{reject:function(n){var e=J(this);return p(e.reject,void 0,n),e.promise}}),s({target:z,stat:!0,forced:c||en},{resolve:function(n){return A(c&&this===o?H:this,n)}}),s({target:z,stat:!0,forced:tn},{all:function(n){var e=this,t=J(e),r=t.resolve,a=t.reject,o=P((function(){var t=b(e.resolve),o=[],i=0,s=1;j(n,(function(n){var c=i++,l=!1;s++,p(t,e,n).then((function(n){l||(l=!0,o[c]=n,--s||r(o))}),a)})),--s||r(o)}));return o.error&&a(o.value),t.promise},race:function(n){var e=this,t=J(e),r=t.reject,a=P((function(){var a=b(e.resolve);j(n,(function(n){p(a,e,n).then(t.resolve,r)}))}));return a.error&&r(a.value),t.promise}})},function(n,e,t){var r=t(0),a=t(63),o=t(14),i=t(9),s=t(89),c=t(171),l=t(33),u=t(38),p=t(153),d=t(113),f=t(172),m=r.TypeError,h=function(n,e){this.stopped=n,this.result=e},v=h.prototype;n.exports=function(n,e,t){var r,g,b,y,x,w,k,j=t&&t.that,S=!(!t||!t.AS_ENTRIES),O=!(!t||!t.IS_ITERATOR),C=!(!t||!t.INTERRUPTED),E=a(e,j),A=function(n){return r&&f(r,"normal",n),new h(!0,n)},_=function(n){return S?(i(n),C?E(n[0],n[1],A):E(n[0],n[1])):C?E(n,A):E(n)};if(O)r=n;else{if(!(g=d(n)))throw m(s(n)+" is not iterable");if(c(g)){for(b=0,y=l(n);y>b;b++)if((x=_(n[b]))&&u(v,x))return x;return new h(!1)}r=p(n,g)}for(w=r.next;!(k=o(w,r)).done;){try{x=_(k.value)}catch(n){f(r,"throw",n)}if("object"==typeof x&&x&&u(v,x))return x}return new h(!1)}},function(n,e,t){var r,a,o,i,s,c,l,u,p=t(0),d=t(63),f=t(39).f,m=t(175).set,h=t(176),v=t(247),g=t(248),b=t(95),y=p.MutationObserver||p.WebKitMutationObserver,x=p.document,w=p.process,k=p.Promise,j=f(p,"queueMicrotask"),S=j&&j.value;S||(r=function(){var n,e;for(b&&(n=w.domain)&&n.exit();a;){e=a.fn,a=a.next;try{e()}catch(n){throw a?i():o=void 0,n}}o=void 0,n&&n.enter()},h||b||g||!y||!x?!v&&k&&k.resolve?((l=k.resolve(void 0)).constructor=k,u=d(l.then,l),i=function(){u(r)}):b?i=function(){w.nextTick(r)}:(m=d(m,p),i=function(){m(r)}):(s=!0,c=x.createTextNode(""),new y(r).observe(c,{characterData:!0}),i=function(){c.data=s=!s})),n.exports=S||function(n){var e={fn:n,next:void 0};o&&(o.next=e),a||(a=e,i()),o=e}},function(n,e,t){var r=t(37),a=t(0);n.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==a.Pebble},function(n,e,t){var r=t(37);n.exports=/web0s(?!.*chrome)/i.test(r)},function(n,e,t){var r=t(0);n.exports=function(n,e){var t=r.console;t&&t.error&&(1==arguments.length?t.error(n):t.error(n,e))}},function(n,e){n.exports=function(n){try{return{error:!1,value:n()}}catch(n){return{error:!0,value:n}}}},function(n,e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(n){var e={item:n,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},n.exports=t},function(n,e){n.exports="object"==typeof window},function(n,e,t){var r=t(2),a=t(254);r({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},function(n,e,t){"use strict";var r=t(8),a=t(1),o=t(14),i=t(3),s=t(90),c=t(126),l=t(124),u=t(21),p=t(67),d=Object.assign,f=Object.defineProperty,m=a([].concat);n.exports=!d||i((function(){if(r&&1!==d({b:1},d(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},e={},t=Symbol();return n[t]=7,"abcdefghijklmnopqrst".split("").forEach((function(n){e[n]=n})),7!=d({},n)[t]||"abcdefghijklmnopqrst"!=s(d({},e)).join("")}))?function(n,e){for(var t=u(n),a=arguments.length,i=1,d=c.f,f=l.f;a>i;)for(var h,v=p(arguments[i++]),g=d?m(s(v),d(v)):s(v),b=g.length,y=0;b>y;)h=g[y++],r&&!o(f,v,h)||(t[h]=v[h]);return t}:d},function(n,e,t){"use strict";var r=t(2),a=t(29),o=t(169),i=t(3),s=t(22),c=t(7),l=t(129),u=t(177),p=t(15);if(r({target:"Promise",proto:!0,real:!0,forced:!!o&&i((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(n){var e=l(this,s("Promise")),t=c(n);return this.then(t?function(t){return u(e,n()).then((function(){return t}))}:n,t?function(t){return u(e,n()).then((function(){throw t}))}:n)}}),!a&&c(o)){var d=s("Promise").prototype.finally;o.prototype.finally!==d&&p(o.prototype,"finally",d,{unsafe:!0})}},function(n,e,t){"use strict";var r=t(128),a=t(82);n.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},function(n,e,t){var r=t(0),a=t(65),o=t(94),i=t(10),s=t(6)("species"),c=r.Array;n.exports=function(n){var e;return a(n)&&(e=n.constructor,(o(e)&&(e===c||a(e.prototype))||i(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?c:e}},function(n,e,t){"use strict";var r=t(2),a=t(259).left,o=t(54),i=t(60),s=t(95);r({target:"Array",proto:!0,forced:!o("reduce")||!s&&i>79&&i<83},{reduce:function(n){var e=arguments.length;return a(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(0),a=t(44),o=t(21),i=t(67),s=t(33),c=r.TypeError,l=function(n){return function(e,t,r,l){a(t);var u=o(e),p=i(u),d=s(u),f=n?d-1:0,m=n?-1:1;if(r<2)for(;;){if(f in p){l=p[f],f+=m;break}if(f+=m,n?f<0:d<=f)throw c("Reduce of empty array with no initial value")}for(;n?f>=0:d>f;f+=m)f in p&&(l=t(l,p[f],f,u));return l}};n.exports={left:l(!1),right:l(!0)}},function(n,e,t){"use strict";var r,a=t(2),o=t(1),i=t(39).f,s=t(47),c=t(11),l=t(130),u=t(19),p=t(132),d=t(29),f=o("".startsWith),m=o("".slice),h=Math.min,v=p("startsWith");a({target:"String",proto:!0,forced:!!(d||v||(r=i(String.prototype,"startsWith"),!r||r.writable))&&!v},{startsWith:function(n){var e=c(u(this));l(n);var t=s(h(arguments.length>1?arguments[1]:void 0,e.length)),r=c(n);return f?f(e,r,t):m(e,t,t+r.length)===r}})},function(n,e,t){var r=t(2),a=t(185),o=t(3),i=t(10),s=t(262).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){c(1)})),sham:!a},{freeze:function(n){return c&&i(n)?c(s(n)):n}})},function(n,e,t){var r=t(2),a=t(1),o=t(69),i=t(10),s=t(12),c=t(13).f,l=t(61),u=t(186),p=t(263),d=t(85),f=t(185),m=!1,h=d("meta"),v=0,g=function(n){c(n,h,{value:{objectID:"O"+v++,weakData:{}}})},b=n.exports={enable:function(){b.enable=function(){},m=!0;var n=l.f,e=a([].splice),t={};t[h]=1,n(t).length&&(l.f=function(t){for(var r=n(t),a=0,o=r.length;a<o;a++)if(r[a]===h){e(r,a,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(n,e){if(!i(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!s(n,h)){if(!p(n))return"F";if(!e)return"E";g(n)}return n[h].objectID},getWeakData:function(n,e){if(!s(n,h)){if(!p(n))return!0;if(!e)return!1;g(n)}return n[h].weakData},onFreeze:function(n){return f&&m&&p(n)&&!s(n,h)&&g(n),n}};o[h]=!0},function(n,e,t){var r=t(3),a=t(10),o=t(31),i=t(264),s=Object.isExtensible,c=r((function(){s(1)}));n.exports=c||i?function(n){return!!a(n)&&((!i||"ArrayBuffer"!=o(n))&&(!s||s(n)))}:s},function(n,e,t){var r=t(3);n.exports=r((function(){if("function"==typeof ArrayBuffer){var n=new ArrayBuffer(8);Object.isExtensible(n)&&Object.defineProperty(n,"a",{value:8})}}))},function(n,e,t){var r=t(0);n.exports=r},function(n,e,t){"use strict";var r=t(0),a=t(63),o=t(14),i=t(21),s=t(267),c=t(171),l=t(94),u=t(33),p=t(73),d=t(153),f=t(113),m=r.Array;n.exports=function(n){var e=i(n),t=l(this),r=arguments.length,h=r>1?arguments[1]:void 0,v=void 0!==h;v&&(h=a(h,r>2?arguments[2]:void 0));var g,b,y,x,w,k,j=f(e),S=0;if(!j||this==m&&c(j))for(g=u(e),b=t?new this(g):m(g);g>S;S++)k=v?h(e[S],S):e[S],p(b,S,k);else for(w=(x=d(e,j)).next,b=t?new this:[];!(y=o(w,x)).done;S++)k=v?s(x,h,[y.value,S],!0):y.value,p(b,S,k);return b.length=S,b}},function(n,e,t){var r=t(9),a=t(172);n.exports=function(n,e,t,o){try{return o?e(r(t)[0],t[1]):e(t)}catch(e){a(n,"throw",e)}}},function(n,e,t){"use strict";var r=t(22),a=t(12),o=t(32),i=t(38),s=t(71),c=t(125),l=t(137),u=t(191),p=t(269),d=t(270),f=t(271),m=t(29);n.exports=function(n,e,t,h){var v=h?2:1,g=n.split("."),b=g[g.length-1],y=r.apply(null,g);if(y){var x=y.prototype;if(!m&&a(x,"cause")&&delete x.cause,!t)return y;var w=r("Error"),k=e((function(n,e){var t=u(h?e:n,void 0),r=h?new y(n):new y;return void 0!==t&&o(r,"message",t),f&&o(r,"stack",d(r.stack,2)),this&&i(x,this)&&l(r,this,k),arguments.length>v&&p(r,arguments[v]),r}));if(k.prototype=x,"Error"!==b&&(s?s(k,w):c(k,w,{name:!0})),c(k,y),!m)try{x.name!==b&&o(x,"name",b),x.constructor=k}catch(n){}return k}}},function(n,e,t){var r=t(10),a=t(32);n.exports=function(n,e){r(e)&&"cause"in e&&a(n,"cause",e.cause)}},function(n,e,t){var r=t(1)("".replace),a=String(Error("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,i=o.test(a);n.exports=function(n,e){if(i&&"string"==typeof n)for(;e--;)n=r(n,o,"");return n}},function(n,e,t){var r=t(3),a=t(56);n.exports=!r((function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",a(1,7)),7!==n.stack)}))},function(n,e,t){"use strict";var r=t(8),a=t(3),o=t(9),i=t(42),s=t(191),c=Error.prototype.toString,l=a((function(){if(r){var n=i(Object.defineProperty({},"name",{get:function(){return this===n}}));if("true"!==c.call(n))return!0}return"2: 1"!==c.call({message:1,name:2})||"Error"!==c.call({})}));n.exports=l?function(){var n=o(this),e=s(n.name,"Error"),t=s(n.message);return e?t?e+": "+t:e:t}:c},function(n,e,t){var r=t(1),a=t(21),o=Math.floor,i=r("".charAt),s=r("".replace),c=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;n.exports=function(n,e,t,r,p,d){var f=t+n.length,m=r.length,h=u;return void 0!==p&&(p=a(p),h=l),s(d,h,(function(a,s){var l;switch(i(s,0)){case"$":return"$";case"&":return n;case"`":return c(e,0,t);case"'":return c(e,f);case"<":l=p[c(s,1,-1)];break;default:var u=+s;if(0===u)return a;if(u>m){var d=o(u/10);return 0===d?a:d<=m?void 0===r[d-1]?i(s,1):r[d-1]+i(s,1):a}l=r[u-1]}return void 0===l?"":l}))}},function(n,e,t){var r=t(2),a=t(0),o=t(22),i=t(43),s=t(1),c=t(3),l=a.Array,u=o("JSON","stringify"),p=s(/./.exec),d=s("".charAt),f=s("".charCodeAt),m=s("".replace),h=s(1..toString),v=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,y=function(n,e,t){var r=d(t,e-1),a=d(t,e+1);return p(g,n)&&!p(b,a)||p(b,n)&&!p(g,r)?"\\u"+h(f(n,0),16):n},x=c((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&r({target:"JSON",stat:!0,forced:x},{stringify:function(n,e,t){for(var r=0,a=arguments.length,o=l(a);r<a;r++)o[r]=arguments[r];var s=i(u,null,o);return"string"==typeof s?m(s,v,y):s}})},function(n,e,t){var r=t(193),a=t(276);n.exports=function n(e,t,o,i,s){var c=-1,l=e.length;for(o||(o=a),s||(s=[]);++c<l;){var u=e[c];t>0&&o(u)?t>1?n(u,t-1,o,i,s):r(s,u):i||(s[s.length]=u)}return s}},function(n,e,t){var r=t(75),a=t(139),o=t(36),i=r?r.isConcatSpreadable:void 0;n.exports=function(n){return o(n)||a(n)||!!(i&&n&&n[i])}},function(n,e,t){var r=t(66),a=t(59);n.exports=function(n){return a(n)&&"[object Arguments]"==r(n)}},function(n,e,t){var r=t(75),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=r?r.toStringTag:void 0;n.exports=function(n){var e=o.call(n,s),t=n[s];try{n[s]=void 0;var r=!0}catch(n){}var a=i.call(n);return r&&(e?n[s]=t:delete n[s]),a}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var r=t(281),a=t(337),o=t(147),i=t(36),s=t(348);n.exports=function(n){return"function"==typeof n?n:null==n?o:"object"==typeof n?i(n)?a(n[0],n[1]):r(n):s(n)}},function(n,e,t){var r=t(282),a=t(336),o=t(210);n.exports=function(n){var e=a(n);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(t){return t===n||r(t,n,e)}}},function(n,e,t){var r=t(195),a=t(199);n.exports=function(n,e,t,o){var i=t.length,s=i,c=!o;if(null==n)return!s;for(n=Object(n);i--;){var l=t[i];if(c&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++i<s;){var u=(l=t[i])[0],p=n[u],d=l[1];if(c&&l[2]){if(void 0===p&&!(u in n))return!1}else{var f=new r;if(o)var m=o(p,d,u,n,e,f);if(!(void 0===m?a(d,p,3,o,f):m))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var r=t(101),a=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=r(e,n);return!(t<0)&&(t==e.length-1?e.pop():a.call(e,t,1),--this.size,!0)}},function(n,e,t){var r=t(101);n.exports=function(n){var e=this.__data__,t=r(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var r=t(101);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,e,t){var r=t(101);n.exports=function(n,e){var t=this.__data__,a=r(t,n);return a<0?(++this.size,t.push([n,e])):t[a][1]=e,this}},function(n,e,t){var r=t(100);n.exports=function(){this.__data__=new r,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(100),a=t(140),o=t(142);n.exports=function(n,e){var t=this.__data__;if(t instanceof r){var i=t.__data__;if(!a||i.length<199)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new o(i)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var r=t(197),a=t(294),o=t(141),i=t(198),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,p=l.hasOwnProperty,d=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!o(n)||a(n))&&(r(n)?d:s).test(i(n))}},function(n,e,t){var r,a=t(295),o=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!o&&o in n}},function(n,e,t){var r=t(40)["__core-js_shared__"];n.exports=r},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var r=t(298),a=t(100),o=t(140);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||a),string:new r}}},function(n,e,t){var r=t(299),a=t(300),o=t(301),i=t(302),s=t(303);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(102);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var r=t(102),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(r){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return a.call(e,n)?e[n]:void 0}},function(n,e,t){var r=t(102),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return r?void 0!==e[n]:a.call(e,n)}},function(n,e,t){var r=t(102);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var r=t(103);n.exports=function(n){var e=r(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var r=t(103);n.exports=function(n){return r(this,n).get(n)}},function(n,e,t){var r=t(103);n.exports=function(n){return r(this,n).has(n)}},function(n,e,t){var r=t(103);n.exports=function(n,e){var t=r(this,n),a=t.size;return t.set(n,e),this.size+=t.size==a?0:1,this}},function(n,e,t){var r=t(195),a=t(200),o=t(313),i=t(316),s=t(332),c=t(36),l=t(204),u=t(206),p="[object Object]",d=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,f,m,h){var v=c(n),g=c(e),b=v?"[object Array]":s(n),y=g?"[object Array]":s(e),x=(b="[object Arguments]"==b?p:b)==p,w=(y="[object Arguments]"==y?p:y)==p,k=b==y;if(k&&l(n)){if(!l(e))return!1;v=!0,x=!1}if(k&&!x)return h||(h=new r),v||u(n)?a(n,e,t,f,m,h):o(n,e,b,t,f,m,h);if(!(1&t)){var j=x&&d.call(n,"__wrapped__"),S=w&&d.call(e,"__wrapped__");if(j||S){var O=j?n.value():n,C=S?e.value():e;return h||(h=new r),m(O,C,t,f,h)}}return!!k&&(h||(h=new r),i(n,e,t,f,m,h))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var r=t(75),a=t(314),o=t(196),i=t(200),s=t(315),c=t(143),l=r?r.prototype:void 0,u=l?l.valueOf:void 0;n.exports=function(n,e,t,r,l,p,d){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!p(new a(n),new a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var f=s;case"[object Set]":var m=1&r;if(f||(f=c),n.size!=e.size&&!m)return!1;var h=d.get(n);if(h)return h==e;r|=2,d.set(n,e);var v=i(f(n),f(e),r,l,p,d);return d.delete(n),v;case"[object Symbol]":if(u)return u.call(n)==u.call(e)}return!1}},function(n,e,t){var r=t(40).Uint8Array;n.exports=r},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,r){t[++e]=[r,n]})),t}},function(n,e,t){var r=t(317),a=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,o,i,s){var c=1&t,l=r(n),u=l.length;if(u!=r(e).length&&!c)return!1;for(var p=u;p--;){var d=l[p];if(!(c?d in e:a.call(e,d)))return!1}var f=s.get(n),m=s.get(e);if(f&&m)return f==e&&m==n;var h=!0;s.set(n,e),s.set(e,n);for(var v=c;++p<u;){var g=n[d=l[p]],b=e[d];if(o)var y=c?o(b,g,d,e,n,s):o(g,b,d,n,e,s);if(!(void 0===y?g===b||i(g,b,t,o,s):y)){h=!1;break}v||(v="constructor"==d)}if(h&&!v){var x=n.constructor,w=e.constructor;x==w||!("constructor"in n)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(h=!1)}return s.delete(n),s.delete(e),h}},function(n,e,t){var r=t(318),a=t(319),o=t(203);n.exports=function(n){return r(n,o,a)}},function(n,e,t){var r=t(193),a=t(36);n.exports=function(n,e,t){var o=e(n);return a(n)?o:r(o,t(n))}},function(n,e,t){var r=t(320),a=t(321),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(n){return null==n?[]:(n=Object(n),r(i(n),(function(e){return o.call(n,e)})))}:a;n.exports=s},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,a=0,o=[];++t<r;){var i=n[t];e(i,t,n)&&(o[a++]=i)}return o}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var r=t(323),a=t(139),o=t(36),i=t(204),s=t(205),c=t(206),l=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=o(n),u=!t&&a(n),p=!t&&!u&&i(n),d=!t&&!u&&!p&&c(n),f=t||u||p||d,m=f?r(n.length,String):[],h=m.length;for(var v in n)!e&&!l.call(n,v)||f&&("length"==v||p&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,h))||m.push(v);return m}},function(n,e){n.exports=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var r=t(66),a=t(144),o=t(59),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,n.exports=function(n){return o(n)&&a(n.length)&&!!i[r(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var r=t(194),a=e&&!e.nodeType&&e,o=a&&"object"==typeof n&&n&&!n.nodeType&&n,i=o&&o.exports===a&&r.process,s=function(){try{var n=o&&o.require&&o.require("util").types;return n||i&&i.binding&&i.binding("util")}catch(n){}}();n.exports=s}).call(this,t(150)(n))},function(n,e,t){var r=t(329),a=t(330),o=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return a(n);var e=[];for(var t in Object(n))o.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var r=t(331)(Object.keys,Object);n.exports=r},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var r=t(333),a=t(140),o=t(334),i=t(208),s=t(335),c=t(66),l=t(198),u=l(r),p=l(a),d=l(o),f=l(i),m=l(s),h=c;(r&&"[object DataView]"!=h(new r(new ArrayBuffer(1)))||a&&"[object Map]"!=h(new a)||o&&"[object Promise]"!=h(o.resolve())||i&&"[object Set]"!=h(new i)||s&&"[object WeakMap]"!=h(new s))&&(h=function(n){var e=c(n),t="[object Object]"==e?n.constructor:void 0,r=t?l(t):"";if(r)switch(r){case u:return"[object DataView]";case p:return"[object Map]";case d:return"[object Promise]";case f:return"[object Set]";case m:return"[object WeakMap]"}return e}),n.exports=h},function(n,e,t){var r=t(49)(t(40),"DataView");n.exports=r},function(n,e,t){var r=t(49)(t(40),"Promise");n.exports=r},function(n,e,t){var r=t(49)(t(40),"WeakMap");n.exports=r},function(n,e,t){var r=t(209),a=t(203);n.exports=function(n){for(var e=a(n),t=e.length;t--;){var o=e[t],i=n[o];e[t]=[o,i,r(i)]}return e}},function(n,e,t){var r=t(199),a=t(338),o=t(345),i=t(145),s=t(209),c=t(210),l=t(104);n.exports=function(n,e){return i(n)&&s(e)?c(l(n),e):function(t){var i=a(t,n);return void 0===i&&i===e?o(t,n):r(e,i,3)}}},function(n,e,t){var r=t(211);n.exports=function(n,e,t){var a=null==n?void 0:r(n,e);return void 0===a?t:a}},function(n,e,t){var r=t(340),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(a,(function(n,t,r,a){e.push(r?a.replace(o,"$1"):t||n)})),e}));n.exports=i},function(n,e,t){var r=t(341);n.exports=function(n){var e=r(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var r=t(142);function a(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,a=e?e.apply(this,r):r[0],o=t.cache;if(o.has(a))return o.get(a);var i=n.apply(this,r);return t.cache=o.set(a,i)||o,i};return t.cache=new(a.Cache||r),t}a.Cache=r,n.exports=a},function(n,e,t){var r=t(343);n.exports=function(n){return null==n?"":r(n)}},function(n,e,t){var r=t(75),a=t(344),o=t(36),i=t(146),s=r?r.prototype:void 0,c=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(o(e))return a(e,n)+"";if(i(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,a=Array(r);++t<r;)a[t]=e(n[t],t,n);return a}},function(n,e,t){var r=t(346),a=t(347);n.exports=function(n,e){return null!=n&&a(n,e,r)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var r=t(212),a=t(139),o=t(36),i=t(205),s=t(144),c=t(104);n.exports=function(n,e,t){for(var l=-1,u=(e=r(e,n)).length,p=!1;++l<u;){var d=c(e[l]);if(!(p=null!=n&&t(n,d)))break;n=n[d]}return p||++l!=u?p:!!(u=null==n?0:n.length)&&s(u)&&i(d,u)&&(o(n)||a(n))}},function(n,e,t){var r=t(349),a=t(350),o=t(145),i=t(104);n.exports=function(n){return o(n)?r(i(n)):a(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var r=t(211);n.exports=function(n){return function(e){return r(e,n)}}},function(n,e,t){var r=t(147),a=t(352),o=t(354);n.exports=function(n,e){return o(a(n,e,r),n+"")}},function(n,e,t){var r=t(353),a=Math.max;n.exports=function(n,e,t){return e=a(void 0===e?n.length-1:e,0),function(){for(var o=arguments,i=-1,s=a(o.length-e,0),c=Array(s);++i<s;)c[i]=o[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=o[i];return l[e]=t(c),r(n,this,l)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var r=t(355),a=t(358)(r);n.exports=a},function(n,e,t){var r=t(356),a=t(357),o=t(147),i=a?function(n,e){return a(n,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;n.exports=i},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var r=t(49),a=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=a},function(n,e){var t=Date.now;n.exports=function(n){var e=0,r=0;return function(){var a=t(),o=16-(a-r);if(r=a,o>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var r=t(201),a=t(360),o=t(365),i=t(202),s=t(366),c=t(143);n.exports=function(n,e,t){var l=-1,u=a,p=n.length,d=!0,f=[],m=f;if(t)d=!1,u=o;else if(p>=200){var h=e?null:s(n);if(h)return c(h);d=!1,u=i,m=new r}else m=e?[]:f;n:for(;++l<p;){var v=n[l],g=e?e(v):v;if(v=t||0!==v?v:0,d&&g==g){for(var b=m.length;b--;)if(m[b]===g)continue n;e&&m.push(g),f.push(v)}else u(m,g,t)||(m!==f&&m.push(g),f.push(v))}return f}},function(n,e,t){var r=t(361);n.exports=function(n,e){return!!(null==n?0:n.length)&&r(n,e,0)>-1}},function(n,e,t){var r=t(362),a=t(363),o=t(364);n.exports=function(n,e,t){return e==e?o(n,e,t):r(n,a,t)}},function(n,e){n.exports=function(n,e,t,r){for(var a=n.length,o=t+(r?1:-1);r?o--:++o<a;)if(e(n[o],o,n))return o;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var r=t-1,a=n.length;++r<a;)if(n[r]===e)return r;return-1}},function(n,e){n.exports=function(n,e,t){for(var r=-1,a=null==n?0:n.length;++r<a;)if(t(e,n[r]))return!0;return!1}},function(n,e,t){var r=t(208),a=t(367),o=t(143),i=r&&1/o(new r([,-0]))[1]==1/0?function(n){return new r(n)}:a;n.exports=i},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(207),a=t(59);n.exports=function(n){return a(n)&&r(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(1);n.exports=r(1..valueOf)},function(n,e,t){var r=t(1),a=t(47),o=t(11),i=t(373),s=t(19),c=r(i),l=r("".slice),u=Math.ceil,p=function(n){return function(e,t,r){var i,p,d=o(s(e)),f=a(t),m=d.length,h=void 0===r?" ":o(r);return f<=m||""==h?d:((p=c(h,u((i=f-m)/h.length))).length>i&&(p=l(p,0,i)),n?d+p:p+d)}};n.exports={start:p(!1),end:p(!0)}},function(n,e,t){"use strict";var r=t(0),a=t(62),o=t(11),i=t(19),s=r.RangeError;n.exports=function(n){var e=o(i(this)),t="",r=a(n);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(t+=e);return t}},function(n,e,t){var r=t(37);n.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},function(n,e,t){"use strict";t(214)},function(n,e,t){"use strict";t(215)},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(44),i=t(21),s=t(33),c=t(11),l=t(3),u=t(235),p=t(54),d=t(378),f=t(379),m=t(60),h=t(380),v=[],g=a(v.sort),b=a(v.push),y=l((function(){v.sort(void 0)})),x=l((function(){v.sort(null)})),w=p("sort"),k=!l((function(){if(m)return m<70;if(!(d&&d>3)){if(f)return!0;if(h)return h<603;var n,e,t,r,a="";for(n=65;n<76;n++){switch(e=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(r=0;r<47;r++)v.push({k:e+r,v:t})}for(v.sort((function(n,e){return e.v-n.v})),r=0;r<v.length;r++)e=v[r].k.charAt(0),a.charAt(a.length-1)!==e&&(a+=e);return"DGBEFHACIJK"!==a}}));r({target:"Array",proto:!0,forced:y||!x||!w||!k},{sort:function(n){void 0!==n&&o(n);var e=i(this);if(k)return void 0===n?g(e):g(e,n);var t,r,a=[],l=s(e);for(r=0;r<l;r++)r in e&&b(a,e[r]);for(u(a,function(n){return function(e,t){return void 0===t?-1:void 0===e?1:void 0!==n?+n(e,t)||0:c(e)>c(t)?1:-1}}(n)),t=a.length,r=0;r<t;)e[r]=a[r++];for(;r<l;)delete e[r++];return e}})},function(n,e,t){var r=t(37).match(/firefox\/(\d+)/i);n.exports=!!r&&+r[1]},function(n,e,t){var r=t(37);n.exports=/MSIE|Trident/.test(r)},function(n,e,t){var r=t(37).match(/AppleWebKit\/(\d+)\./);n.exports=!!r&&+r[1]},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(2),a=t(3),o=t(25),i=t(39).f,s=t(8),c=a((function(){i(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(n,e){return i(o(n),e)}})},function(n,e,t){var r=t(2),a=t(8),o=t(120).f;r({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!a},{defineProperties:o})},function(n,e,t){"use strict";var r=t(0),a=t(1),o=t(44),i=t(10),s=t(12),c=t(72),l=t(68),u=r.Function,p=a([].concat),d=a([].join),f={},m=function(n,e,t){if(!s(f,e)){for(var r=[],a=0;a<e;a++)r[a]="a["+a+"]";f[e]=u("C,a","return new C("+d(r,",")+")")}return f[e](n,t)};n.exports=l?u.bind:function(n){var e=o(this),t=e.prototype,r=c(arguments,1),a=function(){var t=p(r,c(arguments));return this instanceof a?m(e,t.length,t):e.apply(n,t)};return i(t)&&(a.prototype=t),a}},function(n,e,t){"use strict";t(219)},function(n,e,t){"use strict";t(220)},function(n,e,t){"use strict";t.r(e);t(152),t(244),t(253),t(255);var r=t(4),a=(t(20),t(78),t(5),t(16),t(18),t(45),t(34),Object.freeze({}));function o(n){return null==n}function i(n){return null!=n}function s(n){return!0===n}function c(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function l(n){return null!==n&&"object"==typeof n}var u=Object.prototype.toString;function p(n){return"[object Object]"===u.call(n)}function d(n){return"[object RegExp]"===u.call(n)}function f(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function m(n){return i(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function h(n){return null==n?"":Array.isArray(n)||p(n)&&n.toString===u?JSON.stringify(n,null,2):String(n)}function v(n){var e=parseFloat(n);return isNaN(e)?n:e}function g(n,e){for(var t=Object.create(null),r=n.split(","),a=0;a<r.length;a++)t[r[a]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}g("slot,component",!0);var b=g("key,ref,slot,slot-scope,is");function y(n,e){if(n.length){var t=n.indexOf(e);if(t>-1)return n.splice(t,1)}}var x=Object.prototype.hasOwnProperty;function w(n,e){return x.call(n,e)}function k(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var j=/-(\w)/g,S=k((function(n){return n.replace(j,(function(n,e){return e?e.toUpperCase():""}))})),O=k((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),C=/\B([A-Z])/g,E=k((function(n){return n.replace(C,"-$1").toLowerCase()}));var A=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var r=arguments.length;return r?r>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function _(n,e){e=e||0;for(var t=n.length-e,r=new Array(t);t--;)r[t]=n[t+e];return r}function B(n,e){for(var t in e)n[t]=e[t];return n}function P(n){for(var e={},t=0;t<n.length;t++)n[t]&&B(e,n[t]);return e}function T(n,e,t){}var I=function(n,e,t){return!1},M=function(n){return n};function D(n,e){if(n===e)return!0;var t=l(n),r=l(e);if(!t||!r)return!t&&!r&&String(n)===String(e);try{var a=Array.isArray(n),o=Array.isArray(e);if(a&&o)return n.length===e.length&&n.every((function(n,t){return D(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(a||o)return!1;var i=Object.keys(n),s=Object.keys(e);return i.length===s.length&&i.every((function(t){return D(n[t],e[t])}))}catch(n){return!1}}function L(n,e){for(var t=0;t<n.length;t++)if(D(n[t],e))return t;return-1}function q(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}var R=["component","directive","filter"],N=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],z={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:I,isReservedAttr:I,isUnknownElement:I,getTagNamespace:T,parsePlatformTagName:M,mustUseProp:I,async:!0,_lifecycleHooks:N},$=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function F(n,e,t,r){Object.defineProperty(n,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var U=new RegExp("[^"+$.source+".$_\\d]");var V,H="__proto__"in{},W="undefined"!=typeof window,G="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,K=G&&WXEnvironment.platform.toLowerCase(),X=W&&window.navigator.userAgent.toLowerCase(),J=X&&/msie|trident/.test(X),Q=X&&X.indexOf("msie 9.0")>0,Y=X&&X.indexOf("edge/")>0,Z=(X&&X.indexOf("android"),X&&/iphone|ipad|ipod|ios/.test(X)||"ios"===K),nn=(X&&/chrome\/\d+/.test(X),X&&/phantomjs/.test(X),X&&X.match(/firefox\/(\d+)/)),en={}.watch,tn=!1;if(W)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){tn=!0}}),window.addEventListener("test-passive",null,rn)}catch(n){}var an=function(){return void 0===V&&(V=!W&&!G&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),V},on=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function sn(n){return"function"==typeof n&&/native code/.test(n.toString())}var cn,ln="undefined"!=typeof Symbol&&sn(Symbol)&&"undefined"!=typeof Reflect&&sn(Reflect.ownKeys);cn="undefined"!=typeof Set&&sn(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var un=T,pn=0,dn=function(){this.id=pn++,this.subs=[]};dn.prototype.addSub=function(n){this.subs.push(n)},dn.prototype.removeSub=function(n){y(this.subs,n)},dn.prototype.depend=function(){dn.target&&dn.target.addDep(this)},dn.prototype.notify=function(){var n=this.subs.slice();for(var e=0,t=n.length;e<t;e++)n[e].update()},dn.target=null;var fn=[];function mn(n){fn.push(n),dn.target=n}function hn(){fn.pop(),dn.target=fn[fn.length-1]}var vn=function(n,e,t,r,a,o,i,s){this.tag=n,this.data=e,this.children=t,this.text=r,this.elm=a,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=i,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},gn={child:{configurable:!0}};gn.child.get=function(){return this.componentInstance},Object.defineProperties(vn.prototype,gn);var bn=function(n){void 0===n&&(n="");var e=new vn;return e.text=n,e.isComment=!0,e};function yn(n){return new vn(void 0,void 0,void 0,String(n))}function xn(n){var e=new vn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}var wn=Array.prototype,kn=Object.create(wn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=wn[n];F(kn,n,(function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var a,o=e.apply(this,t),i=this.__ob__;switch(n){case"push":case"unshift":a=t;break;case"splice":a=t.slice(2)}return a&&i.observeArray(a),i.dep.notify(),o}))}));var jn=Object.getOwnPropertyNames(kn),Sn=!0;function On(n){Sn=n}var Cn=function(n){this.value=n,this.dep=new dn,this.vmCount=0,F(n,"__ob__",this),Array.isArray(n)?(H?function(n,e){n.__proto__=e}(n,kn):function(n,e,t){for(var r=0,a=t.length;r<a;r++){var o=t[r];F(n,o,e[o])}}(n,kn,jn),this.observeArray(n)):this.walk(n)};function En(n,e){var t;if(l(n)&&!(n instanceof vn))return w(n,"__ob__")&&n.__ob__ instanceof Cn?t=n.__ob__:Sn&&!an()&&(Array.isArray(n)||p(n))&&Object.isExtensible(n)&&!n._isVue&&(t=new Cn(n)),e&&t&&t.vmCount++,t}function An(n,e,t,r,a){var o=new dn,i=Object.getOwnPropertyDescriptor(n,e);if(!i||!1!==i.configurable){var s=i&&i.get,c=i&&i.set;s&&!c||2!==arguments.length||(t=n[e]);var l=!a&&En(t);Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(n):t;return dn.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(e)&&Pn(e))),e},set:function(e){var r=s?s.call(n):t;e===r||e!=e&&r!=r||s&&!c||(c?c.call(n,e):t=e,l=!a&&En(e),o.notify())}})}}function _n(n,e,t){if(Array.isArray(n)&&f(e))return n.length=Math.max(n.length,e),n.splice(e,1,t),t;if(e in n&&!(e in Object.prototype))return n[e]=t,t;var r=n.__ob__;return n._isVue||r&&r.vmCount?t:r?(An(r.value,e,t),r.dep.notify(),t):(n[e]=t,t)}function Bn(n,e){if(Array.isArray(n)&&f(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||w(n,e)&&(delete n[e],t&&t.dep.notify())}}function Pn(n){for(var e=void 0,t=0,r=n.length;t<r;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Pn(e)}Cn.prototype.walk=function(n){for(var e=Object.keys(n),t=0;t<e.length;t++)An(n,e[t])},Cn.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)En(n[e])};var Tn=z.optionMergeStrategies;function In(n,e){if(!e)return n;for(var t,r,a,o=ln?Reflect.ownKeys(e):Object.keys(e),i=0;i<o.length;i++)"__ob__"!==(t=o[i])&&(r=n[t],a=e[t],w(n,t)?r!==a&&p(r)&&p(a)&&In(r,a):_n(n,t,a));return n}function Mn(n,e,t){return t?function(){var r="function"==typeof e?e.call(t,t):e,a="function"==typeof n?n.call(t,t):n;return r?In(r,a):a}:e?n?function(){return In("function"==typeof e?e.call(this,this):e,"function"==typeof n?n.call(this,this):n)}:e:n}function Dn(n,e){var t=e?n?n.concat(e):Array.isArray(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function Ln(n,e,t,r){var a=Object.create(n||null);return e?B(a,e):a}Tn.data=function(n,e,t){return t?Mn(n,e,t):e&&"function"!=typeof e?n:Mn(n,e)},N.forEach((function(n){Tn[n]=Dn})),R.forEach((function(n){Tn[n+"s"]=Ln})),Tn.watch=function(n,e,t,r){if(n===en&&(n=void 0),e===en&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var a={};for(var o in B(a,n),e){var i=a[o],s=e[o];i&&!Array.isArray(i)&&(i=[i]),a[o]=i?i.concat(s):Array.isArray(s)?s:[s]}return a},Tn.props=Tn.methods=Tn.inject=Tn.computed=function(n,e,t,r){if(!n)return e;var a=Object.create(null);return B(a,n),e&&B(a,e),a},Tn.provide=Mn;var qn=function(n,e){return void 0===e?n:e};function Rn(n,e,t){if("function"==typeof e&&(e=e.options),function(n,e){var t=n.props;if(t){var r,a,o={};if(Array.isArray(t))for(r=t.length;r--;)"string"==typeof(a=t[r])&&(o[S(a)]={type:null});else if(p(t))for(var i in t)a=t[i],o[S(i)]=p(a)?a:{type:a};else 0;n.props=o}}(e),function(n,e){var t=n.inject;if(t){var r=n.inject={};if(Array.isArray(t))for(var a=0;a<t.length;a++)r[t[a]]={from:t[a]};else if(p(t))for(var o in t){var i=t[o];r[o]=p(i)?B({from:o},i):{from:i}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var r=e[t];"function"==typeof r&&(e[t]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(n=Rn(n,e.extends,t)),e.mixins))for(var r=0,a=e.mixins.length;r<a;r++)n=Rn(n,e.mixins[r],t);var o,i={};for(o in n)s(o);for(o in e)w(n,o)||s(o);function s(r){var a=Tn[r]||qn;i[r]=a(n[r],e[r],t,r)}return i}function Nn(n,e,t,r){if("string"==typeof t){var a=n[e];if(w(a,t))return a[t];var o=S(t);if(w(a,o))return a[o];var i=O(o);return w(a,i)?a[i]:a[t]||a[o]||a[i]}}function zn(n,e,t,r){var a=e[n],o=!w(t,n),i=t[n],s=Vn(Boolean,a.type);if(s>-1)if(o&&!w(a,"default"))i=!1;else if(""===i||i===E(n)){var c=Vn(String,a.type);(c<0||s<c)&&(i=!0)}if(void 0===i){i=function(n,e,t){if(!w(e,"default"))return;var r=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return"function"==typeof r&&"Function"!==Fn(e.type)?r.call(n):r}(r,a,n);var l=Sn;On(!0),En(i),On(l)}return i}var $n=/^\s*function (\w+)/;function Fn(n){var e=n&&n.toString().match($n);return e?e[1]:""}function Un(n,e){return Fn(n)===Fn(e)}function Vn(n,e){if(!Array.isArray(e))return Un(e,n)?0:-1;for(var t=0,r=e.length;t<r;t++)if(Un(e[t],n))return t;return-1}function Hn(n,e,t){mn();try{if(e)for(var r=e;r=r.$parent;){var a=r.$options.errorCaptured;if(a)for(var o=0;o<a.length;o++)try{if(!1===a[o].call(r,n,e,t))return}catch(n){Gn(n,r,"errorCaptured hook")}}Gn(n,e,t)}finally{hn()}}function Wn(n,e,t,r,a){var o;try{(o=t?n.apply(e,t):n.call(e))&&!o._isVue&&m(o)&&!o._handled&&(o.catch((function(n){return Hn(n,r,a+" (Promise/async)")})),o._handled=!0)}catch(n){Hn(n,r,a)}return o}function Gn(n,e,t){if(z.errorHandler)try{return z.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Kn(e,null,"config.errorHandler")}Kn(n,e,t)}function Kn(n,e,t){if(!W&&!G||"undefined"==typeof console)throw n;console.error(n)}var Xn,Jn=!1,Qn=[],Yn=!1;function Zn(){Yn=!1;var n=Qn.slice(0);Qn.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&sn(Promise)){var ne=Promise.resolve();Xn=function(){ne.then(Zn),Z&&setTimeout(T)},Jn=!0}else if(J||"undefined"==typeof MutationObserver||!sn(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Xn="undefined"!=typeof setImmediate&&sn(setImmediate)?function(){setImmediate(Zn)}:function(){setTimeout(Zn,0)};else{var ee=1,te=new MutationObserver(Zn),re=document.createTextNode(String(ee));te.observe(re,{characterData:!0}),Xn=function(){ee=(ee+1)%2,re.data=String(ee)},Jn=!0}function ae(n,e){var t;if(Qn.push((function(){if(n)try{n.call(e)}catch(n){Hn(n,e,"nextTick")}else t&&t(e)})),Yn||(Yn=!0,Xn()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}var oe=new cn;function ie(n){!function n(e,t){var r,a,o=Array.isArray(e);if(!o&&!l(e)||Object.isFrozen(e)||e instanceof vn)return;if(e.__ob__){var i=e.__ob__.dep.id;if(t.has(i))return;t.add(i)}if(o)for(r=e.length;r--;)n(e[r],t);else for(a=Object.keys(e),r=a.length;r--;)n(e[a[r]],t)}(n,oe),oe.clear()}var se=k((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),r="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=r?n.slice(1):n,once:t,capture:r,passive:e}}));function ce(n,e){function t(){var n=arguments,r=t.fns;if(!Array.isArray(r))return Wn(r,null,arguments,e,"v-on handler");for(var a=r.slice(),o=0;o<a.length;o++)Wn(a[o],null,n,e,"v-on handler")}return t.fns=n,t}function le(n,e,t,r,a,i){var c,l,u,p;for(c in n)l=n[c],u=e[c],p=se(c),o(l)||(o(u)?(o(l.fns)&&(l=n[c]=ce(l,i)),s(p.once)&&(l=n[c]=a(p.name,l,p.capture)),t(p.name,l,p.capture,p.passive,p.params)):l!==u&&(u.fns=l,n[c]=u));for(c in e)o(n[c])&&r((p=se(c)).name,e[c],p.capture)}function ue(n,e,t){var r;n instanceof vn&&(n=n.data.hook||(n.data.hook={}));var a=n[e];function c(){t.apply(this,arguments),y(r.fns,c)}o(a)?r=ce([c]):i(a.fns)&&s(a.merged)?(r=a).fns.push(c):r=ce([a,c]),r.merged=!0,n[e]=r}function pe(n,e,t,r,a){if(i(e)){if(w(e,t))return n[t]=e[t],a||delete e[t],!0;if(w(e,r))return n[t]=e[r],a||delete e[r],!0}return!1}function de(n){return c(n)?[yn(n)]:Array.isArray(n)?function n(e,t){var r,a,l,u,p=[];for(r=0;r<e.length;r++)o(a=e[r])||"boolean"==typeof a||(l=p.length-1,u=p[l],Array.isArray(a)?a.length>0&&(fe((a=n(a,(t||"")+"_"+r))[0])&&fe(u)&&(p[l]=yn(u.text+a[0].text),a.shift()),p.push.apply(p,a)):c(a)?fe(u)?p[l]=yn(u.text+a):""!==a&&p.push(yn(a)):fe(a)&&fe(u)?p[l]=yn(u.text+a.text):(s(e._isVList)&&i(a.tag)&&o(a.key)&&i(t)&&(a.key="__vlist"+t+"_"+r+"__"),p.push(a)));return p}(n):void 0}function fe(n){return i(n)&&i(n.text)&&!1===n.isComment}function me(n,e){if(n){for(var t=Object.create(null),r=ln?Reflect.ownKeys(n):Object.keys(n),a=0;a<r.length;a++){var o=r[a];if("__ob__"!==o){for(var i=n[o].from,s=e;s;){if(s._provided&&w(s._provided,i)){t[o]=s._provided[i];break}s=s.$parent}if(!s)if("default"in n[o]){var c=n[o].default;t[o]="function"==typeof c?c.call(e):c}else 0}}return t}}function he(n,e){if(!n||!n.length)return{};for(var t={},r=0,a=n.length;r<a;r++){var o=n[r],i=o.data;if(i&&i.attrs&&i.attrs.slot&&delete i.attrs.slot,o.context!==e&&o.fnContext!==e||!i||null==i.slot)(t.default||(t.default=[])).push(o);else{var s=i.slot,c=t[s]||(t[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in t)t[l].every(ve)&&delete t[l];return t}function ve(n){return n.isComment&&!n.asyncFactory||" "===n.text}function ge(n){return n.isComment&&n.asyncFactory}function be(n,e,t){var r,o=Object.keys(e).length>0,i=n?!!n.$stable:!o,s=n&&n.$key;if(n){if(n._normalized)return n._normalized;if(i&&t&&t!==a&&s===t.$key&&!o&&!t.$hasNormal)return t;for(var c in r={},n)n[c]&&"$"!==c[0]&&(r[c]=ye(e,c,n[c]))}else r={};for(var l in e)l in r||(r[l]=xe(e,l));return n&&Object.isExtensible(n)&&(n._normalized=r),F(r,"$stable",i),F(r,"$key",s),F(r,"$hasNormal",o),r}function ye(n,e,t){var r=function(){var n=arguments.length?t.apply(null,arguments):t({}),e=(n=n&&"object"==typeof n&&!Array.isArray(n)?[n]:de(n))&&n[0];return n&&(!e||1===n.length&&e.isComment&&!ge(e))?void 0:n};return t.proxy&&Object.defineProperty(n,e,{get:r,enumerable:!0,configurable:!0}),r}function xe(n,e){return function(){return n[e]}}function we(n,e){var t,r,a,o,s;if(Array.isArray(n)||"string"==typeof n)for(t=new Array(n.length),r=0,a=n.length;r<a;r++)t[r]=e(n[r],r);else if("number"==typeof n)for(t=new Array(n),r=0;r<n;r++)t[r]=e(r+1,r);else if(l(n))if(ln&&n[Symbol.iterator]){t=[];for(var c=n[Symbol.iterator](),u=c.next();!u.done;)t.push(e(u.value,t.length)),u=c.next()}else for(o=Object.keys(n),t=new Array(o.length),r=0,a=o.length;r<a;r++)s=o[r],t[r]=e(n[s],s,r);return i(t)||(t=[]),t._isVList=!0,t}function ke(n,e,t,r){var a,o=this.$scopedSlots[n];o?(t=t||{},r&&(t=B(B({},r),t)),a=o(t)||("function"==typeof e?e():e)):a=this.$slots[n]||("function"==typeof e?e():e);var i=t&&t.slot;return i?this.$createElement("template",{slot:i},a):a}function je(n){return Nn(this.$options,"filters",n)||M}function Se(n,e){return Array.isArray(n)?-1===n.indexOf(e):n!==e}function Oe(n,e,t,r,a){var o=z.keyCodes[e]||t;return a&&r&&!z.keyCodes[e]?Se(a,r):o?Se(o,n):r?E(r)!==e:void 0===n}function Ce(n,e,t,r,a){if(t)if(l(t)){var o;Array.isArray(t)&&(t=P(t));var i=function(i){if("class"===i||"style"===i||b(i))o=n;else{var s=n.attrs&&n.attrs.type;o=r||z.mustUseProp(e,s,i)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var c=S(i),l=E(i);c in o||l in o||(o[i]=t[i],a&&((n.on||(n.on={}))["update:"+i]=function(n){t[i]=n}))};for(var s in t)i(s)}else;return n}function Ee(n,e){var t=this._staticTrees||(this._staticTrees=[]),r=t[n];return r&&!e||_e(r=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,null,this),"__static__"+n,!1),r}function Ae(n,e,t){return _e(n,"__once__"+e+(t?"_"+t:""),!0),n}function _e(n,e,t){if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&"string"!=typeof n[r]&&Be(n[r],e+"_"+r,t);else Be(n,e,t)}function Be(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function Pe(n,e){if(e)if(p(e)){var t=n.on=n.on?B({},n.on):{};for(var r in e){var a=t[r],o=e[r];t[r]=a?[].concat(a,o):o}}else;return n}function Te(n,e,t,r){e=e||{$stable:!t};for(var a=0;a<n.length;a++){var o=n[a];Array.isArray(o)?Te(o,e,t):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function Ie(n,e){for(var t=0;t<e.length;t+=2){var r=e[t];"string"==typeof r&&r&&(n[e[t]]=e[t+1])}return n}function Me(n,e){return"string"==typeof n?e+n:n}function De(n){n._o=Ae,n._n=v,n._s=h,n._l=we,n._t=ke,n._q=D,n._i=L,n._m=Ee,n._f=je,n._k=Oe,n._b=Ce,n._v=yn,n._e=bn,n._u=Te,n._g=Pe,n._d=Ie,n._p=Me}function Le(n,e,t,r,o){var i,c=this,l=o.options;w(r,"_uid")?(i=Object.create(r))._original=r:(i=r,r=r._original);var u=s(l._compiled),p=!u;this.data=n,this.props=e,this.children=t,this.parent=r,this.listeners=n.on||a,this.injections=me(l.inject,r),this.slots=function(){return c.$slots||be(n.scopedSlots,c.$slots=he(t,r)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return be(n.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=be(n.scopedSlots,this.$slots)),l._scopeId?this._c=function(n,e,t,a){var o=Ue(i,n,e,t,a,p);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=r),o}:this._c=function(n,e,t,r){return Ue(i,n,e,t,r,p)}}function qe(n,e,t,r,a){var o=xn(n);return o.fnContext=t,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function Re(n,e){for(var t in e)n[S(t)]=e[t]}De(Le.prototype);var Ne={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;Ne.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},r=n.data.inlineTemplate;i(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,Ye)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,r,o){0;var i=r.data.scopedSlots,s=n.$scopedSlots,c=!!(i&&!i.$stable||s!==a&&!s.$stable||i&&n.$scopedSlots.$key!==i.$key||!i&&n.$scopedSlots.$key),l=!!(o||n.$options._renderChildren||c);n.$options._parentVnode=r,n.$vnode=r,n._vnode&&(n._vnode.parent=r);if(n.$options._renderChildren=o,n.$attrs=r.data.attrs||a,n.$listeners=t||a,e&&n.$options.props){On(!1);for(var u=n._props,p=n.$options._propKeys||[],d=0;d<p.length;d++){var f=p[d],m=n.$options.props;u[f]=zn(f,m,e,n)}On(!0),n.$options.propsData=e}t=t||a;var h=n.$options._parentListeners;n.$options._parentListeners=t,Qe(n,t,h),l&&(n.$slots=he(o,r.context),n.$forceUpdate());0}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,r=n.componentInstance;r._isMounted||(r._isMounted=!0,tt(r,"mounted")),n.data.keepAlive&&(t._isMounted?((e=r)._inactive=!1,at.push(e)):et(r,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(t&&(e._directInactive=!0,nt(e)))return;if(!e._inactive){e._inactive=!0;for(var r=0;r<e.$children.length;r++)n(e.$children[r]);tt(e,"deactivated")}}(e,!0):e.$destroy())}},ze=Object.keys(Ne);function $e(n,e,t,r,c){if(!o(n)){var u=t.$options._base;if(l(n)&&(n=u.extend(n)),"function"==typeof n){var p;if(o(n.cid)&&void 0===(n=function(n,e){if(s(n.error)&&i(n.errorComp))return n.errorComp;if(i(n.resolved))return n.resolved;var t=He;t&&i(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t);if(s(n.loading)&&i(n.loadingComp))return n.loadingComp;if(t&&!i(n.owners)){var r=n.owners=[t],a=!0,c=null,u=null;t.$on("hook:destroyed",(function(){return y(r,t)}));var p=function(n){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate();n&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==u&&(clearTimeout(u),u=null))},d=q((function(t){n.resolved=We(t,e),a?r.length=0:p(!0)})),f=q((function(e){i(n.errorComp)&&(n.error=!0,p(!0))})),h=n(d,f);return l(h)&&(m(h)?o(n.resolved)&&h.then(d,f):m(h.component)&&(h.component.then(d,f),i(h.error)&&(n.errorComp=We(h.error,e)),i(h.loading)&&(n.loadingComp=We(h.loading,e),0===h.delay?n.loading=!0:c=setTimeout((function(){c=null,o(n.resolved)&&o(n.error)&&(n.loading=!0,p(!1))}),h.delay||200)),i(h.timeout)&&(u=setTimeout((function(){u=null,o(n.resolved)&&f(null)}),h.timeout)))),a=!1,n.loading?n.loadingComp:n.resolved}}(p=n,u)))return function(n,e,t,r,a){var o=bn();return o.asyncFactory=n,o.asyncMeta={data:e,context:t,children:r,tag:a},o}(p,e,t,r,c);e=e||{},St(n),i(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var a=e.on||(e.on={}),o=a[r],s=e.model.callback;i(o)?(Array.isArray(o)?-1===o.indexOf(s):o!==s)&&(a[r]=[s].concat(o)):a[r]=s}(n.options,e);var d=function(n,e,t){var r=e.options.props;if(!o(r)){var a={},s=n.attrs,c=n.props;if(i(s)||i(c))for(var l in r){var u=E(l);pe(a,c,l,u,!0)||pe(a,s,l,u,!1)}return a}}(e,n);if(s(n.options.functional))return function(n,e,t,r,o){var s=n.options,c={},l=s.props;if(i(l))for(var u in l)c[u]=zn(u,l,e||a);else i(t.attrs)&&Re(c,t.attrs),i(t.props)&&Re(c,t.props);var p=new Le(t,c,o,r,n),d=s.render.call(null,p._c,p);if(d instanceof vn)return qe(d,t,p.parent,s,p);if(Array.isArray(d)){for(var f=de(d)||[],m=new Array(f.length),h=0;h<f.length;h++)m[h]=qe(f[h],t,p.parent,s,p);return m}}(n,d,e,t,r);var f=e.on;if(e.on=e.nativeOn,s(n.options.abstract)){var h=e.slot;e={},h&&(e.slot=h)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<ze.length;t++){var r=ze[t],a=e[r],o=Ne[r];a===o||a&&a._merged||(e[r]=a?Fe(o,a):o)}}(e);var v=n.options.name||c;return new vn("vue-component-"+n.cid+(v?"-"+v:""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:d,listeners:f,tag:c,children:r},p)}}}function Fe(n,e){var t=function(t,r){n(t,r),e(t,r)};return t._merged=!0,t}function Ue(n,e,t,r,a,u){return(Array.isArray(t)||c(t))&&(a=r,r=t,t=void 0),s(u)&&(a=2),function(n,e,t,r,a){if(i(t)&&i(t.__ob__))return bn();i(t)&&i(t.is)&&(e=t.is);if(!e)return bn();0;Array.isArray(r)&&"function"==typeof r[0]&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===a?r=de(r):1===a&&(r=function(n){for(var e=0;e<n.length;e++)if(Array.isArray(n[e]))return Array.prototype.concat.apply([],n);return n}(r));var c,u;if("string"==typeof e){var p;u=n.$vnode&&n.$vnode.ns||z.getTagNamespace(e),c=z.isReservedTag(e)?new vn(z.parsePlatformTagName(e),t,r,void 0,void 0,n):t&&t.pre||!i(p=Nn(n.$options,"components",e))?new vn(e,t,r,void 0,void 0,n):$e(p,t,n,r,e)}else c=$e(e,t,n,r);return Array.isArray(c)?c:i(c)?(i(u)&&function n(e,t,r){e.ns=t,"foreignObject"===e.tag&&(t=void 0,r=!0);if(i(e.children))for(var a=0,c=e.children.length;a<c;a++){var l=e.children[a];i(l.tag)&&(o(l.ns)||s(r)&&"svg"!==l.tag)&&n(l,t,r)}}(c,u),i(t)&&function(n){l(n.style)&&ie(n.style);l(n.class)&&ie(n.class)}(t),c):bn()}(n,e,t,r,a)}var Ve,He=null;function We(n,e){return(n.__esModule||ln&&"Module"===n[Symbol.toStringTag])&&(n=n.default),l(n)?e.extend(n):n}function Ge(n){if(Array.isArray(n))for(var e=0;e<n.length;e++){var t=n[e];if(i(t)&&(i(t.componentOptions)||ge(t)))return t}}function Ke(n,e){Ve.$on(n,e)}function Xe(n,e){Ve.$off(n,e)}function Je(n,e){var t=Ve;return function r(){var a=e.apply(null,arguments);null!==a&&t.$off(n,r)}}function Qe(n,e,t){Ve=n,le(e,t||{},Ke,Xe,Je,n),Ve=void 0}var Ye=null;function Ze(n){var e=Ye;return Ye=n,function(){Ye=e}}function nt(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function et(n,e){if(e){if(n._directInactive=!1,nt(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)et(n.$children[t]);tt(n,"activated")}}function tt(n,e){mn();var t=n.$options[e],r=e+" hook";if(t)for(var a=0,o=t.length;a<o;a++)Wn(t[a],n,null,n,r);n._hasHookEvent&&n.$emit("hook:"+e),hn()}var rt=[],at=[],ot={},it=!1,st=!1,ct=0;var lt=0,ut=Date.now;if(W&&!J){var pt=window.performance;pt&&"function"==typeof pt.now&&ut()>document.createEvent("Event").timeStamp&&(ut=function(){return pt.now()})}function dt(){var n,e;for(lt=ut(),st=!0,rt.sort((function(n,e){return n.id-e.id})),ct=0;ct<rt.length;ct++)(n=rt[ct]).before&&n.before(),e=n.id,ot[e]=null,n.run();var t=at.slice(),r=rt.slice();ct=rt.length=at.length=0,ot={},it=st=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,et(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],r=t.vm;r._watcher===t&&r._isMounted&&!r._isDestroyed&&tt(r,"updated")}}(r),on&&z.devtools&&on.emit("flush")}var ft=0,mt=function(n,e,t,r,a){this.vm=n,a&&(n._watcher=this),n._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++ft,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new cn,this.newDepIds=new cn,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(n){if(!U.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=T)),this.value=this.lazy?void 0:this.get()};mt.prototype.get=function(){var n;mn(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;Hn(n,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ie(n),hn(),this.cleanupDeps()}return n},mt.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},mt.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},mt.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(n){var e=n.id;if(null==ot[e]){if(ot[e]=!0,st){for(var t=rt.length-1;t>ct&&rt[t].id>n.id;)t--;rt.splice(t+1,0,n)}else rt.push(n);it||(it=!0,ae(dt))}}(this)},mt.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||l(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'+this.expression+'"';Wn(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},mt.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},mt.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},mt.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1}};var ht={enumerable:!0,configurable:!0,get:T,set:T};function vt(n,e,t){ht.get=function(){return this[e][t]},ht.set=function(n){this[e][t]=n},Object.defineProperty(n,t,ht)}function gt(n){n._watchers=[];var e=n.$options;e.props&&function(n,e){var t=n.$options.propsData||{},r=n._props={},a=n.$options._propKeys=[];n.$parent&&On(!1);var o=function(o){a.push(o);var i=zn(o,e,t,n);An(r,o,i),o in n||vt(n,"_props",o)};for(var i in e)o(i);On(!0)}(n,e.props),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?T:A(e[t],n)}(n,e.methods),e.data?function(n){var e=n.$options.data;p(e=n._data="function"==typeof e?function(n,e){mn();try{return n.call(e,e)}catch(n){return Hn(n,e,"data()"),{}}finally{hn()}}(e,n):e||{})||(e={});var t=Object.keys(e),r=n.$options.props,a=(n.$options.methods,t.length);for(;a--;){var o=t[a];0,r&&w(r,o)||(i=void 0,36!==(i=(o+"").charCodeAt(0))&&95!==i&&vt(n,"_data",o))}var i;En(e,!0)}(n):En(n._data={},!0),e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),r=an();for(var a in e){var o=e[a],i="function"==typeof o?o:o.get;0,r||(t[a]=new mt(n,i||T,T,bt)),a in n||yt(n,a,o)}}(n,e.computed),e.watch&&e.watch!==en&&function(n,e){for(var t in e){var r=e[t];if(Array.isArray(r))for(var a=0;a<r.length;a++)kt(n,t,r[a]);else kt(n,t,r)}}(n,e.watch)}var bt={lazy:!0};function yt(n,e,t){var r=!an();"function"==typeof t?(ht.get=r?xt(e):wt(t),ht.set=T):(ht.get=t.get?r&&!1!==t.cache?xt(e):wt(t.get):T,ht.set=t.set||T),Object.defineProperty(n,e,ht)}function xt(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),dn.target&&e.depend(),e.value}}function wt(n){return function(){return n.call(this,this)}}function kt(n,e,t,r){return p(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,r)}var jt=0;function St(n){var e=n.options;if(n.super){var t=St(n.super);if(t!==n.superOptions){n.superOptions=t;var r=function(n){var e,t=n.options,r=n.sealedOptions;for(var a in t)t[a]!==r[a]&&(e||(e={}),e[a]=t[a]);return e}(n);r&&B(n.extendOptions,r),(e=n.options=Rn(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Ot(n){this._init(n)}function Ct(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,r=t.cid,a=n._Ctor||(n._Ctor={});if(a[r])return a[r];var o=n.name||t.options.name;var i=function(n){this._init(n)};return(i.prototype=Object.create(t.prototype)).constructor=i,i.cid=e++,i.options=Rn(t.options,n),i.super=t,i.options.props&&function(n){var e=n.options.props;for(var t in e)vt(n.prototype,"_props",t)}(i),i.options.computed&&function(n){var e=n.options.computed;for(var t in e)yt(n.prototype,t,e[t])}(i),i.extend=t.extend,i.mixin=t.mixin,i.use=t.use,R.forEach((function(n){i[n]=t[n]})),o&&(i.options.components[o]=i),i.superOptions=t.options,i.extendOptions=n,i.sealedOptions=B({},i.options),a[r]=i,i}}function Et(n){return n&&(n.Ctor.options.name||n.tag)}function At(n,e){return Array.isArray(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!d(n)&&n.test(e)}function _t(n,e){var t=n.cache,r=n.keys,a=n._vnode;for(var o in t){var i=t[o];if(i){var s=i.name;s&&!e(s)&&Bt(t,o,r,a)}}}function Bt(n,e,t,r){var a=n[e];!a||r&&a.tag===r.tag||a.componentInstance.$destroy(),n[e]=null,y(t,e)}Ot.prototype._init=function(n){var e=this;e._uid=jt++,e._isVue=!0,n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),r=e._parentVnode;t.parent=e.parent,t._parentVnode=r;var a=r.componentOptions;t.propsData=a.propsData,t._parentListeners=a.listeners,t._renderChildren=a.children,t._componentTag=a.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=Rn(St(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&Qe(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,r=t&&t.context;n.$slots=he(e._renderChildren,r),n.$scopedSlots=a,n._c=function(e,t,r,a){return Ue(n,e,t,r,a,!1)},n.$createElement=function(e,t,r,a){return Ue(n,e,t,r,a,!0)};var o=t&&t.data;An(n,"$attrs",o&&o.attrs||a,null,!0),An(n,"$listeners",e._parentListeners||a,null,!0)}(e),tt(e,"beforeCreate"),function(n){var e=me(n.$options.inject,n);e&&(On(!1),Object.keys(e).forEach((function(t){An(n,t,e[t])})),On(!0))}(e),gt(e),function(n){var e=n.$options.provide;e&&(n._provided="function"==typeof e?e.call(n):e)}(e),tt(e,"created"),e.$options.el&&e.$mount(e.$options.el)},function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=_n,n.prototype.$delete=Bn,n.prototype.$watch=function(n,e,t){if(p(e))return kt(this,n,e,t);(t=t||{}).user=!0;var r=new mt(this,n,e,t);if(t.immediate){var a='callback for immediate watcher "'+r.expression+'"';mn(),Wn(e,this,[r.value],this,a),hn()}return function(){r.teardown()}}}(Ot),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var r=this;if(Array.isArray(n))for(var a=0,o=n.length;a<o;a++)r.$on(n[a],t);else(r._events[n]||(r._events[n]=[])).push(t),e.test(n)&&(r._hasHookEvent=!0);return r},n.prototype.$once=function(n,e){var t=this;function r(){t.$off(n,r),e.apply(t,arguments)}return r.fn=e,t.$on(n,r),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(Array.isArray(n)){for(var r=0,a=n.length;r<a;r++)t.$off(n[r],e);return t}var o,i=t._events[n];if(!i)return t;if(!e)return t._events[n]=null,t;for(var s=i.length;s--;)if((o=i[s])===e||o.fn===e){i.splice(s,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?_(t):t;for(var r=_(arguments,1),a='event handler for "'+n+'"',o=0,i=t.length;o<i;o++)Wn(t[o],e,r,e,a)}return e}}(Ot),function(n){n.prototype._update=function(n,e){var t=this,r=t.$el,a=t._vnode,o=Ze(t);t._vnode=n,t.$el=a?t.__patch__(a,n):t.__patch__(t.$el,n,e,!1),o(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){tt(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||y(e.$children,n),n._watcher&&n._watcher.teardown();for(var t=n._watchers.length;t--;)n._watchers[t].teardown();n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),tt(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Ot),function(n){De(n.prototype),n.prototype.$nextTick=function(n){return ae(n,this)},n.prototype._render=function(){var n,e=this,t=e.$options,r=t.render,a=t._parentVnode;a&&(e.$scopedSlots=be(a.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=a;try{He=e,n=r.call(e._renderProxy,e.$createElement)}catch(t){Hn(t,e,"render"),n=e._vnode}finally{He=null}return Array.isArray(n)&&1===n.length&&(n=n[0]),n instanceof vn||(n=bn()),n.parent=a,n}}(Ot);var Pt=[String,RegExp,Array],Tt={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Pt,exclude:Pt,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var a=t.tag,o=t.componentInstance,i=t.componentOptions;n[r]={name:Et(i),tag:a,componentInstance:o},e.push(r),this.max&&e.length>parseInt(this.max)&&Bt(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Bt(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){_t(n,(function(n){return At(e,n)}))})),this.$watch("exclude",(function(e){_t(n,(function(n){return!At(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=Ge(n),t=e&&e.componentOptions;if(t){var r=Et(t),a=this.include,o=this.exclude;if(a&&(!r||!At(a,r))||o&&r&&At(o,r))return e;var i=this.cache,s=this.keys,c=null==e.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):e.key;i[c]?(e.componentInstance=i[c].componentInstance,y(s,c),s.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return z}};Object.defineProperty(n,"config",e),n.util={warn:un,extend:B,mergeOptions:Rn,defineReactive:An},n.set=_n,n.delete=Bn,n.nextTick=ae,n.observable=function(n){return En(n),n},n.options=Object.create(null),R.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,B(n.options.components,Tt),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=_(arguments,1);return t.unshift(this),"function"==typeof n.install?n.install.apply(n,t):"function"==typeof n&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=Rn(this.options,n),this}}(n),Ct(n),function(n){R.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&p(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&"function"==typeof t&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Ot),Object.defineProperty(Ot.prototype,"$isServer",{get:an}),Object.defineProperty(Ot.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Ot,"FunctionalRenderContext",{value:Le}),Ot.version="2.6.14";var It=g("style,class"),Mt=g("input,textarea,option,select,progress"),Dt=g("contenteditable,draggable,spellcheck"),Lt=g("events,caret,typing,plaintext-only"),qt=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Rt="http://www.w3.org/1999/xlink",Nt=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},zt=function(n){return Nt(n)?n.slice(6,n.length):""},$t=function(n){return null==n||!1===n};function Ft(n){for(var e=n.data,t=n,r=n;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=Ut(r.data,e));for(;i(t=t.parent);)t&&t.data&&(e=Ut(e,t.data));return function(n,e){if(i(n)||i(e))return Vt(n,Ht(e));return""}(e.staticClass,e.class)}function Ut(n,e){return{staticClass:Vt(n.staticClass,e.staticClass),class:i(n.class)?[n.class,e.class]:e.class}}function Vt(n,e){return n?e?n+" "+e:n:e||""}function Ht(n){return Array.isArray(n)?function(n){for(var e,t="",r=0,a=n.length;r<a;r++)i(e=Ht(n[r]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):l(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var Wt={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Gt=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Kt=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Xt=function(n){return Gt(n)||Kt(n)};var Jt=Object.create(null);var Qt=g("text,number,password,search,email,tel,url");var Yt=Object.freeze({createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(Wt[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),Zt={create:function(n,e){nr(e)},update:function(n,e){n.data.ref!==e.data.ref&&(nr(n,!0),nr(e))},destroy:function(n){nr(n,!0)}};function nr(n,e){var t=n.data.ref;if(i(t)){var r=n.context,a=n.componentInstance||n.elm,o=r.$refs;e?Array.isArray(o[t])?y(o[t],a):o[t]===a&&(o[t]=void 0):n.data.refInFor?Array.isArray(o[t])?o[t].indexOf(a)<0&&o[t].push(a):o[t]=[a]:o[t]=a}}var er=new vn("",{},[]),tr=["create","activate","update","remove","destroy"];function rr(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&i(n.data)===i(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,r=i(t=n.data)&&i(t=t.attrs)&&t.type,a=i(t=e.data)&&i(t=t.attrs)&&t.type;return r===a||Qt(r)&&Qt(a)}(n,e)||s(n.isAsyncPlaceholder)&&o(e.asyncFactory.error))}function ar(n,e,t){var r,a,o={};for(r=e;r<=t;++r)i(a=n[r].key)&&(o[a]=r);return o}var or={create:ir,update:ir,destroy:function(n){ir(n,er)}};function ir(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,r,a,o=n===er,i=e===er,s=cr(n.data.directives,n.context),c=cr(e.data.directives,e.context),l=[],u=[];for(t in c)r=s[t],a=c[t],r?(a.oldValue=r.value,a.oldArg=r.arg,ur(a,"update",e,n),a.def&&a.def.componentUpdated&&u.push(a)):(ur(a,"bind",e,n),a.def&&a.def.inserted&&l.push(a));if(l.length){var p=function(){for(var t=0;t<l.length;t++)ur(l[t],"inserted",e,n)};o?ue(e,"insert",p):p()}u.length&&ue(e,"postpatch",(function(){for(var t=0;t<u.length;t++)ur(u[t],"componentUpdated",e,n)}));if(!o)for(t in s)c[t]||ur(s[t],"unbind",n,n,i)}(n,e)}var sr=Object.create(null);function cr(n,e){var t,r,a=Object.create(null);if(!n)return a;for(t=0;t<n.length;t++)(r=n[t]).modifiers||(r.modifiers=sr),a[lr(r)]=r,r.def=Nn(e.$options,"directives",r.name);return a}function lr(n){return n.rawName||n.name+"."+Object.keys(n.modifiers||{}).join(".")}function ur(n,e,t,r,a){var o=n.def&&n.def[e];if(o)try{o(t.elm,n,t,r,a)}catch(r){Hn(r,t.context,"directive "+n.name+" "+e+" hook")}}var pr=[Zt,or];function dr(n,e){var t=e.componentOptions;if(!(i(t)&&!1===t.Ctor.options.inheritAttrs||o(n.data.attrs)&&o(e.data.attrs))){var r,a,s=e.elm,c=n.data.attrs||{},l=e.data.attrs||{};for(r in i(l.__ob__)&&(l=e.data.attrs=B({},l)),l)a=l[r],c[r]!==a&&fr(s,r,a,e.data.pre);for(r in(J||Y)&&l.value!==c.value&&fr(s,"value",l.value),c)o(l[r])&&(Nt(r)?s.removeAttributeNS(Rt,zt(r)):Dt(r)||s.removeAttribute(r))}}function fr(n,e,t,r){r||n.tagName.indexOf("-")>-1?mr(n,e,t):qt(e)?$t(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):Dt(e)?n.setAttribute(e,function(n,e){return $t(e)||"false"===e?"false":"contenteditable"===n&&Lt(e)?e:"true"}(e,t)):Nt(e)?$t(t)?n.removeAttributeNS(Rt,zt(e)):n.setAttributeNS(Rt,e,t):mr(n,e,t)}function mr(n,e,t){if($t(t))n.removeAttribute(e);else{if(J&&!Q&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var r=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(e,t)}}var hr={create:dr,update:dr};function vr(n,e){var t=e.elm,r=e.data,a=n.data;if(!(o(r.staticClass)&&o(r.class)&&(o(a)||o(a.staticClass)&&o(a.class)))){var s=Ft(e),c=t._transitionClasses;i(c)&&(s=Vt(s,Ht(c))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var gr,br={create:vr,update:vr};function yr(n,e,t){var r=gr;return function a(){var o=e.apply(null,arguments);null!==o&&kr(n,a,t,r)}}var xr=Jn&&!(nn&&Number(nn[1])<=53);function wr(n,e,t,r){if(xr){var a=lt,o=e;e=o._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=a||n.timeStamp<=0||n.target.ownerDocument!==document)return o.apply(this,arguments)}}gr.addEventListener(n,e,tn?{capture:t,passive:r}:t)}function kr(n,e,t,r){(r||gr).removeEventListener(n,e._wrapper||e,t)}function jr(n,e){if(!o(n.data.on)||!o(e.data.on)){var t=e.data.on||{},r=n.data.on||{};gr=e.elm,function(n){if(i(n.__r)){var e=J?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}i(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),le(t,r,wr,kr,yr,e.context),gr=void 0}}var Sr,Or={create:jr,update:jr};function Cr(n,e){if(!o(n.data.domProps)||!o(e.data.domProps)){var t,r,a=e.elm,s=n.data.domProps||{},c=e.data.domProps||{};for(t in i(c.__ob__)&&(c=e.data.domProps=B({},c)),s)t in c||(a[t]="");for(t in c){if(r=c[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),r===s[t])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===t&&"PROGRESS"!==a.tagName){a._value=r;var l=o(r)?"":String(r);Er(a,l)&&(a.value=l)}else if("innerHTML"===t&&Kt(a.tagName)&&o(a.innerHTML)){(Sr=Sr||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var u=Sr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}else if(r!==s[t])try{a[t]=r}catch(n){}}}}function Er(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,r=n._vModifiers;if(i(r)){if(r.number)return v(t)!==v(e);if(r.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var Ar={create:Cr,update:Cr},_r=k((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var r=n.split(t);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Br(n){var e=Pr(n.style);return n.staticStyle?B(n.staticStyle,e):e}function Pr(n){return Array.isArray(n)?P(n):"string"==typeof n?_r(n):n}var Tr,Ir=/^--/,Mr=/\s*!important$/,Dr=function(n,e,t){if(Ir.test(e))n.style.setProperty(e,t);else if(Mr.test(t))n.style.setProperty(E(e),t.replace(Mr,""),"important");else{var r=qr(e);if(Array.isArray(t))for(var a=0,o=t.length;a<o;a++)n.style[r]=t[a];else n.style[r]=t}},Lr=["Webkit","Moz","ms"],qr=k((function(n){if(Tr=Tr||document.createElement("div").style,"filter"!==(n=S(n))&&n in Tr)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<Lr.length;t++){var r=Lr[t]+e;if(r in Tr)return r}}));function Rr(n,e){var t=e.data,r=n.data;if(!(o(t.staticStyle)&&o(t.style)&&o(r.staticStyle)&&o(r.style))){var a,s,c=e.elm,l=r.staticStyle,u=r.normalizedStyle||r.style||{},p=l||u,d=Pr(e.data.style)||{};e.data.normalizedStyle=i(d.__ob__)?B({},d):d;var f=function(n,e){var t,r={};if(e)for(var a=n;a.componentInstance;)(a=a.componentInstance._vnode)&&a.data&&(t=Br(a.data))&&B(r,t);(t=Br(n.data))&&B(r,t);for(var o=n;o=o.parent;)o.data&&(t=Br(o.data))&&B(r,t);return r}(e,!0);for(s in p)o(f[s])&&Dr(c,s,"");for(s in f)(a=f[s])!==p[s]&&Dr(c,s,null==a?"":a)}}var Nr={create:Rr,update:Rr},zr=/\s+/;function $r(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(zr).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" "+(n.getAttribute("class")||"")+" ";t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function Fr(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(zr).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" "+(n.getAttribute("class")||"")+" ",r=" "+e+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function Ur(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&B(e,Vr(n.name||"v")),B(e,n),e}return"string"==typeof n?Vr(n):void 0}}var Vr=k((function(n){return{enterClass:n+"-enter",enterToClass:n+"-enter-to",enterActiveClass:n+"-enter-active",leaveClass:n+"-leave",leaveToClass:n+"-leave-to",leaveActiveClass:n+"-leave-active"}})),Hr=W&&!Q,Wr="transition",Gr="transitionend",Kr="animation",Xr="animationend";Hr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Wr="WebkitTransition",Gr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Kr="WebkitAnimation",Xr="webkitAnimationEnd"));var Jr=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function Qr(n){Jr((function(){Jr(n)}))}function Yr(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),$r(n,e))}function Zr(n,e){n._transitionClasses&&y(n._transitionClasses,e),Fr(n,e)}function na(n,e,t){var r=ta(n,e),a=r.type,o=r.timeout,i=r.propCount;if(!a)return t();var s="transition"===a?Gr:Xr,c=0,l=function(){n.removeEventListener(s,u),t()},u=function(e){e.target===n&&++c>=i&&l()};setTimeout((function(){c<i&&l()}),o+1),n.addEventListener(s,u)}var ea=/\b(transform|all)(,|$)/;function ta(n,e){var t,r=window.getComputedStyle(n),a=(r[Wr+"Delay"]||"").split(", "),o=(r[Wr+"Duration"]||"").split(", "),i=ra(a,o),s=(r[Kr+"Delay"]||"").split(", "),c=(r[Kr+"Duration"]||"").split(", "),l=ra(s,c),u=0,p=0;return"transition"===e?i>0&&(t="transition",u=i,p=o.length):"animation"===e?l>0&&(t="animation",u=l,p=c.length):p=(t=(u=Math.max(i,l))>0?i>l?"transition":"animation":null)?"transition"===t?o.length:c.length:0,{type:t,timeout:u,propCount:p,hasTransform:"transition"===t&&ea.test(r[Wr+"Property"])}}function ra(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return aa(e)+aa(n[t])})))}function aa(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function oa(n,e){var t=n.elm;i(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=Ur(n.data.transition);if(!o(r)&&!i(t._enterCb)&&1===t.nodeType){for(var a=r.css,s=r.type,c=r.enterClass,u=r.enterToClass,p=r.enterActiveClass,d=r.appearClass,f=r.appearToClass,m=r.appearActiveClass,h=r.beforeEnter,g=r.enter,b=r.afterEnter,y=r.enterCancelled,x=r.beforeAppear,w=r.appear,k=r.afterAppear,j=r.appearCancelled,S=r.duration,O=Ye,C=Ye.$vnode;C&&C.parent;)O=C.context,C=C.parent;var E=!O._isMounted||!n.isRootInsert;if(!E||w||""===w){var A=E&&d?d:c,_=E&&m?m:p,B=E&&f?f:u,P=E&&x||h,T=E&&"function"==typeof w?w:g,I=E&&k||b,M=E&&j||y,D=v(l(S)?S.enter:S);0;var L=!1!==a&&!Q,R=ca(T),N=t._enterCb=q((function(){L&&(Zr(t,B),Zr(t,_)),N.cancelled?(L&&Zr(t,A),M&&M(t)):I&&I(t),t._enterCb=null}));n.data.show||ue(n,"insert",(function(){var e=t.parentNode,r=e&&e._pending&&e._pending[n.key];r&&r.tag===n.tag&&r.elm._leaveCb&&r.elm._leaveCb(),T&&T(t,N)})),P&&P(t),L&&(Yr(t,A),Yr(t,_),Qr((function(){Zr(t,A),N.cancelled||(Yr(t,B),R||(sa(D)?setTimeout(N,D):na(t,s,N)))}))),n.data.show&&(e&&e(),T&&T(t,N)),L||R||N()}}}function ia(n,e){var t=n.elm;i(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=Ur(n.data.transition);if(o(r)||1!==t.nodeType)return e();if(!i(t._leaveCb)){var a=r.css,s=r.type,c=r.leaveClass,u=r.leaveToClass,p=r.leaveActiveClass,d=r.beforeLeave,f=r.leave,m=r.afterLeave,h=r.leaveCancelled,g=r.delayLeave,b=r.duration,y=!1!==a&&!Q,x=ca(f),w=v(l(b)?b.leave:b);0;var k=t._leaveCb=q((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),y&&(Zr(t,u),Zr(t,p)),k.cancelled?(y&&Zr(t,c),h&&h(t)):(e(),m&&m(t)),t._leaveCb=null}));g?g(j):j()}function j(){k.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),d&&d(t),y&&(Yr(t,c),Yr(t,p),Qr((function(){Zr(t,c),k.cancelled||(Yr(t,u),x||(sa(w)?setTimeout(k,w):na(t,s,k)))}))),f&&f(t,k),y||x||k())}}function sa(n){return"number"==typeof n&&!isNaN(n)}function ca(n){if(o(n))return!1;var e=n.fns;return i(e)?ca(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function la(n,e){!0!==e.data.show&&oa(e)}var ua=function(n){var e,t,r={},a=n.modules,l=n.nodeOps;for(e=0;e<tr.length;++e)for(r[tr[e]]=[],t=0;t<a.length;++t)i(a[t][tr[e]])&&r[tr[e]].push(a[t][tr[e]]);function u(n){var e=l.parentNode(n);i(e)&&l.removeChild(e,n)}function p(n,e,t,a,o,c,u){if(i(n.elm)&&i(c)&&(n=c[u]=xn(n)),n.isRootInsert=!o,!function(n,e,t,a){var o=n.data;if(i(o)){var c=i(n.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(n,!1),i(n.componentInstance))return d(n,e),f(t,n.elm,a),s(c)&&function(n,e,t,a){var o,s=n;for(;s.componentInstance;)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<r.activate.length;++o)r.activate[o](er,s);e.push(s);break}f(t,n.elm,a)}(n,e,t,a),!0}}(n,e,t,a)){var p=n.data,h=n.children,g=n.tag;i(g)?(n.elm=n.ns?l.createElementNS(n.ns,g):l.createElement(g,n),b(n),m(n,h,e),i(p)&&v(n,e),f(t,n.elm,a)):s(n.isComment)?(n.elm=l.createComment(n.text),f(t,n.elm,a)):(n.elm=l.createTextNode(n.text),f(t,n.elm,a))}}function d(n,e){i(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,h(n)?(v(n,e),b(n)):(nr(n),e.push(n))}function f(n,e,t){i(n)&&(i(t)?l.parentNode(t)===n&&l.insertBefore(n,e,t):l.appendChild(n,e))}function m(n,e,t){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)p(e[r],t,n.elm,null,!0,e,r)}else c(n.text)&&l.appendChild(n.elm,l.createTextNode(String(n.text)))}function h(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return i(n.tag)}function v(n,t){for(var a=0;a<r.create.length;++a)r.create[a](er,n);i(e=n.data.hook)&&(i(e.create)&&e.create(er,n),i(e.insert)&&t.push(n))}function b(n){var e;if(i(e=n.fnScopeId))l.setStyleScope(n.elm,e);else for(var t=n;t;)i(e=t.context)&&i(e=e.$options._scopeId)&&l.setStyleScope(n.elm,e),t=t.parent;i(e=Ye)&&e!==n.context&&e!==n.fnContext&&i(e=e.$options._scopeId)&&l.setStyleScope(n.elm,e)}function y(n,e,t,r,a,o){for(;r<=a;++r)p(t[r],o,n,e,!1,t,r)}function x(n){var e,t,a=n.data;if(i(a))for(i(e=a.hook)&&i(e=e.destroy)&&e(n),e=0;e<r.destroy.length;++e)r.destroy[e](n);if(i(e=n.children))for(t=0;t<n.children.length;++t)x(n.children[t])}function w(n,e,t){for(;e<=t;++e){var r=n[e];i(r)&&(i(r.tag)?(k(r),x(r)):u(r.elm))}}function k(n,e){if(i(e)||i(n.data)){var t,a=r.remove.length+1;for(i(e)?e.listeners+=a:e=function(n,e){function t(){0==--t.listeners&&u(n)}return t.listeners=e,t}(n.elm,a),i(t=n.componentInstance)&&i(t=t._vnode)&&i(t.data)&&k(t,e),t=0;t<r.remove.length;++t)r.remove[t](n,e);i(t=n.data.hook)&&i(t=t.remove)?t(n,e):e()}else u(n.elm)}function j(n,e,t,r){for(var a=t;a<r;a++){var o=e[a];if(i(o)&&rr(n,o))return a}}function S(n,e,t,a,c,u){if(n!==e){i(e.elm)&&i(a)&&(e=a[c]=xn(e));var d=e.elm=n.elm;if(s(n.isAsyncPlaceholder))i(e.asyncFactory.resolved)?E(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(n.isStatic)&&e.key===n.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=n.componentInstance;else{var f,m=e.data;i(m)&&i(f=m.hook)&&i(f=f.prepatch)&&f(n,e);var v=n.children,g=e.children;if(i(m)&&h(e)){for(f=0;f<r.update.length;++f)r.update[f](n,e);i(f=m.hook)&&i(f=f.update)&&f(n,e)}o(e.text)?i(v)&&i(g)?v!==g&&function(n,e,t,r,a){var s,c,u,d=0,f=0,m=e.length-1,h=e[0],v=e[m],g=t.length-1,b=t[0],x=t[g],k=!a;for(0;d<=m&&f<=g;)o(h)?h=e[++d]:o(v)?v=e[--m]:rr(h,b)?(S(h,b,r,t,f),h=e[++d],b=t[++f]):rr(v,x)?(S(v,x,r,t,g),v=e[--m],x=t[--g]):rr(h,x)?(S(h,x,r,t,g),k&&l.insertBefore(n,h.elm,l.nextSibling(v.elm)),h=e[++d],x=t[--g]):rr(v,b)?(S(v,b,r,t,f),k&&l.insertBefore(n,v.elm,h.elm),v=e[--m],b=t[++f]):(o(s)&&(s=ar(e,d,m)),o(c=i(b.key)?s[b.key]:j(b,e,d,m))?p(b,r,n,h.elm,!1,t,f):rr(u=e[c],b)?(S(u,b,r,t,f),e[c]=void 0,k&&l.insertBefore(n,u.elm,h.elm)):p(b,r,n,h.elm,!1,t,f),b=t[++f]);d>m?y(n,o(t[g+1])?null:t[g+1].elm,t,f,g,r):f>g&&w(e,d,m)}(d,v,g,t,u):i(g)?(i(n.text)&&l.setTextContent(d,""),y(d,null,g,0,g.length-1,t)):i(v)?w(v,0,v.length-1):i(n.text)&&l.setTextContent(d,""):n.text!==e.text&&l.setTextContent(d,e.text),i(m)&&i(f=m.hook)&&i(f=f.postpatch)&&f(n,e)}}}function O(n,e,t){if(s(t)&&i(n.parent))n.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var C=g("attrs,class,staticClass,staticStyle,key");function E(n,e,t,r){var a,o=e.tag,c=e.data,l=e.children;if(r=r||c&&c.pre,e.elm=n,s(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(a=c.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return d(e,t),!0;if(i(o)){if(i(l))if(n.hasChildNodes())if(i(a=c)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==n.innerHTML)return!1}else{for(var u=!0,p=n.firstChild,f=0;f<l.length;f++){if(!p||!E(p,l[f],t,r)){u=!1;break}p=p.nextSibling}if(!u||p)return!1}else m(e,l,t);if(i(c)){var h=!1;for(var g in c)if(!C(g)){h=!0,v(e,t);break}!h&&c.class&&ie(c.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,a){if(!o(e)){var c,u=!1,d=[];if(o(n))u=!0,p(e,d);else{var f=i(n.nodeType);if(!f&&rr(n,e))S(n,e,d,null,null,a);else{if(f){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),s(t)&&E(n,e,d))return O(e,d,!0),n;c=n,n=new vn(l.tagName(c).toLowerCase(),{},[],void 0,c)}var m=n.elm,v=l.parentNode(m);if(p(e,d,m._leaveCb?null:v,l.nextSibling(m)),i(e.parent))for(var g=e.parent,b=h(e);g;){for(var y=0;y<r.destroy.length;++y)r.destroy[y](g);if(g.elm=e.elm,b){for(var k=0;k<r.create.length;++k)r.create[k](er,g);var j=g.data.hook.insert;if(j.merged)for(var C=1;C<j.fns.length;C++)j.fns[C]()}else nr(g);g=g.parent}i(v)?w([n],0,0):i(n.tag)&&x(n)}}return O(e,d,u),e.elm}i(n)&&x(n)}}({nodeOps:Yt,modules:[hr,br,Or,Ar,Nr,W?{create:la,activate:la,remove:function(n,e){!0!==n.data.show?ia(n,e):e()}}:{}].concat(pr)});Q&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&ba(n,"input")}));var pa={inserted:function(n,e,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?ue(t,"postpatch",(function(){pa.componentUpdated(n,e,t)})):da(n,e,t.context),n._vOptions=[].map.call(n.options,ha)):("textarea"===t.tag||Qt(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",va),n.addEventListener("compositionend",ga),n.addEventListener("change",ga),Q&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){da(n,e,t.context);var r=n._vOptions,a=n._vOptions=[].map.call(n.options,ha);if(a.some((function(n,e){return!D(n,r[e])})))(n.multiple?e.value.some((function(n){return ma(n,a)})):e.value!==e.oldValue&&ma(e.value,a))&&ba(n,"change")}}};function da(n,e,t){fa(n,e,t),(J||Y)&&setTimeout((function(){fa(n,e,t)}),0)}function fa(n,e,t){var r=e.value,a=n.multiple;if(!a||Array.isArray(r)){for(var o,i,s=0,c=n.options.length;s<c;s++)if(i=n.options[s],a)o=L(r,ha(i))>-1,i.selected!==o&&(i.selected=o);else if(D(ha(i),r))return void(n.selectedIndex!==s&&(n.selectedIndex=s));a||(n.selectedIndex=-1)}}function ma(n,e){return e.every((function(e){return!D(e,n)}))}function ha(n){return"_value"in n?n._value:n.value}function va(n){n.target.composing=!0}function ga(n){n.target.composing&&(n.target.composing=!1,ba(n.target,"input"))}function ba(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function ya(n){return!n.componentInstance||n.data&&n.data.transition?n:ya(n.componentInstance._vnode)}var xa={model:pa,show:{bind:function(n,e,t){var r=e.value,a=(t=ya(t)).data&&t.data.transition,o=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;r&&a?(t.data.show=!0,oa(t,(function(){n.style.display=o}))):n.style.display=r?o:"none"},update:function(n,e,t){var r=e.value;!r!=!e.oldValue&&((t=ya(t)).data&&t.data.transition?(t.data.show=!0,r?oa(t,(function(){n.style.display=n.__vOriginalDisplay})):ia(t,(function(){n.style.display="none"}))):n.style.display=r?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,r,a){a||(n.style.display=n.__vOriginalDisplay)}}},wa={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ka(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?ka(Ge(e.children)):n}function ja(n){var e={},t=n.$options;for(var r in t.propsData)e[r]=n[r];var a=t._parentListeners;for(var o in a)e[S(o)]=a[o];return e}function Sa(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var Oa=function(n){return n.tag||ge(n)},Ca=function(n){return"show"===n.name},Ea={name:"transition",props:wa,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(Oa)).length){0;var r=this.mode;0;var a=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return a;var o=ka(a);if(!o)return a;if(this._leaving)return Sa(n,a);var i="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?i+"comment":i+o.tag:c(o.key)?0===String(o.key).indexOf(i)?o.key:i+o.key:o.key;var s=(o.data||(o.data={})).transition=ja(this),l=this._vnode,u=ka(l);if(o.data.directives&&o.data.directives.some(Ca)&&(o.data.show=!0),u&&u.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(o,u)&&!ge(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var p=u.data.transition=B({},s);if("out-in"===r)return this._leaving=!0,ue(p,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Sa(n,a);if("in-out"===r){if(ge(o))return l;var d,f=function(){d()};ue(s,"afterEnter",f),ue(s,"enterCancelled",f),ue(p,"delayLeave",(function(n){d=n}))}}return a}}},Aa=B({tag:String,moveClass:String},wa);function _a(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Ba(n){n.data.newPos=n.elm.getBoundingClientRect()}function Pa(n){var e=n.data.pos,t=n.data.newPos,r=e.left-t.left,a=e.top-t.top;if(r||a){n.data.moved=!0;var o=n.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+a+"px)",o.transitionDuration="0s"}}delete Aa.mode;var Ta={Transition:Ea,TransitionGroup:{props:Aa,beforeMount:function(){var n=this,e=this._update;this._update=function(t,r){var a=Ze(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,a(),e.call(n,t,r)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,a=this.$slots.default||[],o=this.children=[],i=ja(this),s=0;s<a.length;s++){var c=a[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),t[c.key]=c,(c.data||(c.data={})).transition=i;else;}if(r){for(var l=[],u=[],p=0;p<r.length;p++){var d=r[p];d.data.transition=i,d.data.pos=d.elm.getBoundingClientRect(),t[d.key]?l.push(d):u.push(d)}this.kept=n(e,null,l),this.removed=u}return n(e,null,o)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(_a),n.forEach(Ba),n.forEach(Pa),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,r=t.style;Yr(t,e),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(Gr,t._moveCb=function n(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(Gr,n),t._moveCb=null,Zr(t,e))})}})))},methods:{hasMove:function(n,e){if(!Hr)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){Fr(t,n)})),$r(t,e),t.style.display="none",this.$el.appendChild(t);var r=ta(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};Ot.config.mustUseProp=function(n,e,t){return"value"===t&&Mt(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Ot.config.isReservedTag=Xt,Ot.config.isReservedAttr=It,Ot.config.getTagNamespace=function(n){return Kt(n)?"svg":"math"===n?"math":void 0},Ot.config.isUnknownElement=function(n){if(!W)return!0;if(Xt(n))return!1;if(n=n.toLowerCase(),null!=Jt[n])return Jt[n];var e=document.createElement(n);return n.indexOf("-")>-1?Jt[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Jt[n]=/HTMLUnknownElement/.test(e.toString())},B(Ot.options.directives,xa),B(Ot.options.components,Ta),Ot.prototype.__patch__=W?ua:T,Ot.prototype.$mount=function(n,e){return function(n,e,t){var r;return n.$el=e,n.$options.render||(n.$options.render=bn),tt(n,"beforeMount"),r=function(){n._update(n._render(),t)},new mt(n,r,T,{before:function(){n._isMounted&&!n._isDestroyed&&tt(n,"beforeUpdate")}},!0),t=!1,null==n.$vnode&&(n._isMounted=!0,tt(n,"mounted")),n}(this,n=n&&W?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},W&&setTimeout((function(){z.devtools&&on&&on.emit("init",Ot)}),0);var Ia=Ot;
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function Ma(n,e){for(var t in e)n[t]=e[t];return n}var Da=/[!'()*]/g,La=function(n){return"%"+n.charCodeAt(0).toString(16)},qa=/%2C/g,Ra=function(n){return encodeURIComponent(n).replace(Da,La).replace(qa,",")};function Na(n){try{return decodeURIComponent(n)}catch(n){0}return n}var za=function(n){return null==n||"object"==typeof n?n:String(n)};function $a(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=Na(t.shift()),a=t.length>0?Na(t.join("=")):null;void 0===e[r]?e[r]=a:Array.isArray(e[r])?e[r].push(a):e[r]=[e[r],a]})),e):e}function Fa(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return Ra(e);if(Array.isArray(t)){var r=[];return t.forEach((function(n){void 0!==n&&(null===n?r.push(Ra(e)):r.push(Ra(e)+"="+Ra(n)))})),r.join("&")}return Ra(e)+"="+Ra(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var Ua=/\/?$/;function Va(n,e,t,r){var a=r&&r.options.stringifyQuery,o=e.query||{};try{o=Ha(o)}catch(n){}var i={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:o,params:e.params||{},fullPath:Ka(e,a),matched:n?Ga(n):[]};return t&&(i.redirectedFrom=Ka(t,a)),Object.freeze(i)}function Ha(n){if(Array.isArray(n))return n.map(Ha);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=Ha(n[t]);return e}return n}var Wa=Va(null,{path:"/"});function Ga(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function Ka(n,e){var t=n.path,r=n.query;void 0===r&&(r={});var a=n.hash;return void 0===a&&(a=""),(t||"/")+(e||Fa)(r)+a}function Xa(n,e,t){return e===Wa?n===e:!!e&&(n.path&&e.path?n.path.replace(Ua,"")===e.path.replace(Ua,"")&&(t||n.hash===e.hash&&Ja(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&Ja(n.query,e.query)&&Ja(n.params,e.params))))}function Ja(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),r=Object.keys(e).sort();return t.length===r.length&&t.every((function(t,a){var o=n[t];if(r[a]!==t)return!1;var i=e[t];return null==o||null==i?o===i:"object"==typeof o&&"object"==typeof i?Ja(o,i):String(o)===String(i)}))}function Qa(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var r in t.instances){var a=t.instances[r],o=t.enteredCbs[r];if(a&&o){delete t.enteredCbs[r];for(var i=0;i<o.length;i++)a._isBeingDestroyed||o[i](a)}}}}var Ya={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,r=e.children,a=e.parent,o=e.data;o.routerView=!0;for(var i=a.$createElement,s=t.name,c=a.$route,l=a._routerViewCache||(a._routerViewCache={}),u=0,p=!1;a&&a._routerRoot!==a;){var d=a.$vnode?a.$vnode.data:{};d.routerView&&u++,d.keepAlive&&a._directInactive&&a._inactive&&(p=!0),a=a.$parent}if(o.routerViewDepth=u,p){var f=l[s],m=f&&f.component;return m?(f.configProps&&Za(m,o,f.route,f.configProps),i(m,o,r)):i()}var h=c.matched[u],v=h&&h.components[s];if(!h||!v)return l[s]=null,i();l[s]={component:v},o.registerRouteInstance=function(n,e){var t=h.instances[s];(e&&t!==n||!e&&t===n)&&(h.instances[s]=e)},(o.hook||(o.hook={})).prepatch=function(n,e){h.instances[s]=e.componentInstance},o.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==h.instances[s]&&(h.instances[s]=n.componentInstance),Qa(c)};var g=h.props&&h.props[s];return g&&(Ma(l[s],{route:c,configProps:g}),Za(v,o,c,g)),i(v,o,r)}};function Za(n,e,t,r){var a=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,r);if(a){a=e.props=Ma({},a);var o=e.attrs=e.attrs||{};for(var i in a)n.props&&i in n.props||(o[i]=a[i],delete a[i])}}function no(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var a=e.split("/");t&&a[a.length-1]||a.pop();for(var o=n.replace(/^\//,"").split("/"),i=0;i<o.length;i++){var s=o[i];".."===s?a.pop():"."!==s&&a.push(s)}return""!==a[0]&&a.unshift(""),a.join("/")}function eo(n){return n.replace(/\/+/g,"/")}var to=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},ro=bo,ao=lo,oo=function(n,e){return po(lo(n,e),e)},io=po,so=go,co=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function lo(n,e){for(var t,r=[],a=0,o=0,i="",s=e&&e.delimiter||"/";null!=(t=co.exec(n));){var c=t[0],l=t[1],u=t.index;if(i+=n.slice(o,u),o=u+c.length,l)i+=l[1];else{var p=n[o],d=t[2],f=t[3],m=t[4],h=t[5],v=t[6],g=t[7];i&&(r.push(i),i="");var b=null!=d&&null!=p&&p!==d,y="+"===v||"*"===v,x="?"===v||"*"===v,w=t[2]||s,k=m||h;r.push({name:f||a++,prefix:d||"",delimiter:w,optional:x,repeat:y,partial:b,asterisk:!!g,pattern:k?mo(k):g?".*":"[^"+fo(w)+"]+?"})}}return o<n.length&&(i+=n.substr(o)),i&&r.push(i),r}function uo(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function po(n,e){for(var t=new Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(t[r]=new RegExp("^(?:"+n[r].pattern+")$",vo(e)));return function(e,r){for(var a="",o=e||{},i=(r||{}).pretty?uo:encodeURIComponent,s=0;s<n.length;s++){var c=n[s];if("string"!=typeof c){var l,u=o[c.name];if(null==u){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(to(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<u.length;p++){if(l=i(u[p]),!t[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");a+=(0===p?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?encodeURI(u).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):i(u),!t[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');a+=c.prefix+l}}else a+=c}return a}}function fo(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function mo(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function ho(n,e){return n.keys=e,n}function vo(n){return n&&n.sensitive?"":"i"}function go(n,e,t){to(e)||(t=e||t,e=[]);for(var r=(t=t||{}).strict,a=!1!==t.end,o="",i=0;i<n.length;i++){var s=n[i];if("string"==typeof s)o+=fo(s);else{var c=fo(s.prefix),l="(?:"+s.pattern+")";e.push(s),s.repeat&&(l+="(?:"+c+l+")*"),o+=l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var u=fo(t.delimiter||"/"),p=o.slice(-u.length)===u;return r||(o=(p?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=a?"$":r&&p?"":"(?="+u+"|$)",ho(new RegExp("^"+o,vo(t)),e)}function bo(n,e,t){return to(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ho(n,e)}(n,e):to(n)?function(n,e,t){for(var r=[],a=0;a<n.length;a++)r.push(bo(n[a],e,t).source);return ho(new RegExp("(?:"+r.join("|")+")",vo(t)),e)}(n,e,t):function(n,e,t){return go(lo(n,t),e,t)}(n,e,t)}ro.parse=ao,ro.compile=oo,ro.tokensToFunction=io,ro.tokensToRegExp=so;var yo=Object.create(null);function xo(n,e,t){e=e||{};try{var r=yo[n]||(yo[n]=ro.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function wo(n,e,t,r){var a="string"==typeof n?{path:n}:n;if(a._normalized)return a;if(a.name){var o=(a=Ma({},n)).params;return o&&"object"==typeof o&&(a.params=Ma({},o)),a}if(!a.path&&a.params&&e){(a=Ma({},a))._normalized=!0;var i=Ma(Ma({},e.params),a.params);if(e.name)a.name=e.name,a.params=i;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;a.path=xo(s,i,e.path)}else 0;return a}var c=function(n){var e="",t="",r=n.indexOf("#");r>=0&&(e=n.slice(r),n=n.slice(0,r));var a=n.indexOf("?");return a>=0&&(t=n.slice(a+1),n=n.slice(0,a)),{path:n,query:t,hash:e}}(a.path||""),l=e&&e.path||"/",u=c.path?no(c.path,l,t||a.append):l,p=function(n,e,t){void 0===e&&(e={});var r,a=t||$a;try{r=a(n||"")}catch(n){r={}}for(var o in e){var i=e[o];r[o]=Array.isArray(i)?i.map(za):za(i)}return r}(c.query,a.query,r&&r.options.parseQuery),d=a.hash||c.hash;return d&&"#"!==d.charAt(0)&&(d="#"+d),{_normalized:!0,path:u,query:p,hash:d}}var ko,jo=function(){},So={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,r=this.$route,a=t.resolve(this.to,r,this.append),o=a.location,i=a.route,s=a.href,c={},l=t.options.linkActiveClass,u=t.options.linkExactActiveClass,p=null==l?"router-link-active":l,d=null==u?"router-link-exact-active":u,f=null==this.activeClass?p:this.activeClass,m=null==this.exactActiveClass?d:this.exactActiveClass,h=i.redirectedFrom?Va(null,wo(i.redirectedFrom),null,t):i;c[m]=Xa(r,h,this.exactPath),c[f]=this.exact||this.exactPath?c[m]:function(n,e){return 0===n.path.replace(Ua,"/").indexOf(e.path.replace(Ua,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(r,h);var v=c[m]?this.ariaCurrentValue:null,g=function(n){Oo(n)&&(e.replace?t.replace(o,jo):t.push(o,jo))},b={click:Oo};Array.isArray(this.event)?this.event.forEach((function(n){b[n]=g})):b[this.event]=g;var y={class:c},x=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:i,navigate:g,isActive:c[f],isExactActive:c[m]});if(x){if(1===x.length)return x[0];if(x.length>1||!x.length)return 0===x.length?n():n("span",{},x)}if("a"===this.tag)y.on=b,y.attrs={href:s,"aria-current":v};else{var w=function n(e){var t;if(e)for(var r=0;r<e.length;r++){if("a"===(t=e[r]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(w){w.isStatic=!1;var k=w.data=Ma({},w.data);for(var j in k.on=k.on||{},k.on){var S=k.on[j];j in b&&(k.on[j]=Array.isArray(S)?S:[S])}for(var O in b)O in k.on?k.on[O].push(b[O]):k.on[O]=g;var C=w.data.attrs=Ma({},w.data.attrs);C.href=s,C["aria-current"]=v}else y.on=b}return n(this.tag,y,this.$slots.default)}};function Oo(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var Co="undefined"!=typeof window;function Eo(n,e,t,r,a){var o=e||[],i=t||Object.create(null),s=r||Object.create(null);n.forEach((function(n){!function n(e,t,r,a,o,i){var s=a.path,c=a.name;0;var l=a.pathToRegexpOptions||{},u=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return eo(e.path+"/"+n)}(s,o,l.strict);"boolean"==typeof a.caseSensitive&&(l.sensitive=a.caseSensitive);var p={path:u,regex:Ao(u,l),components:a.components||{default:a.component},alias:a.alias?"string"==typeof a.alias?[a.alias]:a.alias:[],instances:{},enteredCbs:{},name:c,parent:o,matchAs:i,redirect:a.redirect,beforeEnter:a.beforeEnter,meta:a.meta||{},props:null==a.props?{}:a.components?a.props:{default:a.props}};a.children&&a.children.forEach((function(a){var o=i?eo(i+"/"+a.path):void 0;n(e,t,r,a,p,o)}));t[p.path]||(e.push(p.path),t[p.path]=p);if(void 0!==a.alias)for(var d=Array.isArray(a.alias)?a.alias:[a.alias],f=0;f<d.length;++f){0;var m={path:d[f],children:a.children};n(e,t,r,m,o,p.path||"/")}c&&(r[c]||(r[c]=p))}(o,i,s,n,a)}));for(var c=0,l=o.length;c<l;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),l--,c--);return{pathList:o,pathMap:i,nameMap:s}}function Ao(n,e){return ro(n,[],e)}function _o(n,e){var t=Eo(n),r=t.pathList,a=t.pathMap,o=t.nameMap;function i(n,t,i){var s=wo(n,t,!1,e),l=s.name;if(l){var u=o[l];if(!u)return c(null,s);var p=u.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var d in t.params)!(d in s.params)&&p.indexOf(d)>-1&&(s.params[d]=t.params[d]);return s.path=xo(u.path,s.params),c(u,s,i)}if(s.path){s.params={};for(var f=0;f<r.length;f++){var m=r[f],h=a[m];if(Bo(h.regex,s.path,s.params))return c(h,s,i)}}return c(null,s)}function s(n,t){var r=n.redirect,a="function"==typeof r?r(Va(n,t,null,e)):r;if("string"==typeof a&&(a={path:a}),!a||"object"!=typeof a)return c(null,t);var s=a,l=s.name,u=s.path,p=t.query,d=t.hash,f=t.params;if(p=s.hasOwnProperty("query")?s.query:p,d=s.hasOwnProperty("hash")?s.hash:d,f=s.hasOwnProperty("params")?s.params:f,l){o[l];return i({_normalized:!0,name:l,query:p,hash:d,params:f},void 0,t)}if(u){var m=function(n,e){return no(n,e.parent?e.parent.path:"/",!0)}(u,n);return i({_normalized:!0,path:xo(m,f),query:p,hash:d},void 0,t)}return c(null,t)}function c(n,t,r){return n&&n.redirect?s(n,r||t):n&&n.matchAs?function(n,e,t){var r=i({_normalized:!0,path:xo(t,e.params)});if(r){var a=r.matched,o=a[a.length-1];return e.params=r.params,c(o,e)}return c(null,e)}(0,t,n.matchAs):Va(n,t,r,e)}return{match:i,addRoute:function(n,e){var t="object"!=typeof n?o[n]:void 0;Eo([e||n],r,a,o,t),t&&t.alias.length&&Eo(t.alias.map((function(n){return{path:n,children:[e]}})),r,a,o,t)},getRoutes:function(){return r.map((function(n){return a[n]}))},addRoutes:function(n){Eo(n,r,a,o)}}}function Bo(n,e,t){var r=e.match(n);if(!r)return!1;if(!t)return!0;for(var a=1,o=r.length;a<o;++a){var i=n.keys[a-1];i&&(t[i.name||"pathMatch"]="string"==typeof r[a]?Na(r[a]):r[a])}return!0}var Po=Co&&window.performance&&window.performance.now?window.performance:Date;function To(){return Po.now().toFixed(3)}var Io=To();function Mo(){return Io}function Do(n){return Io=n}var Lo=Object.create(null);function qo(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=Ma({},window.history.state);return t.key=Mo(),window.history.replaceState(t,"",e),window.addEventListener("popstate",zo),function(){window.removeEventListener("popstate",zo)}}function Ro(n,e,t,r){if(n.app){var a=n.options.scrollBehavior;a&&n.app.$nextTick((function(){var o=function(){var n=Mo();if(n)return Lo[n]}(),i=a.call(n,e,t,r?o:null);i&&("function"==typeof i.then?i.then((function(n){Ho(n,o)})).catch((function(n){0})):Ho(i,o))}))}}function No(){var n=Mo();n&&(Lo[n]={x:window.pageXOffset,y:window.pageYOffset})}function zo(n){No(),n.state&&n.state.key&&Do(n.state.key)}function $o(n){return Uo(n.x)||Uo(n.y)}function Fo(n){return{x:Uo(n.x)?n.x:window.pageXOffset,y:Uo(n.y)?n.y:window.pageYOffset}}function Uo(n){return"number"==typeof n}var Vo=/^#\d/;function Ho(n,e){var t,r="object"==typeof n;if(r&&"string"==typeof n.selector){var a=Vo.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(a){var o=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-t.left-e.x,y:r.top-t.top-e.y}}(a,o={x:Uo((t=o).x)?t.x:0,y:Uo(t.y)?t.y:0})}else $o(n)&&(e=Fo(n))}else r&&$o(n)&&(e=Fo(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var Wo,Go=Co&&((-1===(Wo=window.navigator.userAgent).indexOf("Android 2.")&&-1===Wo.indexOf("Android 4.0")||-1===Wo.indexOf("Mobile Safari")||-1!==Wo.indexOf("Chrome")||-1!==Wo.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function Ko(n,e){No();var t=window.history;try{if(e){var r=Ma({},t.state);r.key=Mo(),t.replaceState(r,"",n)}else t.pushState({key:Do(To())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function Xo(n){Ko(n,!0)}function Jo(n,e,t){var r=function(a){a>=n.length?t():n[a]?e(n[a],(function(){r(a+1)})):r(a+1)};r(0)}var Qo={redirected:2,aborted:4,cancelled:8,duplicated:16};function Yo(n,e){return ni(n,e,Qo.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return ei.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function Zo(n,e){return ni(n,e,Qo.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function ni(n,e,t,r){var a=new Error(r);return a._isRouter=!0,a.from=n,a.to=e,a.type=t,a}var ei=["params","query","hash"];function ti(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function ri(n,e){return ti(n)&&n._isRouter&&(null==e||n.type===e)}function ai(n){return function(e,t,r){var a=!1,o=0,i=null;oi(n,(function(n,e,t,s){if("function"==typeof n&&void 0===n.cid){a=!0,o++;var c,l=ci((function(e){var a;((a=e).__esModule||si&&"Module"===a[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:ko.extend(e),t.components[s]=e,--o<=0&&r()})),u=ci((function(n){var e="Failed to resolve async component "+s+": "+n;i||(i=ti(n)?n:new Error(e),r(i))}));try{c=n(l,u)}catch(n){u(n)}if(c)if("function"==typeof c.then)c.then(l,u);else{var p=c.component;p&&"function"==typeof p.then&&p.then(l,u)}}})),a||r()}}function oi(n,e){return ii(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function ii(n){return Array.prototype.concat.apply([],n)}var si="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function ci(n){var e=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!e)return e=!0,n.apply(this,t)}}var li=function(n,e){this.router=n,this.base=function(n){if(!n)if(Co){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=Wa,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function ui(n,e,t,r){var a=oi(n,(function(n,r,a,o){var i=function(n,e){"function"!=typeof n&&(n=ko.extend(n));return n.options[e]}(n,e);if(i)return Array.isArray(i)?i.map((function(n){return t(n,r,a,o)})):t(i,r,a,o)}));return ii(r?a.reverse():a)}function pi(n,e){if(e)return function(){return n.apply(e,arguments)}}li.prototype.listen=function(n){this.cb=n},li.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},li.prototype.onError=function(n){this.errorCbs.push(n)},li.prototype.transitionTo=function(n,e,t){var r,a=this;try{r=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var o=this.current;this.confirmTransition(r,(function(){a.updateRoute(r),e&&e(r),a.ensureURL(),a.router.afterHooks.forEach((function(n){n&&n(r,o)})),a.ready||(a.ready=!0,a.readyCbs.forEach((function(n){n(r)})))}),(function(n){t&&t(n),n&&!a.ready&&(ri(n,Qo.redirected)&&o===Wa||(a.ready=!0,a.readyErrorCbs.forEach((function(e){e(n)}))))}))},li.prototype.confirmTransition=function(n,e,t){var r=this,a=this.current;this.pending=n;var o,i,s=function(n){!ri(n)&&ti(n)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},c=n.matched.length-1,l=a.matched.length-1;if(Xa(n,a)&&c===l&&n.matched[c]===a.matched[l])return this.ensureURL(),n.hash&&Ro(this.router,a,n,!1),s(((i=ni(o=a,n,Qo.duplicated,'Avoided redundant navigation to current location: "'+o.fullPath+'".')).name="NavigationDuplicated",i));var u=function(n,e){var t,r=Math.max(n.length,e.length);for(t=0;t<r&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),p=u.updated,d=u.deactivated,f=u.activated,m=[].concat(function(n){return ui(n,"beforeRouteLeave",pi,!0)}(d),this.router.beforeHooks,function(n){return ui(n,"beforeRouteUpdate",pi)}(p),f.map((function(n){return n.beforeEnter})),ai(f)),h=function(e,t){if(r.pending!==n)return s(Zo(a,n));try{e(n,a,(function(e){!1===e?(r.ensureURL(!0),s(function(n,e){return ni(n,e,Qo.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(a,n))):ti(e)?(r.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(Yo(a,n)),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):t(e)}))}catch(n){s(n)}};Jo(m,h,(function(){Jo(function(n){return ui(n,"beforeRouteEnter",(function(n,e,t,r){return function(n,e,t){return function(r,a,o){return n(r,a,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),o(n)}))}}(n,t,r)}))}(f).concat(r.router.resolveHooks),h,(function(){if(r.pending!==n)return s(Zo(a,n));r.pending=null,e(n),r.router.app&&r.router.app.$nextTick((function(){Qa(n)}))}))}))},li.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},li.prototype.setupListeners=function(){},li.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=Wa,this.pending=null};var di=function(n){function e(e,t){n.call(this,e,t),this._startLocation=fi(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,r=Go&&t;r&&this.listeners.push(qo());var a=function(){var t=n.current,a=fi(n.base);n.current===Wa&&a===n._startLocation||n.transitionTo(a,(function(n){r&&Ro(e,n,t,!0)}))};window.addEventListener("popstate",a),this.listeners.push((function(){window.removeEventListener("popstate",a)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){Ko(eo(r.base+n.fullPath)),Ro(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){Xo(eo(r.base+n.fullPath)),Ro(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(fi(this.base)!==this.current.fullPath){var e=eo(this.base+this.current.fullPath);n?Ko(e):Xo(e)}},e.prototype.getCurrentLocation=function(){return fi(this.base)},e}(li);function fi(n){var e=window.location.pathname,t=e.toLowerCase(),r=n.toLowerCase();return!n||t!==r&&0!==t.indexOf(eo(r+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var mi=function(n){function e(e,t,r){n.call(this,e,t),r&&function(n){var e=fi(n);if(!/^\/#/.test(e))return window.location.replace(eo(n+"/#"+e)),!0}(this.base)||hi()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=Go&&e;t&&this.listeners.push(qo());var r=function(){var e=n.current;hi()&&n.transitionTo(vi(),(function(r){t&&Ro(n.router,r,e,!0),Go||yi(r.fullPath)}))},a=Go?"popstate":"hashchange";window.addEventListener(a,r),this.listeners.push((function(){window.removeEventListener(a,r)}))}},e.prototype.push=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){bi(n.fullPath),Ro(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){yi(n.fullPath),Ro(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;vi()!==e&&(n?bi(e):yi(e))},e.prototype.getCurrentLocation=function(){return vi()},e}(li);function hi(){var n=vi();return"/"===n.charAt(0)||(yi("/"+n),!1)}function vi(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function gi(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function bi(n){Go?Ko(gi(n)):window.location.hash=n}function yi(n){Go?Xo(gi(n)):window.location.replace(gi(n))}var xi=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index+1).concat(n),r.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var n=e.current;e.index=t,e.updateRoute(r),e.router.afterHooks.forEach((function(e){e&&e(r,n)}))}),(function(n){ri(n,Qo.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(li),wi=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=_o(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!Go&&!1!==n.fallback,this.fallback&&(e="hash"),Co||(e="abstract"),this.mode=e,e){case"history":this.history=new di(this,n.base);break;case"hash":this.history=new mi(this,n.base,this.fallback);break;case"abstract":this.history=new xi(this,n.base);break;default:0}},ki={currentRoute:{configurable:!0}};function ji(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}wi.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},ki.currentRoute.get=function(){return this.history&&this.history.current},wi.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof di||t instanceof mi){var r=function(n){t.setupListeners(),function(n){var r=t.current,a=e.options.scrollBehavior;Go&&a&&"fullPath"in n&&Ro(e,n,r,!1)}(n)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},wi.prototype.beforeEach=function(n){return ji(this.beforeHooks,n)},wi.prototype.beforeResolve=function(n){return ji(this.resolveHooks,n)},wi.prototype.afterEach=function(n){return ji(this.afterHooks,n)},wi.prototype.onReady=function(n,e){this.history.onReady(n,e)},wi.prototype.onError=function(n){this.history.onError(n)},wi.prototype.push=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.push(n,e,t)}));this.history.push(n,e,t)},wi.prototype.replace=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.replace(n,e,t)}));this.history.replace(n,e,t)},wi.prototype.go=function(n){this.history.go(n)},wi.prototype.back=function(){this.go(-1)},wi.prototype.forward=function(){this.go(1)},wi.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},wi.prototype.resolve=function(n,e,t){var r=wo(n,e=e||this.history.current,t,this),a=this.match(r,e),o=a.redirectedFrom||a.fullPath;return{location:r,route:a,href:function(n,e,t){var r="hash"===t?"#"+e:e;return n?eo(n+"/"+r):r}(this.history.base,o,this.mode),normalizedTo:r,resolved:a}},wi.prototype.getRoutes=function(){return this.matcher.getRoutes()},wi.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==Wa&&this.history.transitionTo(this.history.getCurrentLocation())},wi.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==Wa&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(wi.prototype,ki),wi.install=function n(e){if(!n.installed||ko!==e){n.installed=!0,ko=e;var t=function(n){return void 0!==n},r=function(n,e){var r=n.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",Ya),e.component("RouterLink",So);var a=e.config.optionMergeStrategies;a.beforeRouteEnter=a.beforeRouteLeave=a.beforeRouteUpdate=a.created}},wi.version="3.5.3",wi.isNavigationFailure=ri,wi.NavigationFailureType=Qo,wi.START_LOCATION=Wa,Co&&window.Vue&&window.Vue.use(wi);var Si=wi;t(182),t(183),t(258),t(46),t(260),t(26),t(27),t(261);function Oi(n){n.locales&&Object.keys(n.locales).forEach((function(e){n.locales[e].path=e})),Object.freeze(n)}t(74),t(97),t(134);function Ci(n){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var Ei=t(76),Ai=(t(192),t(28),t(53),t(232),t(233),t(48),t(30),{NotFound:function(){return Promise.all([t.e(1),t.e(13)]).then(t.bind(null,490))},Layout:function(){return Promise.all([t.e(1),t.e(11)]).then(t.bind(null,489))}}),_i={"v-3485ffd7":function(){return t.e(14).then(t.bind(null,491))},"v-3a9ce02d":function(){return t.e(15).then(t.bind(null,492))},"v-b043e1b6":function(){return t.e(16).then(t.bind(null,493))},"v-6b3c84a5":function(){return t.e(17).then(t.bind(null,494))},"v-5a7cdd80":function(){return t.e(18).then(t.bind(null,495))},"v-4c6fa37b":function(){return t.e(19).then(t.bind(null,496))},"v-245188e7":function(){return t.e(20).then(t.bind(null,497))},"v-4452e22a":function(){return t.e(21).then(t.bind(null,498))},"v-13c2056a":function(){return t.e(22).then(t.bind(null,499))},"v-5783fd5e":function(){return t.e(23).then(t.bind(null,500))},"v-18fc13e0":function(){return t.e(24).then(t.bind(null,501))},"v-04bb8b53":function(){return t.e(25).then(t.bind(null,502))},"v-676a4bcc":function(){return t.e(26).then(t.bind(null,503))},"v-4167bf9c":function(){return t.e(27).then(t.bind(null,504))},"v-7dd6a16f":function(){return t.e(28).then(t.bind(null,505))},"v-12a39364":function(){return t.e(29).then(t.bind(null,506))},"v-9d7b0978":function(){return t.e(30).then(t.bind(null,507))},"v-068ae18c":function(){return t.e(31).then(t.bind(null,508))},"v-5526dc2f":function(){return t.e(32).then(t.bind(null,509))},"v-05550a82":function(){return t.e(33).then(t.bind(null,510))},"v-59de6d20":function(){return t.e(34).then(t.bind(null,511))}};function Bi(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var Pi=/-(\w)/g,Ti=Bi((function(n){return n.replace(Pi,(function(n,e){return e?e.toUpperCase():""}))})),Ii=/\B([A-Z])/g,Mi=Bi((function(n){return n.replace(Ii,"-$1").toLowerCase()})),Di=Bi((function(n){return n.charAt(0).toUpperCase()+n.slice(1)}));function Li(n,e){if(e)return n(e)?n(e):e.includes("-")?n(Di(Ti(e))):n(Di(e))||n(Mi(e))}var qi=Object.assign({},Ai,_i),Ri=function(n){return qi[n]},Ni=function(n){return _i[n]},zi=function(n){return Ai[n]},$i=function(n){return Ia.component(n)};function Fi(n){return Li(Ni,n)}function Ui(n){return Li(zi,n)}function Vi(n){return Li(Ri,n)}function Hi(n){return Li($i,n)}function Wi(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Promise.all(e.filter((function(n){return n})).map(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Hi(e)||!Vi(e)){n.next=5;break}return n.next=3,Vi(e)();case 3:t=n.sent,Ia.component(e,t.default);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()))}function Gi(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}var Ki=t(50),Xi=(t(274),t(156),t(51),t(221)),Ji=t.n(Xi),Qi=t(222),Yi=t.n(Qi),Zi={created:function(){if(this.siteMeta=this.$site.headTags.filter((function(n){return"meta"===Object(Ki.a)(n,1)[0]})).map((function(n){var e=Object(Ki.a)(n,2);e[0];return e[1]})),this.$ssrContext){var n=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(e=n)?e.map((function(n){var e="<meta";return Object.keys(n).forEach((function(t){e+=" ".concat(t,'="').concat(Yi()(n[t]),'"')})),e+">"})).join("\n    "):"",this.$ssrContext.canonicalLink=es(this.$canonicalUrl)}var e},mounted:function(){this.currentMetaTags=Object(Ei.a)(document.querySelectorAll("meta")),this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta:function(){document.title=this.$title,document.documentElement.lang=this.$lang;var n=this.getMergedMetaTags();this.currentMetaTags=ts(n,this.currentMetaTags)},getMergedMetaTags:function(){var n=this.$page.frontmatter.meta||[];return Ji()([{name:"description",content:this.$description}],n,this.siteMeta,rs)},updateCanonicalLink:function(){ns(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",es(this.$canonicalUrl))}},watch:{$page:function(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy:function(){ts(null,this.currentMetaTags),ns()}};function ns(){var n=document.querySelector("link[rel='canonical']");n&&n.remove()}function es(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n?'<link href="'.concat(n,'" rel="canonical" />'):""}function ts(n,e){if(e&&Object(Ei.a)(e).filter((function(n){return n.parentNode===document.head})).forEach((function(n){return document.head.removeChild(n)})),n)return n.map((function(n){var e=document.createElement("meta");return Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),document.head.appendChild(e),e}))}function rs(n){for(var e=0,t=["name","property","itemprop"];e<t.length;e++){var r=t[e];if(n.hasOwnProperty(r))return n[r]+r}return JSON.stringify(n)}t(149);var as=t(157),os={mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(as)()((function(){this.setActiveHash()}),300),setActiveHash:function(){for(var n=this,e=[].slice.call(document.querySelectorAll(".sidebar-link")),t=[].slice.call(document.querySelectorAll(".header-anchor")).filter((function(n){return e.some((function(e){return e.hash===n.hash}))})),r=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),o=window.innerHeight+r,i=0;i<t.length;i++){var s=t[i],c=t[i+1],l=0===i&&0===r||r>=s.parentElement.offsetTop+10&&(!c||r<c.parentElement.offsetTop-10),u=decodeURIComponent(this.$route.hash);if(l&&u!==decodeURIComponent(s.hash)){var p=s;if(o===a)for(var d=i+1;d<t.length;d++)if(u===decodeURIComponent(t[d].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(p.hash),(function(){n.$nextTick((function(){n.$vuepress.$set("disableScrollBehavior",!1)}))}))}}}},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},is=(t(58),t(109)),ss=t.n(is),cs={mounted:function(){var n=this;ss.a.configure({showSpinner:!1}),this.$router.beforeEach((function(n,e,t){n.path===e.path||Ia.component(n.name)||ss.a.start(),t()})),this.$router.afterEach((function(){ss.a.done(),n.isSidebarOpen=!1}))}};t(80),t(110),t(83),t(369);function ls(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t(105);function us(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ps(n,e,t){return e&&us(n.prototype,e),t&&us(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}t(370);var ds=function(){function n(){ls(this,n);this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}return ps(n,[{key:"show",value:function(n){var e=this,t=n.text,r=void 0===t?"":t,a=n.duration,o=void 0===a?3e3:a,i=document.createElement("div");i.className="message move-in",i.innerHTML='\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">'.concat(r,"</div>\n    "),this.containerEl.appendChild(i),o>0&&setTimeout((function(){e.close(i)}),o)}},{key:"close",value:function(n){n.className=n.className.replace("move-in",""),n.className+="move-out",n.addEventListener("animationend",(function(){n.remove()}))}}]),n}(),fs={mounted:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy:function(){var n=this;setTimeout((function(){(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach((function(e){document.querySelectorAll(e).forEach(n.generateCopyButton)}))}),1e3)},generateCopyButton:function(n){var e=this;if(!n.classList.contains("codecopy-enabled")){var t=document.createElement("i");t.className="code-copy",t.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',t.title="Copy to clipboard",t.addEventListener("click",(function(){e.copyToClipboard(n.innerText)})),n.appendChild(t),n.classList.add("codecopy-enabled")}},copyToClipboard:function(n){var e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy"),(new ds).show({text:"å¤å¶æå",duration:1e3}),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}},ms=(t(79),"auto"),hs="zoom-in",vs="zoom-out",gs="grab",bs="move";function ys(n,e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a={passive:!1};r?n.addEventListener(e,t,a):n.removeEventListener(e,t,a)}function xs(n,e){if(n){var t=new Image;t.onload=function(){e&&e(t)},t.src=n}}function ws(n){return n.dataset.original?n.dataset.original:"A"===n.parentNode.tagName?n.parentNode.getAttribute("href"):null}function ks(n,e,t){!function(n){var e=js,t=Ss;if(n.transition){var r=n.transition;delete n.transition,n[e]=r}if(n.transform){var a=n.transform;delete n.transform,n[t]=a}}(e);var r=n.style,a={};for(var o in e)t&&(a[o]=r[o]||""),r[o]=e[o];return a}var js="transition",Ss="transform",Os="transform",Cs="transitionend";var Es=function(){},As={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:Es,onClose:Es,onGrab:Es,onMove:Es,onRelease:Es,onBeforeOpen:Es,onBeforeClose:Es,onBeforeGrab:Es,onBeforeRelease:Es,onImageLoading:Es,onImageLoaded:Es},_s={init:function(n){var e,t;e=this,t=n,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){e[n]=e[n].bind(t)}))},click:function(n){if(n.preventDefault(),Ps(n))return window.open(this.target.srcOriginal||n.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(n.currentTarget)},scroll:function(){var n=document.documentElement||document.body.parentNode||document.body,e=window.pageXOffset||n.scrollLeft,t=window.pageYOffset||n.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:e,y:t});var r=this.lastScrollPosition.x-e,a=this.lastScrollPosition.y-t,o=this.options.scrollThreshold;(Math.abs(a)>=o||Math.abs(r)>=o)&&(this.lastScrollPosition=null,this.close())},keydown:function(n){(function(n){return"Escape"===(n.key||n.code)||27===n.keyCode})(n)&&(this.released?this.close():this.release(this.close))},mousedown:function(n){if(Bs(n)&&!Ps(n)){n.preventDefault();var e=n.clientX,t=n.clientY;this.pressTimer=setTimeout(function(){this.grab(e,t)}.bind(this),200)}},mousemove:function(n){this.released||this.move(n.clientX,n.clientY)},mouseup:function(n){Bs(n)&&!Ps(n)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(n){n.preventDefault();var e=n.touches[0],t=e.clientX,r=e.clientY;this.pressTimer=setTimeout(function(){this.grab(t,r)}.bind(this),200)},touchmove:function(n){if(!this.released){var e=n.touches[0],t=e.clientX,r=e.clientY;this.move(t,r)}},touchend:function(n){(function(n){n.targetTouches.length})(n)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function Bs(n){return 0===n.button}function Ps(n){return n.metaKey||n.ctrlKey}var Ts={init:function(n){this.el=document.createElement("div"),this.instance=n,this.parent=document.body,ks(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(n.options),ys(this.el,"click",n.handler.clickOverlay.bind(n))},updateStyle:function(n){ks(this.el,{zIndex:n.zIndex,backgroundColor:n.bgColor,transition:"opacity\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ms=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Ds=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ls={init:function(n,e){this.el=n,this.instance=e,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=ws(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var n=this.instance.options,e=n.zIndex,t=n.enableGrab,r=n.transitionDuration,a=n.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:e+1,cursor:t?gs:vs,transition:Os+"\n        "+r+"s\n        "+a,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=ks(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,ks(this.el,{transform:"none"})},grab:function(n,e,t){var r=qs(),a=r.x-n,o=r.y-e;ks(this.el,{cursor:bs,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+o)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(n,e,t){var r=qs(),a=r.x-n,o=r.y-e;ks(this.el,{transition:Os,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+o)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){ks(this.el,this.styleClose)},restoreOpenStyle:function(){ks(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var n=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var e=this.el.cloneNode(!1);e.setAttribute("src",this.srcOriginal),e.style.position="fixed",e.style.visibility="hidden",n.appendChild(e),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),n.removeChild(e)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var n=qs(),e=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:n.x-e,y:n.y-t}},calculateScale:function(){var n=this.el.dataset,e=n.zoomingHeight,t=n.zoomingWidth,r=this.instance.options,a=r.customSize,o=r.scaleBase;if(!a&&e&&t)return{x:t/this.rect.width,y:e/this.rect.height};if(a&&"object"===(void 0===a?"undefined":Is(a)))return{x:a.width/this.rect.width,y:a.height/this.rect.height};var i=this.rect.width/2,s=this.rect.height/2,c=qs(),l={x:c.x-i,y:c.y-s},u=l.x/i,p=l.y/s,d=o+Math.min(u,p);if(a&&"string"==typeof a){var f=t||this.el.naturalWidth,m=e||this.el.naturalHeight,h=parseFloat(a)*f/(100*this.rect.width),v=parseFloat(a)*m/(100*this.rect.height);if(d>h||d>v)return{x:h,y:v}}return{x:d,y:d}}};function qs(){var n=document.documentElement;return{x:Math.min(n.clientWidth,window.innerWidth)/2,y:Math.min(n.clientHeight,window.innerHeight)/2}}function Rs(n,e,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(r){ys(n,r,e[r],t)}))}var Ns=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=Object.create(Ls),this.overlay=Object.create(Ts),this.handler=Object.create(_s),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=Ds({},As,e),this.overlay.init(this),this.handler.init(this)}return Ms(n,[{key:"listen",value:function(n){if("string"==typeof n)for(var e=document.querySelectorAll(n),t=e.length;t--;)this.listen(e[t]);else"IMG"===n.tagName&&(n.style.cursor=hs,ys(n,"click",this.handler.click),this.options.preloadImage&&xs(ws(n)));return this}},{key:"config",value:function(n){return n?(Ds(this.options,n),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var r="string"==typeof n?document.querySelector(n):n;if("IMG"===r.tagName){if(this.options.onBeforeOpen(r),this.target.init(r,this),!this.options.preloadImage){var a=this.target.srcOriginal;null!=a&&(this.options.onImageLoading(r),xs(a,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),ys(document,"scroll",this.handler.scroll),ys(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&ys(window,"resize",this.handler.resizeWindow);var o=function n(){ys(r,Cs,n,!1),e.lock=!1,e.target.upgradeSource(),e.options.enableGrab&&Rs(document,e.handler,!0),t(r)};return ys(r,Cs,o),this}}}},{key:"close",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=ms,this.overlay.fadeOut(),this.target.zoomOut(),ys(document,"scroll",this.handler.scroll,!1),ys(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&ys(window,"resize",this.handler.resizeWindow,!1);var r=function r(){ys(t,Cs,r,!1),n.shown=!1,n.lock=!1,n.target.downgradeSource(),n.options.enableGrab&&Rs(document,n.handler,!1),n.target.restoreCloseStyle(),n.overlay.remove(),e(t)};return ys(t,Cs,r),this}}},{key:"grab",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var a=this.target.el;this.options.onBeforeGrab(a),this.released=!1,this.target.grab(n,e,t);var o=function n(){ys(a,Cs,n,!1),r(a)};return ys(a,Cs,o),this}}},{key:"move",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=bs,this.target.move(n,e,t);var a=this.target.el,o=function n(){ys(a,Cs,n,!1),r(a)};return ys(a,Cs,o),this}}},{key:"release",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=ms,this.target.restoreOpenStyle();var r=function r(){ys(t,Cs,r,!1),n.lock=!1,n.released=!0,e(t)};return ys(t,Cs,r),this}}}]),n}(),zs=".theme-vdoing-content img:not(.no-zoom)",$s=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),Fs=Number("500"),Us=function(){function n(){ls(this,n),this.instance=new Ns($s)}return ps(n,[{key:"update",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zs;"undefined"!=typeof window&&this.instance.listen(n)}},{key:"updateDelay",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fs;setTimeout((function(){return n.update(e)}),t)}}]),n}(),Vs=[Zi,os,cs,fs,{watch:{"$page.path":function(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted:function(){this.$vuepress.zooming=new Us,this.$vuepress.zooming.updateDelay()}}],Hs={name:"GlobalLayout",computed:{layout:function(){var n=this.getLayout();return Gi("layout",n),Ia.component(n)}},methods:{getLayout:function(){if(this.$page.path){var n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},Ws=t(41),Gs=Object(Ws.a)(Hs,(function(){var n=this.$createElement;return(this._self._c||n)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){var r;switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),(r=n[e]).push.apply(r,Object(Ei.a)(t));break;default:throw new Error("Unknown option name.")}}(Gs,"mixins",Vs);var Ks=[{name:"v-3485ffd7",path:"/java/100/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-3485ffd7").then(t)}},{path:"/java/100/index.html",redirect:"/java/100/"},{path:"/00.java/10.java/100.java1.html",redirect:"/java/100/"},{name:"v-3a9ce02d",path:"/spring/200/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-3a9ce02d").then(t)}},{path:"/spring/200/index.html",redirect:"/spring/200/"},{path:"/00.java/20.Spring/200.æ ¸å¿åè½æè§£ IOC.html",redirect:"/spring/200/"},{name:"v-b043e1b6",path:"/spring/201/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-b043e1b6").then(t)}},{path:"/spring/201/index.html",redirect:"/spring/201/"},{path:"/00.java/20.Spring/201.æ ¸å¿åè½æè§£ AOP.html",redirect:"/spring/201/"},{name:"v-6b3c84a5",path:"/spring/202/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-6b3c84a5").then(t)}},{path:"/spring/202/index.html",redirect:"/spring/202/"},{path:"/00.java/20.Spring/202.æ ¸å¿åè½æè§£ äºä»¶éç¥.html",redirect:"/spring/202/"},{name:"v-5a7cdd80",path:"/spring/203/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-5a7cdd80").then(t)}},{path:"/spring/203/index.html",redirect:"/spring/203/"},{path:"/00.java/20.Spring/203.æ ¸å¿åè½æè§£ ä¸çº§ç¼å­.html",redirect:"/spring/203/"},{name:"v-4c6fa37b",path:"/spring/204/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-4c6fa37b").then(t)}},{path:"/spring/204/index.html",redirect:"/spring/204/"},{path:"/00.java/20.Spring/204.æ ¸å¿åè½æè§£ FactoryBean.html",redirect:"/spring/204/"},{name:"v-245188e7",path:"/spring/205/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-245188e7").then(t)}},{path:"/spring/205/index.html",redirect:"/spring/205/"},{path:"/00.java/20.Spring/205.æ³¨è§£æ¿ä»£Springçå½å¨æå®ç°ç±».html",redirect:"/spring/205/"},{name:"v-4452e22a",path:"/maven/2300/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-4452e22a").then(t)}},{path:"/maven/2300/index.html",redirect:"/maven/2300/"},{path:"/00.java/2300.maven/2300.pom æä»¶ä»ç»å parentãproperties æ ç­¾è¯¦è§£.html",redirect:"/maven/2300/"},{name:"v-13c2056a",path:"/maven/2301/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-13c2056a").then(t)}},{path:"/maven/2301/index.html",redirect:"/maven/2301/"},{path:"/00.java/2300.maven/2301.dependencies æ ç­¾è¯¦è§£.html",redirect:"/maven/2301/"},{name:"v-5783fd5e",path:"/maven/2302/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-5783fd5e").then(t)}},{path:"/maven/2302/index.html",redirect:"/maven/2302/"},{path:"/00.java/2300.maven/2302.ä½¿ç¨ Nexus3.x æ­å»ºç§æ.html",redirect:"/maven/2302/"},{name:"v-18fc13e0",path:"/mybatis/300/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-18fc13e0").then(t)}},{path:"/mybatis/300/index.html",redirect:"/mybatis/300/"},{path:"/00.java/30.Mybatis/300.æ ¸å¿åè½æè§£ å·¥ä½æµç¨.html",redirect:"/mybatis/300/"},{name:"v-04bb8b53",path:"/mybatis/301/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-04bb8b53").then(t)}},{path:"/mybatis/301/index.html",redirect:"/mybatis/301/"},{path:"/00.java/30.Mybatis/301.æ ¸å¿åè½æè§£ Pluginæä»¶åè½å®ç°.html",redirect:"/mybatis/301/"},{name:"v-676a4bcc",path:"/mybatis/302/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-676a4bcc").then(t)}},{path:"/mybatis/302/index.html",redirect:"/mybatis/302/"},{path:"/00.java/30.Mybatis/302.æ ¸å¿åè½æè§£ ä¸äºçº§ç¼å­åç.html",redirect:"/mybatis/302/"},{name:"v-4167bf9c",path:"/mybatis/303/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-4167bf9c").then(t)}},{path:"/mybatis/303/index.html",redirect:"/mybatis/303/"},{path:"/00.java/30.Mybatis/303.MyBatis Plus+Spring Boot å®ç°ä¸äºçº§ç¼å­ä»¥åèªå®ä¹ç¼å­.html",redirect:"/mybatis/303/"},{name:"v-7dd6a16f",path:"/docker/400/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-7dd6a16f").then(t)}},{path:"/docker/400/index.html",redirect:"/docker/400/"},{path:"/01.è¿ç»´/40.Docker/400.Docker æ¦å¿µãå½ä»¤åDockerfileä»ç».html",redirect:"/docker/400/"},{name:"v-12a39364",path:"/docker/401/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-12a39364").then(t)}},{path:"/docker/401/index.html",redirect:"/docker/401/"},{path:"/01.è¿ç»´/40.Docker/401.Docker-Compose å½ä»¤ååºæ¬ä½¿ç¨.html",redirect:"/docker/401/"},{name:"v-9d7b0978",path:"/easy-security/2100/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-9d7b0978").then(t)}},{path:"/easy-security/2100/index.html",redirect:"/easy-security/2100/"},{path:"/06.ä½å/2100.Easy-Security/2100.index.html",redirect:"/easy-security/2100/"},{name:"v-068ae18c",path:"/easy-manager-tool/2200/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-068ae18c").then(t)}},{path:"/easy-manager-tool/2200/index.html",redirect:"/easy-manager-tool/2200/"},{path:"/06.ä½å/2200.Easy-Manager-Tool/2200.ä»ç»åå®è£.html",redirect:"/easy-manager-tool/2200/"},{name:"v-5526dc2f",path:"/easy-manager-tool/2201/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-5526dc2f").then(t)}},{path:"/easy-manager-tool/2201/index.html",redirect:"/easy-manager-tool/2201/"},{path:"/06.ä½å/2200.Easy-Manager-Tool/2201.åè½æ¼ç¤º.html",redirect:"/easy-manager-tool/2201/"},{name:"v-05550a82",path:"/easy-manager-tool/2202/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-05550a82").then(t)}},{path:"/easy-manager-tool/2202/index.html",redirect:"/easy-manager-tool/2202/"},{path:"/06.ä½å/2200.Easy-Manager-Tool/2202.åå®¹æ´æ°.html",redirect:"/easy-manager-tool/2202/"},{name:"v-59de6d20",path:"/",component:Gs,beforeEnter:function(n,e,t){Wi("Layout","v-59de6d20").then(t)}},{path:"/index.html",redirect:"/"},{path:"*",component:Gs}],Xs={title:"BigUncleææ¯åå®¢",description:"ææ¯åå®¢",base:"/",headTags:[["link",{rel:"icon",href:"/favicon.ico"}],["meta",{name:"viewport",content:"width=device-width,initial-scale=1,user-scalable=no"}]],pages:[{title:"JVM",frontmatter:{title:"JVM",date:"2023-06-25T09:22:36.000Z",permalink:"/java/100/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/10.java/100.java1.html",relativePath:"00.java/10.java/100.java1.md",key:"v-3485ffd7",path:"/java/100/",lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"æ ¸å¿åè½æè§£ IOC",frontmatter:{title:"æ ¸å¿åè½æè§£ IOC",date:"2023-06-25T09:22:36.000Z",permalink:"/spring/200/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/20.Spring/200.%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8B%86%E8%A7%A3%20IOC.html",relativePath:"00.java/20.Spring/200.æ ¸å¿åè½æè§£ IOC.md",key:"v-3a9ce02d",path:"/spring/200/",headers:[{level:2,title:"è¯»åXMLæä»¶",slug:"è¯»åxmlæä»¶",normalizedTitle:"è¯»å xml æä»¶",charIndex:266},{level:2,title:"å°è£ BeanDefinition",slug:"å°è£-beandefinition",normalizedTitle:"å°è£ beandefinition",charIndex:1752},{level:2,title:"BeanFactoryPostProcessor",slug:"beanfactorypostprocessor",normalizedTitle:"beanfactorypostprocessor",charIndex:6633},{level:2,title:"æ³¨åå®ç°BeanPostProcessorçç±»",slug:"æ³¨åå®ç°beanpostprocessorçç±»",normalizedTitle:"æ³¨åå®ç° beanpostprocessor çç±»",charIndex:8907},{level:2,title:"å®ä¾åBean",slug:"å®ä¾åbean",normalizedTitle:"å®ä¾å bean",charIndex:9031},{level:2,title:"æ³¨è§£å±æ§å¡«å",slug:"æ³¨è§£å±æ§å¡«å",normalizedTitle:"æ³¨è§£å±æ§å¡«å",charIndex:233},{level:2,title:"XMLå±æ§å¡«å",slug:"xmlå±æ§å¡«å",normalizedTitle:"xml å±æ§å¡«å",charIndex:244},{level:2,title:"æç¥å¯¹è±¡",slug:"æç¥å¯¹è±¡",normalizedTitle:"æç¥å¯¹è±¡",charIndex:18936},{level:2,title:"åå§åæ¹æ³ä¹å",slug:"åå§åæ¹æ³ä¹å",normalizedTitle:"åå§åæ¹æ³ä¹å",charIndex:20221},{level:2,title:"Beançåå§åæ¹æ³",slug:"beançåå§åæ¹æ³",normalizedTitle:"bean çåå§åæ¹æ³",charIndex:11230},{level:2,title:"åå§åæ¹æ³ä¹å",slug:"åå§åæ¹æ³ä¹å",normalizedTitle:"åå§åæ¹æ³ä¹å",charIndex:22301},{level:2,title:"æ³¨åéæ¯äºä»¶",slug:"æ³¨åéæ¯äºä»¶",normalizedTitle:"æ³¨åéæ¯äºä»¶",charIndex:22789},{level:2,title:"scopå¤çåä¾",slug:"scopå¤çåä¾",normalizedTitle:"scop å¤çåä¾",charIndex:25471}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"è¯»åXMLæä»¶ å°è£ BeanDefinition BeanFactoryPostProcessor æ³¨åå®ç°BeanPostProcessorçç±» å®ä¾åBean æ³¨è§£å±æ§å¡«å XMLå±æ§å¡«å æç¥å¯¹è±¡ åå§åæ¹æ³ä¹å Beançåå§åæ¹æ³ åå§åæ¹æ³ä¹å æ³¨åéæ¯äºä»¶ scopå¤çåä¾",content:'Spring æ¯ JAVA å¼åç¨å°æå¤çä¸ä¸ª WEB æ¡æ¶ï¼æ ¸å¿æ¯ IOCï¼æ§å¶åè½¬ï¼å AOPï¼é¢ååé¢ï¼ï¼ä½åä¸ºæ¶æï¼æ³è¦å¯¹ Spring è¦è¿è¡æ©å±ç­ï¼å¿é¡»è¦äºè§£ Spring ççå½å¨æãäºä»¶ãAOPãè¡ä¸ºæç¥ç­ãSpring çå½å¨æå¦ä¸å¾ï¼\n\n\n\næç¤º\n\næ¬æä¸»è¦äºè§£ spring çå½å¨æçæåªäºï¼ä»¥åä»ä»¬çæ ¸å¿ä»£ç æ¯æä¹ç¼åï¼æ´ä¸ªè¿ç¨æ¯å IOC å DI çï¼IOC å°å¯¹è±¡çåå»ºåä¾èµå³ç³»çç»´æ¤ä»ä»£ç ä¸­è±ç¦»åºæ¥ï¼éè¿éç½®è¯»ååå»ºå¯¹è±¡ï¼DI ä»æ³¨è§£å±æ§å¡«åè¿ç¨ä»¥å XML å±æ§å¡«åè¿ç¨ä¸ºå·ä½çä½ç°ã\n\n\n# è¯»å XML æä»¶\n\néè¿ ClassPathXmlApplicationContext æ¥è¯»åèµæºæä»¶ä¸ç spring.xml\n\n    @Test\n    public void test() {\n        ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext("classpath:spring.xml");\n        UserService userService = applicationContext.getBean("userService", UserService.class);\n        System.out.println("æµè¯ç»æï¼" + userService.queryUserInfo());\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\næ ¹æ®æä»¶ç±»åä½¿ç¨ä¸åçæ¹å¼è¯»åå°æµä¸­\n\n    @Override\n    public Resource getResource(String location) {\n        Assert.notNull(location, "Location must not be null");\n        if (location.startsWith(CLASSPATH_URL_PREFIX)) {\n            return new ClassPathResource(location.substring(CLASSPATH_URL_PREFIX.length()));\n        }\n        else {\n            try {\n                URL url = new URL(location);\n                return new UrlResource(url);\n            } catch (MalformedURLException e) {\n                return new FileSystemResource(location);\n            }\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\nè°ç¨ XML è§£æ\n\n    @Override\n    public void loadBeanDefinitions(Resource resource) throws BeansException {\n        try {\n            try (InputStream inputStream = resource.getInputStream()) {\n                doLoadBeanDefinitions(inputStream);\n            }\n        } catch (IOException | ClassNotFoundException | DocumentException e) {\n            throw new BeansException("IOException parsing XML document from " + resource, e);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# å°è£ BeanDefinition\n\nè§£æ XML çæ´ä¸ªè¿ç¨ï¼\n\n * è§£æ DOM\n * è§£æå¸¦æ @Component æ³¨è§£çç±»ï¼å¹¶å°è£ä¸º BeanDefinition æ³¨åå° BeanFactory\n * è§£æä¸æ¯ component-scan å®ä¹çç±»\n\n    protected void doLoadBeanDefinitions(InputStream inputStream) throws ClassNotFoundException, DocumentException {\n        // ä½¿ç¨ org.dom4j.io çè§£æå¨\n        SAXReader reader = new SAXReader();\n        Document document = reader.read(inputStream);\n        Element root = document.getRootElement();\n        // è§£æ context:component-scan æ ç­¾ï¼æ«æåä¸­çç±»å¹¶æåç¸å³ä¿¡æ¯ï¼ç¨äºç»è£ BeanDefinition\n        Element componentScan = root.element("component-scan");\n        if (null != componentScan) {\n            String scanPath = componentScan.attributeValue("base-package");\n            if (StrUtil.isEmpty(scanPath)) {\n                throw new BeansException("The value of base-package attribute can not be empty or null");\n            }\n            // æ«ææ´ä¸ªå\n            scanPackage(scanPath);\n        }\n        List<Element> beanList = root.elements("bean");\n        for (Element bean : beanList) {\n            String id = bean.attributeValue("id");\n            String name = bean.attributeValue("name");\n            String className = bean.attributeValue("class");\n            String initMethod = bean.attributeValue("init-method");\n            String destroyMethodName = bean.attributeValue("destroy-method");\n            String beanScope = bean.attributeValue("scope");\n            // è·å Classï¼æ¹ä¾¿è·åç±»ä¸­çåç§°\n            Class<?> clazz = Class.forName(className);\n            // ä¼åçº§ id > name\n            String beanName = StrUtil.isNotEmpty(id) ? id : name;\n            if (StrUtil.isEmpty(beanName)) {\n                beanName = StrUtil.lowerFirst(clazz.getSimpleName());\n            }\n            // å®ä¹Bean\n            BeanDefinition beanDefinition = new BeanDefinition(clazz);\n            beanDefinition.setInitMethodName(initMethod);\n            beanDefinition.setDestroyMethodName(destroyMethodName);\n            if (StrUtil.isNotEmpty(beanScope)) {\n                beanDefinition.setScope(beanScope);\n            }\n            List<Element> propertyList = bean.elements("property");\n            // è¯»åå±æ§å¹¶å¡«å\n            for (Element property : propertyList) {\n                // è§£ææ ç­¾ï¼property\n                String attrName = property.attributeValue("name");\n                String attrValue = property.attributeValue("value");\n                String attrRef = property.attributeValue("ref");\n                // è·åå±æ§å¼ï¼å¼å¥å¯¹è±¡ãå¼å¯¹è±¡\n                Object value = StrUtil.isNotEmpty(attrRef) ? new BeanReference(attrRef) : attrValue;\n                // åå»ºå±æ§ä¿¡æ¯\n                PropertyValue propertyValue = new PropertyValue(attrName, value);\n                beanDefinition.getPropertyValues().addPropertyValue(propertyValue);\n            }\n            if (getRegistry().containsBeanDefinition(beanName)) {\n                throw new BeansException("Duplicate beanName[" + beanName + "] is not allowed");\n            }\n            // æ³¨å BeanDefinition\n            getRegistry().registerBeanDefinition(beanName, beanDefinition);\n        }\n    }\n\n    private void scanPackage(String scanPath) {\n        String[] basePackages = StrUtil.splitToArray(scanPath, \',\');\n        ClassPathBeanDefinitionScanner scanner = new ClassPathBeanDefinitionScanner(getRegistry());\n        scanner.doScan(basePackages);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n\n\næ ¹æ®æä¾è·¯å¾å°è£ä¸º BeanDefinition å¹¶æ³¨åå° BeanFactory\n\n    public void doScan(String... basePackages) {\n        for (String basePackage : basePackages) {\n            Set<BeanDefinition> candidates = findCandidateComponents(basePackage);\n            for (BeanDefinition beanDefinition : candidates) {\n                // è§£æ Bean çä½ç¨å singletonãprototype\n                String beanScope = resolveBeanScope(beanDefinition);\n                if (StrUtil.isNotEmpty(beanScope)) {\n                    beanDefinition.setScope(beanScope);\n                }\n                registry.registerBeanDefinition(determineBeanName(beanDefinition), beanDefinition);\n            }\n        }\n\n        // æ³¨åå¤çæ³¨è§£ç BeanPostProcessor(@Autowiredã@Value)\n        registry.registerBeanDefinition("cn.bugstack.springframework.context.annotation.internalAutowiredAnnotationProcessor", new BeanDefinition(AutowiredAnnotationBeanPostProcessor.class));\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nå¯¹æä¾çåè·¯å¾æ«ææ @Component æ³¨è§£çç±»\n\n    public Set<BeanDefinition> findCandidateComponents(String basePackage) {\n        Set<BeanDefinition> candidates = new LinkedHashSet<>();\n        Set<Class<?>> classes = ClassUtil.scanPackageByAnnotation(basePackage, Component.class);\n        for (Class<?> clazz : classes) {\n            candidates.add(new BeanDefinition(clazz));\n        }\n        return candidates;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# BeanFactoryPostProcessor\n\nBeanFactoryPostProcessor å¯ä»¥ä¿®æ¹æä»¬å¯¹ BeanDefinition å®ä¹çææä¿¡æ¯ï¼å¯ä»¥æ·»å å±æ§ï¼ä¿®æ¹å±æ§ï¼æ·»å é¢å¤çæ¹æ³ç­ãå·ä½ä¼å¯¹ææå®ç° BeanFactoryPostProcessor çç±»è¿è¡è·åï¼å¹¶å¾ªç¯è°ç¨ postProcessBeanFactory æ¹æ³\n\n    private void invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory beanFactory) {\n        Map<String, BeanFactoryPostProcessor> beanFactoryPostProcessorMap = beanFactory.getBeansOfType(BeanFactoryPostProcessor.class);\n        for (BeanFactoryPostProcessor beanFactoryPostProcessor : beanFactoryPostProcessorMap.values()) {\n            beanFactoryPostProcessor.postProcessBeanFactory(beanFactory);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\næä¾ä¸ä¸ªé»è®¤çå®ç°\n\n    @Override\n    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\n        try {\n            // å è½½å±æ§æä»¶\n            DefaultResourceLoader resourceLoader = new DefaultResourceLoader();\n            Resource resource = resourceLoader.getResource(location);\n\n            // æå±æ§æä»¶çåå®¹å è½½å°Propertieséç»æé®å¼å¯¹\n            Properties properties = new Properties();\n            properties.load(resource.getInputStream());\n            String[] beanDefinitionNames = beanFactory.getBeanDefinitionNames();\n            for (String beanName : beanDefinitionNames) {\n                BeanDefinition beanDefinition = beanFactory.getBeanDefinition(beanName);\n                PropertyValues propertyValues = beanDefinition.getPropertyValues();\n                for (PropertyValue propertyValue : propertyValues.getPropertyValues()) {\n                    Object value = propertyValue.getValue();\n                    if (!(value instanceof String)) continue;\n                    value = resolvePlaceholder((String) value, properties);\n                    propertyValues.addPropertyValue(new PropertyValue(propertyValue.getName(), value));\n                }\n            }\n            // åå®¹å¨ä¸­æ·»å å­ç¬¦ä¸²è§£æå¨ï¼ä¾è§£æ@Valueæ³¨è§£ä½¿ç¨\n            StringValueResolver valueResolver = new PlaceholderResolvingStringValueResolver(properties);\n            // æ³¨åå°å®¹å¨ï¼ä»¥ä¾¿åç»­ä½¿ç¨\n            beanFactory.addEmbeddedValueResolver(valueResolver);\n        } catch (IOException e) {\n            throw new BeansException("Could not load properties", e);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\n\n# æ³¨åå®ç° BeanPostProcessor çç±»\n\nBeanPostProcessor å°±æ¯æä¾äº postProcessBeforeInitializationï¼postProcessAfterInitialization ä¸¤ç§æ¹æ³ï¼æä¾æä»¬å¨å®ä¾å Bean çæ¶åï¼ææå®ç° BeanPostProcessor çç±»ï¼æ³¨åå° List<BeanPostProcessor> beanPostProcessors = new ArrayList<BeanPostProcessor>(); ä¸­\n\n    private void registerBeanPostProcessors(ConfigurableListableBeanFactory beanFactory) {\n        Map<String, BeanPostProcessor> beanPostProcessorMap = beanFactory.getBeansOfType(BeanPostProcessor.class);\n        for (BeanPostProcessor beanPostProcessor : beanPostProcessorMap.values()) {\n            beanFactory.addBeanPostProcessor(beanPostProcessor);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# å®ä¾å Bean\n\n    protected <T> T doGetBean(final String name, final Object[] args) {\n        // ä»ç¼å­ä¸­è·åå®ä¾\n        Object sharedInstance = getSingleton(name);\n        if (sharedInstance != null) {\n            // å¦æå®ç°äº FactoryBeanï¼åéè¦è°ç¨ FactoryBean##getObject\n            return (T) getObjectForBeanInstance(sharedInstance, name);\n        }\n        // ä»BeanDefinitionåè¡¨ä¸­è·åå¯¹è±¡\n        BeanDefinition beanDefinition = getBeanDefinition(name);\n        Object bean = createBean(name, beanDefinition, args);\n        // å¦æå®ç°äº FactoryBeanï¼åéè¦è°ç¨ FactoryBean##getObject\n        return (T) getObjectForBeanInstance(bean, name);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nå®ä¾å Bean çå·ä½æ¹æ³\n\n    protected Object doCreateBean(String beanName, BeanDefinition beanDefinition, Object[] args) {\n        Object bean = null;\n        try {\n            // å®ä¾å Bean\n            bean = createBeanInstance(beanDefinition, beanName, args);\n            // å¤çå¾ªç¯ä¾èµï¼å°å®ä¾ååçBeanå¯¹è±¡æåæ¾å¥ç¼å­ä¸­æ´é²åºæ¥\n            if (beanDefinition.isSingleton()) {\n                Object finalBean = bean;\n                addSingletonFactory(beanName, () -> getEarlyBeanReference(beanName, beanDefinition, finalBean));\n            }\n            // æ¯å¦éè¦ç»§ç»­è¿è¡åç»­çå±æ§å¡«å\n            boolean continueWithPropertyPopulation = applyBeanPostProcessorsAfterInstantiation(beanName, bean);\n            if (!continueWithPropertyPopulation) {\n                return bean;\n            }\n            // å¨è®¾ç½® Bean å±æ§ä¹åï¼åè®¸ BeanPostProcessor ä¿®æ¹å±æ§å¼ï¼æ³¨è§£å±æ§å¡«åï¼\n            applyBeanPostProcessorsBeforeApplyingPropertyValues(beanName, bean, beanDefinition);\n            // ç» Bean å¡«åå±æ§ï¼xmlå±æ§å¡«åï¼\n            applyPropertyValues(beanName, bean, beanDefinition);\n            // æ§è¡ Bean çåå§åæ¹æ³å BeanPostProcessor çåç½®ååç½®å¤çæ¹æ³\n            bean = initializeBean(beanName, bean, beanDefinition);\n        } catch (Exception e) {\n            throw new BeansException("Instantiation of bean failed", e);\n        }\n        // æ³¨åå®ç°äº DisposableBean æ¥å£ç Bean å¯¹è±¡\n        registerDisposableBeanIfNecessary(beanName, bean, beanDefinition);\n        // å¤æ­ SCOPE_SINGLETONãSCOPE_PROTOTYPE\n        Object exposedObject = bean;\n        if (beanDefinition.isSingleton()) {\n            // è·åä»£çå¯¹è±¡\n            exposedObject = getSingleton(beanName);\n            registerSingleton(beanName, exposedObject);\n        }\n        return exposedObject;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n\n\ncreateBeanInstance ä½¿ç¨äº CGLIB æ¥å®ä¾åä¸ä¸ª Bean, ä¹å¯ä»¥ä½¿ç¨ JAVA èªå¸¦çåå°\n\n    protected Object createBeanInstance(BeanDefinition beanDefinition, String beanName, Object[] args) {\n        Constructor constructorToUse = null;\n        Class<?> beanClass = beanDefinition.getBeanClass();\n        Constructor<?>[] declaredConstructors = beanClass.getDeclaredConstructors();\n        for (Constructor ctor : declaredConstructors) {\n            if (null != args && ctor.getParameterTypes().length == args.length) {\n                constructorToUse = ctor;\n                break;\n            }\n        }\n        return getInstantiationStrategy().instantiate(beanDefinition, beanName, constructorToUse, args);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nCGLIB å®ç°å®ä¾å\n\n@Override\n    public Object instantiate(BeanDefinition beanDefinition, String beanName, Constructor ctor, Object[] args) throws BeansException {\n        Enhancer enhancer = new Enhancer();\n        enhancer.setSuperclass(beanDefinition.getBeanClass());\n        enhancer.setCallback(new NoOp() {\n            @Override\n            public int hashCode() {\n                return super.hashCode();\n            }\n        });\n        if (null == ctor) return enhancer.create();\n        return enhancer.create(ctor.getParameterTypes(), args);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nJAVA åå°å®ç°åºåå\n\n    @Override\n    public Object instantiate(BeanDefinition beanDefinition, String beanName, Constructor ctor, Object[] args) throws BeansException {\n        Class clazz = beanDefinition.getBeanClass();\n        try {\n            if (null != ctor) {\n                return clazz.getDeclaredConstructor(ctor.getParameterTypes()).newInstance(args);\n            } else {\n                return clazz.getDeclaredConstructor().newInstance();\n            }\n        } catch (NoSuchMethodException | InstantiationException | IllegalAccessException | InvocationTargetException e) {\n            throw new BeansException("Failed to instantiate [" + clazz.getName() + "]", e);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# æ³¨è§£å±æ§å¡«å\n\næ³¨è§£å±æ§ï¼ä¼ä»ä¹åæ³¨åç BeanPostProcessor éå¹é InstantiationAwareBeanPostProcessor çå¯¹è±¡ï¼å¶ä¸­é»è®¤ç AutowiredAnnotationBeanPostProcessor å·ä½å®ç°äºè¯¥ç±»\n\n    protected void applyBeanPostProcessorsBeforeApplyingPropertyValues(String beanName, Object bean, BeanDefinition beanDefinition) {\n        for (BeanPostProcessor beanPostProcessor : getBeanPostProcessors()) {\n            if (beanPostProcessor instanceof InstantiationAwareBeanPostProcessor) {\n                PropertyValues pvs = ((InstantiationAwareBeanPostProcessor) beanPostProcessor).postProcessPropertyValues(beanDefinition.getPropertyValues(), bean, beanName);\n                if (null != pvs) {\n                    for (PropertyValue propertyValue : pvs.getPropertyValues()) {\n                        beanDefinition.getPropertyValues().addPropertyValue(propertyValue);\n                    }\n                }\n            }\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nAutowiredAnnotationBeanPostProcessor æç¥æ³¨è§£å±æ§å¡«å\n\n    @Override\n    public PropertyValues postProcessPropertyValues(PropertyValues pvs, Object bean, String beanName) throws BeansException {\n        Class<?> clazz = bean.getClass();\n        clazz = ClassUtils.isCglibProxyClass(clazz) ? clazz.getSuperclass() : clazz;\n        // è·å¾å¯¹è±¡ææå­æ®µ\n        Field[] declaredFields = clazz.getDeclaredFields();\n        for (Field field : declaredFields) {\n            // @Value æ³¨è§£\n            Value valueAnnotation = field.getAnnotation(Value.class);\n            if (null != valueAnnotation) {\n                Object value = valueAnnotation.value();\n                // è§£æå¾å°å¼\n                value = beanFactory.resolveEmbeddedValue((String) value);\n                // ç±»åè½¬æ¢\n                Class<?> sourceType = value.getClass();\n                Class<?> targetType = (Class<?>) TypeUtil.getType(field);\n                // å¯¹å¼è¿è¡è½¬æ¢å¤ç\n                ConversionService conversionService = beanFactory.getConversionService();\n                if (conversionService != null) {\n                    if (conversionService.canConvert(sourceType, targetType)) {\n                        value = conversionService.convert(value, targetType);\n                    }\n                }\n                // æå¼è®¾ç½®è¿å»\n                BeanUtil.setFieldValue(bean, field.getName(), value);\n            }\n        }\n        // 2. å¤çæ³¨è§£ @Autowired\n        for (Field field : declaredFields) {\n            Autowired autowiredAnnotation = field.getAnnotation(Autowired.class);\n            if (null != autowiredAnnotation) {\n                Class<?> fieldType = field.getType();\n                String dependentBeanName = null;\n                Qualifier qualifierAnnotation = field.getAnnotation(Qualifier.class);\n                Object dependentBean = null;\n                if (null != qualifierAnnotation) {\n                    dependentBeanName = qualifierAnnotation.value();\n                    dependentBean = beanFactory.getBean(dependentBeanName, fieldType);\n                } else {\n                    dependentBean = beanFactory.getBean(fieldType);\n                }\n                BeanUtil.setFieldValue(bean, field.getName(), dependentBean);\n            }\n        }\n        return pvs;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n\n\n\n# XML å±æ§å¡«å\n\nXML å±æ§å¡«åè¿éè¯´è¿ä¼åºç°å¾ªç¯ä¾èµçé®é¢ï¼å¨å®ä¾åé¶æ®µçååå·²ç»å¯¹è¿ä¸ªå¤çäºï¼åç»­ä¼åç¬è®²è§£\n\n    protected void applyPropertyValues(String beanName, Object bean, BeanDefinition beanDefinition) {\n        try {\n            PropertyValues propertyValues = beanDefinition.getPropertyValues();\n            for (PropertyValue propertyValue : propertyValues.getPropertyValues()) {\n                String name = propertyValue.getName();\n                Object value = propertyValue.getValue();\n                if (value instanceof BeanReference) {\n                    // A ä¾èµ Bï¼è·å B çå®ä¾å\n                    BeanReference beanReference = (BeanReference) value;\n                    value = getBean(beanReference.getBeanName());\n                }\n                // ç±»åè½¬æ¢\n                else {\n                    Class<?> sourceType = value.getClass();\n                    Class<?> targetType = (Class<?>) TypeUtil.getFieldType(bean.getClass(), name);\n                    ConversionService conversionService = getConversionService();\n                    if (conversionService != null) {\n                        if (conversionService.canConvert(sourceType, targetType)) {\n                            value = conversionService.convert(value, targetType);\n                        }\n                    }\n                }\n                // åå°è®¾ç½®å±æ§å¡«å\n                 BeanUtil.setFieldValue(bean, name, value);\n            }\n        } catch (Exception e) {\n            throw new BeansException("Error setting property valuesï¼" + beanName + " messageï¼" + e);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\n\n# æç¥å¯¹è±¡\n\næç¥å¯¹è±¡åä¸ºä¸ä¸ªæ©å±æ¥å£ï¼åªè¦æä»¬ç Bean å®ç°äºè¿äºæ¥å£ï¼å°±å¯ä»¥ä¸ºæä»¬ç Bean æä¾é¢å¤çè½å\n\n    private Object initializeBean(String beanName, Object bean, BeanDefinition beanDefinition) {\n        // invokeAwareMethodsï¼æç¥å¯¹è±¡ï¼\n        if (bean instanceof Aware) {\n            if (bean instanceof BeanFactoryAware) {\n                ((BeanFactoryAware) bean).setBeanFactory(this);\n            }\n            if (bean instanceof BeanClassLoaderAware) {\n                ((BeanClassLoaderAware) bean).setBeanClassLoader(getBeanClassLoader());\n            }\n            if (bean instanceof BeanNameAware) {\n                ((BeanNameAware) bean).setBeanName(beanName);\n            }\n        }\n        // 1. æ§è¡ BeanPostProcessor Before å¤ç\n        Object wrappedBean = applyBeanPostProcessorsBeforeInitialization(bean, beanName);\n        // æ§è¡ Bean å¯¹è±¡çåå§åæ¹æ³\n        try {\n            invokeInitMethods(beanName, wrappedBean, beanDefinition);\n        } catch (Exception e) {\n            throw new BeansException("Invocation of init method of bean[" + beanName + "] failed", e);\n        }\n        // 2. æ§è¡ BeanPostProcessor After å¤ç\n        wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName);\n        return wrappedBean;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# åå§åæ¹æ³ä¹å\n\nå¨ Bean çåå§åæ¹æ³ä¹åè°ç¨ï¼é»è®¤æä¾äº applicationContext çä¸ä¸ææ³¨å¥ï¼å½æä¸ªç±»å®ç°äº ApplicationContextAwareï¼å°±æä¾ applicationContext ä¸ä¸æçè½åï¼åªæ¯æä»¬è¦å®ç°çæ¯ ApplicationContextAware ï¼å¹¶ä¸æ¯ BeanPostProcessor\n\n    @Override\n    public Object applyBeanPostProcessorsBeforeInitialization(Object existingBean, String beanName) throws BeansException {\n        Object result = existingBean;\n        for (BeanPostProcessor processor : getBeanPostProcessors()) {\n            Object current = processor.postProcessBeforeInitialization(result, beanName);\n            if (null == current) return result;\n            result = current;\n        }\n        return result;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n        if (bean instanceof ApplicationContextAware){\n            ((ApplicationContextAware) bean).setApplicationContext(applicationContext);\n        }\n        return bean;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# Bean çåå§åæ¹æ³\n\nBean åå§åæ¹æ³è¿æ¯æ¯è¾ç®åçï¼ä¸»è¦æ¯éè¿å¤æ­æ¯å¦å®ç° InitializingBean æ¥å£ï¼å¦æå®ç°äºï¼åè°ç¨å®ä¾åå¯¹è±¡å®ç°ç afterPropertiesSet æ¹æ³ãå¦æä¸æ¯ä»¥æ¥å£å®ç°çï¼æ¯ä»¥ XML æè¿°çï¼åæ¯éè¿åå°çæ¹å¼è°ç¨è¯¥æ¹æ³ã\n\n    private void invokeInitMethods(String beanName, Object bean, BeanDefinition beanDefinition) throws Exception {\n        // 1. å®ç°æ¥å£ InitializingBean\n        if (bean instanceof InitializingBean) {\n            ((InitializingBean) bean).afterPropertiesSet();\n        }\n\n        // 2. æ³¨è§£éç½® init-method {å¤æ­æ¯ä¸ºäºé¿åäºæ¬¡æ§è¡éæ¯}\n        String initMethodName = beanDefinition.getInitMethodName();\n        if (StrUtil.isNotEmpty(initMethodName)) {\n            Method initMethod = beanDefinition.getBeanClass().getMethod(initMethodName);\n            if (null == initMethod) {\n                throw new BeansException("Could not find an init method named \'" + initMethodName + "\' on bean with name \'" + beanName + "\'");\n            }\n            initMethod.invoke(bean);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n<bean id="userDao" class="cn.bugstack.springframework.test.bean.UserDao" init-method="initDataMethod" destroy-method="destroyDataMethod"/>\n\n\n1\n\n\n\n# åå§åæ¹æ³ä¹å\n\n    @Override\n    public Object applyBeanPostProcessorsAfterInitialization(Object existingBean, String beanName) throws BeansException {\n        Object result = existingBean;\n        for (BeanPostProcessor processor : getBeanPostProcessors()) {\n            Object current = processor.postProcessAfterInitialization(result, beanName);\n            if (null == current) return result;\n            result = current;\n        }\n        return result;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# æ³¨åéæ¯äºä»¶\n\néæ¯äºä»¶éè¦ Bean å®ç° DisposableBean æ¥å£å¹¶éå destroy () æ¹æ³ãå¦ä¸åæ¯æå®ç° DisposableBean ææå¨ XML æè¿°è¿éæ¯æ¹æ³çæ³¨åå°ä¸ä¸ªå®¹å¨éã\n\n    protected void registerDisposableBeanIfNecessary(String beanName, Object bean, BeanDefinition beanDefinition) {\n        // é Singleton ç±»åç Bean ä¸æ§è¡éæ¯æ¹æ³\n        if (!beanDefinition.isSingleton()) return;\n        if (bean instanceof DisposableBean || StrUtil.isNotEmpty(beanDefinition.getDestroyMethodName())) {\n            registerDisposableBean(beanName, new DisposableBeanAdapter(bean, beanName, beanDefinition));\n        }\n    }\n\n    public void registerDisposableBean(String beanName, DisposableBean bean) {\n        disposableBeans.put(beanName, bean);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nç¶ååæ´ä¸ªå¯å¨è¿ç¨ç»æè°ç¨ registerShutdownHook æ¹æ³æ·»å ä¸ä¸ªé©å­çå¬ã\n\n    @Override\n    public void registerShutdownHook() {\n        // Java ä¸­çä¸ä¸ªæ¹æ³ï¼å®ç¨äºæ³¨å JVM å³é­æ¶è¦æ§è¡çç¹å®ä»£ç åãå½ JVM å³å°å³é­æ¶ï¼è¿äºä»£ç åä¼è¢«æ§è¡ï¼ä»¥ä¾¿è¿è¡æ¸çãéæ¾èµæºç­æä½ã\n        // è¿äºä»£ç åéå¸¸ç§°ä¸ºâé©å­ï¼hookï¼âï¼å æ­¤è¯¥æ¹æ³ä¹è¢«ç§°ä¸ºâæ·»å å³é­é©å­ï¼Add Shutdown Hookï¼âã\n        Runtime.getRuntime().addShutdownHook(new Thread(this::close));\n    }\n\n    @Override\n    public void close() {\n        // åå¸å®¹å¨å³é­äºä»¶\n        publishEvent(new ContextClosedEvent(this));\n        // æ§è¡éæ¯åä¾beançéæ¯æ¹æ³\n        getBeanFactory().destroySingletons();\n    }\n\n    public void destroySingletons() {\n        Set<String> keySet = this.disposableBeans.keySet();\n        Object[] disposableBeanNames = keySet.toArray();\n\n        for (int i = disposableBeanNames.length - 1; i >= 0; i--) {\n            Object beanName = disposableBeanNames[i];\n            DisposableBean disposableBean = disposableBeans.remove(beanName);\n            try {\n                disposableBean.destroy();\n            } catch (Exception e) {\n                throw new BeansException("Destroy method on bean with name \'" + beanName + "\' threw an exception", e);\n            }\n        }\n    }\n\n    @Override\n    public void destroy() throws Exception {\n        // 1. å®ç°æ¥å£ DisposableBean\n        if (bean instanceof DisposableBean) {\n            ((DisposableBean) bean).destroy();\n        }\n        // 2. æ³¨è§£éç½® destroy-method {å¤æ­æ¯ä¸ºäºé¿åäºæ¬¡æ§è¡éæ¯}\n        if (StrUtil.isNotEmpty(destroyMethodName) && !(bean instanceof DisposableBean && "destroy".equals(this.destroyMethodName))) {\n            Method destroyMethod = bean.getClass().getMethod(destroyMethodName);\n            if (null == destroyMethod) {\n                throw new BeansException("Couldn\'t find a destroy method named \'" + destroyMethodName + "\' on bean with name \'" + beanName + "\'");\n            }\n            destroyMethod.invoke(bean);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n\n\n\n# scop å¤çåä¾\n\n    public void registerSingleton(String beanName, Object singletonObject) {\n        // ä¸çº§ç¼å­\n        singletonObjects.put(beanName, singletonObject);\n        // äºçº§ç¼å­\n        earlySingletonObjects.remove(beanName);\n        // ä¸çº§ç¼å­\n        singletonFactories.remove(beanName);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n',normalizedContent:'spring æ¯ java å¼åç¨å°æå¤çä¸ä¸ª web æ¡æ¶ï¼æ ¸å¿æ¯ iocï¼æ§å¶åè½¬ï¼å aopï¼é¢ååé¢ï¼ï¼ä½åä¸ºæ¶æï¼æ³è¦å¯¹ spring è¦è¿è¡æ©å±ç­ï¼å¿é¡»è¦äºè§£ spring ççå½å¨æãäºä»¶ãaopãè¡ä¸ºæç¥ç­ãspring çå½å¨æå¦ä¸å¾ï¼\n\n\n\næç¤º\n\næ¬æä¸»è¦äºè§£ spring çå½å¨æçæåªäºï¼ä»¥åä»ä»¬çæ ¸å¿ä»£ç æ¯æä¹ç¼åï¼æ´ä¸ªè¿ç¨æ¯å ioc å di çï¼ioc å°å¯¹è±¡çåå»ºåä¾èµå³ç³»çç»´æ¤ä»ä»£ç ä¸­è±ç¦»åºæ¥ï¼éè¿éç½®è¯»ååå»ºå¯¹è±¡ï¼di ä»æ³¨è§£å±æ§å¡«åè¿ç¨ä»¥å xml å±æ§å¡«åè¿ç¨ä¸ºå·ä½çä½ç°ã\n\n\n# è¯»å xml æä»¶\n\néè¿ classpathxmlapplicationcontext æ¥è¯»åèµæºæä»¶ä¸ç spring.xml\n\n    @test\n    public void test() {\n        classpathxmlapplicationcontext applicationcontext = new classpathxmlapplicationcontext("classpath:spring.xml");\n        userservice userservice = applicationcontext.getbean("userservice", userservice.class);\n        system.out.println("æµè¯ç»æï¼" + userservice.queryuserinfo());\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\næ ¹æ®æä»¶ç±»åä½¿ç¨ä¸åçæ¹å¼è¯»åå°æµä¸­\n\n    @override\n    public resource getresource(string location) {\n        assert.notnull(location, "location must not be null");\n        if (location.startswith(classpath_url_prefix)) {\n            return new classpathresource(location.substring(classpath_url_prefix.length()));\n        }\n        else {\n            try {\n                url url = new url(location);\n                return new urlresource(url);\n            } catch (malformedurlexception e) {\n                return new filesystemresource(location);\n            }\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\nè°ç¨ xml è§£æ\n\n    @override\n    public void loadbeandefinitions(resource resource) throws beansexception {\n        try {\n            try (inputstream inputstream = resource.getinputstream()) {\n                doloadbeandefinitions(inputstream);\n            }\n        } catch (ioexception | classnotfoundexception | documentexception e) {\n            throw new beansexception("ioexception parsing xml document from " + resource, e);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# å°è£ beandefinition\n\nè§£æ xml çæ´ä¸ªè¿ç¨ï¼\n\n * è§£æ dom\n * è§£æå¸¦æ @component æ³¨è§£çç±»ï¼å¹¶å°è£ä¸º beandefinition æ³¨åå° beanfactory\n * è§£æä¸æ¯ component-scan å®ä¹çç±»\n\n    protected void doloadbeandefinitions(inputstream inputstream) throws classnotfoundexception, documentexception {\n        // ä½¿ç¨ org.dom4j.io çè§£æå¨\n        saxreader reader = new saxreader();\n        document document = reader.read(inputstream);\n        element root = document.getrootelement();\n        // è§£æ context:component-scan æ ç­¾ï¼æ«æåä¸­çç±»å¹¶æåç¸å³ä¿¡æ¯ï¼ç¨äºç»è£ beandefinition\n        element componentscan = root.element("component-scan");\n        if (null != componentscan) {\n            string scanpath = componentscan.attributevalue("base-package");\n            if (strutil.isempty(scanpath)) {\n                throw new beansexception("the value of base-package attribute can not be empty or null");\n            }\n            // æ«ææ´ä¸ªå\n            scanpackage(scanpath);\n        }\n        list<element> beanlist = root.elements("bean");\n        for (element bean : beanlist) {\n            string id = bean.attributevalue("id");\n            string name = bean.attributevalue("name");\n            string classname = bean.attributevalue("class");\n            string initmethod = bean.attributevalue("init-method");\n            string destroymethodname = bean.attributevalue("destroy-method");\n            string beanscope = bean.attributevalue("scope");\n            // è·å classï¼æ¹ä¾¿è·åç±»ä¸­çåç§°\n            class<?> clazz = class.forname(classname);\n            // ä¼åçº§ id > name\n            string beanname = strutil.isnotempty(id) ? id : name;\n            if (strutil.isempty(beanname)) {\n                beanname = strutil.lowerfirst(clazz.getsimplename());\n            }\n            // å®ä¹bean\n            beandefinition beandefinition = new beandefinition(clazz);\n            beandefinition.setinitmethodname(initmethod);\n            beandefinition.setdestroymethodname(destroymethodname);\n            if (strutil.isnotempty(beanscope)) {\n                beandefinition.setscope(beanscope);\n            }\n            list<element> propertylist = bean.elements("property");\n            // è¯»åå±æ§å¹¶å¡«å\n            for (element property : propertylist) {\n                // è§£ææ ç­¾ï¼property\n                string attrname = property.attributevalue("name");\n                string attrvalue = property.attributevalue("value");\n                string attrref = property.attributevalue("ref");\n                // è·åå±æ§å¼ï¼å¼å¥å¯¹è±¡ãå¼å¯¹è±¡\n                object value = strutil.isnotempty(attrref) ? new beanreference(attrref) : attrvalue;\n                // åå»ºå±æ§ä¿¡æ¯\n                propertyvalue propertyvalue = new propertyvalue(attrname, value);\n                beandefinition.getpropertyvalues().addpropertyvalue(propertyvalue);\n            }\n            if (getregistry().containsbeandefinition(beanname)) {\n                throw new beansexception("duplicate beanname[" + beanname + "] is not allowed");\n            }\n            // æ³¨å beandefinition\n            getregistry().registerbeandefinition(beanname, beandefinition);\n        }\n    }\n\n    private void scanpackage(string scanpath) {\n        string[] basepackages = strutil.splittoarray(scanpath, \',\');\n        classpathbeandefinitionscanner scanner = new classpathbeandefinitionscanner(getregistry());\n        scanner.doscan(basepackages);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n\n\næ ¹æ®æä¾è·¯å¾å°è£ä¸º beandefinition å¹¶æ³¨åå° beanfactory\n\n    public void doscan(string... basepackages) {\n        for (string basepackage : basepackages) {\n            set<beandefinition> candidates = findcandidatecomponents(basepackage);\n            for (beandefinition beandefinition : candidates) {\n                // è§£æ bean çä½ç¨å singletonãprototype\n                string beanscope = resolvebeanscope(beandefinition);\n                if (strutil.isnotempty(beanscope)) {\n                    beandefinition.setscope(beanscope);\n                }\n                registry.registerbeandefinition(determinebeanname(beandefinition), beandefinition);\n            }\n        }\n\n        // æ³¨åå¤çæ³¨è§£ç beanpostprocessor(@autowiredã@value)\n        registry.registerbeandefinition("cn.bugstack.springframework.context.annotation.internalautowiredannotationprocessor", new beandefinition(autowiredannotationbeanpostprocessor.class));\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nå¯¹æä¾çåè·¯å¾æ«ææ @component æ³¨è§£çç±»\n\n    public set<beandefinition> findcandidatecomponents(string basepackage) {\n        set<beandefinition> candidates = new linkedhashset<>();\n        set<class<?>> classes = classutil.scanpackagebyannotation(basepackage, component.class);\n        for (class<?> clazz : classes) {\n            candidates.add(new beandefinition(clazz));\n        }\n        return candidates;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# beanfactorypostprocessor\n\nbeanfactorypostprocessor å¯ä»¥ä¿®æ¹æä»¬å¯¹ beandefinition å®ä¹çææä¿¡æ¯ï¼å¯ä»¥æ·»å å±æ§ï¼ä¿®æ¹å±æ§ï¼æ·»å é¢å¤çæ¹æ³ç­ãå·ä½ä¼å¯¹ææå®ç° beanfactorypostprocessor çç±»è¿è¡è·åï¼å¹¶å¾ªç¯è°ç¨ postprocessbeanfactory æ¹æ³\n\n    private void invokebeanfactorypostprocessors(configurablelistablebeanfactory beanfactory) {\n        map<string, beanfactorypostprocessor> beanfactorypostprocessormap = beanfactory.getbeansoftype(beanfactorypostprocessor.class);\n        for (beanfactorypostprocessor beanfactorypostprocessor : beanfactorypostprocessormap.values()) {\n            beanfactorypostprocessor.postprocessbeanfactory(beanfactory);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\næä¾ä¸ä¸ªé»è®¤çå®ç°\n\n    @override\n    public void postprocessbeanfactory(configurablelistablebeanfactory beanfactory) throws beansexception {\n        try {\n            // å è½½å±æ§æä»¶\n            defaultresourceloader resourceloader = new defaultresourceloader();\n            resource resource = resourceloader.getresource(location);\n\n            // æå±æ§æä»¶çåå®¹å è½½å°propertieséç»æé®å¼å¯¹\n            properties properties = new properties();\n            properties.load(resource.getinputstream());\n            string[] beandefinitionnames = beanfactory.getbeandefinitionnames();\n            for (string beanname : beandefinitionnames) {\n                beandefinition beandefinition = beanfactory.getbeandefinition(beanname);\n                propertyvalues propertyvalues = beandefinition.getpropertyvalues();\n                for (propertyvalue propertyvalue : propertyvalues.getpropertyvalues()) {\n                    object value = propertyvalue.getvalue();\n                    if (!(value instanceof string)) continue;\n                    value = resolveplaceholder((string) value, properties);\n                    propertyvalues.addpropertyvalue(new propertyvalue(propertyvalue.getname(), value));\n                }\n            }\n            // åå®¹å¨ä¸­æ·»å å­ç¬¦ä¸²è§£æå¨ï¼ä¾è§£æ@valueæ³¨è§£ä½¿ç¨\n            stringvalueresolver valueresolver = new placeholderresolvingstringvalueresolver(properties);\n            // æ³¨åå°å®¹å¨ï¼ä»¥ä¾¿åç»­ä½¿ç¨\n            beanfactory.addembeddedvalueresolver(valueresolver);\n        } catch (ioexception e) {\n            throw new beansexception("could not load properties", e);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\n\n# æ³¨åå®ç° beanpostprocessor çç±»\n\nbeanpostprocessor å°±æ¯æä¾äº postprocessbeforeinitializationï¼postprocessafterinitialization ä¸¤ç§æ¹æ³ï¼æä¾æä»¬å¨å®ä¾å bean çæ¶åï¼ææå®ç° beanpostprocessor çç±»ï¼æ³¨åå° list<beanpostprocessor> beanpostprocessors = new arraylist<beanpostprocessor>(); ä¸­\n\n    private void registerbeanpostprocessors(configurablelistablebeanfactory beanfactory) {\n        map<string, beanpostprocessor> beanpostprocessormap = beanfactory.getbeansoftype(beanpostprocessor.class);\n        for (beanpostprocessor beanpostprocessor : beanpostprocessormap.values()) {\n            beanfactory.addbeanpostprocessor(beanpostprocessor);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# å®ä¾å bean\n\n    protected <t> t dogetbean(final string name, final object[] args) {\n        // ä»ç¼å­ä¸­è·åå®ä¾\n        object sharedinstance = getsingleton(name);\n        if (sharedinstance != null) {\n            // å¦æå®ç°äº factorybeanï¼åéè¦è°ç¨ factorybean##getobject\n            return (t) getobjectforbeaninstance(sharedinstance, name);\n        }\n        // ä»beandefinitionåè¡¨ä¸­è·åå¯¹è±¡\n        beandefinition beandefinition = getbeandefinition(name);\n        object bean = createbean(name, beandefinition, args);\n        // å¦æå®ç°äº factorybeanï¼åéè¦è°ç¨ factorybean##getobject\n        return (t) getobjectforbeaninstance(bean, name);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nå®ä¾å bean çå·ä½æ¹æ³\n\n    protected object docreatebean(string beanname, beandefinition beandefinition, object[] args) {\n        object bean = null;\n        try {\n            // å®ä¾å bean\n            bean = createbeaninstance(beandefinition, beanname, args);\n            // å¤çå¾ªç¯ä¾èµï¼å°å®ä¾ååçbeanå¯¹è±¡æåæ¾å¥ç¼å­ä¸­æ´é²åºæ¥\n            if (beandefinition.issingleton()) {\n                object finalbean = bean;\n                addsingletonfactory(beanname, () -> getearlybeanreference(beanname, beandefinition, finalbean));\n            }\n            // æ¯å¦éè¦ç»§ç»­è¿è¡åç»­çå±æ§å¡«å\n            boolean continuewithpropertypopulation = applybeanpostprocessorsafterinstantiation(beanname, bean);\n            if (!continuewithpropertypopulation) {\n                return bean;\n            }\n            // å¨è®¾ç½® bean å±æ§ä¹åï¼åè®¸ beanpostprocessor ä¿®æ¹å±æ§å¼ï¼æ³¨è§£å±æ§å¡«åï¼\n            applybeanpostprocessorsbeforeapplyingpropertyvalues(beanname, bean, beandefinition);\n            // ç» bean å¡«åå±æ§ï¼xmlå±æ§å¡«åï¼\n            applypropertyvalues(beanname, bean, beandefinition);\n            // æ§è¡ bean çåå§åæ¹æ³å beanpostprocessor çåç½®ååç½®å¤çæ¹æ³\n            bean = initializebean(beanname, bean, beandefinition);\n        } catch (exception e) {\n            throw new beansexception("instantiation of bean failed", e);\n        }\n        // æ³¨åå®ç°äº disposablebean æ¥å£ç bean å¯¹è±¡\n        registerdisposablebeanifnecessary(beanname, bean, beandefinition);\n        // å¤æ­ scope_singletonãscope_prototype\n        object exposedobject = bean;\n        if (beandefinition.issingleton()) {\n            // è·åä»£çå¯¹è±¡\n            exposedobject = getsingleton(beanname);\n            registersingleton(beanname, exposedobject);\n        }\n        return exposedobject;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n\n\ncreatebeaninstance ä½¿ç¨äº cglib æ¥å®ä¾åä¸ä¸ª bean, ä¹å¯ä»¥ä½¿ç¨ java èªå¸¦çåå°\n\n    protected object createbeaninstance(beandefinition beandefinition, string beanname, object[] args) {\n        constructor constructortouse = null;\n        class<?> beanclass = beandefinition.getbeanclass();\n        constructor<?>[] declaredconstructors = beanclass.getdeclaredconstructors();\n        for (constructor ctor : declaredconstructors) {\n            if (null != args && ctor.getparametertypes().length == args.length) {\n                constructortouse = ctor;\n                break;\n            }\n        }\n        return getinstantiationstrategy().instantiate(beandefinition, beanname, constructortouse, args);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\ncglib å®ç°å®ä¾å\n\n@override\n    public object instantiate(beandefinition beandefinition, string beanname, constructor ctor, object[] args) throws beansexception {\n        enhancer enhancer = new enhancer();\n        enhancer.setsuperclass(beandefinition.getbeanclass());\n        enhancer.setcallback(new noop() {\n            @override\n            public int hashcode() {\n                return super.hashcode();\n            }\n        });\n        if (null == ctor) return enhancer.create();\n        return enhancer.create(ctor.getparametertypes(), args);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\njava åå°å®ç°åºåå\n\n    @override\n    public object instantiate(beandefinition beandefinition, string beanname, constructor ctor, object[] args) throws beansexception {\n        class clazz = beandefinition.getbeanclass();\n        try {\n            if (null != ctor) {\n                return clazz.getdeclaredconstructor(ctor.getparametertypes()).newinstance(args);\n            } else {\n                return clazz.getdeclaredconstructor().newinstance();\n            }\n        } catch (nosuchmethodexception | instantiationexception | illegalaccessexception | invocationtargetexception e) {\n            throw new beansexception("failed to instantiate [" + clazz.getname() + "]", e);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# æ³¨è§£å±æ§å¡«å\n\næ³¨è§£å±æ§ï¼ä¼ä»ä¹åæ³¨åç beanpostprocessor éå¹é instantiationawarebeanpostprocessor çå¯¹è±¡ï¼å¶ä¸­é»è®¤ç autowiredannotationbeanpostprocessor å·ä½å®ç°äºè¯¥ç±»\n\n    protected void applybeanpostprocessorsbeforeapplyingpropertyvalues(string beanname, object bean, beandefinition beandefinition) {\n        for (beanpostprocessor beanpostprocessor : getbeanpostprocessors()) {\n            if (beanpostprocessor instanceof instantiationawarebeanpostprocessor) {\n                propertyvalues pvs = ((instantiationawarebeanpostprocessor) beanpostprocessor).postprocesspropertyvalues(beandefinition.getpropertyvalues(), bean, beanname);\n                if (null != pvs) {\n                    for (propertyvalue propertyvalue : pvs.getpropertyvalues()) {\n                        beandefinition.getpropertyvalues().addpropertyvalue(propertyvalue);\n                    }\n                }\n            }\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nautowiredannotationbeanpostprocessor æç¥æ³¨è§£å±æ§å¡«å\n\n    @override\n    public propertyvalues postprocesspropertyvalues(propertyvalues pvs, object bean, string beanname) throws beansexception {\n        class<?> clazz = bean.getclass();\n        clazz = classutils.iscglibproxyclass(clazz) ? clazz.getsuperclass() : clazz;\n        // è·å¾å¯¹è±¡ææå­æ®µ\n        field[] declaredfields = clazz.getdeclaredfields();\n        for (field field : declaredfields) {\n            // @value æ³¨è§£\n            value valueannotation = field.getannotation(value.class);\n            if (null != valueannotation) {\n                object value = valueannotation.value();\n                // è§£æå¾å°å¼\n                value = beanfactory.resolveembeddedvalue((string) value);\n                // ç±»åè½¬æ¢\n                class<?> sourcetype = value.getclass();\n                class<?> targettype = (class<?>) typeutil.gettype(field);\n                // å¯¹å¼è¿è¡è½¬æ¢å¤ç\n                conversionservice conversionservice = beanfactory.getconversionservice();\n                if (conversionservice != null) {\n                    if (conversionservice.canconvert(sourcetype, targettype)) {\n                        value = conversionservice.convert(value, targettype);\n                    }\n                }\n                // æå¼è®¾ç½®è¿å»\n                beanutil.setfieldvalue(bean, field.getname(), value);\n            }\n        }\n        // 2. å¤çæ³¨è§£ @autowired\n        for (field field : declaredfields) {\n            autowired autowiredannotation = field.getannotation(autowired.class);\n            if (null != autowiredannotation) {\n                class<?> fieldtype = field.gettype();\n                string dependentbeanname = null;\n                qualifier qualifierannotation = field.getannotation(qualifier.class);\n                object dependentbean = null;\n                if (null != qualifierannotation) {\n                    dependentbeanname = qualifierannotation.value();\n                    dependentbean = beanfactory.getbean(dependentbeanname, fieldtype);\n                } else {\n                    dependentbean = beanfactory.getbean(fieldtype);\n                }\n                beanutil.setfieldvalue(bean, field.getname(), dependentbean);\n            }\n        }\n        return pvs;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n\n\n\n# xml å±æ§å¡«å\n\nxml å±æ§å¡«åè¿éè¯´è¿ä¼åºç°å¾ªç¯ä¾èµçé®é¢ï¼å¨å®ä¾åé¶æ®µçååå·²ç»å¯¹è¿ä¸ªå¤çäºï¼åç»­ä¼åç¬è®²è§£\n\n    protected void applypropertyvalues(string beanname, object bean, beandefinition beandefinition) {\n        try {\n            propertyvalues propertyvalues = beandefinition.getpropertyvalues();\n            for (propertyvalue propertyvalue : propertyvalues.getpropertyvalues()) {\n                string name = propertyvalue.getname();\n                object value = propertyvalue.getvalue();\n                if (value instanceof beanreference) {\n                    // a ä¾èµ bï¼è·å b çå®ä¾å\n                    beanreference beanreference = (beanreference) value;\n                    value = getbean(beanreference.getbeanname());\n                }\n                // ç±»åè½¬æ¢\n                else {\n                    class<?> sourcetype = value.getclass();\n                    class<?> targettype = (class<?>) typeutil.getfieldtype(bean.getclass(), name);\n                    conversionservice conversionservice = getconversionservice();\n                    if (conversionservice != null) {\n                        if (conversionservice.canconvert(sourcetype, targettype)) {\n                            value = conversionservice.convert(value, targettype);\n                        }\n                    }\n                }\n                // åå°è®¾ç½®å±æ§å¡«å\n                 beanutil.setfieldvalue(bean, name, value);\n            }\n        } catch (exception e) {\n            throw new beansexception("error setting property valuesï¼" + beanname + " messageï¼" + e);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\n\n# æç¥å¯¹è±¡\n\næç¥å¯¹è±¡åä¸ºä¸ä¸ªæ©å±æ¥å£ï¼åªè¦æä»¬ç bean å®ç°äºè¿äºæ¥å£ï¼å°±å¯ä»¥ä¸ºæä»¬ç bean æä¾é¢å¤çè½å\n\n    private object initializebean(string beanname, object bean, beandefinition beandefinition) {\n        // invokeawaremethodsï¼æç¥å¯¹è±¡ï¼\n        if (bean instanceof aware) {\n            if (bean instanceof beanfactoryaware) {\n                ((beanfactoryaware) bean).setbeanfactory(this);\n            }\n            if (bean instanceof beanclassloaderaware) {\n                ((beanclassloaderaware) bean).setbeanclassloader(getbeanclassloader());\n            }\n            if (bean instanceof beannameaware) {\n                ((beannameaware) bean).setbeanname(beanname);\n            }\n        }\n        // 1. æ§è¡ beanpostprocessor before å¤ç\n        object wrappedbean = applybeanpostprocessorsbeforeinitialization(bean, beanname);\n        // æ§è¡ bean å¯¹è±¡çåå§åæ¹æ³\n        try {\n            invokeinitmethods(beanname, wrappedbean, beandefinition);\n        } catch (exception e) {\n            throw new beansexception("invocation of init method of bean[" + beanname + "] failed", e);\n        }\n        // 2. æ§è¡ beanpostprocessor after å¤ç\n        wrappedbean = applybeanpostprocessorsafterinitialization(wrappedbean, beanname);\n        return wrappedbean;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# åå§åæ¹æ³ä¹å\n\nå¨ bean çåå§åæ¹æ³ä¹åè°ç¨ï¼é»è®¤æä¾äº applicationcontext çä¸ä¸ææ³¨å¥ï¼å½æä¸ªç±»å®ç°äº applicationcontextawareï¼å°±æä¾ applicationcontext ä¸ä¸æçè½åï¼åªæ¯æä»¬è¦å®ç°çæ¯ applicationcontextaware ï¼å¹¶ä¸æ¯ beanpostprocessor\n\n    @override\n    public object applybeanpostprocessorsbeforeinitialization(object existingbean, string beanname) throws beansexception {\n        object result = existingbean;\n        for (beanpostprocessor processor : getbeanpostprocessors()) {\n            object current = processor.postprocessbeforeinitialization(result, beanname);\n            if (null == current) return result;\n            result = current;\n        }\n        return result;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n    @override\n    public object postprocessbeforeinitialization(object bean, string beanname) throws beansexception {\n        if (bean instanceof applicationcontextaware){\n            ((applicationcontextaware) bean).setapplicationcontext(applicationcontext);\n        }\n        return bean;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# bean çåå§åæ¹æ³\n\nbean åå§åæ¹æ³è¿æ¯æ¯è¾ç®åçï¼ä¸»è¦æ¯éè¿å¤æ­æ¯å¦å®ç° initializingbean æ¥å£ï¼å¦æå®ç°äºï¼åè°ç¨å®ä¾åå¯¹è±¡å®ç°ç afterpropertiesset æ¹æ³ãå¦æä¸æ¯ä»¥æ¥å£å®ç°çï¼æ¯ä»¥ xml æè¿°çï¼åæ¯éè¿åå°çæ¹å¼è°ç¨è¯¥æ¹æ³ã\n\n    private void invokeinitmethods(string beanname, object bean, beandefinition beandefinition) throws exception {\n        // 1. å®ç°æ¥å£ initializingbean\n        if (bean instanceof initializingbean) {\n            ((initializingbean) bean).afterpropertiesset();\n        }\n\n        // 2. æ³¨è§£éç½® init-method {å¤æ­æ¯ä¸ºäºé¿åäºæ¬¡æ§è¡éæ¯}\n        string initmethodname = beandefinition.getinitmethodname();\n        if (strutil.isnotempty(initmethodname)) {\n            method initmethod = beandefinition.getbeanclass().getmethod(initmethodname);\n            if (null == initmethod) {\n                throw new beansexception("could not find an init method named \'" + initmethodname + "\' on bean with name \'" + beanname + "\'");\n            }\n            initmethod.invoke(bean);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n<bean id="userdao" class="cn.bugstack.springframework.test.bean.userdao" init-method="initdatamethod" destroy-method="destroydatamethod"/>\n\n\n1\n\n\n\n# åå§åæ¹æ³ä¹å\n\n    @override\n    public object applybeanpostprocessorsafterinitialization(object existingbean, string beanname) throws beansexception {\n        object result = existingbean;\n        for (beanpostprocessor processor : getbeanpostprocessors()) {\n            object current = processor.postprocessafterinitialization(result, beanname);\n            if (null == current) return result;\n            result = current;\n        }\n        return result;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# æ³¨åéæ¯äºä»¶\n\néæ¯äºä»¶éè¦ bean å®ç° disposablebean æ¥å£å¹¶éå destroy () æ¹æ³ãå¦ä¸åæ¯æå®ç° disposablebean ææå¨ xml æè¿°è¿éæ¯æ¹æ³çæ³¨åå°ä¸ä¸ªå®¹å¨éã\n\n    protected void registerdisposablebeanifnecessary(string beanname, object bean, beandefinition beandefinition) {\n        // é singleton ç±»åç bean ä¸æ§è¡éæ¯æ¹æ³\n        if (!beandefinition.issingleton()) return;\n        if (bean instanceof disposablebean || strutil.isnotempty(beandefinition.getdestroymethodname())) {\n            registerdisposablebean(beanname, new disposablebeanadapter(bean, beanname, beandefinition));\n        }\n    }\n\n    public void registerdisposablebean(string beanname, disposablebean bean) {\n        disposablebeans.put(beanname, bean);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nç¶ååæ´ä¸ªå¯å¨è¿ç¨ç»æè°ç¨ registershutdownhook æ¹æ³æ·»å ä¸ä¸ªé©å­çå¬ã\n\n    @override\n    public void registershutdownhook() {\n        // java ä¸­çä¸ä¸ªæ¹æ³ï¼å®ç¨äºæ³¨å jvm å³é­æ¶è¦æ§è¡çç¹å®ä»£ç åãå½ jvm å³å°å³é­æ¶ï¼è¿äºä»£ç åä¼è¢«æ§è¡ï¼ä»¥ä¾¿è¿è¡æ¸çãéæ¾èµæºç­æä½ã\n        // è¿äºä»£ç åéå¸¸ç§°ä¸ºâé©å­ï¼hookï¼âï¼å æ­¤è¯¥æ¹æ³ä¹è¢«ç§°ä¸ºâæ·»å å³é­é©å­ï¼add shutdown hookï¼âã\n        runtime.getruntime().addshutdownhook(new thread(this::close));\n    }\n\n    @override\n    public void close() {\n        // åå¸å®¹å¨å³é­äºä»¶\n        publishevent(new contextclosedevent(this));\n        // æ§è¡éæ¯åä¾beançéæ¯æ¹æ³\n        getbeanfactory().destroysingletons();\n    }\n\n    public void destroysingletons() {\n        set<string> keyset = this.disposablebeans.keyset();\n        object[] disposablebeannames = keyset.toarray();\n\n        for (int i = disposablebeannames.length - 1; i >= 0; i--) {\n            object beanname = disposablebeannames[i];\n            disposablebean disposablebean = disposablebeans.remove(beanname);\n            try {\n                disposablebean.destroy();\n            } catch (exception e) {\n                throw new beansexception("destroy method on bean with name \'" + beanname + "\' threw an exception", e);\n            }\n        }\n    }\n\n    @override\n    public void destroy() throws exception {\n        // 1. å®ç°æ¥å£ disposablebean\n        if (bean instanceof disposablebean) {\n            ((disposablebean) bean).destroy();\n        }\n        // 2. æ³¨è§£éç½® destroy-method {å¤æ­æ¯ä¸ºäºé¿åäºæ¬¡æ§è¡éæ¯}\n        if (strutil.isnotempty(destroymethodname) && !(bean instanceof disposablebean && "destroy".equals(this.destroymethodname))) {\n            method destroymethod = bean.getclass().getmethod(destroymethodname);\n            if (null == destroymethod) {\n                throw new beansexception("couldn\'t find a destroy method named \'" + destroymethodname + "\' on bean with name \'" + beanname + "\'");\n            }\n            destroymethod.invoke(bean);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n\n\n\n# scop å¤çåä¾\n\n    public void registersingleton(string beanname, object singletonobject) {\n        // ä¸çº§ç¼å­\n        singletonobjects.put(beanname, singletonobject);\n        // äºçº§ç¼å­\n        earlysingletonobjects.remove(beanname);\n        // ä¸çº§ç¼å­\n        singletonfactories.remove(beanname);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n',charsets:{cjk:!0}},{title:"æ ¸å¿åè½æè§£ AOP",frontmatter:{title:"æ ¸å¿åè½æè§£ AOP",date:"2023-06-25T09:22:36.000Z",permalink:"/spring/201/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/20.Spring/201.%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8B%86%E8%A7%A3%20AOP.html",relativePath:"00.java/20.Spring/201.æ ¸å¿åè½æè§£ AOP.md",key:"v-b043e1b6",path:"/spring/201/",headers:[{level:2,title:"AOP",slug:"aop",normalizedTitle:"aop",charIndex:2},{level:3,title:"å°è£",slug:"å°è£",normalizedTitle:"å°è£",charIndex:2882},{level:3,title:"æå°è£çèå¥å° Spring ä¸­",slug:"æå°è£çèå¥å°-spring-ä¸­",normalizedTitle:"æå°è£çèå¥å° spring ä¸­",charIndex:5234}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"AOP å°è£ æå°è£çèå¥å° Spring ä¸­",content:'# AOP\n\nAOP çè¯çå¯ä»¥è¿½æº¯å°ä¸ä¸çºª 90 å¹´ä»£åæï¼å®ææ©ç± Gregor Kiczales ç­äººæåºï¼å¹¶å¨ 1997 å¹´åè¡¨äºç»å¸çè®ºæ Aspect-Oriented Programmingãåæ¥ï¼AspectJ æä¸ºäº Java çæä¸­ä½¿ç¨æå¹¿æ³ç AOP æ¡æ¶ä¹ä¸ã\n\nAOP çç®çæ¯ä¸ºäºè§£å³å¨ OOPï¼é¢åå¯¹è±¡ç¼ç¨ï¼ä¸­é¾ä»¥å¤ççæ¨ªåå³æ³¨ç¹é®é¢ï¼å³å°ç³»ç»ä¸å¡é»è¾ä»£ç ä¸å¶ä»éä¸å¡åè½ï¼å¦æ¥å¿è®°å½ãæ§è½ç»è®¡ãå®å¨æ§å¶ç­ï¼åç¦»å¼æ¥ãAOP éè¿æè¿äºéä¸å¡åè½ç¬ç«åºæ¥ï¼å¨éè¦æ¶å¨æå°æ¤å¥å°ç³»ç»ä¸­ï¼ä»èå®ç°å¯¹ä¸å¡é»è¾çæ ä¾µå¥å¼å¢å¼ºã\n\nAOP çæ ¸å¿å¨äºå¶è½å¤å°ä¸å¡é»è¾ä¸éä¸å¡åè½åç¦»å¼æ¥ï¼ä»èéä½äºä»£ç çè¦ååº¦ï¼å¹¶ä¸æ¯æå¨è¿è¡æ¶å¨æå°æ¤å¥åç§»é¤åé¢ãè¿æ ·ä¸æ¥ï¼å°±å¯ä»¥å®ç°æ´å çµæ´»ãå¯ç»´æ¤åå¯æ©å±çç³»ç»ã\n\nAOP çå·ä½è¡¨ç°åæ¬åé¢ï¼Aspectï¼ãè¿æ¥ç¹ï¼Join Pointï¼ãéç¥ï¼Adviceï¼ãåç¹ï¼Pointcutï¼åå¼å¥ï¼Introductionï¼ç­æ¦å¿µãå¶ä¸­ï¼åé¢æ¯ææ¨ªè·¨å¤ä¸ªå¯¹è±¡çéç¨åè½ï¼è¿æ¥ç¹æ¯ç¨åºæ§è¡è¿ç¨ä¸­è½å¤æå¥åé¢çç¹ï¼éç¥åæ¯å®ä¹äºåé¢å¨è¿æ¥ç¹å¤ææ§è¡çæä½ï¼åç¹åæ¯ä¸ä¸ªè°è¯è¡¨è¾¾å¼ï¼ç¨äºå¹éè¿æ¥ç¹ï¼å¼å¥åæ¯ä¸ºæä¸ªå¯¹è±¡æ·»å æ°çæ¥å£å®ç°ãå·ä½å¦ä¸ä»£ç ï¼\n\n    public void test_proxy_method() {\n        // ç®æ å¯¹è±¡(å¯ä»¥æ¿æ¢æä»»ä½çç®æ å¯¹è±¡)\n        Object targetObj = new UserService();\n        // AOP ä»£ç\n        IUserService proxy = (IUserService) Proxy.newProxyInstance(Thread.currentThread().getContextClassLoader(), targetObj.getClass().getInterfaces(), new InvocationHandler() {\n            // æ¹æ³å¹éå¨\n            MethodMatcher methodMatcher = new AspectJExpressionPointcut("execution(* cn.bugstack.springframework.test.bean.IUserService.*(..))");\n            @Override\n            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n                if (methodMatcher.matches(method, targetObj.getClass())) {\n                    // æ¹æ³æ¦æªå¨\n                    MethodInterceptor methodInterceptor = invocation -> {\n                        long start = System.currentTimeMillis();\n                        try {\n                            return invocation.proceed();\n                        } finally {\n                            System.out.println("çæ§ - Begin By AOP");\n                            System.out.println("æ¹æ³åç§°ï¼" + invocation.getMethod().getName());\n                            System.out.println("æ¹æ³èæ¶ï¼" + (System.currentTimeMillis() - start) + "ms");\n                            System.out.println("çæ§ - End\\r\\n");\n                        }\n                    };\n                    // åå°è°ç¨\n                    return methodInterceptor.invoke(new ReflectiveMethodInvocation(targetObj, method, args));\n                }\n                return method.invoke(targetObj, args);\n            }\n        });\n        String result = proxy.queryUserInfo();\n        System.out.println("æµè¯ç»æï¼" + result);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\nè¿æ®µä»£ç ä½¿ç¨äº JDK å¨æä»£çå®ç° AOP çåè½ï¼æ²¡æä½¿ç¨ Spring æä¾çæ¹æ³ãç±»åæ³¨è§£ç­ã\n\n * è¿æ¥ç¹ï¼è¿æ¥ç¹æ¯å¨ç®æ å¯¹è±¡ä¸å¹éçç¹å®ç¹ï¼è¿éçè¿æ¥ç¹æ¯ IUserService æ¥å£ä¸­çæææ¹æ³ï¼ç±äºä½¿ç¨äº targetObj.getClass ().getInterfaces () è·åç®æ å¯¹è±¡æå®ç°çæ¥å£ï¼å æ­¤åªæ¦æªäº IUserService æ¥å£ä¸­çæ¹æ³ã\n * åé¢ï¼åé¢æ¯ä¸ä¸ªæ¨¡ååçæ¨ªåå³æ³¨ç¹ï¼å¨è¿éæä»¬å¯ä»¥è§ä¸ºæ²¡ææ¾å¼å®ä¹çåé¢ãèæ¯ç´æ¥å¨ InvocationHandler.invoke () ä¸­å®ç°äºæ¦æªåå¢å¼ºé»è¾ï¼åæ¬æ¹æ³å¹éå¨ãæ¹æ³æ¦æªå¨ååå°è°ç¨ç­ã\n * åç¹ï¼åç¹æ¯ä¸ç§è°è¯è¡¨è¾¾å¼ï¼ç¨äºå¹éè¿æ¥ç¹ãè¿éä½¿ç¨äº AspectJ è¡¨è¾¾å¼ "execution (* cn.bugstack.springframework.test.bean.IUserService.*(..))"ï¼å®å¹éäº IUserService æ¥å£ä¸­çæææ¹æ³ã\n * éç¥ï¼éç¥ç±»ååæ¬åç½®éç¥ãåç½®éç¥ãç¯ç»éç¥ãæåºéç¥åæç»éç¥ãå¨è¿éä½¿ç¨äºç¯ç»éç¥ï¼å³å¨æ¹æ³æ§è¡ä¹ååä¹åæ·»å äºçæ§é»è¾ã\n * å¼å¥ï¼å¼ä»éå¸¸æ¯ä¸ä¸ªç¹æ®çéç¥ç±»åï¼å®åè®¸å¨è¿è¡æ¶ä¸ºç±»å¨æå°æ·»å æ°æ¥å£å®ç°ãè¿éæ²¡æä½¿ç¨å¼ä»ã\n\n\n# å°è£\n\nå¨ Spring ä¸­ï¼æ ¸å¿é»è¾æ¯ç¦»ä¸å¼ä¸é¢çä»£çä¾å­çï¼åªæ¯ç¸å¯¹åºåäºäºå°è£ï¼æä»¬åç¨ç±»å¾æ¥ç®åè¯´æä¸å°è£å³ç³»ï¼\n\n\n\nç¨æµè¯ä¾å­æ¥è¯´ææ¯æ­¥çæ ¸å¿\n\n    /**\n     * åç¹è¡¨è¾¾å¼ï¼æ¥éªè¯åç¹\n     * @throws NoSuchMethodException\n     */\n    @Test\n    public void test_aop() throws NoSuchMethodException {\n        AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut("execution(* cn.bugstack.springframework.test.bean.UserService.*(..))");\n        Class<UserService> clazz = UserService.class;\n        Method method = clazz.getDeclaredMethod("queryUserInfo");\n        System.out.println("åç¹æ¯å¦åå«è¯¥ç±»ï¼" + pointcut.matches(clazz));\n        System.out.println("åç¹æ¯å¦åå«è¯¥ç±»è¯¥æ¹æ³ï¼" + pointcut.matches(method, clazz));\n    }\n\n    /**\n     * åé¢ å å¨æä»£ç\n     */\n    @Test\n    public void test_dynamic() {\n        // ç®æ å¯¹è±¡\n        IUserService userService = new UserService();\n        // ç»è£ä»£çä¿¡æ¯ï¼åé¢\n        AdvisedSupport advisedSupport = new AdvisedSupport();\n        // è®¾ç½®ä»£çç®æ å¯¹è±¡\n        advisedSupport.setTargetSource(new TargetSource(userService));\n        // è®¾ç½®æ¦æªå¨\n        advisedSupport.setMethodInterceptor(new UserServiceInterceptor());\n        // å¹éä»£çå¯¹è±¡\n        advisedSupport.setMethodMatcher(new AspectJExpressionPointcut("execution(* cn.bugstack.springframework.test.bean.IUserService.*(..))"));\n        // ä»£çå¯¹è±¡(JdkDynamicAopProxy)\n        IUserService proxy_jdk = (IUserService) new JdkDynamicAopProxy(advisedSupport).getProxy();\n        // æµè¯è°ç¨\n        System.out.println("æµè¯ç»æï¼" + proxy_jdk.queryUserInfo());\n        // ä»£çå¯¹è±¡(Cglib2AopProxy)\n        IUserService proxy_cglib = (IUserService) new Cglib2AopProxy(advisedSupport).getProxy();\n        // æµè¯è°ç¨\n        System.out.println("æµè¯ç»æï¼" + proxy_cglib.register("è±è±"));\n    }\n\npublic class UserServiceInterceptor implements MethodInterceptor {\n    @Override\n    public Object invoke(MethodInvocation invocation) throws Throwable {\n        long start = System.currentTimeMillis();\n        try {\n            return invocation.proceed();\n        } finally {\n            System.out.println("çæ§ - Begin By AOP");\n            System.out.println("æ¹æ³åç§°ï¼" + invocation.getMethod());\n            System.out.println("æ¹æ³èæ¶ï¼" + (System.currentTimeMillis() - start) + "ms");\n            System.out.println("çæ§ - End\\r\\n");\n        }\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n\n\n\n# æå°è£çèå¥å° Spring ä¸­\n\nå³ä¾§é¨åå°±æ¯æè¿°äºæ´ä¸ªèåå° Spring ä¸­çç±»ï¼ä¼å¨ Bean åå»ºçè¿ç¨ä¸­ åå§åæ¹æ³ä¹å è¿ä¸ªçå½å¨æååæ¾å°æ¯å¦æä¾äº DefaultAdvisorAutoProxyCreator ç±»çæ¯æï¼å ä¸ºä»æè¿°äºå·ä½ä»£çç±»çè¿ç¨ã\n\n> ä¸ºä»ä¹ä¼å¨åå§åæ¹æ³ä¹åæè¿è¡ä»£çï¼æ¯å ä¸ºä»£çç±»ä¹éè¦çå±æ§ä¹éè¦è¢«å¡«åï¼æä»¥ç­å¡«åå®æ¯åå¨ä»£ç\n\n\n\næ ¸å¿æ¹æ³ï¼æè¿°äºæ´ä¸ªç±»è¢«ä»£ççè¿ç¨\n\n    protected Object wrapIfNecessary(Object bean, String beanName) {\n        // å¤æ­Beanæ¯å¦æ¯Adviceï¼Pointcutï¼Advisorçå­ç±»æèä¸¤ç±»ç¸åå¯ä»¥ç¸äºè½¬ï¼ç±»å±é¢ï¼ï¼ç¨æ·å®ä¹çç±»é½æ¯ false\n        if (isInfrastructureClass(bean.getClass())) return bean;\n        // å¾å°æ³¨åçAspectJExpressionPointcutAdvisor\n        Collection<AspectJExpressionPointcutAdvisor> advisors = beanFactory.getBeansOfType(AspectJExpressionPointcutAdvisor.class).values();\n        for (AspectJExpressionPointcutAdvisor advisor : advisors) {\n            ClassFilter classFilter = advisor.getPointcut().getClassFilter();\n            // ç¨è¡¨è¾¾å¼ è¿æ»¤å¹éç±»\n            if (!classFilter.matches(bean.getClass())) continue;\n            // å°è£\n            AdvisedSupport advisedSupport = new AdvisedSupport();\n            TargetSource targetSource = new TargetSource(bean);\n            advisedSupport.setTargetSource(targetSource);\n            advisedSupport.setMethodInterceptor((MethodInterceptor) advisor.getAdvice());\n            advisedSupport.setMethodMatcher(advisor.getPointcut().getMethodMatcher());\n            advisedSupport.setProxyTargetClass(true);\n            // è¿åä»£çå¯¹è±¡\n            return new ProxyFactory(advisedSupport).getProxy();\n        }\n        return bean;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\n<beans>\n    \x3c!-- ç®æ ç±» --\x3e\n    <bean id="userService" class="cn.bugstack.springframework.test.bean.UserService"/>\n    \x3c!-- ä»£çç±» --\x3e\n    <bean id="beforeAdvice" class="cn.bugstack.springframework.test.bean.UserServiceBeforeAdvice"/>\n    \x3c!-- ç»ä»¶ç±»ï¼è³å³éè¦ --\x3e\n    <bean class="cn.bugstack.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"/>\n    \x3c!-- \n        è¿éæ¯  advisedSupport.setMethodInterceptor((MethodInterceptor) advisor.getAdvice()); è®¾ç½®æ¦æªå¨ï¼\n        å¯ä»¥æ¯åç½®æ¦æªï¼åç½®æ¦æªï¼æèç¯ç»æ¦æª\n     --\x3e\n    <bean id="methodInterceptor" class="cn.bugstack.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor">\n        <property name="advice" ref="beforeAdvice"/>\n    </bean>\n    \x3c!-- åé¢è¡¨è¾¾å¼ --\x3e\n    <bean id="pointcutAdvisor" class="cn.bugstack.springframework.aop.aspectj.AspectJExpressionPointcutAdvisor">\n        <property name="expression" value="execution(* cn.bugstack.springframework.test.bean.IUserService.*(..))"/>\n        <property name="advice" ref="methodInterceptor"/>\n    </bean>\n</beans>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n',normalizedContent:'# aop\n\naop çè¯çå¯ä»¥è¿½æº¯å°ä¸ä¸çºª 90 å¹´ä»£åæï¼å®ææ©ç± gregor kiczales ç­äººæåºï¼å¹¶å¨ 1997 å¹´åè¡¨äºç»å¸çè®ºæ aspect-oriented programmingãåæ¥ï¼aspectj æä¸ºäº java çæä¸­ä½¿ç¨æå¹¿æ³ç aop æ¡æ¶ä¹ä¸ã\n\naop çç®çæ¯ä¸ºäºè§£å³å¨ oopï¼é¢åå¯¹è±¡ç¼ç¨ï¼ä¸­é¾ä»¥å¤ççæ¨ªåå³æ³¨ç¹é®é¢ï¼å³å°ç³»ç»ä¸å¡é»è¾ä»£ç ä¸å¶ä»éä¸å¡åè½ï¼å¦æ¥å¿è®°å½ãæ§è½ç»è®¡ãå®å¨æ§å¶ç­ï¼åç¦»å¼æ¥ãaop éè¿æè¿äºéä¸å¡åè½ç¬ç«åºæ¥ï¼å¨éè¦æ¶å¨æå°æ¤å¥å°ç³»ç»ä¸­ï¼ä»èå®ç°å¯¹ä¸å¡é»è¾çæ ä¾µå¥å¼å¢å¼ºã\n\naop çæ ¸å¿å¨äºå¶è½å¤å°ä¸å¡é»è¾ä¸éä¸å¡åè½åç¦»å¼æ¥ï¼ä»èéä½äºä»£ç çè¦ååº¦ï¼å¹¶ä¸æ¯æå¨è¿è¡æ¶å¨æå°æ¤å¥åç§»é¤åé¢ãè¿æ ·ä¸æ¥ï¼å°±å¯ä»¥å®ç°æ´å çµæ´»ãå¯ç»´æ¤åå¯æ©å±çç³»ç»ã\n\naop çå·ä½è¡¨ç°åæ¬åé¢ï¼aspectï¼ãè¿æ¥ç¹ï¼join pointï¼ãéç¥ï¼adviceï¼ãåç¹ï¼pointcutï¼åå¼å¥ï¼introductionï¼ç­æ¦å¿µãå¶ä¸­ï¼åé¢æ¯ææ¨ªè·¨å¤ä¸ªå¯¹è±¡çéç¨åè½ï¼è¿æ¥ç¹æ¯ç¨åºæ§è¡è¿ç¨ä¸­è½å¤æå¥åé¢çç¹ï¼éç¥åæ¯å®ä¹äºåé¢å¨è¿æ¥ç¹å¤ææ§è¡çæä½ï¼åç¹åæ¯ä¸ä¸ªè°è¯è¡¨è¾¾å¼ï¼ç¨äºå¹éè¿æ¥ç¹ï¼å¼å¥åæ¯ä¸ºæä¸ªå¯¹è±¡æ·»å æ°çæ¥å£å®ç°ãå·ä½å¦ä¸ä»£ç ï¼\n\n    public void test_proxy_method() {\n        // ç®æ å¯¹è±¡(å¯ä»¥æ¿æ¢æä»»ä½çç®æ å¯¹è±¡)\n        object targetobj = new userservice();\n        // aop ä»£ç\n        iuserservice proxy = (iuserservice) proxy.newproxyinstance(thread.currentthread().getcontextclassloader(), targetobj.getclass().getinterfaces(), new invocationhandler() {\n            // æ¹æ³å¹éå¨\n            methodmatcher methodmatcher = new aspectjexpressionpointcut("execution(* cn.bugstack.springframework.test.bean.iuserservice.*(..))");\n            @override\n            public object invoke(object proxy, method method, object[] args) throws throwable {\n                if (methodmatcher.matches(method, targetobj.getclass())) {\n                    // æ¹æ³æ¦æªå¨\n                    methodinterceptor methodinterceptor = invocation -> {\n                        long start = system.currenttimemillis();\n                        try {\n                            return invocation.proceed();\n                        } finally {\n                            system.out.println("çæ§ - begin by aop");\n                            system.out.println("æ¹æ³åç§°ï¼" + invocation.getmethod().getname());\n                            system.out.println("æ¹æ³èæ¶ï¼" + (system.currenttimemillis() - start) + "ms");\n                            system.out.println("çæ§ - end\\r\\n");\n                        }\n                    };\n                    // åå°è°ç¨\n                    return methodinterceptor.invoke(new reflectivemethodinvocation(targetobj, method, args));\n                }\n                return method.invoke(targetobj, args);\n            }\n        });\n        string result = proxy.queryuserinfo();\n        system.out.println("æµè¯ç»æï¼" + result);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\nè¿æ®µä»£ç ä½¿ç¨äº jdk å¨æä»£çå®ç° aop çåè½ï¼æ²¡æä½¿ç¨ spring æä¾çæ¹æ³ãç±»åæ³¨è§£ç­ã\n\n * è¿æ¥ç¹ï¼è¿æ¥ç¹æ¯å¨ç®æ å¯¹è±¡ä¸å¹éçç¹å®ç¹ï¼è¿éçè¿æ¥ç¹æ¯ iuserservice æ¥å£ä¸­çæææ¹æ³ï¼ç±äºä½¿ç¨äº targetobj.getclass ().getinterfaces () è·åç®æ å¯¹è±¡æå®ç°çæ¥å£ï¼å æ­¤åªæ¦æªäº iuserservice æ¥å£ä¸­çæ¹æ³ã\n * åé¢ï¼åé¢æ¯ä¸ä¸ªæ¨¡ååçæ¨ªåå³æ³¨ç¹ï¼å¨è¿éæä»¬å¯ä»¥è§ä¸ºæ²¡ææ¾å¼å®ä¹çåé¢ãèæ¯ç´æ¥å¨ invocationhandler.invoke () ä¸­å®ç°äºæ¦æªåå¢å¼ºé»è¾ï¼åæ¬æ¹æ³å¹éå¨ãæ¹æ³æ¦æªå¨ååå°è°ç¨ç­ã\n * åç¹ï¼åç¹æ¯ä¸ç§è°è¯è¡¨è¾¾å¼ï¼ç¨äºå¹éè¿æ¥ç¹ãè¿éä½¿ç¨äº aspectj è¡¨è¾¾å¼ "execution (* cn.bugstack.springframework.test.bean.iuserservice.*(..))"ï¼å®å¹éäº iuserservice æ¥å£ä¸­çæææ¹æ³ã\n * éç¥ï¼éç¥ç±»ååæ¬åç½®éç¥ãåç½®éç¥ãç¯ç»éç¥ãæåºéç¥åæç»éç¥ãå¨è¿éä½¿ç¨äºç¯ç»éç¥ï¼å³å¨æ¹æ³æ§è¡ä¹ååä¹åæ·»å äºçæ§é»è¾ã\n * å¼å¥ï¼å¼ä»éå¸¸æ¯ä¸ä¸ªç¹æ®çéç¥ç±»åï¼å®åè®¸å¨è¿è¡æ¶ä¸ºç±»å¨æå°æ·»å æ°æ¥å£å®ç°ãè¿éæ²¡æä½¿ç¨å¼ä»ã\n\n\n# å°è£\n\nå¨ spring ä¸­ï¼æ ¸å¿é»è¾æ¯ç¦»ä¸å¼ä¸é¢çä»£çä¾å­çï¼åªæ¯ç¸å¯¹åºåäºäºå°è£ï¼æä»¬åç¨ç±»å¾æ¥ç®åè¯´æä¸å°è£å³ç³»ï¼\n\n\n\nç¨æµè¯ä¾å­æ¥è¯´ææ¯æ­¥çæ ¸å¿\n\n    /**\n     * åç¹è¡¨è¾¾å¼ï¼æ¥éªè¯åç¹\n     * @throws nosuchmethodexception\n     */\n    @test\n    public void test_aop() throws nosuchmethodexception {\n        aspectjexpressionpointcut pointcut = new aspectjexpressionpointcut("execution(* cn.bugstack.springframework.test.bean.userservice.*(..))");\n        class<userservice> clazz = userservice.class;\n        method method = clazz.getdeclaredmethod("queryuserinfo");\n        system.out.println("åç¹æ¯å¦åå«è¯¥ç±»ï¼" + pointcut.matches(clazz));\n        system.out.println("åç¹æ¯å¦åå«è¯¥ç±»è¯¥æ¹æ³ï¼" + pointcut.matches(method, clazz));\n    }\n\n    /**\n     * åé¢ å å¨æä»£ç\n     */\n    @test\n    public void test_dynamic() {\n        // ç®æ å¯¹è±¡\n        iuserservice userservice = new userservice();\n        // ç»è£ä»£çä¿¡æ¯ï¼åé¢\n        advisedsupport advisedsupport = new advisedsupport();\n        // è®¾ç½®ä»£çç®æ å¯¹è±¡\n        advisedsupport.settargetsource(new targetsource(userservice));\n        // è®¾ç½®æ¦æªå¨\n        advisedsupport.setmethodinterceptor(new userserviceinterceptor());\n        // å¹éä»£çå¯¹è±¡\n        advisedsupport.setmethodmatcher(new aspectjexpressionpointcut("execution(* cn.bugstack.springframework.test.bean.iuserservice.*(..))"));\n        // ä»£çå¯¹è±¡(jdkdynamicaopproxy)\n        iuserservice proxy_jdk = (iuserservice) new jdkdynamicaopproxy(advisedsupport).getproxy();\n        // æµè¯è°ç¨\n        system.out.println("æµè¯ç»æï¼" + proxy_jdk.queryuserinfo());\n        // ä»£çå¯¹è±¡(cglib2aopproxy)\n        iuserservice proxy_cglib = (iuserservice) new cglib2aopproxy(advisedsupport).getproxy();\n        // æµè¯è°ç¨\n        system.out.println("æµè¯ç»æï¼" + proxy_cglib.register("è±è±"));\n    }\n\npublic class userserviceinterceptor implements methodinterceptor {\n    @override\n    public object invoke(methodinvocation invocation) throws throwable {\n        long start = system.currenttimemillis();\n        try {\n            return invocation.proceed();\n        } finally {\n            system.out.println("çæ§ - begin by aop");\n            system.out.println("æ¹æ³åç§°ï¼" + invocation.getmethod());\n            system.out.println("æ¹æ³èæ¶ï¼" + (system.currenttimemillis() - start) + "ms");\n            system.out.println("çæ§ - end\\r\\n");\n        }\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n\n\n\n# æå°è£çèå¥å° spring ä¸­\n\nå³ä¾§é¨åå°±æ¯æè¿°äºæ´ä¸ªèåå° spring ä¸­çç±»ï¼ä¼å¨ bean åå»ºçè¿ç¨ä¸­ åå§åæ¹æ³ä¹å è¿ä¸ªçå½å¨æååæ¾å°æ¯å¦æä¾äº defaultadvisorautoproxycreator ç±»çæ¯æï¼å ä¸ºä»æè¿°äºå·ä½ä»£çç±»çè¿ç¨ã\n\n> ä¸ºä»ä¹ä¼å¨åå§åæ¹æ³ä¹åæè¿è¡ä»£çï¼æ¯å ä¸ºä»£çç±»ä¹éè¦çå±æ§ä¹éè¦è¢«å¡«åï¼æä»¥ç­å¡«åå®æ¯åå¨ä»£ç\n\n\n\næ ¸å¿æ¹æ³ï¼æè¿°äºæ´ä¸ªç±»è¢«ä»£ççè¿ç¨\n\n    protected object wrapifnecessary(object bean, string beanname) {\n        // å¤æ­beanæ¯å¦æ¯adviceï¼pointcutï¼advisorçå­ç±»æèä¸¤ç±»ç¸åå¯ä»¥ç¸äºè½¬ï¼ç±»å±é¢ï¼ï¼ç¨æ·å®ä¹çç±»é½æ¯ false\n        if (isinfrastructureclass(bean.getclass())) return bean;\n        // å¾å°æ³¨åçaspectjexpressionpointcutadvisor\n        collection<aspectjexpressionpointcutadvisor> advisors = beanfactory.getbeansoftype(aspectjexpressionpointcutadvisor.class).values();\n        for (aspectjexpressionpointcutadvisor advisor : advisors) {\n            classfilter classfilter = advisor.getpointcut().getclassfilter();\n            // ç¨è¡¨è¾¾å¼ è¿æ»¤å¹éç±»\n            if (!classfilter.matches(bean.getclass())) continue;\n            // å°è£\n            advisedsupport advisedsupport = new advisedsupport();\n            targetsource targetsource = new targetsource(bean);\n            advisedsupport.settargetsource(targetsource);\n            advisedsupport.setmethodinterceptor((methodinterceptor) advisor.getadvice());\n            advisedsupport.setmethodmatcher(advisor.getpointcut().getmethodmatcher());\n            advisedsupport.setproxytargetclass(true);\n            // è¿åä»£çå¯¹è±¡\n            return new proxyfactory(advisedsupport).getproxy();\n        }\n        return bean;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\n<beans>\n    \x3c!-- ç®æ ç±» --\x3e\n    <bean id="userservice" class="cn.bugstack.springframework.test.bean.userservice"/>\n    \x3c!-- ä»£çç±» --\x3e\n    <bean id="beforeadvice" class="cn.bugstack.springframework.test.bean.userservicebeforeadvice"/>\n    \x3c!-- ç»ä»¶ç±»ï¼è³å³éè¦ --\x3e\n    <bean class="cn.bugstack.springframework.aop.framework.autoproxy.defaultadvisorautoproxycreator"/>\n    \x3c!-- \n        è¿éæ¯  advisedsupport.setmethodinterceptor((methodinterceptor) advisor.getadvice()); è®¾ç½®æ¦æªå¨ï¼\n        å¯ä»¥æ¯åç½®æ¦æªï¼åç½®æ¦æªï¼æèç¯ç»æ¦æª\n     --\x3e\n    <bean id="methodinterceptor" class="cn.bugstack.springframework.aop.framework.adapter.methodbeforeadviceinterceptor">\n        <property name="advice" ref="beforeadvice"/>\n    </bean>\n    \x3c!-- åé¢è¡¨è¾¾å¼ --\x3e\n    <bean id="pointcutadvisor" class="cn.bugstack.springframework.aop.aspectj.aspectjexpressionpointcutadvisor">\n        <property name="expression" value="execution(* cn.bugstack.springframework.test.bean.iuserservice.*(..))"/>\n        <property name="advice" ref="methodinterceptor"/>\n    </bean>\n</beans>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n',charsets:{cjk:!0}},{title:"æ ¸å¿åè½æè§£ äºä»¶éç¥",frontmatter:{title:"æ ¸å¿åè½æè§£ äºä»¶éç¥",date:"2023-06-25T09:22:36.000Z",permalink:"/spring/202/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/20.Spring/202.%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8B%86%E8%A7%A3%20%E4%BA%8B%E4%BB%B6%E9%80%9A%E7%9F%A5.html",relativePath:"00.java/20.Spring/202.æ ¸å¿åè½æè§£ äºä»¶éç¥.md",key:"v-6b3c84a5",path:"/spring/202/",lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:null,content:'å¨ Spring æ¡æ¶ä¸­ï¼Event ä»£è¡¨çä¸ä¸ªåºç¨ç¨åºä¸­çäºä»¶ãè¿äºäºä»¶å¯ä»¥æ¯ä»»ä½ç±»åçç¶æååï¼å¦ç¨æ·æä½ãæ°æ®æ´æ°åç³»ç»éè¯¯ç­ç­ãæä»¬å¯ä»¥ä½¿ç¨ Event æ¥å®ç°åºç¨ç¨åºåé¨çéä¿¡ååä½ãéè¿è§å¯èæ¨¡å¼ï¼æä»¬å¯ä»¥è®©ä¸åçç»ä»¶å¨ç¹å®çäºä»¶åçæ¶ååºååºï¼ä»èå®ç°æ¾è¦åçè®¾è®¡ã\n\nSpring æä¾äºä¸ä¸ªç®åèå¼ºå¤§çæºå¶æ¥å¤ç Eventï¼å³ ApplicationEvent å ApplicationListener æ¥å£ãApplicationEvent æ¯ä¸ä¸ªåºæ¬çäºä»¶ç±»ï¼å®å¯ä»¥è¢«ç»§æ¿ä»¥å®ç°åç§ç±»åçäºä»¶ãApplicationListener æ¥å£åå®ä¹äºä¸ä¸ªçå¬å¨ï¼å¨æä¸ªäºä»¶åçæ¶è§¦ååè°æ¹æ³ãä»¥ä¸æä¾äºåºæ¬çç±»å¾å³ç³»ï¼å¶ä¸­ AbstractApplicationContext æ¯æ§è¡ Spring æææ ¸å¿æ¹æ³çéæç±»ï¼\n\n\n\nSpring æä¾äºè®¸å¤ä¸åç±»åç Eventï¼æ¯ç§ Event é½æå¶ç¹å®çä½ç¨åç¨éãä¸é¢æ¯ Spring çå½å¨æä¸­æä¾ç Event åå¶ä½ç¨ï¼\n\n * ContextRefreshedEventï¼è¡¨ç¤º ApplicationContext å·²ç»åå§åå¹¶ä¸åå¤å¥½æ¥åè¯·æ±ãéå¸¸æåµä¸ï¼æä»¬å¯ä»¥å©ç¨è¯¥äºä»¶æ¥è¿è¡ä¸äºåå§åæä½ã\n * ContextStartedEventï¼è¡¨ç¤º ApplicationContext æ­£å¨å¯å¨ãå½åºç¨ç¨åºä¸­æéè¦å¨å¯å¨æ¶æ§è¡çæä½æ¶ï¼å¯ä»¥ä½¿ç¨è¯¥äºä»¶è¿è¡å¤çã\n * ContextStoppedEventï¼è¡¨ç¤º ApplicationContext å·²åæ­¢ãå½éè¦å¨åºç¨ç¨åºåæ­¢åæ§è¡æäºæä½æ¶ï¼å¯ä»¥ä½¿ç¨è¯¥äºä»¶ã\n * ContextClosedEventï¼è¡¨ç¤º ApplicationContext å·²ç»å³é­ãä¸ ContextStoppedEvent ä¸åï¼ContextClosedEvent æ¯å¨ ApplicationContext å³é­ä¹ååéçï¼å®åè®¸æä»¬å¯¹èµæºè¿è¡å®å¨éæ¾ã\n * RequestHandledEventï¼è¡¨ç¤ºä¸ä¸ª HTTP è¯·æ±å·²ç»è¢«å¤çå®æ¯ãè¯¥äºä»¶éå¸¸ç¨äºè®°å½æç»è®¡è¯·æ±å¤ççæ§è½æ°æ®ã\n\nå¨ Spring ä¸­ï¼æä»¬å¯ä»¥éè¿å®ç° ApplicationListener æ¥å£æä½¿ç¨ @EventListener æ³¨è§£æ¥çå¬è¿äºäºä»¶ãä»¥çå¬ ContextRefreshedEvent ä¸ºä¾ï¼æä»¬å¯ä»¥ç¼åå¦ä¸ä»£ç ï¼\n\n@Component\npublic class MyListener implements ApplicationListener<ContextRefreshedEvent> {\n    @Override\n    public void onApplicationEvent(ContextRefreshedEvent event) {\n        // å¨æ­¤å¤ç¼åéè¦æ§è¡çé»è¾\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\né¤äºå®ç° ApplicationListener æ¥å£å¤ï¼æä»¬è¿å¯ä»¥ä½¿ç¨ @EventListener æ³¨è§£æ¥çå¬äºä»¶ãä¾å¦ï¼æä»¬å¯ä»¥å¨ Spring ç»ä»¶ä¸­æ·»å å¦ä¸æ¹æ³ï¼\n\n@EventListener\npublic void handleContextRefreshedEvent(ContextRefreshedEvent event) {\n    // å¨æ­¤å¤ç¼åéè¦æ§è¡çé»è¾\n}\n\n\n1\n2\n3\n4\n\n\nè¦ä½¿ç¨ Spring æä¾çç±»èªå®ä¹ä¸ä¸ªäºä»¶åå¸åçå¬ï¼é¦åï¼æä»¬éè¦å®ä¹ä¸ä¸ªèªå®ä¹äºä»¶ãå¯ä»¥åå»ºä¸ä¸ªç»§æ¿èª ApplicationEvent çç±»ï¼å¹¶å¨å¶ä¸­æ·»å èªå®ä¹å­æ®µåæ¹æ³\n\npublic class MyCustomEvent extends ApplicationEvent {\n    private String message;\n    public MyCustomEvent(Object source, String message) {\n        super(source);\n        this.message = message;\n    }\n    public String getMessage() {\n        return message;\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nåå¸äºä»¶ ä¸æ¦å®ä¹äºèªå®ä¹äºä»¶ï¼æä»¬å°±å¯ä»¥ä½¿ç¨ ApplicationContext ç publishEvent æ¹æ³æ¥åå¸äºä»¶\n\n@Autowired\nprivate ApplicationContext applicationContext;\n\npublic void doSomethingAndPublishEvent() {\n    // å¨æ­¤å¤æ§è¡ä¸å¡é»è¾\n    MyCustomEvent event = new MyCustomEvent(this, "Hello, world!");\n    applicationContext.publishEvent(event);\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nçå¬äºä»¶ æåï¼æä»¬éè¦åå»ºä¸ä¸ªäºä»¶çå¬å¨ï¼ä»¥ä¾¿å¤çèªå®ä¹äºä»¶ãå¯ä»¥åå»ºä¸ä¸ªå®ç° ApplicationListener æ¥å£çç±»ï¼å¹¶å¨å¶ onApplicationEvent æ¹æ³ä¸­æ·»å å¤çé»è¾\n\n@Component\npublic class MyCustomEventListener implements ApplicationListener<MyCustomEvent> {\n    @Override\n    public void onApplicationEvent(MyCustomEvent event) {\n        System.out.println("Received custom event - " + event.getMessage());\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nè¿æ ·ï¼å½ MyCustomEvent äºä»¶è¢«åå¸æ¶ï¼MyCustomEventListener å°±ä¼æ¶å°è¯¥äºä»¶å¹¶è°ç¨å¶ onApplicationEvent æ¹æ³è¿è¡å¤çã',normalizedContent:'å¨ spring æ¡æ¶ä¸­ï¼event ä»£è¡¨çä¸ä¸ªåºç¨ç¨åºä¸­çäºä»¶ãè¿äºäºä»¶å¯ä»¥æ¯ä»»ä½ç±»åçç¶æååï¼å¦ç¨æ·æä½ãæ°æ®æ´æ°åç³»ç»éè¯¯ç­ç­ãæä»¬å¯ä»¥ä½¿ç¨ event æ¥å®ç°åºç¨ç¨åºåé¨çéä¿¡ååä½ãéè¿è§å¯èæ¨¡å¼ï¼æä»¬å¯ä»¥è®©ä¸åçç»ä»¶å¨ç¹å®çäºä»¶åçæ¶ååºååºï¼ä»èå®ç°æ¾è¦åçè®¾è®¡ã\n\nspring æä¾äºä¸ä¸ªç®åèå¼ºå¤§çæºå¶æ¥å¤ç eventï¼å³ applicationevent å applicationlistener æ¥å£ãapplicationevent æ¯ä¸ä¸ªåºæ¬çäºä»¶ç±»ï¼å®å¯ä»¥è¢«ç»§æ¿ä»¥å®ç°åç§ç±»åçäºä»¶ãapplicationlistener æ¥å£åå®ä¹äºä¸ä¸ªçå¬å¨ï¼å¨æä¸ªäºä»¶åçæ¶è§¦ååè°æ¹æ³ãä»¥ä¸æä¾äºåºæ¬çç±»å¾å³ç³»ï¼å¶ä¸­ abstractapplicationcontext æ¯æ§è¡ spring æææ ¸å¿æ¹æ³çéæç±»ï¼\n\n\n\nspring æä¾äºè®¸å¤ä¸åç±»åç eventï¼æ¯ç§ event é½æå¶ç¹å®çä½ç¨åç¨éãä¸é¢æ¯ spring çå½å¨æä¸­æä¾ç event åå¶ä½ç¨ï¼\n\n * contextrefreshedeventï¼è¡¨ç¤º applicationcontext å·²ç»åå§åå¹¶ä¸åå¤å¥½æ¥åè¯·æ±ãéå¸¸æåµä¸ï¼æä»¬å¯ä»¥å©ç¨è¯¥äºä»¶æ¥è¿è¡ä¸äºåå§åæä½ã\n * contextstartedeventï¼è¡¨ç¤º applicationcontext æ­£å¨å¯å¨ãå½åºç¨ç¨åºä¸­æéè¦å¨å¯å¨æ¶æ§è¡çæä½æ¶ï¼å¯ä»¥ä½¿ç¨è¯¥äºä»¶è¿è¡å¤çã\n * contextstoppedeventï¼è¡¨ç¤º applicationcontext å·²åæ­¢ãå½éè¦å¨åºç¨ç¨åºåæ­¢åæ§è¡æäºæä½æ¶ï¼å¯ä»¥ä½¿ç¨è¯¥äºä»¶ã\n * contextclosedeventï¼è¡¨ç¤º applicationcontext å·²ç»å³é­ãä¸ contextstoppedevent ä¸åï¼contextclosedevent æ¯å¨ applicationcontext å³é­ä¹ååéçï¼å®åè®¸æä»¬å¯¹èµæºè¿è¡å®å¨éæ¾ã\n * requesthandledeventï¼è¡¨ç¤ºä¸ä¸ª http è¯·æ±å·²ç»è¢«å¤çå®æ¯ãè¯¥äºä»¶éå¸¸ç¨äºè®°å½æç»è®¡è¯·æ±å¤ççæ§è½æ°æ®ã\n\nå¨ spring ä¸­ï¼æä»¬å¯ä»¥éè¿å®ç° applicationlistener æ¥å£æä½¿ç¨ @eventlistener æ³¨è§£æ¥çå¬è¿äºäºä»¶ãä»¥çå¬ contextrefreshedevent ä¸ºä¾ï¼æä»¬å¯ä»¥ç¼åå¦ä¸ä»£ç ï¼\n\n@component\npublic class mylistener implements applicationlistener<contextrefreshedevent> {\n    @override\n    public void onapplicationevent(contextrefreshedevent event) {\n        // å¨æ­¤å¤ç¼åéè¦æ§è¡çé»è¾\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\né¤äºå®ç° applicationlistener æ¥å£å¤ï¼æä»¬è¿å¯ä»¥ä½¿ç¨ @eventlistener æ³¨è§£æ¥çå¬äºä»¶ãä¾å¦ï¼æä»¬å¯ä»¥å¨ spring ç»ä»¶ä¸­æ·»å å¦ä¸æ¹æ³ï¼\n\n@eventlistener\npublic void handlecontextrefreshedevent(contextrefreshedevent event) {\n    // å¨æ­¤å¤ç¼åéè¦æ§è¡çé»è¾\n}\n\n\n1\n2\n3\n4\n\n\nè¦ä½¿ç¨ spring æä¾çç±»èªå®ä¹ä¸ä¸ªäºä»¶åå¸åçå¬ï¼é¦åï¼æä»¬éè¦å®ä¹ä¸ä¸ªèªå®ä¹äºä»¶ãå¯ä»¥åå»ºä¸ä¸ªç»§æ¿èª applicationevent çç±»ï¼å¹¶å¨å¶ä¸­æ·»å èªå®ä¹å­æ®µåæ¹æ³\n\npublic class mycustomevent extends applicationevent {\n    private string message;\n    public mycustomevent(object source, string message) {\n        super(source);\n        this.message = message;\n    }\n    public string getmessage() {\n        return message;\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nåå¸äºä»¶ ä¸æ¦å®ä¹äºèªå®ä¹äºä»¶ï¼æä»¬å°±å¯ä»¥ä½¿ç¨ applicationcontext ç publishevent æ¹æ³æ¥åå¸äºä»¶\n\n@autowired\nprivate applicationcontext applicationcontext;\n\npublic void dosomethingandpublishevent() {\n    // å¨æ­¤å¤æ§è¡ä¸å¡é»è¾\n    mycustomevent event = new mycustomevent(this, "hello, world!");\n    applicationcontext.publishevent(event);\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nçå¬äºä»¶ æåï¼æä»¬éè¦åå»ºä¸ä¸ªäºä»¶çå¬å¨ï¼ä»¥ä¾¿å¤çèªå®ä¹äºä»¶ãå¯ä»¥åå»ºä¸ä¸ªå®ç° applicationlistener æ¥å£çç±»ï¼å¹¶å¨å¶ onapplicationevent æ¹æ³ä¸­æ·»å å¤çé»è¾\n\n@component\npublic class mycustomeventlistener implements applicationlistener<mycustomevent> {\n    @override\n    public void onapplicationevent(mycustomevent event) {\n        system.out.println("received custom event - " + event.getmessage());\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nè¿æ ·ï¼å½ mycustomevent äºä»¶è¢«åå¸æ¶ï¼mycustomeventlistener å°±ä¼æ¶å°è¯¥äºä»¶å¹¶è°ç¨å¶ onapplicationevent æ¹æ³è¿è¡å¤çã',charsets:{cjk:!0}},{title:"æ ¸å¿åè½æè§£ ä¸çº§ç¼å­",frontmatter:{title:"æ ¸å¿åè½æè§£ ä¸çº§ç¼å­",date:"2023-06-25T09:22:36.000Z",permalink:"/spring/203/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/20.Spring/203.%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8B%86%E8%A7%A3%20%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98.html",relativePath:"00.java/20.Spring/203.æ ¸å¿åè½æè§£ ä¸çº§ç¼å­.md",key:"v-5a7cdd80",path:"/spring/203/",headers:[{level:2,title:"ä»£ç ä»ç»",slug:"ä»£ç ä»ç»",normalizedTitle:"ä»£ç ä»ç»",charIndex:679},{level:2,title:"æµç¨ä»ç»",slug:"æµç¨ä»ç»",normalizedTitle:"æµç¨ä»ç»",charIndex:7320},{level:2,title:"ä¸åçå¾ªç¯ä¾èµé®é¢",slug:"ä¸åçå¾ªç¯ä¾èµé®é¢",normalizedTitle:"ä¸åçå¾ªç¯ä¾èµé®é¢",charIndex:10231},{level:3,title:"set å¾ªç¯ä¾èµ",slug:"set-å¾ªç¯ä¾èµ",normalizedTitle:"set å¾ªç¯ä¾èµ",charIndex:10245},{level:3,title:"æé å¨ å¾ªç¯ä¾èµ",slug:"æé å¨-å¾ªç¯ä¾èµ",normalizedTitle:"æé å¨ å¾ªç¯ä¾èµ",charIndex:11876},{level:3,title:"@DependsOn",slug:"dependson",normalizedTitle:"@dependson",charIndex:14362}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"ä»£ç ä»ç» æµç¨ä»ç» ä¸åçå¾ªç¯ä¾èµé®é¢ set å¾ªç¯ä¾èµ æé å¨ å¾ªç¯ä¾èµ @DependsOn",content:"Spring ä¸çº§ç¼å­æ¯ Spring æ¡æ¶ä¸­ç¨äºç®¡ç Bean å¯¹è±¡çç¼å­æºå¶ãå®ç±ä¸ä¸ªä¸åçç¼å­åºåç»æï¼åå«æ¯ singletonObjectsãearlySingletonObjects å singletonFactoriesã\n\n * singletonObjectsï¼ä¸çº§ç¼å­ï¼æåå¯¹è±¡ï¼ï¼åä¾å¯¹è±¡ç¼å­åºåå­å¨å·²ç»å®å¨åå§ååçåä¾å¯¹è±¡ãå½ç¬¬ä¸æ¬¡ä½¿ç¨ getBean () æ¹æ³è·å bean æ¶ï¼Spring ä¼å°è¯ä»è¿ä¸ªç¼å­åºè·åå¯¹è±¡ï¼å¦æè½å¤æ¾å°ï¼åç´æ¥è¿åè¯¥å¯¹è±¡å®ä¾ã\n * earlySingletonObjectsï¼äºçº§ç¼å­ï¼ä»£çå¯¹è±¡ï¼ç¹æ®çæåå¯¹è±¡ï¼ï¼å¦æä¸ä¸ªåä¾å¯¹è±¡éè¦å¼ç¨å¦ä¸ä¸ªåä¾å¯¹è±¡ï¼ä½åèå°æªè¢«å®å¨åå§åï¼é£ä¹å®¹å¨å°åå»ºä¸ä¸ªä»£çå¯¹è±¡ï¼Proxy Objectï¼ï¼å¹¶å°å¶æ¾å° earlySingletonObjects ä¸­ãè¿ä¸ªä»£çå¯¹è±¡ä¼æ´é²ä¸å®éå¯¹è±¡ç¸åçæ¥å£ï¼å¹¶ä¸è½å¤å¯¹å¶è¿è¡ä¸äºåºæ¬æä½ï¼ä½æ¯å®è¿æ²¡æè¢«å®å¨åå§åã\n * singletonFactoriesï¼ä¸çº§ç¼å­ï¼åæåå¯¹è±¡ä¹æ¯å·¥åå¯¹è±¡ï¼ï¼åä¾å·¥åç¼å­åºåå­å¨åå»º bean å®ä¾ç ObjectFactoryãå¨ Bean ä¾èµå³ç³»çåå»ºè¿ç¨ä¸­ï¼å¦æ A ä¾èµ Bï¼B åä¾èµ Aï¼é£ä¹å¨åå»º A å B çè¿ç¨ä¸­å°±ä¼åºç°å¾ªç¯ä¾èµçé®é¢ãSpring å°±æ¯éè¿æåæ´é²ä¸ä¸ªæªå®æåå§åç Bean æ¥è§£å³è¿ä¸ªé®é¢çã\n\næç¤º\n\nå¯¹äº spring è®¾è®¡æ²¡æå®å¨çè§£çåå­¦å¯è½å¾é¾æç½ä»¥ä¸çè¯ï¼è¿æ¯éè¦ç¨ä»£ç å ä¸è¯´æï¼ä»¥ä¸æç« ä¼è®®ä»£ç çæ¹å¼å¨ç¨è®²æ¸æ¥\n\n\n# ä»£ç ä»ç»\n\né¦å Spring å¨åå§åçæ¶åä¼åæææ Bean å è½½å° Beandefinition çç¼å­ä¸­ï¼åç»­ææå¯¹ Bean çåå»ºé½æ¯ä» Beandefinition ä¸­è·åè¯¦ç»å¯ä»¥ç Spring æºç éè¯»ï¼ä¸ï¼ ï¼ç¶ååè¿è¡ Bean çå½å¨æçè¿ç¨ï¼åå»ºå¥½ Bean çå®ä¾æ¾å¥å° singletonObjects ç¼å­ä¸­ï¼ä½æ¯ä»£ç çç¬¬ä¸æ­¥é½æ¯ä»è·åå¼å§ï¼åªæè·åä¸å°ææåå»º\n\n    public Object getBean(String name) throws BeansException {\n        return doGetBean(name, null);\n    }\n\n    public Object getBean(String name, Object... args) throws BeansException {\n        return doGetBean(name, args);\n    }\n\n    public <T> T getBean(String name, Class<T> requiredType) throws BeansException {\n        return (T) getBean(name);\n    }\n\n    protected <T> T doGetBean(final String name, final Object[] args) {\n        // ä»ç¼å­ä¸­è·åå®ä¾\n        Object sharedInstance = getSingleton(name);\n        if (sharedInstance != null) {\n            // å¦æå®ç°äº FactoryBeanï¼åéè¦è°ç¨ FactoryBean#getObject\n            return (T) getObjectForBeanInstance(sharedInstance, name);\n        }\n        // ä»BeanDefinitionåè¡¨ä¸­è·åå¯¹è±¡\n        BeanDefinition beanDefinition = getBeanDefinition(name);\n        // Beanå®ä¾çåå»ºè¿ç¨\n        Object bean = doCreateBean(name, beanDefinition, args);\n        // å¦æå®ç°äº FactoryBeanï¼åéè¦è°ç¨ FactoryBean#getObject\n        return (T) getObjectForBeanInstance(bean, name);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\nå¯ä»¥çå° getSingleton æ¹æ³å°±æ¯è·ååä¾ï¼ä¸æ¦æåç´æ¥è¿åï¼ä½ç¬¬ä¸æ¬¡è¯å®æ¯æ²¡æçï¼è¯¦ç»çä¸ä»çè·åæ¹å¼\n\n    public Object getSingleton(String beanName) {\n        // ä»ä¸çº§ç¼å­ä¸­è·å\n        Object singletonObject = singletonObjects.get(beanName);\n        if (null == singletonObject) {\n            singletonObject = earlySingletonObjects.get(beanName);\n            // å¤æ­äºçº§ç¼å­ä¸­æ¯å¦æå¯¹è±¡ï¼è¿ä¸ªå¯¹è±¡å°±æ¯ä»£çå¯¹è±¡ï¼å ä¸ºåªæä»£çå¯¹è±¡æä¼æ¾å°ä¸çº§ç¼å­ä¸­\n            if (null == singletonObject) {\n                ObjectFactory<?> singletonFactory = singletonFactories.get(beanName);\n                if (singletonFactory != null) {\n                    singletonObject = singletonFactory.getObject();\n                    // æä¸çº§ç¼å­ä¸­çä»£çå¯¹è±¡ä¸­ççå®å¯¹è±¡è·ååºæ¥ï¼æ¾å¥äºçº§ç¼å­ä¸­\n                    earlySingletonObjects.put(beanName, singletonObject);\n                    singletonFactories.remove(beanName);\n                }\n            }\n        }\n        return singletonObject;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\næ²¡æè·åå°å®ä¾åä» beanDefinition ä¸­è·å Bean çå®ä¹ä¿¡æ¯è°ç¨ doCreateBean åå»º Bean çå®ä¾\n\n    protected Object doCreateBean(String beanName, BeanDefinition beanDefinition, Object[] args) {\n        Object bean = null;\n        try {\n            // å®ä¾å Bean\n            bean = createBeanInstance(beanDefinition, beanName, args);\n            // å¤çå¾ªç¯ä¾èµï¼å°å®ä¾ååçBeanå¯¹è±¡æåæ¾å¥ç¼å­ä¸­æ´é²åºæ¥\n            if (beanDefinition.isSingleton()) {\n                Object finalBean = bean;\n                addSingletonFactory(beanName, () -> getEarlyBeanReference(beanName, beanDefinition, finalBean));\n            }\n            // æ¯å¦éè¦ç»§ç»­è¿è¡åç»­çå±æ§å¡«å\n            boolean continueWithPropertyPopulation = applyBeanPostProcessorsAfterInstantiation(beanName, bean);\n            if (!continueWithPropertyPopulation) {\n                return bean;\n            }\n            // å¨è®¾ç½® Bean å±æ§ä¹åï¼åè®¸ BeanPostProcessor ä¿®æ¹å±æ§å¼ï¼æ³¨è§£å±æ§å¡«åï¼\n            applyBeanPostProcessorsBeforeApplyingPropertyValues(beanName, bean, beanDefinition);\n            // ç» Bean å¡«åå±æ§ï¼xmlå±æ§å¡«åï¼\n            applyPropertyValues(beanName, bean, beanDefinition);\n            // æ§è¡ Bean çåå§åæ¹æ³å BeanPostProcessor çåç½®ååç½®å¤çæ¹æ³\n            bean = initializeBean(beanName, bean, beanDefinition);\n        } catch (Exception e) {\n            throw new BeansException(\"Instantiation of bean failed\", e);\n        }\n        // æ³¨åå®ç°äº DisposableBean æ¥å£ç Bean å¯¹è±¡\n        registerDisposableBeanIfNecessary(beanName, bean, beanDefinition);\n        // å¤æ­ SCOPE_SINGLETONãSCOPE_PROTOTYPE\n        Object exposedObject = bean;\n        if (beanDefinition.isSingleton()) {\n            // è·åä»£çå¯¹è±¡\n            exposedObject = getSingleton(beanName);\n            registerSingleton(beanName, exposedObject);\n        }\n        return exposedObject;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n\n\nå¶ä¸­ applyPropertyValues è¿ä¸ªæ¹æ³ï¼å¯¹è¦åå»ºçå®ä¾è¿è¡å±æ§å¡«åçæ¶åä¼è¿å¥å¾ªç¯ä¾èµçé®é¢ï¼ä¸æ¦éå°æ¯ BeanReference ç±»åçï¼åä¼è°ç¨ getBean æ¹æ³å»è·åå®ä¾ï¼è¯¥æ¹æ³åä¼åå°ä¸é¢çæ¹æ³ã\n\n    protected void applyPropertyValues(String beanName, Object bean, BeanDefinition beanDefinition) {\n        try {\n            // è¿éè·åå°  bean ä¿¡æ¯éçå±æ§æåªäºï¼ä¹å°±æ¯ä¸ä¸ªå¯¹è±¡æåªäºå±æ§ï¼å¹¶å¾ªç¯èµå¼å°æåå»ºå®ä¾çå±æ§ä¸­å»\n            PropertyValues propertyValues = beanDefinition.getPropertyValues();\n            for (PropertyValue propertyValue : propertyValues.getPropertyValues()) {\n                String name = propertyValue.getName();\n                Object value = propertyValue.getValue();\n                if (value instanceof BeanReference) {\n                    // A ä¾èµ Bï¼è·å B çå®ä¾å\n                    BeanReference beanReference = (BeanReference) value;\n                    value = getBean(beanReference.getBeanName());\n                }\n                // ç±»åè½¬æ¢ï¼ä¸æ¯ä¾§éç¹å¯ä»¥ä¸ç\n                else {\n                    Class<?> sourceType = value.getClass();\n                    Class<?> targetType = (Class<?>) TypeUtil.getFieldType(bean.getClass(), name);\n                    ConversionService conversionService = getConversionService();\n                    if (conversionService != null) {\n                        if (conversionService.canConvert(sourceType, targetType)) {\n                            value = conversionService.convert(value, targetType);\n                        }\n                    }\n                }\n                // åå°è®¾ç½®å±æ§å¡«å\n                 BeanUtil.setFieldValue(bean, name, value);\n            }\n        } catch (Exception e) {\n            throw new BeansException(\"Error setting property valuesï¼\" + beanName + \" messageï¼\" + e);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\nå½ä¸ä¸ªå®ä¾çåå»ºåºæ¬å®æï¼ä»ä¼æèªå·±æ·»å å°ä¸çº§ç¼å­å¯¹è±¡ï¼åä¸ºä¸ä¸ªæåæä¾ç»å¶ä»æ¹æ³ä½¿ç¨ãå¦ä¸æ¹æ³å°±æ¯æ·»å å°ä¸çº§ç¼å­çè¿ç¨ï¼å¶ä¸­ getSingleton å¨è·åä¸çº§ç¼å­æ°æ®å°äºçº§ç¼å­çæ¶åä¼æ§è¡ singletonFactory.getObject (); è¿æ¯ä¸ä¸ªæ¹æ³ï¼ä¼å»æ§è¡ getEarlyBeanReference (beanName, beanDefinition, finalBean) æ¹æ³ï¼è¯¥æ¹æ³ä¼å¾å°å·¥åæ¹æ³éé¢çä¸ä¸ªä»£çå¯¹è±¡ãç¶ååæä»£çå¯¹è±¡å­å°ä¸çº§ç¼å­ãè³æ­¤ Bean çå®ä¾åå°ç¼å­çè¿ç¨å°±ç»æã\n\n// å¤æ­ SCOPE_SINGLETONãSCOPE_PROTOTYPE\nObject exposedObject = bean;\nif (beanDefinition.isSingleton()) {\n    // æä¸çº§ç¼å­å¯¹è±¡è½¬æ¢ä¸ºäºçº§ç¼å­å¯¹è±¡\n    exposedObject = getSingleton(beanName);\n    // æäºçº§ç¼å­å¯¹è±¡è½¬æ¢ä¸ºä¸çº§ç¼å­å¯¹è±¡\n    registerSingleton(beanName, exposedObject);\n}\n\n// getSingleton çé¨åä»£ç å®ç°\nObjectFactory<?> singletonFactory = singletonFactories.get(beanName);\nif (singletonFactory != null) {\n    // è·åä»£çå¯¹è±¡\n    singletonObject = singletonFactory.getObject();\n    // æä¸çº§ç¼å­ä¸­çä»£çå¯¹è±¡ä¸­ççå®å¯¹è±¡è·ååºæ¥ï¼æ¾å¥äºçº§ç¼å­ä¸­\n    earlySingletonObjects.put(beanName, singletonObject);\n    singletonFactories.remove(beanName);\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# æµç¨ä»ç»\n\næäºå®æ´çæ¦å¿µåï¼æä»¬å¯ä»¥èèå¾ªç¯ä¾èµçå­å¨ï¼å½ A ä¾èµ Bï¼B åä¾èµ Aï¼é£ä¹è§£å³ä¾èµçè¿ç¨åæ¯å¦ä½åçï¼å¯ä»¥çä¸å¾ï¼\n\n\n\n 1. ä¼åå¨ getBean æ¹æ³éé¢æ¾ Aï¼éè¿ä¸äºä¸çº§ç¼å­ä¸­å¯»æ¾ï¼å¦ææ¾å°åç´æ¥è¿å\n 2. æ²¡æ¾å°å°±å»åå»º A å¹¶æ¾å¥ singletonFactories ä¸çº§ç¼å­ï¼ä¼å¯¹ A çå±æ§å¼è¿è¡å¡«åï¼æ­¤æ¶ A çå±æ§ä¾èµäº Bï¼å°±è¦è°ç¨ getBean æ¾ B\n 3. éè¿å¨ getBean ç ä¸äºä¸çº§ç¼å­æ¥æ¾ï¼å¦ææ¾å°äºç´æ¥è¿å\n 4. æ²¡æ¾å°å°±å»åå»º B å¹¶æ¾å¥ singletonFactories ä¸çº§ç¼å­ï¼ä¼å¯¹ B çå±æ§å¼è¿è¡å¡«åï¼æ­¤æ¶ B çå±æ§ä¾èµäº Aï¼å°±è¦è°ç¨ getBean æ¾ A\n 5. æ­¤æ¶ç A å·²ç»å¨ä¸çº§ç¼å­ï¼å¯ä»¥å¨ä¸çº§ç¼å­ä¸­æ¾å°ï¼æ¾å°åä¼çæ A ä»£çå¯¹è±¡ æ¾å¥ earlySingletonObjects äºçº§ç¼å­å¹¶è¿åè¿ä¸ªä»£çå¯¹è±¡\n 6. B æäºå±æ§ A çä»£çå¯¹è±¡ï¼æ­¤æ¶ B ææå±æ§å¡«åå®æ¯åï¼å°±è¦æ B æ·»å å°ä¸çº§ç¼å­ï¼ä½æ­¤æ¶ç B å¨ä¸çº§ç¼å­ï¼ä¼åæä¸çº§ç¼å­å¯¹è±¡çæä»£çåæ¾å¥å° earlySingletonObjects äºçº§ç¼å­ï¼åç±äºçº§ç¼å­æå¯¹è±¡æ¾å° singletonObjects ä¸çº§ç¼å­å¯¹è±¡\n 7. æ­¤æ¶ç B å·²ç»æ¾å°ä¸çº§ç¼å­å¯¹è±¡äºï¼å¹¶ç»æäº B çåå»ºæµç¨ï¼æä»¥ä¼è¿åå°ç¬¬ 2 æ­¥ï¼A å°±æäº B çå®ä¾ï¼A çå±æ§å¡«åå®æ¯åï¼å°±è¦æ A æ·»å å°ä¸çº§ç¼å­ï¼ä½æ­¤æ¶ç A å·²ç»å¨äºçº§ç¼å­ï¼æä»¥å°±å¯ä»¥ç´æ¥æ¾å¥å° singletonObjects ä¸çº§ç¼å­\n\nç°å¨æä»¬ç¥éï¼æç§ Spring æ¡æ¶çè®¾è®¡ï¼ç¨äºè§£å³å¾ªç¯ä¾èµéè¦ç¨å°ä¸ä¸ªç¼å­ï¼è¿ä¸ä¸ªç¼å­åå«å­æ¾äº singletonObjects æåå¯¹è±¡ãsingletonFactories åæåå¯¹è±¡ (æªå¡«åå±æ§å¼)ãearlySingletonObjects ä»£çå¯¹è±¡ï¼åé¶æ®µå­æ¾å¯¹è±¡åå®¹ï¼æ¥è§£å³å¾ªç¯ä¾èµé®é¢ã\n\né£ä¹ï¼è¿éæä»¬éè¦ç¥éä¸ä¸ªæ ¸å¿çåçï¼å°±æ¯ç¨äºè§£å³å¾ªç¯ä¾èµå°±å¿é¡»æ¯ä¸çº§ç¼å­å¢ï¼äºçº§è¡åï¼ä¸çº§å¯ä»¥ä¸ï¼å¶å®é½è½è§£å³ï¼åªä¸è¿ Spring æ¡æ¶çå®ç°è¦ä¿è¯å ä¸ªäºæï¼å¦åªæä¸çº§ç¼å­å¤çæµç¨æ²¡æ³æåï¼å¤æåº¦ä¹ä¼å¢å ï¼åæ¶åæåå¯¹è±¡å¯è½ä¼æç©ºæéå¼å¸¸ãèå°åæåä¸æåå¯¹è±¡åå¼ï¼å¤çèµ·æ¥ä¹æ´å ä¼éãç®åãææ©å±ãå¦å¤ Spring çä¸¤å¤§ç¹æ§ä¸­ä¸ä»æ IOC è¿æ AOPï¼ä¹å°±æ¯åºäºå­èç å¢å¼ºåçæ¹æ³ï¼è¯¥å­æ¾å°åªï¼èä¸çº§ç¼å­æä¸»è¦ï¼è¦è§£å³çå¾ªç¯ä¾èµå°±æ¯å¯¹ AOP çå¤çï¼ä½å¦ææ AOP ä»£çå¯¹è±¡çåå»ºæåï¼é£ä¹äºçº§ç¼å­ä¹ä¸æ ·å¯ä»¥è§£å³ãä½æ¯ï¼è¿å°±è¿èäº Spring åå»ºå¯¹è±¡çååï¼Spring æ´åæ¬¢æææçæ®é Bean é½åå§åå®æï¼å¨å¤çä»£çå¯¹è±¡çåå§åã\n\nä¸ä¸ªåä¸ªç¼å­è§£å³å¾ªç¯ä¾èµçä¾å­\n\npublic class ForRelyOn {\n\n    static Map<String,Object> singletonObjects = new HashMap<>();\n\n    public static void main(String[] args) throws Exception {\n        System.out.println(getBean(A.class).getB());\n        System.out.println(getBean(B.class).getA());\n    }\n\n    private static <T> T getBean(Class<T> beanClass) throws Exception {\n        String beanName = beanClass.getSimpleName().toLowerCase();\n        if (singletonObjects.containsKey(beanName)) {\n            return (T) singletonObjects.get(beanName);\n        }\n        // å®ä¾åå¯¹è±¡å¥ç¼å­0\n        Object obj = beanClass.newInstance();\n        singletonObjects.put(beanName, obj);\n        // å±æ§å¡«åè¡¥å¨å¯¹è±¡\n        Field[] fields = obj.getClass().getDeclaredFields();\n        for (Field field : fields) {\n            field.setAccessible(true);\n            Class<?> fieldClass = field.getType();\n            String fieldBeanName = fieldClass.getSimpleName().toLowerCase();\n            field.set(obj, singletonObjects.containsKey(fieldBeanName) ? singletonObjects.get(fieldBeanName) : getBean(fieldClass));\n            field.setAccessible(false);\n        }\n        return (T) obj;\n    }\n\n\n    static class A{\n        private B b;\n\n        public B getB() {\n            return b;\n        }\n\n        public void setB(B b) {\n            this.b = b;\n        }\n    }\n\n    static class B{\n        private A a;\n\n        public A getA() {\n            return a;\n        }\n\n        public void setA(A a) {\n            this.a = a;\n        }\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n\n\næç¤º\n\nä»¥ä¸é½æ¯æä»¬éè¿ åä¾ç set æ³¨å¥æ¹å¼æ¥è§£å³å¾ªç¯ä¾èµï¼å¨ spring ä¸­æå¤ç§å¤æ ·çæ³¨å¥æåµï¼é£ä¼å¸¦æ¥ä»ä¹æ ·çæåµå¢ï¼\n\n\n# ä¸åçå¾ªç¯ä¾èµé®é¢\n\n\n# set å¾ªç¯ä¾èµ\n\nå¨å¤ä¾ set çå¾ªç¯ä¾èµä¸­ï¼åªæå¤ä¾åå¤ä¾å¾ªç¯ä¾èµä¼åºç°æ¥éï¼æ¥éä¿¡æ¯å¦ä¸ï¼\n\nError creating bean with name 'b': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'a': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'b': Requested bean is currently in creation: Is there an unresolvable circular reference?\n\n\n1\n\n\nå¤ä¾ååä¾çå¾ªç¯ä¾èµä¸ä¼æé®é¢ï¼å¦ä¸æ¯ä¸ä¸ªåä¾åå¤ä¾çå¾ªç¯ä¾èµä»£ç ï¼\n\n@Component\npublic class A {\n    @Resource\n    private B b;\n    public void getb() {\n        System.out.println(b);\n    }\n}\n\n@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n@Component\npublic class B {\n    @Resource\n    private A a;\n    public void geta(){\n        System.out.println(a);\n    }\n}\n\npublic static void main(String[] args) {\n    ConfigurableApplicationContext run = SpringApplication.run(AdminApplication.class, args);\n    B b = run.getBean(B.class);\n    B b1 = run.getBean(B.class);\n    B b2 = run.getBean(B.class);\n    A a = run.getBean(A.class);\n    A a1 = run.getBean(A.class);\n    A a2 = run.getBean(A.class);\n    System.out.println(b);\n    System.out.println(b1);\n    System.out.println(b2);\n    a.getb();\n    a1.getb();\n    a2.getb();\n}\n\n// ç»æ\ncom.wt.admin.controller.B@1e5e2e06\ncom.wt.admin.controller.B@26c1f3eb\ncom.wt.admin.controller.B@79982bcc\ncom.wt.admin.controller.B@16b2d182\ncom.wt.admin.controller.B@16b2d182\ncom.wt.admin.controller.B@16b2d182\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n\n\n\n# æé å¨ å¾ªç¯ä¾èµ\n\nä½å¨ æé å¨ å¾ªç¯ä¾èµçæ³¨å¥ä¸­ï¼å ä¸ºå¨æé å¨æ³¨å¥æ¹å¼ä¸ï¼éè¦ååå»ºä¸ä¸ª Bean å¯¹è±¡ï¼ç¶ååå°å¶ä» Bean æ³¨å¥è¯¥å¯¹è±¡ä¸­ãä½æ¯ï¼å¦æä¸¤ä¸ª Bean é½äºç¸ä¾èµï¼é£ä¹å°±ä¼åºç°æ æ³åå»ºä»»ä½ä¸ä¸ª Bean çæåµãå æ­¤ï¼Spring å¨è¿ç§æåµä¸ä¼æåºå¼å¸¸ä»¥é¿åç¨åºåºç°ä¸å¯é¢æµçéè¯¯ã\n\n@Configuration\npublic class Config {\n    @Bean\n    public A a(B b){\n        return new A(b);\n    }\n    @Bean\n    public B b(A a){\n        return new B(a);\n    }\n}\n// æ¥é\nThe dependencies of some of the beans in the application context form a cycle:\nâââââââ\n|  a defined in class path resource [com/wt/admin/controller/Config.class]\nâ     â\n|  b defined in class path resource [com/wt/admin/controller/Config.class]\nâââââââ\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\nè§£å³è¿ç§é®é¢ï¼å¯ä»¥éè¿å¨æ¹æ³ä¸­æ·»å  @Lazy æ³¨è§£ï¼åªè½å å°æ¹æ³éï¼ä¸è½å å° @Bean çä¸ä¸ä½ç½®ï¼å¦åä¾ç¶ä¼æ¥å¾ªç¯ä¾èµï¼è¿ç§æ¹å¼å°½å¯è½çè¢«å®ä¹ä¸º @Lazy ç Bean å¨ç¬¬ä¸æ¬¡è¢«ä½¿ç¨çæ¶åå¨å»è¿è¡å®ä¾åã\n\næé å¨ä¹å­å¨å¤ä¾ååä¾çé®é¢ï¼å¦æä½ æ¯å¤ä¾ä¾èµå¾ªç¯ï¼ä¼æ¥éï¼å¦ä¸\n\n// å¤ä¾\n@Configuration\npublic class Config {\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    @Bean\n    public A a(B b){\n        return new A(b);\n    }\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    @Bean\n    public B b(A a){\n        return new B(a);\n    }\n}\n// æ¥éä¿¡æ¯\nError creating bean with name 'b' defined in class path resource [com/wt/admin/controller/Config.class]: Unsatisfied dependency expressed through method 'b' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'a' defined in class path resource [com/wt/admin/controller/Config.class]: Unsatisfied dependency expressed through method 'a' parameter 0; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'b': Requested bean is currently in creation: Is there an unresolvable circular reference?\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nå¦æä½ æ¯å¤ä¾ååä¾å¾ªç¯ä¾èµï¼ä¹ä¼æ¥éï¼ä½è¿éåæä»¬ä½¿ç¨æ³¨è§£è¿è¡å¤ä¾ååä¾çå¾ªç¯ä¾èµæµè¯ç»æå°±ææä¸åäº\n\n@Configuration\npublic class Config {\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    @Bean\n    public A a(B b){\n        return new A(b);\n    }\n    @Bean\n    public B b(A a){\n        return new B(a);\n    }\n}\n// æ¥éä¿¡æ¯\nThe dependencies of some of the beans in the application context form a cycle:\nâââââââ\n|  b defined in class path resource [com/wt/admin/controller/Config.class]\nâ     â\n|  a defined in class path resource [com/wt/admin/controller/Config.class]\nâââââââ\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\né£ä¹æé å¨å set æ³¨å¥çæ¹å¼å¨å¤ä¾ååä¾çç»è®ºå¦ä¸ï¼\n\n * åä¾å¾ªç¯ä¾èµï¼æé å¨çæ¹å¼ä¼æ¥éï¼å¯ä»¥ç¨ @Lazy è§£å³ï¼ï¼set æ³¨å¥çæ¹å¼ä¸ä¼æ¥é\n * å¤ä¾å¾ªç¯ä¾èµï¼æé å¨çæ¹å¼ä¼æ¥éï¼set æ³¨å¥çæ¹å¼ä¼æ¥éï¼ä¸¤èé½æ¯è°ç¨å¯¹è±¡æ¶ææ¥\n * åä¾åå¤ä¾å¾ªç¯ä¾èµï¼æé å¨çæ¹å¼ä¼æ¥éï¼å¯ä»¥ç¨ @Lazy è§£å³ï¼ï¼set æ³¨å¥çæ¹å¼ä¸ä¼æ¥é\n\n\n# @DependsOn\n\n@DependsOn æ³¨è§£å¯ä»¥å®ä¹å¨ç±»åâ½æ³ä¸ï¼æææ¯æè¿ä¸ªç»ä»¶è¦ä¾èµäºå¦â¼ä¸ªç»ä»¶ï¼ä¹å°±æ¯è¯´è¢«ä¾èµçç»ä»¶ä¼â½è¯¥ç»ä»¶åæ³¨åå° IOC å®¹å¨ä¸­ãå¦ä¸æ¡ä¾ï¼å ä¸ºä¸¤ä¸ªé½è¦åäºï¼æä»¥é æäºå¾ªç¯ä¾èµ\n\n@DependsOn(\"b\")\n@Component\npublic class A {\n    @Resource\n    private B b;\n    public void getb() {\n        System.out.println(b);\n    }\n}\n\n@DependsOn(\"a\")\n@Component\npublic class B {\n    @Resource\n    private A a;\n    public void geta(){\n        System.out.println(a);\n    }\n}\n// æ¥é\nError creating bean with name 'b' defined in file [D:\\workspace\\luckyDraw\\java\\target\\classes\\com\\wt\\admin\\controller\\B.class]: Circular depends-on relationship between 'b' and 'a'\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n",normalizedContent:"spring ä¸çº§ç¼å­æ¯ spring æ¡æ¶ä¸­ç¨äºç®¡ç bean å¯¹è±¡çç¼å­æºå¶ãå®ç±ä¸ä¸ªä¸åçç¼å­åºåç»æï¼åå«æ¯ singletonobjectsãearlysingletonobjects å singletonfactoriesã\n\n * singletonobjectsï¼ä¸çº§ç¼å­ï¼æåå¯¹è±¡ï¼ï¼åä¾å¯¹è±¡ç¼å­åºåå­å¨å·²ç»å®å¨åå§ååçåä¾å¯¹è±¡ãå½ç¬¬ä¸æ¬¡ä½¿ç¨ getbean () æ¹æ³è·å bean æ¶ï¼spring ä¼å°è¯ä»è¿ä¸ªç¼å­åºè·åå¯¹è±¡ï¼å¦æè½å¤æ¾å°ï¼åç´æ¥è¿åè¯¥å¯¹è±¡å®ä¾ã\n * earlysingletonobjectsï¼äºçº§ç¼å­ï¼ä»£çå¯¹è±¡ï¼ç¹æ®çæåå¯¹è±¡ï¼ï¼å¦æä¸ä¸ªåä¾å¯¹è±¡éè¦å¼ç¨å¦ä¸ä¸ªåä¾å¯¹è±¡ï¼ä½åèå°æªè¢«å®å¨åå§åï¼é£ä¹å®¹å¨å°åå»ºä¸ä¸ªä»£çå¯¹è±¡ï¼proxy objectï¼ï¼å¹¶å°å¶æ¾å° earlysingletonobjects ä¸­ãè¿ä¸ªä»£çå¯¹è±¡ä¼æ´é²ä¸å®éå¯¹è±¡ç¸åçæ¥å£ï¼å¹¶ä¸è½å¤å¯¹å¶è¿è¡ä¸äºåºæ¬æä½ï¼ä½æ¯å®è¿æ²¡æè¢«å®å¨åå§åã\n * singletonfactoriesï¼ä¸çº§ç¼å­ï¼åæåå¯¹è±¡ä¹æ¯å·¥åå¯¹è±¡ï¼ï¼åä¾å·¥åç¼å­åºåå­å¨åå»º bean å®ä¾ç objectfactoryãå¨ bean ä¾èµå³ç³»çåå»ºè¿ç¨ä¸­ï¼å¦æ a ä¾èµ bï¼b åä¾èµ aï¼é£ä¹å¨åå»º a å b çè¿ç¨ä¸­å°±ä¼åºç°å¾ªç¯ä¾èµçé®é¢ãspring å°±æ¯éè¿æåæ´é²ä¸ä¸ªæªå®æåå§åç bean æ¥è§£å³è¿ä¸ªé®é¢çã\n\næç¤º\n\nå¯¹äº spring è®¾è®¡æ²¡æå®å¨çè§£çåå­¦å¯è½å¾é¾æç½ä»¥ä¸çè¯ï¼è¿æ¯éè¦ç¨ä»£ç å ä¸è¯´æï¼ä»¥ä¸æç« ä¼è®®ä»£ç çæ¹å¼å¨ç¨è®²æ¸æ¥\n\n\n# ä»£ç ä»ç»\n\né¦å spring å¨åå§åçæ¶åä¼åæææ bean å è½½å° beandefinition çç¼å­ä¸­ï¼åç»­ææå¯¹ bean çåå»ºé½æ¯ä» beandefinition ä¸­è·åè¯¦ç»å¯ä»¥ç spring æºç éè¯»ï¼ä¸ï¼ ï¼ç¶ååè¿è¡ bean çå½å¨æçè¿ç¨ï¼åå»ºå¥½ bean çå®ä¾æ¾å¥å° singletonobjects ç¼å­ä¸­ï¼ä½æ¯ä»£ç çç¬¬ä¸æ­¥é½æ¯ä»è·åå¼å§ï¼åªæè·åä¸å°ææåå»º\n\n    public object getbean(string name) throws beansexception {\n        return dogetbean(name, null);\n    }\n\n    public object getbean(string name, object... args) throws beansexception {\n        return dogetbean(name, args);\n    }\n\n    public <t> t getbean(string name, class<t> requiredtype) throws beansexception {\n        return (t) getbean(name);\n    }\n\n    protected <t> t dogetbean(final string name, final object[] args) {\n        // ä»ç¼å­ä¸­è·åå®ä¾\n        object sharedinstance = getsingleton(name);\n        if (sharedinstance != null) {\n            // å¦æå®ç°äº factorybeanï¼åéè¦è°ç¨ factorybean#getobject\n            return (t) getobjectforbeaninstance(sharedinstance, name);\n        }\n        // ä»beandefinitionåè¡¨ä¸­è·åå¯¹è±¡\n        beandefinition beandefinition = getbeandefinition(name);\n        // beanå®ä¾çåå»ºè¿ç¨\n        object bean = docreatebean(name, beandefinition, args);\n        // å¦æå®ç°äº factorybeanï¼åéè¦è°ç¨ factorybean#getobject\n        return (t) getobjectforbeaninstance(bean, name);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\nå¯ä»¥çå° getsingleton æ¹æ³å°±æ¯è·ååä¾ï¼ä¸æ¦æåç´æ¥è¿åï¼ä½ç¬¬ä¸æ¬¡è¯å®æ¯æ²¡æçï¼è¯¦ç»çä¸ä»çè·åæ¹å¼\n\n    public object getsingleton(string beanname) {\n        // ä»ä¸çº§ç¼å­ä¸­è·å\n        object singletonobject = singletonobjects.get(beanname);\n        if (null == singletonobject) {\n            singletonobject = earlysingletonobjects.get(beanname);\n            // å¤æ­äºçº§ç¼å­ä¸­æ¯å¦æå¯¹è±¡ï¼è¿ä¸ªå¯¹è±¡å°±æ¯ä»£çå¯¹è±¡ï¼å ä¸ºåªæä»£çå¯¹è±¡æä¼æ¾å°ä¸çº§ç¼å­ä¸­\n            if (null == singletonobject) {\n                objectfactory<?> singletonfactory = singletonfactories.get(beanname);\n                if (singletonfactory != null) {\n                    singletonobject = singletonfactory.getobject();\n                    // æä¸çº§ç¼å­ä¸­çä»£çå¯¹è±¡ä¸­ççå®å¯¹è±¡è·ååºæ¥ï¼æ¾å¥äºçº§ç¼å­ä¸­\n                    earlysingletonobjects.put(beanname, singletonobject);\n                    singletonfactories.remove(beanname);\n                }\n            }\n        }\n        return singletonobject;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\næ²¡æè·åå°å®ä¾åä» beandefinition ä¸­è·å bean çå®ä¹ä¿¡æ¯è°ç¨ docreatebean åå»º bean çå®ä¾\n\n    protected object docreatebean(string beanname, beandefinition beandefinition, object[] args) {\n        object bean = null;\n        try {\n            // å®ä¾å bean\n            bean = createbeaninstance(beandefinition, beanname, args);\n            // å¤çå¾ªç¯ä¾èµï¼å°å®ä¾ååçbeanå¯¹è±¡æåæ¾å¥ç¼å­ä¸­æ´é²åºæ¥\n            if (beandefinition.issingleton()) {\n                object finalbean = bean;\n                addsingletonfactory(beanname, () -> getearlybeanreference(beanname, beandefinition, finalbean));\n            }\n            // æ¯å¦éè¦ç»§ç»­è¿è¡åç»­çå±æ§å¡«å\n            boolean continuewithpropertypopulation = applybeanpostprocessorsafterinstantiation(beanname, bean);\n            if (!continuewithpropertypopulation) {\n                return bean;\n            }\n            // å¨è®¾ç½® bean å±æ§ä¹åï¼åè®¸ beanpostprocessor ä¿®æ¹å±æ§å¼ï¼æ³¨è§£å±æ§å¡«åï¼\n            applybeanpostprocessorsbeforeapplyingpropertyvalues(beanname, bean, beandefinition);\n            // ç» bean å¡«åå±æ§ï¼xmlå±æ§å¡«åï¼\n            applypropertyvalues(beanname, bean, beandefinition);\n            // æ§è¡ bean çåå§åæ¹æ³å beanpostprocessor çåç½®ååç½®å¤çæ¹æ³\n            bean = initializebean(beanname, bean, beandefinition);\n        } catch (exception e) {\n            throw new beansexception(\"instantiation of bean failed\", e);\n        }\n        // æ³¨åå®ç°äº disposablebean æ¥å£ç bean å¯¹è±¡\n        registerdisposablebeanifnecessary(beanname, bean, beandefinition);\n        // å¤æ­ scope_singletonãscope_prototype\n        object exposedobject = bean;\n        if (beandefinition.issingleton()) {\n            // è·åä»£çå¯¹è±¡\n            exposedobject = getsingleton(beanname);\n            registersingleton(beanname, exposedobject);\n        }\n        return exposedobject;\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n\n\nå¶ä¸­ applypropertyvalues è¿ä¸ªæ¹æ³ï¼å¯¹è¦åå»ºçå®ä¾è¿è¡å±æ§å¡«åçæ¶åä¼è¿å¥å¾ªç¯ä¾èµçé®é¢ï¼ä¸æ¦éå°æ¯ beanreference ç±»åçï¼åä¼è°ç¨ getbean æ¹æ³å»è·åå®ä¾ï¼è¯¥æ¹æ³åä¼åå°ä¸é¢çæ¹æ³ã\n\n    protected void applypropertyvalues(string beanname, object bean, beandefinition beandefinition) {\n        try {\n            // è¿éè·åå°  bean ä¿¡æ¯éçå±æ§æåªäºï¼ä¹å°±æ¯ä¸ä¸ªå¯¹è±¡æåªäºå±æ§ï¼å¹¶å¾ªç¯èµå¼å°æåå»ºå®ä¾çå±æ§ä¸­å»\n            propertyvalues propertyvalues = beandefinition.getpropertyvalues();\n            for (propertyvalue propertyvalue : propertyvalues.getpropertyvalues()) {\n                string name = propertyvalue.getname();\n                object value = propertyvalue.getvalue();\n                if (value instanceof beanreference) {\n                    // a ä¾èµ bï¼è·å b çå®ä¾å\n                    beanreference beanreference = (beanreference) value;\n                    value = getbean(beanreference.getbeanname());\n                }\n                // ç±»åè½¬æ¢ï¼ä¸æ¯ä¾§éç¹å¯ä»¥ä¸ç\n                else {\n                    class<?> sourcetype = value.getclass();\n                    class<?> targettype = (class<?>) typeutil.getfieldtype(bean.getclass(), name);\n                    conversionservice conversionservice = getconversionservice();\n                    if (conversionservice != null) {\n                        if (conversionservice.canconvert(sourcetype, targettype)) {\n                            value = conversionservice.convert(value, targettype);\n                        }\n                    }\n                }\n                // åå°è®¾ç½®å±æ§å¡«å\n                 beanutil.setfieldvalue(bean, name, value);\n            }\n        } catch (exception e) {\n            throw new beansexception(\"error setting property valuesï¼\" + beanname + \" messageï¼\" + e);\n        }\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\nå½ä¸ä¸ªå®ä¾çåå»ºåºæ¬å®æï¼ä»ä¼æèªå·±æ·»å å°ä¸çº§ç¼å­å¯¹è±¡ï¼åä¸ºä¸ä¸ªæåæä¾ç»å¶ä»æ¹æ³ä½¿ç¨ãå¦ä¸æ¹æ³å°±æ¯æ·»å å°ä¸çº§ç¼å­çè¿ç¨ï¼å¶ä¸­ getsingleton å¨è·åä¸çº§ç¼å­æ°æ®å°äºçº§ç¼å­çæ¶åä¼æ§è¡ singletonfactory.getobject (); è¿æ¯ä¸ä¸ªæ¹æ³ï¼ä¼å»æ§è¡ getearlybeanreference (beanname, beandefinition, finalbean) æ¹æ³ï¼è¯¥æ¹æ³ä¼å¾å°å·¥åæ¹æ³éé¢çä¸ä¸ªä»£çå¯¹è±¡ãç¶ååæä»£çå¯¹è±¡å­å°ä¸çº§ç¼å­ãè³æ­¤ bean çå®ä¾åå°ç¼å­çè¿ç¨å°±ç»æã\n\n// å¤æ­ scope_singletonãscope_prototype\nobject exposedobject = bean;\nif (beandefinition.issingleton()) {\n    // æä¸çº§ç¼å­å¯¹è±¡è½¬æ¢ä¸ºäºçº§ç¼å­å¯¹è±¡\n    exposedobject = getsingleton(beanname);\n    // æäºçº§ç¼å­å¯¹è±¡è½¬æ¢ä¸ºä¸çº§ç¼å­å¯¹è±¡\n    registersingleton(beanname, exposedobject);\n}\n\n// getsingleton çé¨åä»£ç å®ç°\nobjectfactory<?> singletonfactory = singletonfactories.get(beanname);\nif (singletonfactory != null) {\n    // è·åä»£çå¯¹è±¡\n    singletonobject = singletonfactory.getobject();\n    // æä¸çº§ç¼å­ä¸­çä»£çå¯¹è±¡ä¸­ççå®å¯¹è±¡è·ååºæ¥ï¼æ¾å¥äºçº§ç¼å­ä¸­\n    earlysingletonobjects.put(beanname, singletonobject);\n    singletonfactories.remove(beanname);\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# æµç¨ä»ç»\n\næäºå®æ´çæ¦å¿µåï¼æä»¬å¯ä»¥èèå¾ªç¯ä¾èµçå­å¨ï¼å½ a ä¾èµ bï¼b åä¾èµ aï¼é£ä¹è§£å³ä¾èµçè¿ç¨åæ¯å¦ä½åçï¼å¯ä»¥çä¸å¾ï¼\n\n\n\n 1. ä¼åå¨ getbean æ¹æ³éé¢æ¾ aï¼éè¿ä¸äºä¸çº§ç¼å­ä¸­å¯»æ¾ï¼å¦ææ¾å°åç´æ¥è¿å\n 2. æ²¡æ¾å°å°±å»åå»º a å¹¶æ¾å¥ singletonfactories ä¸çº§ç¼å­ï¼ä¼å¯¹ a çå±æ§å¼è¿è¡å¡«åï¼æ­¤æ¶ a çå±æ§ä¾èµäº bï¼å°±è¦è°ç¨ getbean æ¾ b\n 3. éè¿å¨ getbean ç ä¸äºä¸çº§ç¼å­æ¥æ¾ï¼å¦ææ¾å°äºç´æ¥è¿å\n 4. æ²¡æ¾å°å°±å»åå»º b å¹¶æ¾å¥ singletonfactories ä¸çº§ç¼å­ï¼ä¼å¯¹ b çå±æ§å¼è¿è¡å¡«åï¼æ­¤æ¶ b çå±æ§ä¾èµäº aï¼å°±è¦è°ç¨ getbean æ¾ a\n 5. æ­¤æ¶ç a å·²ç»å¨ä¸çº§ç¼å­ï¼å¯ä»¥å¨ä¸çº§ç¼å­ä¸­æ¾å°ï¼æ¾å°åä¼çæ a ä»£çå¯¹è±¡ æ¾å¥ earlysingletonobjects äºçº§ç¼å­å¹¶è¿åè¿ä¸ªä»£çå¯¹è±¡\n 6. b æäºå±æ§ a çä»£çå¯¹è±¡ï¼æ­¤æ¶ b ææå±æ§å¡«åå®æ¯åï¼å°±è¦æ b æ·»å å°ä¸çº§ç¼å­ï¼ä½æ­¤æ¶ç b å¨ä¸çº§ç¼å­ï¼ä¼åæä¸çº§ç¼å­å¯¹è±¡çæä»£çåæ¾å¥å° earlysingletonobjects äºçº§ç¼å­ï¼åç±äºçº§ç¼å­æå¯¹è±¡æ¾å° singletonobjects ä¸çº§ç¼å­å¯¹è±¡\n 7. æ­¤æ¶ç b å·²ç»æ¾å°ä¸çº§ç¼å­å¯¹è±¡äºï¼å¹¶ç»æäº b çåå»ºæµç¨ï¼æä»¥ä¼è¿åå°ç¬¬ 2 æ­¥ï¼a å°±æäº b çå®ä¾ï¼a çå±æ§å¡«åå®æ¯åï¼å°±è¦æ a æ·»å å°ä¸çº§ç¼å­ï¼ä½æ­¤æ¶ç a å·²ç»å¨äºçº§ç¼å­ï¼æä»¥å°±å¯ä»¥ç´æ¥æ¾å¥å° singletonobjects ä¸çº§ç¼å­\n\nç°å¨æä»¬ç¥éï¼æç§ spring æ¡æ¶çè®¾è®¡ï¼ç¨äºè§£å³å¾ªç¯ä¾èµéè¦ç¨å°ä¸ä¸ªç¼å­ï¼è¿ä¸ä¸ªç¼å­åå«å­æ¾äº singletonobjects æåå¯¹è±¡ãsingletonfactories åæåå¯¹è±¡ (æªå¡«åå±æ§å¼)ãearlysingletonobjects ä»£çå¯¹è±¡ï¼åé¶æ®µå­æ¾å¯¹è±¡åå®¹ï¼æ¥è§£å³å¾ªç¯ä¾èµé®é¢ã\n\né£ä¹ï¼è¿éæä»¬éè¦ç¥éä¸ä¸ªæ ¸å¿çåçï¼å°±æ¯ç¨äºè§£å³å¾ªç¯ä¾èµå°±å¿é¡»æ¯ä¸çº§ç¼å­å¢ï¼äºçº§è¡åï¼ä¸çº§å¯ä»¥ä¸ï¼å¶å®é½è½è§£å³ï¼åªä¸è¿ spring æ¡æ¶çå®ç°è¦ä¿è¯å ä¸ªäºæï¼å¦åªæä¸çº§ç¼å­å¤çæµç¨æ²¡æ³æåï¼å¤æåº¦ä¹ä¼å¢å ï¼åæ¶åæåå¯¹è±¡å¯è½ä¼æç©ºæéå¼å¸¸ãèå°åæåä¸æåå¯¹è±¡åå¼ï¼å¤çèµ·æ¥ä¹æ´å ä¼éãç®åãææ©å±ãå¦å¤ spring çä¸¤å¤§ç¹æ§ä¸­ä¸ä»æ ioc è¿æ aopï¼ä¹å°±æ¯åºäºå­èç å¢å¼ºåçæ¹æ³ï¼è¯¥å­æ¾å°åªï¼èä¸çº§ç¼å­æä¸»è¦ï¼è¦è§£å³çå¾ªç¯ä¾èµå°±æ¯å¯¹ aop çå¤çï¼ä½å¦ææ aop ä»£çå¯¹è±¡çåå»ºæåï¼é£ä¹äºçº§ç¼å­ä¹ä¸æ ·å¯ä»¥è§£å³ãä½æ¯ï¼è¿å°±è¿èäº spring åå»ºå¯¹è±¡çååï¼spring æ´åæ¬¢æææçæ®é bean é½åå§åå®æï¼å¨å¤çä»£çå¯¹è±¡çåå§åã\n\nä¸ä¸ªåä¸ªç¼å­è§£å³å¾ªç¯ä¾èµçä¾å­\n\npublic class forrelyon {\n\n    static map<string,object> singletonobjects = new hashmap<>();\n\n    public static void main(string[] args) throws exception {\n        system.out.println(getbean(a.class).getb());\n        system.out.println(getbean(b.class).geta());\n    }\n\n    private static <t> t getbean(class<t> beanclass) throws exception {\n        string beanname = beanclass.getsimplename().tolowercase();\n        if (singletonobjects.containskey(beanname)) {\n            return (t) singletonobjects.get(beanname);\n        }\n        // å®ä¾åå¯¹è±¡å¥ç¼å­0\n        object obj = beanclass.newinstance();\n        singletonobjects.put(beanname, obj);\n        // å±æ§å¡«åè¡¥å¨å¯¹è±¡\n        field[] fields = obj.getclass().getdeclaredfields();\n        for (field field : fields) {\n            field.setaccessible(true);\n            class<?> fieldclass = field.gettype();\n            string fieldbeanname = fieldclass.getsimplename().tolowercase();\n            field.set(obj, singletonobjects.containskey(fieldbeanname) ? singletonobjects.get(fieldbeanname) : getbean(fieldclass));\n            field.setaccessible(false);\n        }\n        return (t) obj;\n    }\n\n\n    static class a{\n        private b b;\n\n        public b getb() {\n            return b;\n        }\n\n        public void setb(b b) {\n            this.b = b;\n        }\n    }\n\n    static class b{\n        private a a;\n\n        public a geta() {\n            return a;\n        }\n\n        public void seta(a a) {\n            this.a = a;\n        }\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n\n\næç¤º\n\nä»¥ä¸é½æ¯æä»¬éè¿ åä¾ç set æ³¨å¥æ¹å¼æ¥è§£å³å¾ªç¯ä¾èµï¼å¨ spring ä¸­æå¤ç§å¤æ ·çæ³¨å¥æåµï¼é£ä¼å¸¦æ¥ä»ä¹æ ·çæåµå¢ï¼\n\n\n# ä¸åçå¾ªç¯ä¾èµé®é¢\n\n\n# set å¾ªç¯ä¾èµ\n\nå¨å¤ä¾ set çå¾ªç¯ä¾èµä¸­ï¼åªæå¤ä¾åå¤ä¾å¾ªç¯ä¾èµä¼åºç°æ¥éï¼æ¥éä¿¡æ¯å¦ä¸ï¼\n\nerror creating bean with name 'b': injection of resource dependencies failed; nested exception is org.springframework.beans.factory.beancreationexception: error creating bean with name 'a': injection of resource dependencies failed; nested exception is org.springframework.beans.factory.beancurrentlyincreationexception: error creating bean with name 'b': requested bean is currently in creation: is there an unresolvable circular reference?\n\n\n1\n\n\nå¤ä¾ååä¾çå¾ªç¯ä¾èµä¸ä¼æé®é¢ï¼å¦ä¸æ¯ä¸ä¸ªåä¾åå¤ä¾çå¾ªç¯ä¾èµä»£ç ï¼\n\n@component\npublic class a {\n    @resource\n    private b b;\n    public void getb() {\n        system.out.println(b);\n    }\n}\n\n@scope(configurablebeanfactory.scope_prototype)\n@component\npublic class b {\n    @resource\n    private a a;\n    public void geta(){\n        system.out.println(a);\n    }\n}\n\npublic static void main(string[] args) {\n    configurableapplicationcontext run = springapplication.run(adminapplication.class, args);\n    b b = run.getbean(b.class);\n    b b1 = run.getbean(b.class);\n    b b2 = run.getbean(b.class);\n    a a = run.getbean(a.class);\n    a a1 = run.getbean(a.class);\n    a a2 = run.getbean(a.class);\n    system.out.println(b);\n    system.out.println(b1);\n    system.out.println(b2);\n    a.getb();\n    a1.getb();\n    a2.getb();\n}\n\n// ç»æ\ncom.wt.admin.controller.b@1e5e2e06\ncom.wt.admin.controller.b@26c1f3eb\ncom.wt.admin.controller.b@79982bcc\ncom.wt.admin.controller.b@16b2d182\ncom.wt.admin.controller.b@16b2d182\ncom.wt.admin.controller.b@16b2d182\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n\n\n\n# æé å¨ å¾ªç¯ä¾èµ\n\nä½å¨ æé å¨ å¾ªç¯ä¾èµçæ³¨å¥ä¸­ï¼å ä¸ºå¨æé å¨æ³¨å¥æ¹å¼ä¸ï¼éè¦ååå»ºä¸ä¸ª bean å¯¹è±¡ï¼ç¶ååå°å¶ä» bean æ³¨å¥è¯¥å¯¹è±¡ä¸­ãä½æ¯ï¼å¦æä¸¤ä¸ª bean é½äºç¸ä¾èµï¼é£ä¹å°±ä¼åºç°æ æ³åå»ºä»»ä½ä¸ä¸ª bean çæåµãå æ­¤ï¼spring å¨è¿ç§æåµä¸ä¼æåºå¼å¸¸ä»¥é¿åç¨åºåºç°ä¸å¯é¢æµçéè¯¯ã\n\n@configuration\npublic class config {\n    @bean\n    public a a(b b){\n        return new a(b);\n    }\n    @bean\n    public b b(a a){\n        return new b(a);\n    }\n}\n// æ¥é\nthe dependencies of some of the beans in the application context form a cycle:\nâââââââ\n|  a defined in class path resource [com/wt/admin/controller/config.class]\nâ     â\n|  b defined in class path resource [com/wt/admin/controller/config.class]\nâââââââ\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\nè§£å³è¿ç§é®é¢ï¼å¯ä»¥éè¿å¨æ¹æ³ä¸­æ·»å  @lazy æ³¨è§£ï¼åªè½å å°æ¹æ³éï¼ä¸è½å å° @bean çä¸ä¸ä½ç½®ï¼å¦åä¾ç¶ä¼æ¥å¾ªç¯ä¾èµï¼è¿ç§æ¹å¼å°½å¯è½çè¢«å®ä¹ä¸º @lazy ç bean å¨ç¬¬ä¸æ¬¡è¢«ä½¿ç¨çæ¶åå¨å»è¿è¡å®ä¾åã\n\næé å¨ä¹å­å¨å¤ä¾ååä¾çé®é¢ï¼å¦æä½ æ¯å¤ä¾ä¾èµå¾ªç¯ï¼ä¼æ¥éï¼å¦ä¸\n\n// å¤ä¾\n@configuration\npublic class config {\n    @scope(configurablebeanfactory.scope_prototype)\n    @bean\n    public a a(b b){\n        return new a(b);\n    }\n    @scope(configurablebeanfactory.scope_prototype)\n    @bean\n    public b b(a a){\n        return new b(a);\n    }\n}\n// æ¥éä¿¡æ¯\nerror creating bean with name 'b' defined in class path resource [com/wt/admin/controller/config.class]: unsatisfied dependency expressed through method 'b' parameter 0; nested exception is org.springframework.beans.factory.unsatisfieddependencyexception: error creating bean with name 'a' defined in class path resource [com/wt/admin/controller/config.class]: unsatisfied dependency expressed through method 'a' parameter 0; nested exception is org.springframework.beans.factory.beancurrentlyincreationexception: error creating bean with name 'b': requested bean is currently in creation: is there an unresolvable circular reference?\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\nå¦æä½ æ¯å¤ä¾ååä¾å¾ªç¯ä¾èµï¼ä¹ä¼æ¥éï¼ä½è¿éåæä»¬ä½¿ç¨æ³¨è§£è¿è¡å¤ä¾ååä¾çå¾ªç¯ä¾èµæµè¯ç»æå°±ææä¸åäº\n\n@configuration\npublic class config {\n    @scope(configurablebeanfactory.scope_prototype)\n    @bean\n    public a a(b b){\n        return new a(b);\n    }\n    @bean\n    public b b(a a){\n        return new b(a);\n    }\n}\n// æ¥éä¿¡æ¯\nthe dependencies of some of the beans in the application context form a cycle:\nâââââââ\n|  b defined in class path resource [com/wt/admin/controller/config.class]\nâ     â\n|  a defined in class path resource [com/wt/admin/controller/config.class]\nâââââââ\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\né£ä¹æé å¨å set æ³¨å¥çæ¹å¼å¨å¤ä¾ååä¾çç»è®ºå¦ä¸ï¼\n\n * åä¾å¾ªç¯ä¾èµï¼æé å¨çæ¹å¼ä¼æ¥éï¼å¯ä»¥ç¨ @lazy è§£å³ï¼ï¼set æ³¨å¥çæ¹å¼ä¸ä¼æ¥é\n * å¤ä¾å¾ªç¯ä¾èµï¼æé å¨çæ¹å¼ä¼æ¥éï¼set æ³¨å¥çæ¹å¼ä¼æ¥éï¼ä¸¤èé½æ¯è°ç¨å¯¹è±¡æ¶ææ¥\n * åä¾åå¤ä¾å¾ªç¯ä¾èµï¼æé å¨çæ¹å¼ä¼æ¥éï¼å¯ä»¥ç¨ @lazy è§£å³ï¼ï¼set æ³¨å¥çæ¹å¼ä¸ä¼æ¥é\n\n\n# @dependson\n\n@dependson æ³¨è§£å¯ä»¥å®ä¹å¨ç±»åâ½æ³ä¸ï¼æææ¯æè¿ä¸ªç»ä»¶è¦ä¾èµäºå¦â¼ä¸ªç»ä»¶ï¼ä¹å°±æ¯è¯´è¢«ä¾èµçç»ä»¶ä¼â½è¯¥ç»ä»¶åæ³¨åå° ioc å®¹å¨ä¸­ãå¦ä¸æ¡ä¾ï¼å ä¸ºä¸¤ä¸ªé½è¦åäºï¼æä»¥é æäºå¾ªç¯ä¾èµ\n\n@dependson(\"b\")\n@component\npublic class a {\n    @resource\n    private b b;\n    public void getb() {\n        system.out.println(b);\n    }\n}\n\n@dependson(\"a\")\n@component\npublic class b {\n    @resource\n    private a a;\n    public void geta(){\n        system.out.println(a);\n    }\n}\n// æ¥é\nerror creating bean with name 'b' defined in file [d:\\workspace\\luckydraw\\java\\target\\classes\\com\\wt\\admin\\controller\\b.class]: circular depends-on relationship between 'b' and 'a'\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n",charsets:{cjk:!0}},{title:"æ ¸å¿åè½æè§£ FactoryBean",frontmatter:{title:"æ ¸å¿åè½æè§£ FactoryBean",date:"2023-06-25T09:22:36.000Z",permalink:"/spring/204/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/20.Spring/204.%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8B%86%E8%A7%A3%20FactoryBean.html",relativePath:"00.java/20.Spring/204.æ ¸å¿åè½æè§£ FactoryBean.md",key:"v-4c6fa37b",path:"/spring/204/",lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:null,content:'FactoryBean æ¥å£ï¼ä½¿å¾æä»¬å¯ä»¥éè¿ç¼åèªå®ä¹ä»£ç æ¥å®ç° Bean çå®ä¾ååæ³¨å¥ãå·ä½æ¥è¯´ï¼éè¿å®ç° FactoryBean æ¥å£ï¼æä»¬å¯ä»¥å¨ getObject () æ¹æ³ä¸­ç¼åèªå·±çé»è¾æ¥å®ä¾å Beanï¼åæ¶å¯ä»¥å¨ getObjectType () æ¹æ³ä¸­æå®è¿åçç±»åãå æ­¤ï¼FactoryBean çä¸»è¦ä½ç¨æ¯å¯¹ Bean çåå»ºè¿ç¨è¿è¡ä¸ªæ§åå®å¶ï¼ä½¿å¾æä»¬è½å¤æ´å¥½å°æ§å¶ Spring å®¹å¨ä¸­ Bean ççå½å¨æåè¡ä¸ºãåæ¶ï¼å®è¿å¯ä»¥æ¯æåä¾æ¨¡å¼æèååæ¨¡å¼ç Bean åå»ºæ¹å¼ï¼æ´è¿ä¸æ­¥å¢å¼ºäº Spring å®¹å¨ççµæ´»æ§ã\n\npublic interface FactoryBean<T> {\n    // è·åå¯¹è±¡\n    T getObject() throws Exception;\n    // è·åå¯¹è±¡ç±»å\n    Class<?> getObjectType();\n    // å¤æ­æ¯å¦åä¾\n    boolean isSingleton();\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nå¨ ãæ ¸å¿åè½æè§£ IOCã ä¸æä¸­ï¼å½ä¸ä¸ª Bean å¯¹è±¡çåå»ºç»æï¼å¹¶å¾å°æåå»ºç Bean åï¼ä¼ç»§ç»­æ§è¡ getObjectForBeanInstance æ¹æ³\n\n   protected <T> T doGetBean(final String name, final Object[] args) {\n        // ä»ç¼å­ä¸­è·åå®ä¾\n        Object sharedInstance = getSingleton(name);\n        if (sharedInstance != null) {\n            // å¦æå®ç°äº FactoryBeanï¼åéè¦è°ç¨ FactoryBean#getObject\n            return (T) getObjectForBeanInstance(sharedInstance, name);\n        }\n        // ä»BeanDefinitionåè¡¨ä¸­è·åå¯¹è±¡\n        BeanDefinition beanDefinition = getBeanDefinition(name);\n        Object bean = createBean(name, beanDefinition, args);\n        // å¦æå®ç°äº FactoryBeanï¼åéè¦è°ç¨ FactoryBean#getObject\n        return (T) getObjectForBeanInstance(bean, name);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nè¯¥æ¹æ³ç¨äºå¤æ­ä¸ä¸ª Bean æ¯å¦å®ç°äº FactoryBean æ¥å£ï¼å¦æå®ç°äºæ¥å£åéè¦è¿è¡å¯¹åºçæä½\n\nprivate Object getObjectForBeanInstance(Object beanInstance, String beanName) {\n    if (!(beanInstance instanceof FactoryBean)) {\n        return beanInstance;\n    }\n    // æ¥è¯¢ Bean æ¯å¦å·²è¢«æ§è¡è¿\n    Object object = getCachedObjectForFactoryBean(beanName);\n    if (object == null) {\n        // è½¬æ FactoryBean\n        FactoryBean<?> factoryBean = (FactoryBean<?>) beanInstance;\n        // å·ä½æ§è¡\n        object = getObjectFromFactoryBean(factoryBean, beanName);\n    }\n    return object;\n}\n\nprotected Object getObjectFromFactoryBean(FactoryBean factory, String beanName) {\n    // å¤æ­æ¯å¦åä¾ï¼åä¾ä¼æ·»å å° factoryBeanObjectCache æ¹è¯¥Mapä¸­ï¼é¿åéå¤\n    if (factory.isSingleton()) {\n        // è·å\n        Object object = this.factoryBeanObjectCache.get(beanName);\n        // å¤æ­æ¯å¦å­å¨\n        if (object == null) {\n            // æ§è¡\n            object = doGetObjectFromFactoryBean(factory, beanName);\n            this.factoryBeanObjectCache.put(beanName, (object != null ? object : NULL_OBJECT));\n        }\n        return (object != NULL_OBJECT ? object : null);\n    } else {\n        return doGetObjectFromFactoryBean(factory, beanName);\n    }\n}\n\nprivate Object doGetObjectFromFactoryBean(final FactoryBean factory, final String beanName){\n    try {\n        // è°ç¨æ¥å£æ¹æ³\n        return factory.getObject();\n    } catch (Exception e) {\n        throw new BeansException("FactoryBean threw exception on object[" + beanName + "] creation", e);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n\n\nè¿ç§æ¹å¼å¯ä»¥çè§£ä¸ºï¼å®ç° FactoryBean çç±»æ¯ä¸ä¸ªä»£çç±»ï¼ä»çå·¥ä½ä¸»è¦æ¯å¨èªå·±è¢«åå»ºçæ¶åï¼æç§ Spring ççå½å¨æï¼åå»ºèªå·±çå®ä¾ï¼å¡«åå±æ§ï¼åå§åä¹åæ§è¡ï¼åå§åæ§è¡ï¼åå§åä¹åæ§è¡ï¼è¿ä¸åé½åªæ¯ä¸ºè¢«ä»£çç±»åå¥½æ¡ä»¶éºè®¾ï¼ç­è¿ä¸ªä»£çç±»åå»ºå®æ¯åï¼ä¼æ§è¡ getObjectForBeanInstance æ¹æ³ï¼è¿åè¢«ä»£ççç±»ãæ´ç®åççè§£å°±æ¯ FactoryBean å¯ä»¥å¸®æä»¬å¶é æä»¬æ³è¦ç Beanï¼ä¾å¶ä» Bean ä¾èµæä½¿ç¨ã',normalizedContent:'factorybean æ¥å£ï¼ä½¿å¾æä»¬å¯ä»¥éè¿ç¼åèªå®ä¹ä»£ç æ¥å®ç° bean çå®ä¾ååæ³¨å¥ãå·ä½æ¥è¯´ï¼éè¿å®ç° factorybean æ¥å£ï¼æä»¬å¯ä»¥å¨ getobject () æ¹æ³ä¸­ç¼åèªå·±çé»è¾æ¥å®ä¾å beanï¼åæ¶å¯ä»¥å¨ getobjecttype () æ¹æ³ä¸­æå®è¿åçç±»åãå æ­¤ï¼factorybean çä¸»è¦ä½ç¨æ¯å¯¹ bean çåå»ºè¿ç¨è¿è¡ä¸ªæ§åå®å¶ï¼ä½¿å¾æä»¬è½å¤æ´å¥½å°æ§å¶ spring å®¹å¨ä¸­ bean ççå½å¨æåè¡ä¸ºãåæ¶ï¼å®è¿å¯ä»¥æ¯æåä¾æ¨¡å¼æèååæ¨¡å¼ç bean åå»ºæ¹å¼ï¼æ´è¿ä¸æ­¥å¢å¼ºäº spring å®¹å¨ççµæ´»æ§ã\n\npublic interface factorybean<t> {\n    // è·åå¯¹è±¡\n    t getobject() throws exception;\n    // è·åå¯¹è±¡ç±»å\n    class<?> getobjecttype();\n    // å¤æ­æ¯å¦åä¾\n    boolean issingleton();\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nå¨ ãæ ¸å¿åè½æè§£ iocã ä¸æä¸­ï¼å½ä¸ä¸ª bean å¯¹è±¡çåå»ºç»æï¼å¹¶å¾å°æåå»ºç bean åï¼ä¼ç»§ç»­æ§è¡ getobjectforbeaninstance æ¹æ³\n\n   protected <t> t dogetbean(final string name, final object[] args) {\n        // ä»ç¼å­ä¸­è·åå®ä¾\n        object sharedinstance = getsingleton(name);\n        if (sharedinstance != null) {\n            // å¦æå®ç°äº factorybeanï¼åéè¦è°ç¨ factorybean#getobject\n            return (t) getobjectforbeaninstance(sharedinstance, name);\n        }\n        // ä»beandefinitionåè¡¨ä¸­è·åå¯¹è±¡\n        beandefinition beandefinition = getbeandefinition(name);\n        object bean = createbean(name, beandefinition, args);\n        // å¦æå®ç°äº factorybeanï¼åéè¦è°ç¨ factorybean#getobject\n        return (t) getobjectforbeaninstance(bean, name);\n    }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\nè¯¥æ¹æ³ç¨äºå¤æ­ä¸ä¸ª bean æ¯å¦å®ç°äº factorybean æ¥å£ï¼å¦æå®ç°äºæ¥å£åéè¦è¿è¡å¯¹åºçæä½\n\nprivate object getobjectforbeaninstance(object beaninstance, string beanname) {\n    if (!(beaninstance instanceof factorybean)) {\n        return beaninstance;\n    }\n    // æ¥è¯¢ bean æ¯å¦å·²è¢«æ§è¡è¿\n    object object = getcachedobjectforfactorybean(beanname);\n    if (object == null) {\n        // è½¬æ factorybean\n        factorybean<?> factorybean = (factorybean<?>) beaninstance;\n        // å·ä½æ§è¡\n        object = getobjectfromfactorybean(factorybean, beanname);\n    }\n    return object;\n}\n\nprotected object getobjectfromfactorybean(factorybean factory, string beanname) {\n    // å¤æ­æ¯å¦åä¾ï¼åä¾ä¼æ·»å å° factorybeanobjectcache æ¹è¯¥mapä¸­ï¼é¿åéå¤\n    if (factory.issingleton()) {\n        // è·å\n        object object = this.factorybeanobjectcache.get(beanname);\n        // å¤æ­æ¯å¦å­å¨\n        if (object == null) {\n            // æ§è¡\n            object = dogetobjectfromfactorybean(factory, beanname);\n            this.factorybeanobjectcache.put(beanname, (object != null ? object : null_object));\n        }\n        return (object != null_object ? object : null);\n    } else {\n        return dogetobjectfromfactorybean(factory, beanname);\n    }\n}\n\nprivate object dogetobjectfromfactorybean(final factorybean factory, final string beanname){\n    try {\n        // è°ç¨æ¥å£æ¹æ³\n        return factory.getobject();\n    } catch (exception e) {\n        throw new beansexception("factorybean threw exception on object[" + beanname + "] creation", e);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n\n\nè¿ç§æ¹å¼å¯ä»¥çè§£ä¸ºï¼å®ç° factorybean çç±»æ¯ä¸ä¸ªä»£çç±»ï¼ä»çå·¥ä½ä¸»è¦æ¯å¨èªå·±è¢«åå»ºçæ¶åï¼æç§ spring ççå½å¨æï¼åå»ºèªå·±çå®ä¾ï¼å¡«åå±æ§ï¼åå§åä¹åæ§è¡ï¼åå§åæ§è¡ï¼åå§åä¹åæ§è¡ï¼è¿ä¸åé½åªæ¯ä¸ºè¢«ä»£çç±»åå¥½æ¡ä»¶éºè®¾ï¼ç­è¿ä¸ªä»£çç±»åå»ºå®æ¯åï¼ä¼æ§è¡ getobjectforbeaninstance æ¹æ³ï¼è¿åè¢«ä»£ççç±»ãæ´ç®åççè§£å°±æ¯ factorybean å¯ä»¥å¸®æä»¬å¶é æä»¬æ³è¦ç beanï¼ä¾å¶ä» bean ä¾èµæä½¿ç¨ã',charsets:{cjk:!0}},{title:"æ³¨è§£æ¿ä»£Springçå½å¨æå®ç°ç±»",frontmatter:{title:"æ³¨è§£æ¿ä»£Springçå½å¨æå®ç°ç±»",date:"2023-06-25T09:22:36.000Z",permalink:"/spring/205/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/20.Spring/205.%E6%B3%A8%E8%A7%A3%E6%9B%BF%E4%BB%A3Spring%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%AE%9E%E7%8E%B0%E7%B1%BB.html",relativePath:"00.java/20.Spring/205.æ³¨è§£æ¿ä»£Springçå½å¨æå®ç°ç±».md",key:"v-245188e7",path:"/spring/205/",headers:[{level:2,title:"Spring IOC",slug:"spring-ioc",normalizedTitle:"spring ioc",charIndex:151},{level:3,title:"@Bean",slug:"bean",normalizedTitle:"@bean",charIndex:166},{level:3,title:"@Scope",slug:"scope",normalizedTitle:"@scope",charIndex:307},{level:3,title:"@PostConstruct",slug:"postconstruct",normalizedTitle:"@postconstruct",charIndex:352},{level:3,title:"@PreDestroy",slug:"predestroy",normalizedTitle:"@predestroy",charIndex:389},{level:3,title:"Spring DI",slug:"spring-di",normalizedTitle:"spring di",charIndex:426},{level:3,title:"@Autowired",slug:"autowired",normalizedTitle:"@autowired",charIndex:644},{level:3,title:"@Qualifier",slug:"qualifier",normalizedTitle:"@qualifier",charIndex:759},{level:3,title:"@Resource",slug:"resource",normalizedTitle:"@resource",charIndex:936},{level:3,title:"@Value",slug:"value",normalizedTitle:"@value",charIndex:1155},{level:2,title:"Spring AOP",slug:"spring-aop",normalizedTitle:"spring aop",charIndex:1196},{level:3,title:"@Aspect",slug:"aspect",normalizedTitle:"@aspect",charIndex:1211},{level:3,title:"@Before",slug:"before",normalizedTitle:"@before",charIndex:1246},{level:3,title:"@AfterReturning",slug:"afterreturning",normalizedTitle:"@afterreturning",charIndex:1281},{level:3,title:"@AfterThrowing",slug:"afterthrowing",normalizedTitle:"@afterthrowing",charIndex:1335},{level:3,title:"@After",slug:"after",normalizedTitle:"@after",charIndex:1281},{level:3,title:"@Around",slug:"around",normalizedTitle:"@around",charIndex:1420},{level:2,title:"å¶ä»æ³¨è§£",slug:"å¶ä»æ³¨è§£",normalizedTitle:"å¶ä»æ³¨è§£",charIndex:1455},{level:3,title:"@Order",slug:"order",normalizedTitle:"@order",charIndex:1464},{level:4,title:"éè¯¯ä½¿ç¨",slug:"éè¯¯ä½¿ç¨",normalizedTitle:"éè¯¯ä½¿ç¨",charIndex:1765},{level:4,title:"æ­£ç¡®ä½¿ç¨",slug:"æ­£ç¡®ä½¿ç¨",normalizedTitle:"æ­£ç¡®ä½¿ç¨",charIndex:2381},{level:3,title:"@AutoConfigureOrder",slug:"autoconfigureorder",normalizedTitle:"@autoconfigureorder",charIndex:3008}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"Spring IOC @Bean @Scope @PostConstruct @PreDestroy Spring DI @Autowired @Qualifier @Resource @Value Spring AOP @Aspect @Before @AfterReturning @AfterThrowing @After @Around å¶ä»æ³¨è§£ @Order éè¯¯ä½¿ç¨ æ­£ç¡®ä½¿ç¨ @AutoConfigureOrder",content:'å¨æ©æç Spring ä¸­ï¼æä»¬é½æ¯ä½¿ç¨ XML æ¥è¿è¡ç¸åºç Bean ä¾èµæè¿°åå±æ§æè¿°ï¼ä½å¨ Spring Boot ä¸­å¤§å¤è¿æ¯ä¹ æ¯ä½¿ç¨æ³¨è§£çæ¹å¼æ¥å®ç°ï¼é£è¿éæå°±æ¥æ»ç»ä¸å¨ Spring çå½å¨æä¸­ï¼æåªäºç±»æä¾äºæ©å±å¯ä»¥ç»æä»¬å®ç°ï¼ä»¥ååå xml çæ¹å¼åæ³¨è§£æ¹å¼çä¸¤ç§å®ç°æ¹å¼ã\n\n\n# Spring IOC\n\n\n# @Bean\n\n<bean id="student" class="com.xinhua.study.bean.Student" scope="prototype" init-method="init()" destroy-method="destroy()"/>\n\n\n1\n\n\n\n# @Scope\n\nscope="singleton/prototype"\n\n\n1\n\n\n\n# @PostConstruct\n\ninit-method\n\n\n1\n\n\n\n# @PreDestroy\n\ndestroy-method\n\n\n1\n\n\n\n# Spring DI\n\nAutowired+Qualifier=Resource è¿å°±æ¯ä»ä»¬ä¸èçå³ç³»ï¼Autowired æ ¹æ®ç±»åæ¾å®ç°ç±»ï¼ä¸ä¸ªæ¥å£æå¤ä¸ªå®ç°ç±»æ¶éè¦éè¿ Qualifier æ¥ææéè¦åªä¸ªå®ç°ç±»ï¼è¿æ¯å°±éè¦ Autowired+Qualifier ä¸èµ·ä½¿ç¨æå¯ä»¥ãResource åæ¯ä¸å£°æåç§°æ¶æç§ç±»åæ¥æ¾ææä¸ Autowired ç¸åï¼å£°æåç§°æ¶å°±ç­äº Autowired+Qualifier çç»å\n\n\n# @Autowired\n\n@Autowired å¯ä»¥åç¬ä½¿ç¨ãå¦æåç¬ä½¿ç¨ï¼å®å°æç±»åè£éãå æ­¤ï¼å¦æå¨å®¹å¨ä¸­å£°æäºå¤ä¸ªç¸åç±»åç beanï¼åä¼åºç°é®é¢ï¼å ä¸º @Autowired ä¸ç¥éè¦ä½¿ç¨åªä¸ª bean æ¥æ³¨å¥ãå æ­¤ï¼ä½¿ç¨ @Qualifier ä¸ @Autowired ä¸èµ·ï¼éè¿æå® bean åç§°æ¥éæå®éè£éç bean\n\nref="ç±»å"\n\n\n1\n\n\n\n# @Qualifier\n\n@Qualifier é»è®¤æåç§°è£éï¼è¿ä¸ªæ³¨è§£æ¯å±äº spring çï¼ï¼value é»è®¤ @Qualifier (value = "") ç©ºå¼ã\n\nref="ç±»å"\n\n\n1\n\n\n\n# @Resource\n\n@Resourceï¼è¿ä¸ªæ³¨è§£å±äº J2EE çï¼ï¼é»è®¤æç§åç§°è¿è¡è£éï¼åç§°å¯ä»¥éè¿ name å±æ§è¿è¡æå®ï¼ å¦ææ²¡ææå® name å±æ§ï¼å½æ³¨è§£åå¨å­æ®µä¸æ¶ï¼é»è®¤åå­æ®µåè¿è¡æç§åç§°æ¥æ¾ï¼å¦ææ³¨è§£åå¨ setter æ¹æ³ä¸é»è®¤åå±æ§åè¿è¡è£éã å½æ¾ä¸å°ä¸åç§°å¹éç bean æ¶ææç§ç±»åè¿è¡è£éãä½æ¯éè¦æ³¨æçæ¯ï¼å¦æ name å±æ§ä¸æ¦æå®ï¼å°±åªä¼æç§åç§°è¿è¡è£éã\n\nref="ç±»å"\n\n\n1\n\n\n\n# @Value\n\nç»åºæ¬æ°æ®ç±»åèµå¼\n\nref="åºç¡æ°æ®ç±»å"\n\n\n1\n\n\n\n# Spring AOP\n\n\n# @Aspect\n\nå£°æçé¢\n\napo:aspect\n\n\n1\n\n\n\n# @Before\n\nåç½®éç¥\n\napo:before\n\n\n1\n\n\n\n# @AfterReturning\n\nåç½®æ­£å¸¸éç¥\n\naop:after-returning\n\n\n1\n\n\n\n# @AfterThrowing\n\nåç½®å¼å¸¸éç¥\n\naop:after-throwing\n\n\n1\n\n\n\n# @After\n\næç»éç¥\n\naop:after\n\n\n1\n\n\n\n# @Around\n\nç¯ç»éç¥\n\naop:around\n\n\n1\n\n\n\n# å¶ä»æ³¨è§£\n\n\n# @Order\n\næå¼å§ Order æ³¨è§£ç¨äºåé¢çä¼åçº§æå®ï¼å¨ 4.0 ä¹åå¯¹å®çåè½è¿è¡äºå¢å¼ºï¼æ¯æéåçæ³¨å¥æ¶ï¼æå®éåä¸­ bean çé¡ºåºï¼å¹¶ä¸ç¹å«æåºäºï¼å®å¯¹äºåå®ä¾ç bean ä¹é´çé¡ºåºï¼æ²¡æä»»ä½å½±åã\n\næ³¨è§£ @Order æèæ¥å£ Ordered çä½ç¨æ¯å®ä¹ Spring IOC å®¹å¨ä¸­ Bean çæ§è¡é¡ºåºçä¼åçº§ï¼èä¸æ¯å®ä¹ Bean çå è½½é¡ºåºï¼Bean çå è½½é¡ºåºä¸å @Order æ Ordered æ¥å£çå½±åï¼\n\n@Order æ³¨è§£ä¸è½æå® bean çå è½½é¡ºåºï¼å®éç¨äº AOP çä¼åçº§ï¼ä»¥åå°å¤ä¸ª Bean æ³¨å¥å°éåæ¶ï¼è¿äº bean å¨éåä¸­çé¡ºåº\n\n# éè¯¯ä½¿ç¨\n\n// éè¯¯ä½¿ç¨æ¹æ³ 1\n@Component\n@Order(2)\npublic class OrderA {\n    public OrderA() {\n        System.out.println("************ A ************");\n    }\n}\n\n@Component\n@Order(1)\npublic class OrderB {\n    public OrderB() {\n        System.out.println("************ B ************");\n    }\n}\n// éè¯¯ä½¿ç¨æ¹æ³ 2\n@Configuration\npublic class OrderBeanConfig {\n \n    @Order(2)\n    @Bean\n    public OrderC orderC() {\n        return new OrderC();\n    }\n \n    @Order(1)\n    @Bean\n    public OrderD orderD() {\n        return new OrderD();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n\n\n# æ­£ç¡®ä½¿ç¨\n\n@Component\n@Order(value = 3)\npublic class AnoBeanA implements IBean{\n    public AnoBeanA() {\n        System.out.println("************ AnoBean A ************");\n    }\n}\n\n@Component\n@Order(value = 2)\npublic class AnoBeanB implements IBean{\n \n    public AnoBeanB() {\n        System.out.println("************ AnoBean B ************");\n    }\n}\n\n@Component\npublic class AnoBean {\n    public AnoBean(List<IBean> anoBeanList) {\n        for (IBean bean : anoBeanList) {\n            System.out.println("in ano testBean: "+ bean.getClass())\n        }\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# @AutoConfigureOrder\n\n@AutoConfigureOrder æå®å¤é¨ä¾èµç AutoConfig çå è½½é¡ºåºï¼å³å®ä¹å¨ / META-INF/spring.factories æä»¶ä¸­çéç½® bean ä¼åçº§)ï¼å¨å½åå·¥ç¨ä¸­ä½¿ç¨è¿ä¸ªæ³¨è§£å¹¶æ²¡æä»ä¹ç¨ï¼åæ ·ç @AutoConfigureBefore å @AutoConfigureAfter è¿ä¸¤ä¸ªæ³¨è§£çéç¨èå´å @AutoConfigureOrder ä¸æ ·',normalizedContent:'å¨æ©æç spring ä¸­ï¼æä»¬é½æ¯ä½¿ç¨ xml æ¥è¿è¡ç¸åºç bean ä¾èµæè¿°åå±æ§æè¿°ï¼ä½å¨ spring boot ä¸­å¤§å¤è¿æ¯ä¹ æ¯ä½¿ç¨æ³¨è§£çæ¹å¼æ¥å®ç°ï¼é£è¿éæå°±æ¥æ»ç»ä¸å¨ spring çå½å¨æä¸­ï¼æåªäºç±»æä¾äºæ©å±å¯ä»¥ç»æä»¬å®ç°ï¼ä»¥ååå xml çæ¹å¼åæ³¨è§£æ¹å¼çä¸¤ç§å®ç°æ¹å¼ã\n\n\n# spring ioc\n\n\n# @bean\n\n<bean id="student" class="com.xinhua.study.bean.student" scope="prototype" init-method="init()" destroy-method="destroy()"/>\n\n\n1\n\n\n\n# @scope\n\nscope="singleton/prototype"\n\n\n1\n\n\n\n# @postconstruct\n\ninit-method\n\n\n1\n\n\n\n# @predestroy\n\ndestroy-method\n\n\n1\n\n\n\n# spring di\n\nautowired+qualifier=resource è¿å°±æ¯ä»ä»¬ä¸èçå³ç³»ï¼autowired æ ¹æ®ç±»åæ¾å®ç°ç±»ï¼ä¸ä¸ªæ¥å£æå¤ä¸ªå®ç°ç±»æ¶éè¦éè¿ qualifier æ¥ææéè¦åªä¸ªå®ç°ç±»ï¼è¿æ¯å°±éè¦ autowired+qualifier ä¸èµ·ä½¿ç¨æå¯ä»¥ãresource åæ¯ä¸å£°æåç§°æ¶æç§ç±»åæ¥æ¾ææä¸ autowired ç¸åï¼å£°æåç§°æ¶å°±ç­äº autowired+qualifier çç»å\n\n\n# @autowired\n\n@autowired å¯ä»¥åç¬ä½¿ç¨ãå¦æåç¬ä½¿ç¨ï¼å®å°æç±»åè£éãå æ­¤ï¼å¦æå¨å®¹å¨ä¸­å£°æäºå¤ä¸ªç¸åç±»åç beanï¼åä¼åºç°é®é¢ï¼å ä¸º @autowired ä¸ç¥éè¦ä½¿ç¨åªä¸ª bean æ¥æ³¨å¥ãå æ­¤ï¼ä½¿ç¨ @qualifier ä¸ @autowired ä¸èµ·ï¼éè¿æå® bean åç§°æ¥éæå®éè£éç bean\n\nref="ç±»å"\n\n\n1\n\n\n\n# @qualifier\n\n@qualifier é»è®¤æåç§°è£éï¼è¿ä¸ªæ³¨è§£æ¯å±äº spring çï¼ï¼value é»è®¤ @qualifier (value = "") ç©ºå¼ã\n\nref="ç±»å"\n\n\n1\n\n\n\n# @resource\n\n@resourceï¼è¿ä¸ªæ³¨è§£å±äº j2ee çï¼ï¼é»è®¤æç§åç§°è¿è¡è£éï¼åç§°å¯ä»¥éè¿ name å±æ§è¿è¡æå®ï¼ å¦ææ²¡ææå® name å±æ§ï¼å½æ³¨è§£åå¨å­æ®µä¸æ¶ï¼é»è®¤åå­æ®µåè¿è¡æç§åç§°æ¥æ¾ï¼å¦ææ³¨è§£åå¨ setter æ¹æ³ä¸é»è®¤åå±æ§åè¿è¡è£éã å½æ¾ä¸å°ä¸åç§°å¹éç bean æ¶ææç§ç±»åè¿è¡è£éãä½æ¯éè¦æ³¨æçæ¯ï¼å¦æ name å±æ§ä¸æ¦æå®ï¼å°±åªä¼æç§åç§°è¿è¡è£éã\n\nref="ç±»å"\n\n\n1\n\n\n\n# @value\n\nç»åºæ¬æ°æ®ç±»åèµå¼\n\nref="åºç¡æ°æ®ç±»å"\n\n\n1\n\n\n\n# spring aop\n\n\n# @aspect\n\nå£°æçé¢\n\napo:aspect\n\n\n1\n\n\n\n# @before\n\nåç½®éç¥\n\napo:before\n\n\n1\n\n\n\n# @afterreturning\n\nåç½®æ­£å¸¸éç¥\n\naop:after-returning\n\n\n1\n\n\n\n# @afterthrowing\n\nåç½®å¼å¸¸éç¥\n\naop:after-throwing\n\n\n1\n\n\n\n# @after\n\næç»éç¥\n\naop:after\n\n\n1\n\n\n\n# @around\n\nç¯ç»éç¥\n\naop:around\n\n\n1\n\n\n\n# å¶ä»æ³¨è§£\n\n\n# @order\n\næå¼å§ order æ³¨è§£ç¨äºåé¢çä¼åçº§æå®ï¼å¨ 4.0 ä¹åå¯¹å®çåè½è¿è¡äºå¢å¼ºï¼æ¯æéåçæ³¨å¥æ¶ï¼æå®éåä¸­ bean çé¡ºåºï¼å¹¶ä¸ç¹å«æåºäºï¼å®å¯¹äºåå®ä¾ç bean ä¹é´çé¡ºåºï¼æ²¡æä»»ä½å½±åã\n\næ³¨è§£ @order æèæ¥å£ ordered çä½ç¨æ¯å®ä¹ spring ioc å®¹å¨ä¸­ bean çæ§è¡é¡ºåºçä¼åçº§ï¼èä¸æ¯å®ä¹ bean çå è½½é¡ºåºï¼bean çå è½½é¡ºåºä¸å @order æ ordered æ¥å£çå½±åï¼\n\n@order æ³¨è§£ä¸è½æå® bean çå è½½é¡ºåºï¼å®éç¨äº aop çä¼åçº§ï¼ä»¥åå°å¤ä¸ª bean æ³¨å¥å°éåæ¶ï¼è¿äº bean å¨éåä¸­çé¡ºåº\n\n# éè¯¯ä½¿ç¨\n\n// éè¯¯ä½¿ç¨æ¹æ³ 1\n@component\n@order(2)\npublic class ordera {\n    public ordera() {\n        system.out.println("************ a ************");\n    }\n}\n\n@component\n@order(1)\npublic class orderb {\n    public orderb() {\n        system.out.println("************ b ************");\n    }\n}\n// éè¯¯ä½¿ç¨æ¹æ³ 2\n@configuration\npublic class orderbeanconfig {\n \n    @order(2)\n    @bean\n    public orderc orderc() {\n        return new orderc();\n    }\n \n    @order(1)\n    @bean\n    public orderd orderd() {\n        return new orderd();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n\n\n# æ­£ç¡®ä½¿ç¨\n\n@component\n@order(value = 3)\npublic class anobeana implements ibean{\n    public anobeana() {\n        system.out.println("************ anobean a ************");\n    }\n}\n\n@component\n@order(value = 2)\npublic class anobeanb implements ibean{\n \n    public anobeanb() {\n        system.out.println("************ anobean b ************");\n    }\n}\n\n@component\npublic class anobean {\n    public anobean(list<ibean> anobeanlist) {\n        for (ibean bean : anobeanlist) {\n            system.out.println("in ano testbean: "+ bean.getclass())\n        }\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# @autoconfigureorder\n\n@autoconfigureorder æå®å¤é¨ä¾èµç autoconfig çå è½½é¡ºåºï¼å³å®ä¹å¨ / meta-inf/spring.factories æä»¶ä¸­çéç½® bean ä¼åçº§)ï¼å¨å½åå·¥ç¨ä¸­ä½¿ç¨è¿ä¸ªæ³¨è§£å¹¶æ²¡æä»ä¹ç¨ï¼åæ ·ç @autoconfigurebefore å @autoconfigureafter è¿ä¸¤ä¸ªæ³¨è§£çéç¨èå´å @autoconfigureorder ä¸æ ·',charsets:{cjk:!0}},{title:"pom æä»¶ä»ç»å parentãproperties æ ç­¾è¯¦è§£",frontmatter:{title:"pom æä»¶ä»ç»å parentãproperties æ ç­¾è¯¦è§£",date:"2023-06-25T09:22:36.000Z",permalink:"/maven/2300/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/2300.maven/2300.pom%20%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D%E5%8F%8A%20parent%E3%80%81properties%20%E6%A0%87%E7%AD%BE%E8%AF%A6%E8%A7%A3.html",relativePath:"00.java/2300.maven/2300.pom æä»¶ä»ç»å parentãproperties æ ç­¾è¯¦è§£.md",key:"v-4452e22a",path:"/maven/2300/",headers:[{level:2,title:"pom.xml ä»ç»",slug:"pom-xml-ä»ç»",normalizedTitle:"pom.xml ä»ç»",charIndex:2},{level:2,title:"parent æ ç­¾è¯¦è§£",slug:"parent-æ ç­¾è¯¦è§£",normalizedTitle:"parent æ ç­¾è¯¦è§£",charIndex:4061},{level:2,title:"properties æ ç­¾è¯¦è§£",slug:"properties-æ ç­¾è¯¦è§£",normalizedTitle:"properties æ ç­¾è¯¦è§£",charIndex:4813}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"pom.xml ä»ç» parent æ ç­¾è¯¦è§£ properties æ ç­¾è¯¦è§£",content:'# pom.xml ä»ç»\n\npom ä½ä¸ºé¡¹ç®å¯¹è±¡æ¨¡åãéè¿ xml è¡¨ç¤º maven é¡¹ç®ï¼ä½¿ç¨ pom.xml æ¥å®ç°ãä¸»è¦æè¿°äºé¡¹ç®ï¼åæ¬éç½®æä»¶ï¼å¼åèéè¦éµå¾ªçè§åï¼ç¼ºé·ç®¡çç³»ç»ï¼ç»ç»å licensesï¼é¡¹ç®ç urlï¼é¡¹ç®çä¾èµæ§ï¼ä»¥åå¶ä»ææçé¡¹ç®ç¸å³å ç´ ã\n\npom ä¸­çæè¿°ä¿¡æ¯é½æ¯ç¨ xml æ ç­¾çæ¹å¼ï¼å¶ä¸­åå«åæ ç­¾ååæ ç­¾ï¼æé¡¶é¨ç¨äºæè¿° xml å¾çæ¬åç¼ç ï¼å¶æ¬¡æ¯ä»¥ project å¼å¤´å¾åæ ç­¾å¹¶è¡¨ç¤ºä¸ºä¸ä¸ªé¡¹ç®ï¼å®ä¹äºè¯¥é¡¹ç®å¯ç¨åå®¹åè§èã\n\n# åæ ç­¾\n<project></project>\n\n# åæ ç­¾\n<project/>\n\n\n1\n2\n3\n4\n5\n\n\nå¯¹äº pom å¯ç¨åå®¹è¾å¤ï¼ä¸çº§æ ç­¾æå¦ä¸è¡¨æç¤ºï¼ä½å¸¸ç¨çé½ä¼æå¯¹åºçæè¿°\n\næ ç­¾                       æè¿°\nmodelVersion             å½åæ¨¡åä½¿ç¨ççæ¬\nparent                   ç»§æ¿æä¸ª pomï¼é¨åæ¯ä¸å¯ç»§æ¿ç\ngroupId                  å¬å¸æç»ç»çå¯ä¸æ è¯ï¼å¦ org.springframework.boot ç¬¬ä¸æ®µæ¯åï¼orgãcom\n                         éçå©ç»ç»ãåä¸ç»ç»ï¼ï¼ç¬¬äºæ®µæ¯å¬å¸åç§°ï¼ç¬¬ä¸æ®µæ¯åºç¨åç§°\nartifactId               é¡¹ç®çå¯ä¸ ID\nversion                  é¡¹ç®æå±ççæ¬å·\nname                     é¡¹ç®åç§°\ndescription              é¡¹ç®æè¿°ä¿¡æ¯\nproperties               éç½®ä¿¡æ¯æè¿°ï¼æ´å¤çæ¯æè¿°ä¾èµ jar çæ¬ãé¡¹ç®çæ¬ç­\ndependencies             æè¦ä¾èµç jar é½éè¦å¨è¿éæè¿°\nbuild                    æå»ºä¿¡æ¯ï¼åæ¬æä»¶ï¼èµæºæä»¶ä¿¡æ¯ç­\nprofiles                 ä½ç¨äºé¡¹ç®ç¯å¢çåæ¢ï¼devãtestãproduceï¼\npackaging                æè¿°é¡¹ç®çç±»åï¼å¯é pomãjarãwar\nrepositories             ç¨æ¯ç¨æ¥éç½® maven é¡¹ç®çè¿ç¨ä»åºï¼å¯ä»¥æ¯ç§æï¼nexusï¼\nmodules                  ç¨æ¥éç½®å­é¡¹ç®\ndependencyManagement     ç¨æ¥æä¾äºä¸ç§ç®¡çä¾èµçæ¬å·çæ¹å¼ãéå¸¸ä¼å¨é¡¹ç®çæé¡¶å±çç¶ POM ä¸­çå°è¯¥åç´ ãä½¿ç¨ pom.xml ä¸­ç\n                         dependencyManagement åç´ è½è®©ææå¨å­é¡¹ç®ä¸­å¼ç¨ä¸ä¸ªä¾èµèä¸ç¨æ¾å¼çååºçæ¬å·\ndistributionManagement   ç¨äºååæä»¶å°è¿ç¨ä»åºï¼mvn install ä¼å°é¡¹ç®çæçæä»¶å®è£å°æ¬å° Maven ä»åºï¼mvn deploy\n                         ç¨æ¥å°é¡¹ç®çæçæä»¶ååå°è¿ç¨ Maven ä»åºãæ¬å° Maven ä»åºçæä»¶åªè½ä¾å½åç¨æ·ä½¿ç¨ï¼å¨ååå°è¿ç¨\n                         Maven ä»åºä¹åï¼ææè½è®¿é®è¯¥ä»åºçç¨æ·é½è½ä½¿ç¨ä½ çæä»¶ã\npluginRepositories       éç½® Maven ä»ä»ä¹å°æ¹ä¸è½½æä»¶\nscm                      éæäºè½¯ä»¶éç½®ç®¡ççï¼ä»å¯ä»¥æ¯ææä»¬å¸¸ç¨ SVNãCVS ç­\ndevelopers               éç½®å¼åèä¿¡æ¯ï¼ä¾å¦ï¼ä¸ä¸ªå¼åèå¯ä»¥æå¤ä¸ª rolesï¼properties\nissueManagement          bug è·è¸ªç®¡çç³»ç»ï¼å®ä¹ defect tracking system ç¼ºé·è·è¸ªç³»ç»\nreporting                åå« site çæé¶æ®µçä¸äºåç´ ï¼æäº maven plugin å¯ä»¥çæ reports å¹¶ä¸å¨ reporting\n                         ä¸éç½®\nurl                      å¼åå¢éçç½ç«ï¼æ å³ç´§è¦å¯é\nlicenses                 è®¸å¯è¯ä¿¡æ¯éç½®\norganization             éç½®ç»ç»ä¿¡æ¯\nciManagement             ?\ncontributors             ?\ninceptionYear            ?\nmailingLists             ?\nprerequisites            ?\nreports                  ?\n\nä»¥ä¸ä¸ª spring boot å¸¸è§é¡¹ç®åä¸ºç¤ºä¾ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    \x3c!-- ç»§æ¿spring-bootä½¿ç¨ä»çç¸å³ä¾èµ --\x3e\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.6.9</version>\n        <relativePath/> \x3c!-- lookup parent from repository --\x3e\n    </parent>\n    \x3c!-- ç»ç»ï¼åºç¨ --\x3e\n    <groupId>com.xxx.boot</groupId>\n    \x3c!-- é¡¹ç®IDï¼ä¸è¬é½åæ¬¢æ¯åç§° --\x3e\n    <artifactId>framework</artifactId>\n    \x3c!-- çæ¬ --\x3e\n    <version>0.0.1-SNAPSHOT</version>\n    \x3c!-- é¡¹ç®åç§° --\x3e\n    <name>newFramework</name>\n    <description>Demo project for Spring Boot</description>\n    \x3c!-- éç½®æè¿° --\x3e\n    <properties>\n        \x3c!-- javaçæ¬ï¼ä½è¿ä¸ªå®éæ²¡ä»ä¹ç¨ï¼ååä¸ç§æè¿°ä¿¡æ¯ç --\x3e\n        <java.version>17</java.version>\n        \x3c!-- å®éæå®ç¼è¯çæ¬å¯ä»¥ä½¿ç¨å¦ä¸ --\x3e\n        <maven.complier.source>17</maven.complier.source>\n        <maven.complier.target>17</maven.complier.target>\n    </properties>\n    \n    \x3c!-- ä¾èµ --\x3e\n    <dependencies>\n        \x3c!-- å·ä½ä¾èµ --\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n    \x3c!-- æå»ºä¿¡æ¯ --\x3e\n    <build>\n        \x3c!-- æä»¶ --\x3e\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n\n\n\n# parent æ ç­¾è¯¦è§£\n\n<parent></parent> æ ç­¾ç¨äºç»§æ¿ç¶é¡¹ç®çåç±»ä¾èµåå¶ä»éç½®ä¿¡æ¯ï¼å¦çæ¬ï¼æå»ºä¿¡æ¯ï¼éç½®æè¿°ç­ï¼å·ä½èå´åæ¬ï¼\n\n# å¯ä»¥ç»§æ¿é¨å\ngroupIdãversionãdescriptionãurlãinceptionYearãorganizationãlicensesãdevelopersãcontributorsãmailingListsãscmãissueManagementãciManagementãpropertiesãdependencyManagementãdependenciesãrepositoriesãpluginRepositoriesãbuildãreportingãprofiles\n\n# ä¸å¯ç»§æ¿é¨å\nartifactIdãnameãprerequisites\n\n\n1\n2\n3\n4\n5\n\n\nä¸ä¸ª parent éæåå«å¨é¨åå®¹æï¼\n\n<parent>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-parent</artifactId>\n    <version>2.6.9</version>\n    <relativePath/>\n</parent>\n\n\n1\n2\n3\n4\n5\n6\n\n\n<relativePath/> åç´ ï¼å®å¯ä»¥åæ ç­¾ä¹å¯ä»¥æ¯åæ ç­¾ <relativePath>../my-parent</relativePath> ãå®ä¸æ¯å¿éçï¼ä½å¯ä»¥ç¨ä½ Maven çæç¤ºç¬¦ï¼ç¶ååæç´¢è¯¥é¡¹ç®çç¶çº§çç»å®è·¯å¾ï¼ç¶ååæç´¢æ¬å°åè¿ç¨å­å¨åºï¼åæ ç­¾ä¸ºé»è®¤ä»å½å pom.xml çç¶çº§ç®å½æ¥æ¾ã\n\n\n# properties æ ç­¾è¯¦è§£\n\n<properties></properties> æ²¡ææä¾ä»ä¹å®è´¨æ§çåå®¹ä¾æä»¬ä½¿ç¨ï¼æ£æ¥ä¸æ¥å¨éé¢æå¤å¯ä»¥å¨æè¿°ä¸ä¸ª <project></project> æ ç­¾å¯ç¨ï¼ä½ä½ç¨å¹¶ä¸æ¯ä¸å¤§ãå®éä½ç¨æ´å¤å¨äºæè¿°æä»¬ä¾èµ jar ççæ¬ç­ã\n\n<properties>\n    \x3c!-- javaçæ¬ï¼ä½è¿ä¸ªå®éæ²¡ä»ä¹ç¨ï¼ååä¸ç§æè¿°ä¿¡æ¯ç --\x3e\n    <java.version>17</java.version>\n    \x3c!-- å®éæå®ç¼è¯çæ¬å¯ä»¥ä½¿ç¨å¦ä¸ --\x3e\n    <maven.complier.source>17</maven.complier.source>\n    <maven.complier.target>17</maven.complier.target>\n    \x3c!-- å®ä¹lombokçæ¬ --\x3e\n    <lombok.version>1.18.24</lombok.version>\n    <project.version>0.0.1-SNAPSHOT</project.version>\n</properties>\n\x3c!-- é¡¹ç®çæ¬ --\x3e\n<version>${project.version}</version>\n\x3c!-- ä¾èµ --\x3e\n<dependencies>\n    <dependency>\n        <groupId>org.projectlombok</groupId>\n        <artifactId>lombok</artifactId>\n        <version>${lombok.version}</version>\n    </dependency>\n</dependencies>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n',normalizedContent:'# pom.xml ä»ç»\n\npom ä½ä¸ºé¡¹ç®å¯¹è±¡æ¨¡åãéè¿ xml è¡¨ç¤º maven é¡¹ç®ï¼ä½¿ç¨ pom.xml æ¥å®ç°ãä¸»è¦æè¿°äºé¡¹ç®ï¼åæ¬éç½®æä»¶ï¼å¼åèéè¦éµå¾ªçè§åï¼ç¼ºé·ç®¡çç³»ç»ï¼ç»ç»å licensesï¼é¡¹ç®ç urlï¼é¡¹ç®çä¾èµæ§ï¼ä»¥åå¶ä»ææçé¡¹ç®ç¸å³å ç´ ã\n\npom ä¸­çæè¿°ä¿¡æ¯é½æ¯ç¨ xml æ ç­¾çæ¹å¼ï¼å¶ä¸­åå«åæ ç­¾ååæ ç­¾ï¼æé¡¶é¨ç¨äºæè¿° xml å¾çæ¬åç¼ç ï¼å¶æ¬¡æ¯ä»¥ project å¼å¤´å¾åæ ç­¾å¹¶è¡¨ç¤ºä¸ºä¸ä¸ªé¡¹ç®ï¼å®ä¹äºè¯¥é¡¹ç®å¯ç¨åå®¹åè§èã\n\n# åæ ç­¾\n<project></project>\n\n# åæ ç­¾\n<project/>\n\n\n1\n2\n3\n4\n5\n\n\nå¯¹äº pom å¯ç¨åå®¹è¾å¤ï¼ä¸çº§æ ç­¾æå¦ä¸è¡¨æç¤ºï¼ä½å¸¸ç¨çé½ä¼æå¯¹åºçæè¿°\n\næ ç­¾                       æè¿°\nmodelversion             å½åæ¨¡åä½¿ç¨ççæ¬\nparent                   ç»§æ¿æä¸ª pomï¼é¨åæ¯ä¸å¯ç»§æ¿ç\ngroupid                  å¬å¸æç»ç»çå¯ä¸æ è¯ï¼å¦ org.springframework.boot ç¬¬ä¸æ®µæ¯åï¼orgãcom\n                         éçå©ç»ç»ãåä¸ç»ç»ï¼ï¼ç¬¬äºæ®µæ¯å¬å¸åç§°ï¼ç¬¬ä¸æ®µæ¯åºç¨åç§°\nartifactid               é¡¹ç®çå¯ä¸ id\nversion                  é¡¹ç®æå±ççæ¬å·\nname                     é¡¹ç®åç§°\ndescription              é¡¹ç®æè¿°ä¿¡æ¯\nproperties               éç½®ä¿¡æ¯æè¿°ï¼æ´å¤çæ¯æè¿°ä¾èµ jar çæ¬ãé¡¹ç®çæ¬ç­\ndependencies             æè¦ä¾èµç jar é½éè¦å¨è¿éæè¿°\nbuild                    æå»ºä¿¡æ¯ï¼åæ¬æä»¶ï¼èµæºæä»¶ä¿¡æ¯ç­\nprofiles                 ä½ç¨äºé¡¹ç®ç¯å¢çåæ¢ï¼devãtestãproduceï¼\npackaging                æè¿°é¡¹ç®çç±»åï¼å¯é pomãjarãwar\nrepositories             ç¨æ¯ç¨æ¥éç½® maven é¡¹ç®çè¿ç¨ä»åºï¼å¯ä»¥æ¯ç§æï¼nexusï¼\nmodules                  ç¨æ¥éç½®å­é¡¹ç®\ndependencymanagement     ç¨æ¥æä¾äºä¸ç§ç®¡çä¾èµçæ¬å·çæ¹å¼ãéå¸¸ä¼å¨é¡¹ç®çæé¡¶å±çç¶ pom ä¸­çå°è¯¥åç´ ãä½¿ç¨ pom.xml ä¸­ç\n                         dependencymanagement åç´ è½è®©ææå¨å­é¡¹ç®ä¸­å¼ç¨ä¸ä¸ªä¾èµèä¸ç¨æ¾å¼çååºçæ¬å·\ndistributionmanagement   ç¨äºååæä»¶å°è¿ç¨ä»åºï¼mvn install ä¼å°é¡¹ç®çæçæä»¶å®è£å°æ¬å° maven ä»åºï¼mvn deploy\n                         ç¨æ¥å°é¡¹ç®çæçæä»¶ååå°è¿ç¨ maven ä»åºãæ¬å° maven ä»åºçæä»¶åªè½ä¾å½åç¨æ·ä½¿ç¨ï¼å¨ååå°è¿ç¨\n                         maven ä»åºä¹åï¼ææè½è®¿é®è¯¥ä»åºçç¨æ·é½è½ä½¿ç¨ä½ çæä»¶ã\npluginrepositories       éç½® maven ä»ä»ä¹å°æ¹ä¸è½½æä»¶\nscm                      éæäºè½¯ä»¶éç½®ç®¡ççï¼ä»å¯ä»¥æ¯ææä»¬å¸¸ç¨ svnãcvs ç­\ndevelopers               éç½®å¼åèä¿¡æ¯ï¼ä¾å¦ï¼ä¸ä¸ªå¼åèå¯ä»¥æå¤ä¸ª rolesï¼properties\nissuemanagement          bug è·è¸ªç®¡çç³»ç»ï¼å®ä¹ defect tracking system ç¼ºé·è·è¸ªç³»ç»\nreporting                åå« site çæé¶æ®µçä¸äºåç´ ï¼æäº maven plugin å¯ä»¥çæ reports å¹¶ä¸å¨ reporting\n                         ä¸éç½®\nurl                      å¼åå¢éçç½ç«ï¼æ å³ç´§è¦å¯é\nlicenses                 è®¸å¯è¯ä¿¡æ¯éç½®\norganization             éç½®ç»ç»ä¿¡æ¯\ncimanagement             ?\ncontributors             ?\ninceptionyear            ?\nmailinglists             ?\nprerequisites            ?\nreports                  ?\n\nä»¥ä¸ä¸ª spring boot å¸¸è§é¡¹ç®åä¸ºç¤ºä¾ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0" xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelversion>4.0.0</modelversion>\n    \x3c!-- ç»§æ¿spring-bootä½¿ç¨ä»çç¸å³ä¾èµ --\x3e\n    <parent>\n        <groupid>org.springframework.boot</groupid>\n        <artifactid>spring-boot-starter-parent</artifactid>\n        <version>2.6.9</version>\n        <relativepath/> \x3c!-- lookup parent from repository --\x3e\n    </parent>\n    \x3c!-- ç»ç»ï¼åºç¨ --\x3e\n    <groupid>com.xxx.boot</groupid>\n    \x3c!-- é¡¹ç®idï¼ä¸è¬é½åæ¬¢æ¯åç§° --\x3e\n    <artifactid>framework</artifactid>\n    \x3c!-- çæ¬ --\x3e\n    <version>0.0.1-snapshot</version>\n    \x3c!-- é¡¹ç®åç§° --\x3e\n    <name>newframework</name>\n    <description>demo project for spring boot</description>\n    \x3c!-- éç½®æè¿° --\x3e\n    <properties>\n        \x3c!-- javaçæ¬ï¼ä½è¿ä¸ªå®éæ²¡ä»ä¹ç¨ï¼ååä¸ç§æè¿°ä¿¡æ¯ç --\x3e\n        <java.version>17</java.version>\n        \x3c!-- å®éæå®ç¼è¯çæ¬å¯ä»¥ä½¿ç¨å¦ä¸ --\x3e\n        <maven.complier.source>17</maven.complier.source>\n        <maven.complier.target>17</maven.complier.target>\n    </properties>\n    \n    \x3c!-- ä¾èµ --\x3e\n    <dependencies>\n        \x3c!-- å·ä½ä¾èµ --\x3e\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-web</artifactid>\n        </dependency>\n        <dependency>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-starter-test</artifactid>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n    \x3c!-- æå»ºä¿¡æ¯ --\x3e\n    <build>\n        \x3c!-- æä»¶ --\x3e\n        <plugins>\n            <plugin>\n                <groupid>org.springframework.boot</groupid>\n                <artifactid>spring-boot-maven-plugin</artifactid>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n\n\n\n# parent æ ç­¾è¯¦è§£\n\n<parent></parent> æ ç­¾ç¨äºç»§æ¿ç¶é¡¹ç®çåç±»ä¾èµåå¶ä»éç½®ä¿¡æ¯ï¼å¦çæ¬ï¼æå»ºä¿¡æ¯ï¼éç½®æè¿°ç­ï¼å·ä½èå´åæ¬ï¼\n\n# å¯ä»¥ç»§æ¿é¨å\ngroupidãversionãdescriptionãurlãinceptionyearãorganizationãlicensesãdevelopersãcontributorsãmailinglistsãscmãissuemanagementãcimanagementãpropertiesãdependencymanagementãdependenciesãrepositoriesãpluginrepositoriesãbuildãreportingãprofiles\n\n# ä¸å¯ç»§æ¿é¨å\nartifactidãnameãprerequisites\n\n\n1\n2\n3\n4\n5\n\n\nä¸ä¸ª parent éæåå«å¨é¨åå®¹æï¼\n\n<parent>\n    <groupid>org.springframework.boot</groupid>\n    <artifactid>spring-boot-starter-parent</artifactid>\n    <version>2.6.9</version>\n    <relativepath/>\n</parent>\n\n\n1\n2\n3\n4\n5\n6\n\n\n<relativepath/> åç´ ï¼å®å¯ä»¥åæ ç­¾ä¹å¯ä»¥æ¯åæ ç­¾ <relativepath>../my-parent</relativepath> ãå®ä¸æ¯å¿éçï¼ä½å¯ä»¥ç¨ä½ maven çæç¤ºç¬¦ï¼ç¶ååæç´¢è¯¥é¡¹ç®çç¶çº§çç»å®è·¯å¾ï¼ç¶ååæç´¢æ¬å°åè¿ç¨å­å¨åºï¼åæ ç­¾ä¸ºé»è®¤ä»å½å pom.xml çç¶çº§ç®å½æ¥æ¾ã\n\n\n# properties æ ç­¾è¯¦è§£\n\n<properties></properties> æ²¡ææä¾ä»ä¹å®è´¨æ§çåå®¹ä¾æä»¬ä½¿ç¨ï¼æ£æ¥ä¸æ¥å¨éé¢æå¤å¯ä»¥å¨æè¿°ä¸ä¸ª <project></project> æ ç­¾å¯ç¨ï¼ä½ä½ç¨å¹¶ä¸æ¯ä¸å¤§ãå®éä½ç¨æ´å¤å¨äºæè¿°æä»¬ä¾èµ jar ççæ¬ç­ã\n\n<properties>\n    \x3c!-- javaçæ¬ï¼ä½è¿ä¸ªå®éæ²¡ä»ä¹ç¨ï¼ååä¸ç§æè¿°ä¿¡æ¯ç --\x3e\n    <java.version>17</java.version>\n    \x3c!-- å®éæå®ç¼è¯çæ¬å¯ä»¥ä½¿ç¨å¦ä¸ --\x3e\n    <maven.complier.source>17</maven.complier.source>\n    <maven.complier.target>17</maven.complier.target>\n    \x3c!-- å®ä¹lombokçæ¬ --\x3e\n    <lombok.version>1.18.24</lombok.version>\n    <project.version>0.0.1-snapshot</project.version>\n</properties>\n\x3c!-- é¡¹ç®çæ¬ --\x3e\n<version>${project.version}</version>\n\x3c!-- ä¾èµ --\x3e\n<dependencies>\n    <dependency>\n        <groupid>org.projectlombok</groupid>\n        <artifactid>lombok</artifactid>\n        <version>${lombok.version}</version>\n    </dependency>\n</dependencies>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n',charsets:{cjk:!0}},{title:"dependencies æ ç­¾è¯¦è§£",frontmatter:{title:"dependencies æ ç­¾è¯¦è§£",date:"2023-06-25T09:22:36.000Z",permalink:"/maven/2301/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/2300.maven/2301.dependencies%20%E6%A0%87%E7%AD%BE%E8%AF%A6%E8%A7%A3.html",relativePath:"00.java/2300.maven/2301.dependencies æ ç­¾è¯¦è§£.md",key:"v-13c2056a",path:"/maven/2301/",headers:[{level:2,title:"scop",slug:"scop",normalizedTitle:"scop",charIndex:320},{level:2,title:"optional",slug:"optional",normalizedTitle:"optional",charIndex:3888},{level:2,title:"exclusions",slug:"exclusions",normalizedTitle:"exclusions",charIndex:4485}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"scop optional exclusions",content:'dependencies æ ç­¾ä¸åªä¼æä¸ä¸ª dependencyï¼dependency ä½ç¨äºæä»¬å¼ç¨åªäº jar æ¥ç»æä»¬æä¾æ´å¤çææ¯æ¯æãä¸è¬ç¨æ³:\n\n    <dependencies>\n        <dependency>\n            <groupId>org.apache.commons</groupId>\n            <artifactId>commons-pool2</artifactId>\n            <version>2.7.0</version>\n        </dependency>\n    </dependencies>\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# scop\n\næ§å¶ dependency (ä¾èµ) çä½¿ç¨èå´ãéä¿çè®²ï¼å°±æ¯æ§å¶ Jar åå¨åªäºèå´è¢«å è½½åä½¿ç¨ãä½¿ç¨æ¹å¼å¦ä¸ï¼\n\n<dependency>\n    <groupId>com.giant</groupId>\n    <artifactId>giant-core-security</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    <scope>compile</scope>\n</dependency>\n\n\n1\n2\n3\n4\n5\n6\n\n\nscop ä¸å±æ 6 ä¸ªå¼å¯ä»¥ä½¿ç¨ï¼\n\n * compileï¼é»è®¤å¼ï¼\n   å¦ææ²¡ææå® scope å¼ï¼è¯¥åç´ çé»è®¤å¼ä¸º compileãè¢«ä¾èµï¼giant-core-securitï¼jar éè¦åä¸å°å½åé¡¹ç®çç¼è¯ï¼æµè¯ï¼æåï¼è¿è¡ç­é¶æ®µãæåçæ¶åéå¸¸ä¼åå«è¢«ä¾èµï¼giant-core-securitï¼jarã\n\n * provided\n   è¢«ä¾èµ jar çè®ºä¸å¯ä»¥åä¸ç¼è¯ãæµè¯ãè¿è¡ç­é¶æ®µï¼ç¸å½äº compileï¼ä½æ¯å¨æåé¶æ®µåäº excludeï¼æé¤ï¼ çå¨ä½ãä¾å¦ï¼ å¦ææä»¬å¨å¼åä¸ä¸ªåºç¨ï¼å¨ç¼è¯æ¶æä»¬éè¦ä¾èµ xxxx.jarï¼ä½æ¯å¨è¿è¡æ¶æä»¬ä¸éè¦è¯¥ jar åï¼å ä¸ºè¿ä¸ª jar åå·²ç±åºç¨æå¡å¨æé¡¹ç®æ¬èº«æä¾è¯¥ä¾èµï¼æ­¤æ¶æä»¬éè¦ä½¿ç¨ provided è¿è¡èå´ä¿®é¥°ã\n\n * runtime\n   è¡¨ç¤ºè¢«ä¾èµ jar æ éåä¸é¡¹ç®çç¼è¯é¶æ®µï¼ä½æ¯ä¼åä¸å°é¡¹ç®çæµè¯åè¿è¡é¶æ®µãä¸ compile ç¸æ¯ï¼è¢«ä¾èµ jar æ éåä¸é¡¹ç®çç¼è¯ãéç¨åºæ¯ï¼ä¾å¦ï¼å¨ç¼è¯çæ¶åæä»¬ä¸éè¦ JDBC API ç jar åï¼èå¨è¿è¡çæ¶åæä»¬æéè¦ JDBC é©±å¨åã\n\n * test\n   è¡¨ç¤ºè¢«ä¾èµé¡¹ç®ä»ä»åä¸æµè¯ç¸å³çå·¥ä½ï¼åæ¬æµè¯ä»£ç çç¼è¯ï¼æ§è¡ãéç¨åºæ¯ï¼ä¾å¦ï¼Junit æµè¯ã\n\n * system\n   system åç´ ä¸ provided åç´ ç±»ä¼¼ï¼ä½æ¯è¢«ä¾èµ jar ä¸ä¼ä» maven ä»åºä¸­æ¥æ¾ï¼èæ¯ä»æ¬å°ç³»ç»ä¸­è·åï¼systemPath åç´ ç¨äºå¶å®æ¬å°ç³»ç»ä¸­ jar æä»¶çè·¯å¾ãä¾å¦ï¼\n\n<dependency>\n    <groupId>sleepycat</groupId>\n    <artifactId>je</artifactId>\n    <version>7.0.6</version>\n    <scope>system</scope>\n    <systemPath>${project.basedir}/lib/je-7.0.6.jar</systemPath>\n</dependency>\n\n\n1\n2\n3\n4\n5\n6\n7\n\n * import\n   å®åªä½¿ç¨å¨ <dependencyManagement> ä¸­ï¼è¡¨ç¤ºä»å¶å®ç pom ä¸­å¯¼å¥ dependency çéç½®ï¼ä¾å¦ï¼B é¡¹ç®å¯¼å¥ A é¡¹ç®ä¸­çåéç½®ï¼ãä¼æå¨ç¥ï¼å½æä»¬åå»ºä¸ä¸ª SpringBoot é¡¹ç®æ¶ï¼æä»¬ä¸å®ä¼åä¸ä¸ª <parent> æ¥ç»§æ¿ spring ææä¾çææä¾èµï¼ä½å¦ææåæ³ä½¿ç¨ spring æä¾çä¾èµï¼åæ³ç»§æ¿æèªå·±çé¡¹ç®ï¼æ­¤æ¶ import å°±æäºç¨æ­¦ä¹å°\n\n# æ®é SpringBoot ä¾èµ\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.2.6.RELEASE</version>\n        <relativePath/>\n    </parent>\n\n    <groupId>com.giant</groupId>\n    <artifactId>station</artifactId>\n    <version>${project-version}</version>\n    <packaging>pom</packaging>\n\n    <properties>\n        <project-version>1.0.0</project-version>\n    </properties>\n\n</project>\n\n## æ´æ¢ç»§æ¿é¡¹ç®ï¼å¹¶ä½¿ç¨springboot ä¾èµ\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    \x3c!-- åä¸ºæèªå·±çç¶é¡¹ç® --\x3e\n    <parent>\n        <groupId>com.giant.parent</groupId>\n        <artifactId>boot-parent</artifactId>\n        <version>1.0-SNAPSHOT</version>\n        <relativePath/>\n    </parent>\n\n    <groupId>com.giant</groupId>\n    <artifactId>station</artifactId>\n    <version>${project-version}</version>\n    <packaging>pom</packaging>\n\n    <properties>\n        <project-version>1.0.0</project-version>\n    </properties>\n\n    \x3c!-- spring boot ä¾èµ --\x3e\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-starter-parent</artifactId>\n                <version>2.2.6.RELEASE</version>\n                \x3c!-- éè¦æææ¶pomè¿æ¯jar --\x3e\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n\n</project>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n\n\n\n# optional\n\noptional æ¯ maven ä¾èµ jar æ¶çä¸ä¸ªéé¡¹ï¼è¡¨ç¤ºè¯¥ä¾èµæ¯å¯éçï¼ä¸ä¼è¢«ä¾èµä¼ éãä¾å¦ï¼B ä¾èµäºæ¥å¿æ¡æ¶ logbackãlog4jãapache commons logï¼è¿æ¶å A å¼ç¨ B ç jarï¼å ä¸º maven æä¾èµä¼ éæºå¶ï¼é£ä¹ A é¡¹ç®å°±ä¼æ 3 ä¸ª jar åï¼logbackãlog4jãapache commons logãå®éä¸æä»¬ä¸è¬åªä¼å¨é¡¹ç®ä¸­ä½¿ç¨ä¸ç§æ¥å¿æ¡æ¶ï¼é£ä¹æä»¬é¡¹ç®ä¸­å°±ä¼æå¤ä½çä¾èµï¼å½è¿ç§æåµæ¶è¶æ¥è¶å¤æ¶ï¼æåæ´ä¸ªé¡¹ç®ç jar åå°±æå¾å¤çå¤ä½ä¾èµï¼å¯¼è´é¡¹ç®å¾èè¿ã\n\nå¯¹äºè¿ç§æåµï¼æä»¬åªè¦å¨ B é¡¹ç®ä¸­æ logbackãlog4jãapache commons log è®¾ç½®æ <optional>true</optional> çå³å¯ãè¿æ¶å A é¡¹ç®ä¾èµ B çæ¶åï¼é¡¹ç®ä¸­ä¸ä¼æ logbackãlog4jãapache commons log ç¸å³ jar åï¼å¯ä»¥æ ¹æ®æåµèªè¡éæ©ä¸ä¸ªå³å¯ã\n\n<dependency>\n    <groupId>org.projectlombok</groupId>\n    <artifactId>lombok</artifactId>\n    <optional>true</optional>\n</dependency>\n\n\n1\n2\n3\n4\n5\n\n\n\n# exclusions\n\nç¨äºæé¤ä¾èµé¡¹ä¸­ï¼ä¸éè¦æ·»å ç jarï¼æèä½¿ç¨èªå·±çæ¬ç jar èä¸éç¨å¶ä»äººææä¾ç jarãå¦ï¼å¼ç¨ç spring-boot-starter-data-redis ä¼å¸®æä»¬ä¾èµ slf4j-apiï¼ä½å®ä½¿ç¨ççæ¬è¢«çåºäº bugï¼é£æè¦åçº§å°æ´é«çæ¬ï¼å¼å¥èªå·±éä¸­ççæ¬ã\n\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-data-redis</artifactId>\n    <version>2.2.6.RELEASE</version>\n    <exclusions>\n        \x3c!-- æé¤spring-boot-starter-data-redisèªå¸¦ç slf4j --\x3e\n        <exclusion>\n            <groupId>org.slf4j</groupId>\n            <artifactId>slf4j-api</artifactId>\n        </exclusion>\n    </exclusions>\n</dependency>\n\n\x3c!-- å¼ç¨æ´æ¹çæ¬çslf4j --\x3e\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-api</artifactId>\n    <version>1.7.36</version>\n</dependency>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n',normalizedContent:'dependencies æ ç­¾ä¸åªä¼æä¸ä¸ª dependencyï¼dependency ä½ç¨äºæä»¬å¼ç¨åªäº jar æ¥ç»æä»¬æä¾æ´å¤çææ¯æ¯æãä¸è¬ç¨æ³:\n\n    <dependencies>\n        <dependency>\n            <groupid>org.apache.commons</groupid>\n            <artifactid>commons-pool2</artifactid>\n            <version>2.7.0</version>\n        </dependency>\n    </dependencies>\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# scop\n\næ§å¶ dependency (ä¾èµ) çä½¿ç¨èå´ãéä¿çè®²ï¼å°±æ¯æ§å¶ jar åå¨åªäºèå´è¢«å è½½åä½¿ç¨ãä½¿ç¨æ¹å¼å¦ä¸ï¼\n\n<dependency>\n    <groupid>com.giant</groupid>\n    <artifactid>giant-core-security</artifactid>\n    <version>1.0-snapshot</version>\n    <scope>compile</scope>\n</dependency>\n\n\n1\n2\n3\n4\n5\n6\n\n\nscop ä¸å±æ 6 ä¸ªå¼å¯ä»¥ä½¿ç¨ï¼\n\n * compileï¼é»è®¤å¼ï¼\n   å¦ææ²¡ææå® scope å¼ï¼è¯¥åç´ çé»è®¤å¼ä¸º compileãè¢«ä¾èµï¼giant-core-securitï¼jar éè¦åä¸å°å½åé¡¹ç®çç¼è¯ï¼æµè¯ï¼æåï¼è¿è¡ç­é¶æ®µãæåçæ¶åéå¸¸ä¼åå«è¢«ä¾èµï¼giant-core-securitï¼jarã\n\n * provided\n   è¢«ä¾èµ jar çè®ºä¸å¯ä»¥åä¸ç¼è¯ãæµè¯ãè¿è¡ç­é¶æ®µï¼ç¸å½äº compileï¼ä½æ¯å¨æåé¶æ®µåäº excludeï¼æé¤ï¼ çå¨ä½ãä¾å¦ï¼ å¦ææä»¬å¨å¼åä¸ä¸ªåºç¨ï¼å¨ç¼è¯æ¶æä»¬éè¦ä¾èµ xxxx.jarï¼ä½æ¯å¨è¿è¡æ¶æä»¬ä¸éè¦è¯¥ jar åï¼å ä¸ºè¿ä¸ª jar åå·²ç±åºç¨æå¡å¨æé¡¹ç®æ¬èº«æä¾è¯¥ä¾èµï¼æ­¤æ¶æä»¬éè¦ä½¿ç¨ provided è¿è¡èå´ä¿®é¥°ã\n\n * runtime\n   è¡¨ç¤ºè¢«ä¾èµ jar æ éåä¸é¡¹ç®çç¼è¯é¶æ®µï¼ä½æ¯ä¼åä¸å°é¡¹ç®çæµè¯åè¿è¡é¶æ®µãä¸ compile ç¸æ¯ï¼è¢«ä¾èµ jar æ éåä¸é¡¹ç®çç¼è¯ãéç¨åºæ¯ï¼ä¾å¦ï¼å¨ç¼è¯çæ¶åæä»¬ä¸éè¦ jdbc api ç jar åï¼èå¨è¿è¡çæ¶åæä»¬æéè¦ jdbc é©±å¨åã\n\n * test\n   è¡¨ç¤ºè¢«ä¾èµé¡¹ç®ä»ä»åä¸æµè¯ç¸å³çå·¥ä½ï¼åæ¬æµè¯ä»£ç çç¼è¯ï¼æ§è¡ãéç¨åºæ¯ï¼ä¾å¦ï¼junit æµè¯ã\n\n * system\n   system åç´ ä¸ provided åç´ ç±»ä¼¼ï¼ä½æ¯è¢«ä¾èµ jar ä¸ä¼ä» maven ä»åºä¸­æ¥æ¾ï¼èæ¯ä»æ¬å°ç³»ç»ä¸­è·åï¼systempath åç´ ç¨äºå¶å®æ¬å°ç³»ç»ä¸­ jar æä»¶çè·¯å¾ãä¾å¦ï¼\n\n<dependency>\n    <groupid>sleepycat</groupid>\n    <artifactid>je</artifactid>\n    <version>7.0.6</version>\n    <scope>system</scope>\n    <systempath>${project.basedir}/lib/je-7.0.6.jar</systempath>\n</dependency>\n\n\n1\n2\n3\n4\n5\n6\n7\n\n * import\n   å®åªä½¿ç¨å¨ <dependencymanagement> ä¸­ï¼è¡¨ç¤ºä»å¶å®ç pom ä¸­å¯¼å¥ dependency çéç½®ï¼ä¾å¦ï¼b é¡¹ç®å¯¼å¥ a é¡¹ç®ä¸­çåéç½®ï¼ãä¼æå¨ç¥ï¼å½æä»¬åå»ºä¸ä¸ª springboot é¡¹ç®æ¶ï¼æä»¬ä¸å®ä¼åä¸ä¸ª <parent> æ¥ç»§æ¿ spring ææä¾çææä¾èµï¼ä½å¦ææåæ³ä½¿ç¨ spring æä¾çä¾èµï¼åæ³ç»§æ¿æèªå·±çé¡¹ç®ï¼æ­¤æ¶ import å°±æäºç¨æ­¦ä¹å°\n\n# æ®é springboot ä¾èµ\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelversion>4.0.0</modelversion>\n\n    <parent>\n        <groupid>org.springframework.boot</groupid>\n        <artifactid>spring-boot-starter-parent</artifactid>\n        <version>2.2.6.release</version>\n        <relativepath/>\n    </parent>\n\n    <groupid>com.giant</groupid>\n    <artifactid>station</artifactid>\n    <version>${project-version}</version>\n    <packaging>pom</packaging>\n\n    <properties>\n        <project-version>1.0.0</project-version>\n    </properties>\n\n</project>\n\n## æ´æ¢ç»§æ¿é¡¹ç®ï¼å¹¶ä½¿ç¨springboot ä¾èµ\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelversion>4.0.0</modelversion>\n\n    \x3c!-- åä¸ºæèªå·±çç¶é¡¹ç® --\x3e\n    <parent>\n        <groupid>com.giant.parent</groupid>\n        <artifactid>boot-parent</artifactid>\n        <version>1.0-snapshot</version>\n        <relativepath/>\n    </parent>\n\n    <groupid>com.giant</groupid>\n    <artifactid>station</artifactid>\n    <version>${project-version}</version>\n    <packaging>pom</packaging>\n\n    <properties>\n        <project-version>1.0.0</project-version>\n    </properties>\n\n    \x3c!-- spring boot ä¾èµ --\x3e\n    <dependencymanagement>\n        <dependencies>\n            <dependency>\n                <groupid>org.springframework.boot</groupid>\n                <artifactid>spring-boot-starter-parent</artifactid>\n                <version>2.2.6.release</version>\n                \x3c!-- éè¦æææ¶pomè¿æ¯jar --\x3e\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencymanagement>\n\n</project>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n\n\n\n# optional\n\noptional æ¯ maven ä¾èµ jar æ¶çä¸ä¸ªéé¡¹ï¼è¡¨ç¤ºè¯¥ä¾èµæ¯å¯éçï¼ä¸ä¼è¢«ä¾èµä¼ éãä¾å¦ï¼b ä¾èµäºæ¥å¿æ¡æ¶ logbackãlog4jãapache commons logï¼è¿æ¶å a å¼ç¨ b ç jarï¼å ä¸º maven æä¾èµä¼ éæºå¶ï¼é£ä¹ a é¡¹ç®å°±ä¼æ 3 ä¸ª jar åï¼logbackãlog4jãapache commons logãå®éä¸æä»¬ä¸è¬åªä¼å¨é¡¹ç®ä¸­ä½¿ç¨ä¸ç§æ¥å¿æ¡æ¶ï¼é£ä¹æä»¬é¡¹ç®ä¸­å°±ä¼æå¤ä½çä¾èµï¼å½è¿ç§æåµæ¶è¶æ¥è¶å¤æ¶ï¼æåæ´ä¸ªé¡¹ç®ç jar åå°±æå¾å¤çå¤ä½ä¾èµï¼å¯¼è´é¡¹ç®å¾èè¿ã\n\nå¯¹äºè¿ç§æåµï¼æä»¬åªè¦å¨ b é¡¹ç®ä¸­æ logbackãlog4jãapache commons log è®¾ç½®æ <optional>true</optional> çå³å¯ãè¿æ¶å a é¡¹ç®ä¾èµ b çæ¶åï¼é¡¹ç®ä¸­ä¸ä¼æ logbackãlog4jãapache commons log ç¸å³ jar åï¼å¯ä»¥æ ¹æ®æåµèªè¡éæ©ä¸ä¸ªå³å¯ã\n\n<dependency>\n    <groupid>org.projectlombok</groupid>\n    <artifactid>lombok</artifactid>\n    <optional>true</optional>\n</dependency>\n\n\n1\n2\n3\n4\n5\n\n\n\n# exclusions\n\nç¨äºæé¤ä¾èµé¡¹ä¸­ï¼ä¸éè¦æ·»å ç jarï¼æèä½¿ç¨èªå·±çæ¬ç jar èä¸éç¨å¶ä»äººææä¾ç jarãå¦ï¼å¼ç¨ç spring-boot-starter-data-redis ä¼å¸®æä»¬ä¾èµ slf4j-apiï¼ä½å®ä½¿ç¨ççæ¬è¢«çåºäº bugï¼é£æè¦åçº§å°æ´é«çæ¬ï¼å¼å¥èªå·±éä¸­ççæ¬ã\n\n<dependency>\n    <groupid>org.springframework.boot</groupid>\n    <artifactid>spring-boot-starter-data-redis</artifactid>\n    <version>2.2.6.release</version>\n    <exclusions>\n        \x3c!-- æé¤spring-boot-starter-data-redisèªå¸¦ç slf4j --\x3e\n        <exclusion>\n            <groupid>org.slf4j</groupid>\n            <artifactid>slf4j-api</artifactid>\n        </exclusion>\n    </exclusions>\n</dependency>\n\n\x3c!-- å¼ç¨æ´æ¹çæ¬çslf4j --\x3e\n<dependency>\n    <groupid>org.slf4j</groupid>\n    <artifactid>slf4j-api</artifactid>\n    <version>1.7.36</version>\n</dependency>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n',charsets:{cjk:!0}},{title:"ä½¿ç¨ Nexus3.x æ­å»ºç§æ",frontmatter:{title:"ä½¿ç¨ Nexus3.x æ­å»ºç§æ",date:"2023-06-25T09:22:36.000Z",permalink:"/maven/2302/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/2300.maven/2302.%E4%BD%BF%E7%94%A8%20Nexus3.x%20%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8D.html",relativePath:"00.java/2300.maven/2302.ä½¿ç¨ Nexus3.x æ­å»ºç§æ.md",key:"v-5783fd5e",path:"/maven/2302/",lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:null,content:'ä¸è½½å°å https://help.sonatype.com/repomanager3/product-information/downloadï¼ä¸è½½å¥½åè¿è¡è§£åç¼©ä¼å¾å°ä¸¤ä¸ªæä»¶ï¼nexus-3.39.0-01 å sonatype-workãå¯ä»¥éç½® nexus åéå°æä»¬çç¯å¢ä¸­æ¹ä¾¿å¯å¨ï¼ä¹å¯ä»¥ä¸éç½®æ¯æ¬¡é½å° nexus-3.39.0-01/bin ä¸å»å¯å¨ã\n\nNEXUS_HOME: /opt/software/nexus3/nexus-3.39.0-01/\nPATH: %NEXUS_HOME%/bin\n\n\n1\n2\n\n\nnexus é»è®¤ä½¿ç¨çæ¯ 8081 ç«¯å£ï¼å¾å¤å¾®æå¡çç«¯å£é½ä¼ä» 8080 ç­å¼å§ä½¿ç¨ï¼å¯ä»¥ä¿®æ¹ nexus çç«¯å£ï¼å·ä½ä½ç½®æä»¶ä¸º /opt/software/nexus3/nexus-3.39.0-01/etc/nexus-default.properties\n\nå¯å¨ nexus å½ä»¤\n\n./nexus {start|stop|run|run-redirect|status|restart|force-reload}\n\n# æç¤ºä¿¡æ¯\nWARNING: ************************************************************\nWARNING: Detected execution as "root" user.  This is NOT recommended!\nWARNING: ************************************************************\n\n# è¿ä¸ªä¿¡æ¯éè¦ä¿®æ¹ /opt/software/nexus3/nexus-3.39.0-01/bin/nexus æä»¶ï¼æ¾å° run_as_root=trueï¼æ¹ä¸ºå¦ä¸\nrun_as_root=false\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nå¯å¨æååå°±å¯ä»¥ç»å½ nexus ææä¾çå®¢æ·ç«¯çé¢ï¼ç»å½çæ¶åä¼é®ä½ è¦è´¦å·å¯ç ï¼è´¦å·é»è®¤æ¯ adminï¼å¯ç å¨ /opt/software/nexus3/sonatype-work/nexus3/admin.password æä»¶ä¸­ï¼ç»å½æååä¼è¦æ±æ´æ¹å¯ç ï¼å¯ç æ´æ¹å admin.password ä¼èªå¨å é¤ãä¿®æ¹ä¼ä¼è®©ä½ éæ©ä¸¥æ ¼æ¨¡å¼ï¼å»ºè®®åè®¸ææäººè®¿é®ï¼æ¯ç«æ¯ç§ææ²¡å¤ªå¤§å¿è¦ä¸¥æ ¼ã\n\n\n\n\n\n\n\nç¹å»è®¾ç½®ãç¹å»ä»åºï¼æä»¬å¯ä»¥çå°ä»åºç®¡çéç½®åè¡¨ï¼å¶ä¸­è· Maven ç¸å³çæ 4 ä¸ªï¼Maven ç¸å¯¹æ 3 ä¸ª Type\n\n * proxyï¼è¡¨ç¤ºä¸ºä»£çä»åºï¼ä¸è½½ç»ä»¶æ¶ï¼å¦æä»£çä»åºæç´¢ä¸å°ï¼åæè¯·æ±è½¬åå°è¿ç¨ä»åºï¼é»è®¤ https://repo1.maven.org/maven2/ï¼è¯¥å°åå¯ä»¥ä¿®æ¹ï¼ï¼å¹¶ä»è¿ç¨ä»åºä¸è½½ï¼ç¶åå°è¯¥ç»ä»¶ç¼å­å°ä»£çåºï¼å½åæ¬¡è¯·æ±è¯¥ç»ä»¶æ¶ï¼åç´æ¥å°ä»£çä»åºä¸è½½ï¼ä¸ä¼åä»è¿ç¨ä»åºä¸è½½ã\n * hosted\n   è¡¨ç¤ºå®¿ä¸»ä»åºï¼ä¸»è¦ç¨æ¥é¨ç½²å¢éåé¨ç»ä»¶ï¼å¶ä¸­ maven-releases ç¨æ¥é¨ç½²å¢éåé¨çåå¸çç»ä»¶ï¼maven-snapshots ç¨æ¥é¨ç½²å¢éåé¨çå¿«ç§çç»ä»¶ã\n * group\n   è¡¨ç¤ºåç»ä»åºï¼é»è®¤å° maven-centralãmaven-releasesãmaven-snapshots ä¸ä¸ªä»åºç»åå¨ä¸èµ·å¯¹å¤æä¾æå¡ï¼ç®åäº maven å®¢æ·ç«¯å¨ setting.xml æ pom.xml çéç½®\n\nä¿®æ¹ maven-central ç proxy å°åï¼ä½ å¯ä»¥å¨åè¡¨ä¸­ç¹å» maven-centralï¼å°±ä¼è¿å° maven-central çç¼è¾é¡µï¼ç¶åå¨ Remote storage ä¿®æ¹ä¸ºé¿éäºçä»åºç¹å»ä¿å­å³å¯ã\n\nhttps://maven.aliyun.com/nexus/content/groups/public/\n\n\n1\n\n\n\n\nmaven æ³ä½¿ç¨æä»¬èªå·±æ­å»ºç nexusï¼åªéè¦å¨ maven-3.8.4\\conf\\settings.xml æä»¶ä¿®æ¹éåå°åå³å¯\n\n  <mirrors>\n\t\x3c!-- é¿éäº --\x3e\n\t\x3c!--\n    <mirror>\n      <id>alimaven</id>\n      <name>aliyun maven</name>\n      <url>https://maven.aliyun.com/nexus/content/groups/public/</url>\n      <mirrorOf>central</mirrorOf>\n    </mirror>\n\t--\x3e\n    <mirror>\n      <id>nexus</id>\n      <mirrorOf>*</mirrorOf>\n      <url>http://10.240.30.93:9527/repository/maven-public/</url>\n    </mirror>\n  </mirrors>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n> æç§ä»¥ä¸çæä½ï¼æä»¬åªæ°å¯å¨ä¸ä¸ªé¡¹ç®ï¼å¹¶å¨é¡¹ç®ä¸­æå®è¯¥ mavenï¼æ­¤æ¶æä»¬ä¸è½½ç jar å°±ä¼ç¼å­å° nexus éï¼å½å¶ä»åäºä½¿ç¨è¯¥é¡¹ç®å°±ä¼åç°è¯¥é¡¹ç®çä¾èµä¸è½½ä¸ºæä»¬ nexus çé¨ç½²å°åã\n\nä½æ¯è¿è¿ä¸å¤ï¼å¨å®éå¼åä¸­ï¼é¤äºæä»¬æ¬èº«ä½¿ç¨çç¬¬ä¸æ¹ä¾èµå¤ï¼æä»¬èªå·±ä¹ä¼åä¸äºä¾èµåæå·¥å·åç­ï¼æ­¤æ¶è¥æ³è®©å¶ä»åäºå¯ä»¥ä¸è½½å¹¶ä¾èµä½¿ç¨ï¼æä»¬å°±éè¦ææä»¬å¶ä½ç jar åå¸å° nexus éå»ãæä»¬åè¦å¨æä»¬ç maven ç settings.xml ä¸­éç½®å¨ nexus çè´¦å·å¯ç \n\n  <servers>\n    <server>\n      \x3c!-- æ³¨æid  nexus--\x3e\n      <id>nexus</id>\n      <username>admin</username>\n      <password>admin</password>\n    </server>\t\n  </servers>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nä¹åæä»¬åªéè¦åå»ºæä»¬ç jar å¹¶æ·»å ä¸äºéç½®å³å¯ï¼ç¸åºéç½®å¨ä»£ç ä¸­æè¯´æ\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>org.example</groupId>\n    <artifactId>demoJar</artifactId>\n    \x3c!-- åç¼ SNAPSHOT å°±ä¼æ jar åå¸å° nexus repositoryç maven-snapshots --\x3e\n    <version>1.0-SNAPSHOT</version>\n\n    <properties>\n        <maven.compiler.source>8</maven.compiler.source>\n        <maven.compiler.target>8</maven.compiler.target>\n    </properties>\n\n    \x3c!-- éç½® nexus --\x3e\n    <distributionManagement>\n        <repository>\n            \x3c!-- è¿éçidéçº¦ setting.xml éç½®çidç¸å --\x3e\n            <id>nexus</id>\n            \x3c!-- éç½®åå¸ççåç§°ä¸è·¯å¾ --\x3e\n            <name>Nexus Release Repository</name>\n            <url>>http://10.240.30.93:9527/repository/maven-releases/</url>\n        </repository>\n        <snapshotRepository>\n            <id>nexus</id>\n            <name>Nexus Snapshot Repository</name>\n            <url>http://10.240.30.93:9527/repository/maven-snapshots/</url>\n        </snapshotRepository>\n    </distributionManagement>\n\n</project>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n\n\néç½®å®æåï¼åå¥½çä½ çå·¥å·ç±»ï¼ç¶åå¯¹å¶è¿è¡ maven åçåå¸\n\n\n\n\n\n\n\nç¶åè®©ä½ çåäºè¿è¡ä¾èµå¼å¥ï¼å°±å¯ä»¥è°ç¨ä½ çæ¹æ³äºã\n\n        <dependency>\n            <groupId>org.example</groupId>\n            <artifactId>demoJar</artifactId>\n            <version>1.0-SNAPSHOT</version>\n        </dependency>\n\n\n1\n2\n3\n4\n5\n\n\n> ç¸åçæ¬ç jar é»è®¤æ¯ä¸è½éå¤åå¸å° nexus ä¸­çï¼å¯ä»¥ä¿®æ¹ä½ è¦åå¸å°åçéç½®ï¼æ¹ä¸º Allow redeploy\n\n\n\n> å¦æåç°èªå·±ä¸ä¼ çåï¼ç¡®å®æ è¯¯åæ æ³ä¸è½½ä¾èµï¼ä¸ç®¡æ¯èªå·±è¿æ¯å«äººï¼é£ä¹å¯è½åå æ¯ Maven åç½®çæä»¶è¿ç¨ä»åºéç½®ï¼å³é­äºå¯¹ SNAPSHOT çæ¯æï¼é²æ­¢ä¸ç¨³å®çæå»ºãæä»¥è§£å³åæ³æå³é®çæ¯ï¼å¨ maven ç conf ç®å½ä¸ç setting.xml æä»¶ä¸­ï¼æ·»å  å¯¹ SNAPSHOT çæ¯æ\n\n<snapshots>\nãã<enabled>true</enabled>\n</snapshots>\n\n\n1\n2\n3\n\n\nå¨ä½  maven setting.xml éå ï¼æè pom.xml éå é½è¡\n\n    <profiles>\n        <profile>\n            <id>central-repo</id>\n            <repositories>\n                <repository>\n                    <id>central</id>\n                    <name>Central-repo</name>\n                    <url>http://******/central</url>\n                    <releases>\n                        <enabled>true</enabled>\n                    </releases>\n                    <snapshots>\n                        <enabled>true</enabled>\n                    </snapshots>\n                </repository>\n            </repositories>\n        </profile>\n    </profiles>\n \n    <activeProfiles>\n        <activeProfile>central-repo</activeProfile>\n    </activeProfiles>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\nå¦æéè¦æ·»å ä¸¤ä¸ªå¯ä»¥æ¯\n\n    <profile>\n        <repositories>\n            <repository>\n                <releases>\n                    <enabled>true</enabled>\n                </releases>\n                <snapshots>\n                    <enabled>false</enabled>\n                </snapshots>\n                <id>releases</id>\n                <name>release</name>\n                <url>http://***********/maven-releases/</url>\n            </repository>\n            <repository>\n                <releases>\n                    <enabled>false</enabled>\n                </releases>\n                <snapshots>\n                    <enabled>true</enabled>\n                </snapshots>\n                <id>snapshots</id>\n                <name>libs-snapshot</name>\n                <url>http://***************/maven-snapshots/</url>\n            </repository>\n        </repositories>\n        <id>artifactory</id>\n    </profile>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n',normalizedContent:'ä¸è½½å°å https://help.sonatype.com/repomanager3/product-information/downloadï¼ä¸è½½å¥½åè¿è¡è§£åç¼©ä¼å¾å°ä¸¤ä¸ªæä»¶ï¼nexus-3.39.0-01 å sonatype-workãå¯ä»¥éç½® nexus åéå°æä»¬çç¯å¢ä¸­æ¹ä¾¿å¯å¨ï¼ä¹å¯ä»¥ä¸éç½®æ¯æ¬¡é½å° nexus-3.39.0-01/bin ä¸å»å¯å¨ã\n\nnexus_home: /opt/software/nexus3/nexus-3.39.0-01/\npath: %nexus_home%/bin\n\n\n1\n2\n\n\nnexus é»è®¤ä½¿ç¨çæ¯ 8081 ç«¯å£ï¼å¾å¤å¾®æå¡çç«¯å£é½ä¼ä» 8080 ç­å¼å§ä½¿ç¨ï¼å¯ä»¥ä¿®æ¹ nexus çç«¯å£ï¼å·ä½ä½ç½®æä»¶ä¸º /opt/software/nexus3/nexus-3.39.0-01/etc/nexus-default.properties\n\nå¯å¨ nexus å½ä»¤\n\n./nexus {start|stop|run|run-redirect|status|restart|force-reload}\n\n# æç¤ºä¿¡æ¯\nwarning: ************************************************************\nwarning: detected execution as "root" user.  this is not recommended!\nwarning: ************************************************************\n\n# è¿ä¸ªä¿¡æ¯éè¦ä¿®æ¹ /opt/software/nexus3/nexus-3.39.0-01/bin/nexus æä»¶ï¼æ¾å° run_as_root=trueï¼æ¹ä¸ºå¦ä¸\nrun_as_root=false\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nå¯å¨æååå°±å¯ä»¥ç»å½ nexus ææä¾çå®¢æ·ç«¯çé¢ï¼ç»å½çæ¶åä¼é®ä½ è¦è´¦å·å¯ç ï¼è´¦å·é»è®¤æ¯ adminï¼å¯ç å¨ /opt/software/nexus3/sonatype-work/nexus3/admin.password æä»¶ä¸­ï¼ç»å½æååä¼è¦æ±æ´æ¹å¯ç ï¼å¯ç æ´æ¹å admin.password ä¼èªå¨å é¤ãä¿®æ¹ä¼ä¼è®©ä½ éæ©ä¸¥æ ¼æ¨¡å¼ï¼å»ºè®®åè®¸ææäººè®¿é®ï¼æ¯ç«æ¯ç§ææ²¡å¤ªå¤§å¿è¦ä¸¥æ ¼ã\n\n\n\n\n\n\n\nç¹å»è®¾ç½®ãç¹å»ä»åºï¼æä»¬å¯ä»¥çå°ä»åºç®¡çéç½®åè¡¨ï¼å¶ä¸­è· maven ç¸å³çæ 4 ä¸ªï¼maven ç¸å¯¹æ 3 ä¸ª type\n\n * proxyï¼è¡¨ç¤ºä¸ºä»£çä»åºï¼ä¸è½½ç»ä»¶æ¶ï¼å¦æä»£çä»åºæç´¢ä¸å°ï¼åæè¯·æ±è½¬åå°è¿ç¨ä»åºï¼é»è®¤ https://repo1.maven.org/maven2/ï¼è¯¥å°åå¯ä»¥ä¿®æ¹ï¼ï¼å¹¶ä»è¿ç¨ä»åºä¸è½½ï¼ç¶åå°è¯¥ç»ä»¶ç¼å­å°ä»£çåºï¼å½åæ¬¡è¯·æ±è¯¥ç»ä»¶æ¶ï¼åç´æ¥å°ä»£çä»åºä¸è½½ï¼ä¸ä¼åä»è¿ç¨ä»åºä¸è½½ã\n * hosted\n   è¡¨ç¤ºå®¿ä¸»ä»åºï¼ä¸»è¦ç¨æ¥é¨ç½²å¢éåé¨ç»ä»¶ï¼å¶ä¸­ maven-releases ç¨æ¥é¨ç½²å¢éåé¨çåå¸çç»ä»¶ï¼maven-snapshots ç¨æ¥é¨ç½²å¢éåé¨çå¿«ç§çç»ä»¶ã\n * group\n   è¡¨ç¤ºåç»ä»åºï¼é»è®¤å° maven-centralãmaven-releasesãmaven-snapshots ä¸ä¸ªä»åºç»åå¨ä¸èµ·å¯¹å¤æä¾æå¡ï¼ç®åäº maven å®¢æ·ç«¯å¨ setting.xml æ pom.xml çéç½®\n\nä¿®æ¹ maven-central ç proxy å°åï¼ä½ å¯ä»¥å¨åè¡¨ä¸­ç¹å» maven-centralï¼å°±ä¼è¿å° maven-central çç¼è¾é¡µï¼ç¶åå¨ remote storage ä¿®æ¹ä¸ºé¿éäºçä»åºç¹å»ä¿å­å³å¯ã\n\nhttps://maven.aliyun.com/nexus/content/groups/public/\n\n\n1\n\n\n\n\nmaven æ³ä½¿ç¨æä»¬èªå·±æ­å»ºç nexusï¼åªéè¦å¨ maven-3.8.4\\conf\\settings.xml æä»¶ä¿®æ¹éåå°åå³å¯\n\n  <mirrors>\n\t\x3c!-- é¿éäº --\x3e\n\t\x3c!--\n    <mirror>\n      <id>alimaven</id>\n      <name>aliyun maven</name>\n      <url>https://maven.aliyun.com/nexus/content/groups/public/</url>\n      <mirrorof>central</mirrorof>\n    </mirror>\n\t--\x3e\n    <mirror>\n      <id>nexus</id>\n      <mirrorof>*</mirrorof>\n      <url>http://10.240.30.93:9527/repository/maven-public/</url>\n    </mirror>\n  </mirrors>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n> æç§ä»¥ä¸çæä½ï¼æä»¬åªæ°å¯å¨ä¸ä¸ªé¡¹ç®ï¼å¹¶å¨é¡¹ç®ä¸­æå®è¯¥ mavenï¼æ­¤æ¶æä»¬ä¸è½½ç jar å°±ä¼ç¼å­å° nexus éï¼å½å¶ä»åäºä½¿ç¨è¯¥é¡¹ç®å°±ä¼åç°è¯¥é¡¹ç®çä¾èµä¸è½½ä¸ºæä»¬ nexus çé¨ç½²å°åã\n\nä½æ¯è¿è¿ä¸å¤ï¼å¨å®éå¼åä¸­ï¼é¤äºæä»¬æ¬èº«ä½¿ç¨çç¬¬ä¸æ¹ä¾èµå¤ï¼æä»¬èªå·±ä¹ä¼åä¸äºä¾èµåæå·¥å·åç­ï¼æ­¤æ¶è¥æ³è®©å¶ä»åäºå¯ä»¥ä¸è½½å¹¶ä¾èµä½¿ç¨ï¼æä»¬å°±éè¦ææä»¬å¶ä½ç jar åå¸å° nexus éå»ãæä»¬åè¦å¨æä»¬ç maven ç settings.xml ä¸­éç½®å¨ nexus çè´¦å·å¯ç \n\n  <servers>\n    <server>\n      \x3c!-- æ³¨æid  nexus--\x3e\n      <id>nexus</id>\n      <username>admin</username>\n      <password>admin</password>\n    </server>\t\n  </servers>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nä¹åæä»¬åªéè¦åå»ºæä»¬ç jar å¹¶æ·»å ä¸äºéç½®å³å¯ï¼ç¸åºéç½®å¨ä»£ç ä¸­æè¯´æ\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n         xsi:schemalocation="http://maven.apache.org/pom/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelversion>4.0.0</modelversion>\n\n    <groupid>org.example</groupid>\n    <artifactid>demojar</artifactid>\n    \x3c!-- åç¼ snapshot å°±ä¼æ jar åå¸å° nexus repositoryç maven-snapshots --\x3e\n    <version>1.0-snapshot</version>\n\n    <properties>\n        <maven.compiler.source>8</maven.compiler.source>\n        <maven.compiler.target>8</maven.compiler.target>\n    </properties>\n\n    \x3c!-- éç½® nexus --\x3e\n    <distributionmanagement>\n        <repository>\n            \x3c!-- è¿éçidéçº¦ setting.xml éç½®çidç¸å --\x3e\n            <id>nexus</id>\n            \x3c!-- éç½®åå¸ççåç§°ä¸è·¯å¾ --\x3e\n            <name>nexus release repository</name>\n            <url>>http://10.240.30.93:9527/repository/maven-releases/</url>\n        </repository>\n        <snapshotrepository>\n            <id>nexus</id>\n            <name>nexus snapshot repository</name>\n            <url>http://10.240.30.93:9527/repository/maven-snapshots/</url>\n        </snapshotrepository>\n    </distributionmanagement>\n\n</project>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n\n\néç½®å®æåï¼åå¥½çä½ çå·¥å·ç±»ï¼ç¶åå¯¹å¶è¿è¡ maven åçåå¸\n\n\n\n\n\n\n\nç¶åè®©ä½ çåäºè¿è¡ä¾èµå¼å¥ï¼å°±å¯ä»¥è°ç¨ä½ çæ¹æ³äºã\n\n        <dependency>\n            <groupid>org.example</groupid>\n            <artifactid>demojar</artifactid>\n            <version>1.0-snapshot</version>\n        </dependency>\n\n\n1\n2\n3\n4\n5\n\n\n> ç¸åçæ¬ç jar é»è®¤æ¯ä¸è½éå¤åå¸å° nexus ä¸­çï¼å¯ä»¥ä¿®æ¹ä½ è¦åå¸å°åçéç½®ï¼æ¹ä¸º allow redeploy\n\n\n\n> å¦æåç°èªå·±ä¸ä¼ çåï¼ç¡®å®æ è¯¯åæ æ³ä¸è½½ä¾èµï¼ä¸ç®¡æ¯èªå·±è¿æ¯å«äººï¼é£ä¹å¯è½åå æ¯ maven åç½®çæä»¶è¿ç¨ä»åºéç½®ï¼å³é­äºå¯¹ snapshot çæ¯æï¼é²æ­¢ä¸ç¨³å®çæå»ºãæä»¥è§£å³åæ³æå³é®çæ¯ï¼å¨ maven ç conf ç®å½ä¸ç setting.xml æä»¶ä¸­ï¼æ·»å  å¯¹ snapshot çæ¯æ\n\n<snapshots>\nãã<enabled>true</enabled>\n</snapshots>\n\n\n1\n2\n3\n\n\nå¨ä½  maven setting.xml éå ï¼æè pom.xml éå é½è¡\n\n    <profiles>\n        <profile>\n            <id>central-repo</id>\n            <repositories>\n                <repository>\n                    <id>central</id>\n                    <name>central-repo</name>\n                    <url>http://******/central</url>\n                    <releases>\n                        <enabled>true</enabled>\n                    </releases>\n                    <snapshots>\n                        <enabled>true</enabled>\n                    </snapshots>\n                </repository>\n            </repositories>\n        </profile>\n    </profiles>\n \n    <activeprofiles>\n        <activeprofile>central-repo</activeprofile>\n    </activeprofiles>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\nå¦æéè¦æ·»å ä¸¤ä¸ªå¯ä»¥æ¯\n\n    <profile>\n        <repositories>\n            <repository>\n                <releases>\n                    <enabled>true</enabled>\n                </releases>\n                <snapshots>\n                    <enabled>false</enabled>\n                </snapshots>\n                <id>releases</id>\n                <name>release</name>\n                <url>http://***********/maven-releases/</url>\n            </repository>\n            <repository>\n                <releases>\n                    <enabled>false</enabled>\n                </releases>\n                <snapshots>\n                    <enabled>true</enabled>\n                </snapshots>\n                <id>snapshots</id>\n                <name>libs-snapshot</name>\n                <url>http://***************/maven-snapshots/</url>\n            </repository>\n        </repositories>\n        <id>artifactory</id>\n    </profile>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n',charsets:{cjk:!0}},{title:"æ ¸å¿åè½æè§£ å·¥ä½æµç¨",frontmatter:{title:"æ ¸å¿åè½æè§£ å·¥ä½æµç¨",date:"2023-06-25T09:22:36.000Z",permalink:"/mybatis/300/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/30.Mybatis/300.%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8B%86%E8%A7%A3%20%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.html",relativePath:"00.java/30.Mybatis/300.æ ¸å¿åè½æè§£ å·¥ä½æµç¨.md",key:"v-18fc13e0",path:"/mybatis/300/",headers:[{level:2,title:"è§£æ",slug:"è§£æ",normalizedTitle:"è§£æ",charIndex:296},{level:3,title:"å è½½&è§£æXML",slug:"å è½½-è§£æxml",normalizedTitle:"å è½½ &amp; è§£æ xml",charIndex:null},{level:4,title:"Configuration åå§åéç½®",slug:"configuration-åå§åéç½®",normalizedTitle:"configuration åå§åéç½®",charIndex:2010},{level:4,title:"environments ç¯å¢è§£æ",slug:"environments-ç¯å¢è§£æ",normalizedTitle:"environments ç¯å¢è§£æ",charIndex:3821},{level:4,title:"mapper è§£æ",slug:"mapper-è§£æ",normalizedTitle:"mapper è§£æ",charIndex:4351},{level:4,title:"plugins æä»¶è§£æ",slug:"plugins-æä»¶è§£æ",normalizedTitle:"plugins æä»¶è§£æ",charIndex:6323},{level:4,title:"settings è®¾ç½®è§£æ",slug:"settings-è®¾ç½®è§£æ",normalizedTitle:"settings è®¾ç½®è§£æ",charIndex:6339},{level:2,title:"åå¤",slug:"åå¤",normalizedTitle:"åå¤",charIndex:299},{level:2,title:"æ§è¡",slug:"æ§è¡",normalizedTitle:"æ§è¡",charIndex:302}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"è§£æ å è½½&è§£æXML Configuration åå§åéç½® environments ç¯å¢è§£æ mapper è§£æ plugins æä»¶è§£æ settings è®¾ç½®è§£æ åå¤ æ§è¡",content:'MyBatis æ¯ä¸ä¸ª Java ç ORM æ¡æ¶ï¼å®ä½¿ç¨ XML ææ³¨è§£æ¥éç½®åæ å° SQL è¯­å¥ï¼åæ¶æä¾äºå¢å æ¹æ¥ç­å¸¸ç¨æä½ç APIãMybatis è¿æä¾äºè®¸å¤é«çº§æ å°åæ¥è¯¢åè½ï¼ä¾å¦å»¶è¿å è½½ãç¼å­åæ¹éæä½ï¼è¿ä½¿å¾å¼åäººåå¯ä»¥è½»æ¾å°ç¼ååºé«æ§è½ãå¯ç»´æ¤çæ°æ®è®¿é®å±ã\n\nå³äº MyBatis æä»¬ä¸»è¦è¦äºè§£ä»çå·¥ä½æµç¨ï¼ç¹æ§ï¼åé¨åéè¦çç¥è¯ç¹ï¼å°±å Springï¼æä»¬ä¸»è¦æ¯äºè§£ä»ççå½å¨æï¼å¯æ©å±é¡¹ç­ï¼æè°çå½å¨æï¼ä¹æ¯ Spring çå·¥ä½æµç¨ã\n\nä»¥ä¸æ¯æ´ä¸ª MyBatis çå·¥ä½æµç¨å¾ï¼å¯¹åºå¾ä¸­ä¼è®²è§£æ¯ä¸ªèç¹éè¦çç¥è¯ç¹ãè¿éè¦è®°ä½ MyBatis ä¸»è¦çå·¥ä½æ¨¡å¼å°±æ¯è§£æãåå¤åæ§è¡ï¼æè°è§£æå°±æ¯å¾å° XML çä¿¡æ¯ï¼ç»´æ¤å°ä¸ä¸ªå« Configuration çéç½®ç±»ä¸­ï¼åå¤å°±æ¯ opensession é¨åï¼ä»ä¼å¾å° Configuration ä¸­çä¿¡æ¯ï¼æ ¹æ®æ§è¡é¨åæä½¿ç¨çæ§è¡å¨ï¼æ°æ®æºï¼äºå¡ç­è¿è¡å®ä¾ååå³ç³»æ å°ï¼ä½¿ç¨å°±æ¯å½æä»¬å»è¿è¡æ¥è¯¢ææ°å¢ç­æä½ï¼ä»èµæºåä¿¡æ¯ä¸­æ¿åå·²è¢«ç¼å­çå¯¹è±¡ææ§è¡å¨ç­ï¼æ§è¡å¯¹åºçæ¹æ³ã\n\n\n# è§£æ\n\nè§£æé¨åå¯¹åºå¾ä¸­ å è½½&è§£æXML è³ XMLConfigBuilder#mapperElement è¿éï¼å¯ä»¥è¯´æ¯è¯»å XML å°ç»´æ¤åç±»å¯¹è±¡å³ç³»åä¿¡æ¯çæ ¸å¿ãä¸é¢æä»¬åè§£è®²è§£æ¯ä¸ªæ­¥éª¤é½åäºåªäºäºæä»¥åæ ¸å¿é¨åè§£æå¾å°äºä»ä¹ã\n\n\n# å è½½ & è§£æ XML\n\nè¿é¨åä¸»è¦æ¯è¯»å mybatis-config-datasource.xml æä»¶ï¼è¯¥æä»¶ä¸»è¦ç»´æ¤äºä¸äºå¬å±èµæºä¿¡æ¯ï¼åæ¬ç¯å¢ä¿¡æ¯ï¼æ°æ®åºè¿æ¥ä¿¡æ¯ï¼ï¼å¯¹åºç mapper æä»¶ä¿¡æ¯ï¼è®¾ç½®ä¿¡æ¯ç­ã\n\n<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"\n        "http://mybatis.org/dtd/mybatis-3-config.dtd">\n<configuration>\n    \x3c!-- è®¾ç½®ä¿¡æ¯ --\x3e\n    <settings>\n        \x3c!-- å¨å±ç¼å­ï¼true/false ç®¡çä¸çº§ç¼å­åäºçº§ç¼å­çæ¯å¦ä½¿ç¨ --\x3e\n        <setting name="cacheEnabled" value="true"/>\n        \x3c!--ç¼å­çº§å«ï¼SESSION/STATEMENT--\x3e\n        <setting name="localCacheScope" value="STATEMENT"/>\n    </settings>\n    \x3c!-- ç¯å¢ä¿¡æ¯ --\x3e\n    <environments default="development">\n        <environment id="development">\n            <transactionManager type="JDBC"/>\n            <dataSource type="POOLED">\n                <property name="driver" value="com.mysql.jdbc.Driver"/>\n                <property name="url" value="jdbc:mysql://10.240.30.93:3306/test?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false"/>\n                <property name="username" value="root"/>\n                <property name="password" value="Dev@root2021"/>\n            </dataSource>\n        </environment>\n    </environments>\n    \x3c!-- ç»´æ¤ææmapper --\x3e\n    <mappers>\n        \x3c!-- XML éç½® --\x3e\n        <mapper resource="mapper/Activity_Mapper.xml"/>\n    </mappers>\n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\nè¯»åå°æä»¶åè°ç¨ XMLConfigBuilder#parse è¿è¡è§£æï¼è§£æåå®¹å¦ä¸ã\n\n# Configuration åå§åéç½®\n\nå¨æ´ä¸ªæä»¶è§£æä¹åï¼MyBatis ä¼åæä¸äºä¿¡æ¯è¿è¡æååå§åï¼ä¹å°±æ¯ä¸å¾ä¸­ new Configurationï¼ï¼ é¶æ®µï¼è¯¥ç±»æç»ä¼è¢«å¤ä¸ª MyBatis çç±»æå¼ç¨å¹¶è´¯ç©¿æ´ä¸ª MyBatis å·¥ä½æµç¨ï¼ç±äºè¢«å¼ç¨çç±»å¤ªå¤ï¼è¿éå°±ä¸ä¸ä¸åä¸¾ï¼æä»¬åªè¦ç¥éä»è´¯ç©¿æ´ä¸ªæµç¨å³å¯ã\n\n\n\nConfiguration è¢«åå§åæ¶åå«äºå¤§éçä¿¡æ¯ï¼è¿äºä¿¡æ¯å°±æ¯å¨è§£æ xml æä»¶æ¶ç»´æ¤çï¼éä¸è®²è§£ä¸æ¯ä¸ªéç½®çå·ä½ä½ç¨ï¼\n\n * environmentï¼ç¼å­äºç¯å¢ IDï¼å¯è®¾ç½®é»è®¤ç¯å¢ï¼ç¯å¢åæ¬ï¼å¼åç¯å¢ãæµè¯ç¯å¢ç­ï¼ï¼äºå¡å·¥åï¼æ°æ®æºï¼ææ± ææ æ± æå¶ä»è¿æ¥æ± ï¼ç­\n * mapperRegistryï¼æ å°æ³¨åæºï¼ç¼å­æ¯ä¸ªæ¥å£ï¼ æ¥å£å¯¹è±¡Classåä¸ºkey ï¼æå¯¹åºç MapperProxyFactory ï¼æä¾æ·»å æ å°ä»£çç±»åè·åä»£çç±»\n * mappedStatementsï¼ç¼å­ SQL è¯­å¥çæè§£ä¿¡æ¯ãXML ç namespace.æ ç­¾IDåä¸ºï¼keyï¼ ï¼value ä¸º MappedStatementï¼ä¿¡æ¯åæ¬ï¼ mapperè·¯å¾ ï¼ SQLç±»åï¼SELECT|INSERTç­ï¼ ï¼ SQLè¯­å¥ ï¼ æ¡ä»¶ ï¼ è¯¥æ¡è¯­å¥çç¼å­ä¿¡æ¯ ï¼ è¿åç»æå¯¹è±¡ ï¼ æ¯å¦ç¼å­æ å¿ ç­ã\n * resultMapsï¼ç¼å­ resultMap æ ç­¾çæè§£ä¿¡æ¯ãXML ç namespace.resultMapåä¸ºï¼keyï¼ ï¼ç¶åå¯¹åº value å­æ¾ SQLå­æ®µï¼æ å°å¯¹è±¡å­æ®µï¼å­æ®µJAVAæ°æ®ç±»åï¼ç±»åå¯¹åºçæ§è¡å¨ ç­\n * interceptorChainï¼ç¼å­ plugins æ ç­¾çæè§£ä¿¡æ¯ãä¼å¨æ§è¡ newParameterHandlerï¼newResultSetHandlerï¼newStatementHandlerï¼newExecutor è¿è¡æ¦æªã\n * typeAliasRegistryï¼ç¼å­äºæ¯ä¸ª java åºæ¬ç±»åçå°è£ç±»ï¼ä»¥å JdbcTransactionFactoryï¼DruidDataSourceFactoryï¼UnpooledDataSourceFactoryï¼PooledDataSourceFactoryï¼PerpetualCacheï¼FifoCache ç­ Mybatis æä¾çå·²ç¥ç±»ï¼ç¨äºå¿«éè§£æ XML æè¿°çå¼ï¼ä¾¿äºå¿«éå¾å° Class ä¿¡æ¯å¹¶è·åå®ä¾ã\n * typeHandlerRegistryï¼å­æ¾å¯¹åºæ°æ®ç±»åçå¤çç­ç¥ï¼æ¯å¦ JAVA ç±»åï¼å¯¹åº SQL ç±»åçå¤çç­ç¥ï¼æ JAVA ç±»åå¯¹åºçå¤çç­ç¥ãç¨äºè®¾ç½® SQL è¯­å¥åæ°åè·åæ¥è¯¢ç»æçæ°æ®ç±»åè½¬æ¢ç­ç¥ã\n * objectFactoryï¼å¯¹è±¡å·¥åï¼ç¨äºåå»ºå¯¹è±¡å®ä¾ï¼ä½¿ç¨åå°ã\n * objectWrapperFactoryï¼å¯¹è±¡åè£å¨ï¼æ¾çï¼è¢«è§£æå¯¹è±¡çå®ä¾ï¼ä»¥åå¯¹åºç setï¼getï¼æé å¨ï¼ç±»åç­ä¿¡æ¯ã objectFactory ä¸ objectWrapperFactory æ¯ä¸º MetaObject æä¾æ¯æçï¼ä»¥è§£æå¯¹è±¡ä¿¡æ¯è¿è¡ï¼ç¶åè·åå¯¹è±¡æä¸ªç¹å®å±æ§çæ°æ®ï¼ç¼å­æ¯ä¸ºäºå å¿«è·åéåº¦ï¼å¦æå±æ§ä¹æ¯ä¸ä¸ªå¯¹è±¡åä¼éå½ç¼å­ï¼è·åå¼ä¹ä¼éå½è·åã\n * loadedResourcesï¼å­æ¾å·²è¢«å è½½ç mapper.xml æä»¶ï¼ä»¥é²æ­¢éå¤å è½½\n * languageRegistryï¼å­æ¾é»è®¤çè¯­è¨è§£æé©±å¨å¨ï¼æ¯å¦å­æ¾äº XMLLanguageDriver ï¼æä¾å¿«éè·åè¿ä¸ªè§£æå¨ï¼ç¶åæä¾ SQL è§£æã\n * cacheEnabledï¼è§£ææ¯å¦å¯ç¨ç¼å­ï¼è¯¥éç½®å¯¹äºäºçº§ç¼å­çæï¼ä¸æ¬¡ç¼å­æ¯é»è®¤ç¼å­ã\n * localCacheScopeï¼ä¸çº§ç¼å­ï¼ç¼å­ç­ç¥é»è®¤æ¯æ°¸ä¹ç¼å­ï¼ç¼å­æ¹å¼åä¸º SESSION å STATEMENT ï¼ SESSION å¨è¯¥ä¼è¯ä¸­å½ä¸­ç¸å sql è¯­å¥åæ¡ä»¶ï¼è¥å¨è¯¥ SESSION ä¸­åç insert/update/delete/commit/rollback/close åä¼æ¸é¤ç¼å­ï¼ä½æ¯ï¼å¹¶ä¸ä¼å½±åå¶å®ä¼è¯ä¸­çç¼å­ï¼ STATEMENT ï¼åªéå¯¹å½åä¼è¯æ§è¡çè¿ä¸è¯­å¥ææï¼æ§è¡å®æ¯æ¥è¯¢ä¼ç«å³æ¸é¤ç¼å­ã\n * cachesï¼äºçº§ç¼å­ï¼åºäº namespace çç¼å­ï¼å¯æä¾ç¬¬ä¸æ¹å¶ä»æ¹å¼å®ç°ã\n\n# environments ç¯å¢è§£æ\n\nå¨ç¯å¢è§£æè¿ç¨ä¸­ä¼å¾å°ä¸é¢å ä¸ªéè¦çå±æ§ï¼\n\n * IDï¼è¡¨æä½¿ç¨åªä¸ä¸ªç¯å¢åä¸ºä¸»è¦ç¯å¢éç½®ï¼è§£æ XML ä¸­ç <environment > æ ç­¾\n * TransactionFactoryï¼è§£æ XML ä¸­ç <transactionManager> ç type å±æ§ï¼å¦ææ¯ JDBC åå°±æ¯ JdbcTransactionFactory ï¼ä¹å¯ä»¥èªè¡è®¾ç½®ï¼éè¦èªå·±æ³¨åå° typeAliasRegistry ä¸­\n * DataSourceFactoryï¼è§£æ XML ä¸­ <dataSource> ç type å±æ§ï¼å¦ææ¯ POOLED ï¼åå¯¹åº PooledDataSourceFactory ï¼ UNPOOLED å¯¹åº UnpooledDataSourceFactory ï¼ DRUID å¯¹åº DruidDataSourceFactory\n * DataSourceï¼è§£æ XML ä¸­ <property> å¾å°å·ä½çè¿æ¥ä¿¡æ¯ï¼ä» DataSourceFactory ä¸­è·å DataSource\n\nå½ä»¥ä¸çä¿¡æ¯ç»ä»¶å®æ¯åä¼å°è£å° Environment ä¸­ï¼ç¶åæ·»å å° configuration\n\n# mapper è§£æ\n\nå¨ mapper è§£æä¸­æä¸¤ç§ä¸åçè§£æï¼ä¸ä¸ªæ¯æä»¬å¸¸è§ç XML è§£æï¼ä¸ç§æ¯æ³¨è§£ï¼å¦ @selectï¼è¿éåªè®² XML è§£æï¼æå³ @select ç­æ³¨è§£è§£æï¼æ¾å¨åç»­ä¸å¼ä¸ç« ãé£è§£æé¦åä¼è¯»åæå°ææç mapperï¼å¨åå«è§£ææ¯ä¸ª mapper\n\n    <mappers>\n        \x3c!-- XML éç½® --\x3e\n        <mapper resource="mapper/Activity_Mapper.xml"/>\n    </mappers>\n\n\n1\n2\n3\n4\n\n\nä¸ä¸ªå®æ´ç Mapper å¤§è´åå«å¦ä¸ä¿¡æ¯ï¼æä»¥åé¨ä¼æå¤ä¸ªè§£æåå«è§£æï¼å¦ cache è§£æï¼resultMap è§£æï¼select è§£æï¼insert è§£æç­ï¼æä»¬è¿éè¯´ä¸éè¦çè§£æå¯¹è±¡åä½ç¨å³å¯ã\n\n<mapper namespace="cn.bugstack.mybatis.test.dao.IActivityDao">\n    <cache eviction="FIFO" flushInterval="600000" size="512" readOnly="true"/>\n    <resultMap id="activityMap" type="cn.bugstack.mybatis.test.po.Activity">\n        <id column="id" property="id"/>\n        <result column="activity_id" property="activityId"/>\n        <result column="activity_name" property="activityName"/>\n        <result column="activity_desc" property="activityDesc"/>\n        <result column="create_time" property="createTime"/>\n        <result column="update_time" property="updateTime"/>\n    </resultMap>\n    <select id="queryActivityById" parameterType="cn.bugstack.mybatis.test.po.Activity" resultMap="activityMap" flushCache="false" useCache="true">\n        SELECT activity_id, activity_name, activity_desc, create_time, update_time\n        FROM activity\n        <trim prefix="where" prefixOverrides="AND | OR" suffixOverrides="and">\n            <if test="null != activityId">\n                activity_id = #{activityId}\n            </if>\n        </trim>\n    </select>\n</mapper>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n<cache > æ ç­¾éç½®äºäºçº§ç¼å­ï¼å¯¹äºç¼å­ä¹ä¼æåç¬çä¸ç« è®²è§£ï¼è¿éåªè®²è§£æå¾å°çéè¦ç±»åä½ç¨ï¼éè¿æ ç­¾ä¼å°è£ä¸ä¸ª Cache å¯¹è±¡ï¼è¯¥å¯¹è±¡ä»¥ namespace åä¸º cache ç Id ï¼å¹¶æ Cache å¯¹è±¡æ·»å å° configuration ä¸­\n\n<resultMap> æ ç­¾éç½®ä¸ä¸ª <select > æ ç­¾ç resultMap å±æ§è¿åç»æå¯¹è±¡çå³ç³»æ å°ï¼ä»ä¼å¾å°å¯¹è±¡ä»¥åå¾å°æè¿°çå java å±æ§ç±»ååå¯¹åºç TypeHandler ç±»åå¤çå¨ï¼å¨è¿åçæ¶åä½¿ç¨ç±»åå¤çå¨ï¼å¤çæ¥è¯¢è¿åç»æçæ°æ®ç±»åå¯¹åº java çæ å°ã <resultMap> æ ç­¾å¯ä»¥æå¤ä¸ªï¼æä»¥ä¼æ·»å å°éåä¸­ï¼ç¶åç»´æ¤å° configuration ä¸­\n\n<select> or <insert> è¿éæä¸»è¦çé¨åå°±æ¯å¨è§£æå®æåä¼æ namespace.id åä¸º key ï¼æè§£æçä¿¡æ¯ MappedStatement åä¸º value ï¼ç»´æ¤å° configuration ä¸­ï¼ä»¥ä¾¿ Mybatis å¨è¢«ä»£çç±»è°ç¨æ¹æ³çæ¶åå¿«éæ¾å°ï¼è¯¥æ¹æ³å¯¹åºç SQL ä¿¡æ¯ç­\n\n# plugins æä»¶è§£æ\n\n# settings è®¾ç½®è§£æ\n\n\n# åå¤\n\n\n# æ§è¡',normalizedContent:'mybatis æ¯ä¸ä¸ª java ç orm æ¡æ¶ï¼å®ä½¿ç¨ xml ææ³¨è§£æ¥éç½®åæ å° sql è¯­å¥ï¼åæ¶æä¾äºå¢å æ¹æ¥ç­å¸¸ç¨æä½ç apiãmybatis è¿æä¾äºè®¸å¤é«çº§æ å°åæ¥è¯¢åè½ï¼ä¾å¦å»¶è¿å è½½ãç¼å­åæ¹éæä½ï¼è¿ä½¿å¾å¼åäººåå¯ä»¥è½»æ¾å°ç¼ååºé«æ§è½ãå¯ç»´æ¤çæ°æ®è®¿é®å±ã\n\nå³äº mybatis æä»¬ä¸»è¦è¦äºè§£ä»çå·¥ä½æµç¨ï¼ç¹æ§ï¼åé¨åéè¦çç¥è¯ç¹ï¼å°±å springï¼æä»¬ä¸»è¦æ¯äºè§£ä»ççå½å¨æï¼å¯æ©å±é¡¹ç­ï¼æè°çå½å¨æï¼ä¹æ¯ spring çå·¥ä½æµç¨ã\n\nä»¥ä¸æ¯æ´ä¸ª mybatis çå·¥ä½æµç¨å¾ï¼å¯¹åºå¾ä¸­ä¼è®²è§£æ¯ä¸ªèç¹éè¦çç¥è¯ç¹ãè¿éè¦è®°ä½ mybatis ä¸»è¦çå·¥ä½æ¨¡å¼å°±æ¯è§£æãåå¤åæ§è¡ï¼æè°è§£æå°±æ¯å¾å° xml çä¿¡æ¯ï¼ç»´æ¤å°ä¸ä¸ªå« configuration çéç½®ç±»ä¸­ï¼åå¤å°±æ¯ opensession é¨åï¼ä»ä¼å¾å° configuration ä¸­çä¿¡æ¯ï¼æ ¹æ®æ§è¡é¨åæä½¿ç¨çæ§è¡å¨ï¼æ°æ®æºï¼äºå¡ç­è¿è¡å®ä¾ååå³ç³»æ å°ï¼ä½¿ç¨å°±æ¯å½æä»¬å»è¿è¡æ¥è¯¢ææ°å¢ç­æä½ï¼ä»èµæºåä¿¡æ¯ä¸­æ¿åå·²è¢«ç¼å­çå¯¹è±¡ææ§è¡å¨ç­ï¼æ§è¡å¯¹åºçæ¹æ³ã\n\n\n# è§£æ\n\nè§£æé¨åå¯¹åºå¾ä¸­ å è½½&è§£æxml è³ xmlconfigbuilder#mapperelement è¿éï¼å¯ä»¥è¯´æ¯è¯»å xml å°ç»´æ¤åç±»å¯¹è±¡å³ç³»åä¿¡æ¯çæ ¸å¿ãä¸é¢æä»¬åè§£è®²è§£æ¯ä¸ªæ­¥éª¤é½åäºåªäºäºæä»¥åæ ¸å¿é¨åè§£æå¾å°äºä»ä¹ã\n\n\n# å è½½ & è§£æ xml\n\nè¿é¨åä¸»è¦æ¯è¯»å mybatis-config-datasource.xml æä»¶ï¼è¯¥æä»¶ä¸»è¦ç»´æ¤äºä¸äºå¬å±èµæºä¿¡æ¯ï¼åæ¬ç¯å¢ä¿¡æ¯ï¼æ°æ®åºè¿æ¥ä¿¡æ¯ï¼ï¼å¯¹åºç mapper æä»¶ä¿¡æ¯ï¼è®¾ç½®ä¿¡æ¯ç­ã\n\n<?xml version="1.0" encoding="utf-8"?>\n<!doctype configuration public "-//mybatis.org//dtd config 3.0//en"\n        "http://mybatis.org/dtd/mybatis-3-config.dtd">\n<configuration>\n    \x3c!-- è®¾ç½®ä¿¡æ¯ --\x3e\n    <settings>\n        \x3c!-- å¨å±ç¼å­ï¼true/false ç®¡çä¸çº§ç¼å­åäºçº§ç¼å­çæ¯å¦ä½¿ç¨ --\x3e\n        <setting name="cacheenabled" value="true"/>\n        \x3c!--ç¼å­çº§å«ï¼session/statement--\x3e\n        <setting name="localcachescope" value="statement"/>\n    </settings>\n    \x3c!-- ç¯å¢ä¿¡æ¯ --\x3e\n    <environments default="development">\n        <environment id="development">\n            <transactionmanager type="jdbc"/>\n            <datasource type="pooled">\n                <property name="driver" value="com.mysql.jdbc.driver"/>\n                <property name="url" value="jdbc:mysql://10.240.30.93:3306/test?useunicode=true&amp;characterencoding=utf8&amp;usessl=false"/>\n                <property name="username" value="root"/>\n                <property name="password" value="dev@root2021"/>\n            </datasource>\n        </environment>\n    </environments>\n    \x3c!-- ç»´æ¤ææmapper --\x3e\n    <mappers>\n        \x3c!-- xml éç½® --\x3e\n        <mapper resource="mapper/activity_mapper.xml"/>\n    </mappers>\n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\nè¯»åå°æä»¶åè°ç¨ xmlconfigbuilder#parse è¿è¡è§£æï¼è§£æåå®¹å¦ä¸ã\n\n# configuration åå§åéç½®\n\nå¨æ´ä¸ªæä»¶è§£æä¹åï¼mybatis ä¼åæä¸äºä¿¡æ¯è¿è¡æååå§åï¼ä¹å°±æ¯ä¸å¾ä¸­ new configurationï¼ï¼ é¶æ®µï¼è¯¥ç±»æç»ä¼è¢«å¤ä¸ª mybatis çç±»æå¼ç¨å¹¶è´¯ç©¿æ´ä¸ª mybatis å·¥ä½æµç¨ï¼ç±äºè¢«å¼ç¨çç±»å¤ªå¤ï¼è¿éå°±ä¸ä¸ä¸åä¸¾ï¼æä»¬åªè¦ç¥éä»è´¯ç©¿æ´ä¸ªæµç¨å³å¯ã\n\n\n\nconfiguration è¢«åå§åæ¶åå«äºå¤§éçä¿¡æ¯ï¼è¿äºä¿¡æ¯å°±æ¯å¨è§£æ xml æä»¶æ¶ç»´æ¤çï¼éä¸è®²è§£ä¸æ¯ä¸ªéç½®çå·ä½ä½ç¨ï¼\n\n * environmentï¼ç¼å­äºç¯å¢ idï¼å¯è®¾ç½®é»è®¤ç¯å¢ï¼ç¯å¢åæ¬ï¼å¼åç¯å¢ãæµè¯ç¯å¢ç­ï¼ï¼äºå¡å·¥åï¼æ°æ®æºï¼ææ± ææ æ± æå¶ä»è¿æ¥æ± ï¼ç­\n * mapperregistryï¼æ å°æ³¨åæºï¼ç¼å­æ¯ä¸ªæ¥å£ï¼ æ¥å£å¯¹è±¡classåä¸ºkey ï¼æå¯¹åºç mapperproxyfactory ï¼æä¾æ·»å æ å°ä»£çç±»åè·åä»£çç±»\n * mappedstatementsï¼ç¼å­ sql è¯­å¥çæè§£ä¿¡æ¯ãxml ç namespace.æ ç­¾idåä¸ºï¼keyï¼ ï¼value ä¸º mappedstatementï¼ä¿¡æ¯åæ¬ï¼ mapperè·¯å¾ ï¼ sqlç±»åï¼select|insertç­ï¼ ï¼ sqlè¯­å¥ ï¼ æ¡ä»¶ ï¼ è¯¥æ¡è¯­å¥çç¼å­ä¿¡æ¯ ï¼ è¿åç»æå¯¹è±¡ ï¼ æ¯å¦ç¼å­æ å¿ ç­ã\n * resultmapsï¼ç¼å­ resultmap æ ç­¾çæè§£ä¿¡æ¯ãxml ç namespace.resultmapåä¸ºï¼keyï¼ ï¼ç¶åå¯¹åº value å­æ¾ sqlå­æ®µï¼æ å°å¯¹è±¡å­æ®µï¼å­æ®µjavaæ°æ®ç±»åï¼ç±»åå¯¹åºçæ§è¡å¨ ç­\n * interceptorchainï¼ç¼å­ plugins æ ç­¾çæè§£ä¿¡æ¯ãä¼å¨æ§è¡ newparameterhandlerï¼newresultsethandlerï¼newstatementhandlerï¼newexecutor è¿è¡æ¦æªã\n * typealiasregistryï¼ç¼å­äºæ¯ä¸ª java åºæ¬ç±»åçå°è£ç±»ï¼ä»¥å jdbctransactionfactoryï¼druiddatasourcefactoryï¼unpooleddatasourcefactoryï¼pooleddatasourcefactoryï¼perpetualcacheï¼fifocache ç­ mybatis æä¾çå·²ç¥ç±»ï¼ç¨äºå¿«éè§£æ xml æè¿°çå¼ï¼ä¾¿äºå¿«éå¾å° class ä¿¡æ¯å¹¶è·åå®ä¾ã\n * typehandlerregistryï¼å­æ¾å¯¹åºæ°æ®ç±»åçå¤çç­ç¥ï¼æ¯å¦ java ç±»åï¼å¯¹åº sql ç±»åçå¤çç­ç¥ï¼æ java ç±»åå¯¹åºçå¤çç­ç¥ãç¨äºè®¾ç½® sql è¯­å¥åæ°åè·åæ¥è¯¢ç»æçæ°æ®ç±»åè½¬æ¢ç­ç¥ã\n * objectfactoryï¼å¯¹è±¡å·¥åï¼ç¨äºåå»ºå¯¹è±¡å®ä¾ï¼ä½¿ç¨åå°ã\n * objectwrapperfactoryï¼å¯¹è±¡åè£å¨ï¼æ¾çï¼è¢«è§£æå¯¹è±¡çå®ä¾ï¼ä»¥åå¯¹åºç setï¼getï¼æé å¨ï¼ç±»åç­ä¿¡æ¯ã objectfactory ä¸ objectwrapperfactory æ¯ä¸º metaobject æä¾æ¯æçï¼ä»¥è§£æå¯¹è±¡ä¿¡æ¯è¿è¡ï¼ç¶åè·åå¯¹è±¡æä¸ªç¹å®å±æ§çæ°æ®ï¼ç¼å­æ¯ä¸ºäºå å¿«è·åéåº¦ï¼å¦æå±æ§ä¹æ¯ä¸ä¸ªå¯¹è±¡åä¼éå½ç¼å­ï¼è·åå¼ä¹ä¼éå½è·åã\n * loadedresourcesï¼å­æ¾å·²è¢«å è½½ç mapper.xml æä»¶ï¼ä»¥é²æ­¢éå¤å è½½\n * languageregistryï¼å­æ¾é»è®¤çè¯­è¨è§£æé©±å¨å¨ï¼æ¯å¦å­æ¾äº xmllanguagedriver ï¼æä¾å¿«éè·åè¿ä¸ªè§£æå¨ï¼ç¶åæä¾ sql è§£æã\n * cacheenabledï¼è§£ææ¯å¦å¯ç¨ç¼å­ï¼è¯¥éç½®å¯¹äºäºçº§ç¼å­çæï¼ä¸æ¬¡ç¼å­æ¯é»è®¤ç¼å­ã\n * localcachescopeï¼ä¸çº§ç¼å­ï¼ç¼å­ç­ç¥é»è®¤æ¯æ°¸ä¹ç¼å­ï¼ç¼å­æ¹å¼åä¸º session å statement ï¼ session å¨è¯¥ä¼è¯ä¸­å½ä¸­ç¸å sql è¯­å¥åæ¡ä»¶ï¼è¥å¨è¯¥ session ä¸­åç insert/update/delete/commit/rollback/close åä¼æ¸é¤ç¼å­ï¼ä½æ¯ï¼å¹¶ä¸ä¼å½±åå¶å®ä¼è¯ä¸­çç¼å­ï¼ statement ï¼åªéå¯¹å½åä¼è¯æ§è¡çè¿ä¸è¯­å¥ææï¼æ§è¡å®æ¯æ¥è¯¢ä¼ç«å³æ¸é¤ç¼å­ã\n * cachesï¼äºçº§ç¼å­ï¼åºäº namespace çç¼å­ï¼å¯æä¾ç¬¬ä¸æ¹å¶ä»æ¹å¼å®ç°ã\n\n# environments ç¯å¢è§£æ\n\nå¨ç¯å¢è§£æè¿ç¨ä¸­ä¼å¾å°ä¸é¢å ä¸ªéè¦çå±æ§ï¼\n\n * idï¼è¡¨æä½¿ç¨åªä¸ä¸ªç¯å¢åä¸ºä¸»è¦ç¯å¢éç½®ï¼è§£æ xml ä¸­ç <environment > æ ç­¾\n * transactionfactoryï¼è§£æ xml ä¸­ç <transactionmanager> ç type å±æ§ï¼å¦ææ¯ jdbc åå°±æ¯ jdbctransactionfactory ï¼ä¹å¯ä»¥èªè¡è®¾ç½®ï¼éè¦èªå·±æ³¨åå° typealiasregistry ä¸­\n * datasourcefactoryï¼è§£æ xml ä¸­ <datasource> ç type å±æ§ï¼å¦ææ¯ pooled ï¼åå¯¹åº pooleddatasourcefactory ï¼ unpooled å¯¹åº unpooleddatasourcefactory ï¼ druid å¯¹åº druiddatasourcefactory\n * datasourceï¼è§£æ xml ä¸­ <property> å¾å°å·ä½çè¿æ¥ä¿¡æ¯ï¼ä» datasourcefactory ä¸­è·å datasource\n\nå½ä»¥ä¸çä¿¡æ¯ç»ä»¶å®æ¯åä¼å°è£å° environment ä¸­ï¼ç¶åæ·»å å° configuration\n\n# mapper è§£æ\n\nå¨ mapper è§£æä¸­æä¸¤ç§ä¸åçè§£æï¼ä¸ä¸ªæ¯æä»¬å¸¸è§ç xml è§£æï¼ä¸ç§æ¯æ³¨è§£ï¼å¦ @selectï¼è¿éåªè®² xml è§£æï¼æå³ @select ç­æ³¨è§£è§£æï¼æ¾å¨åç»­ä¸å¼ä¸ç« ãé£è§£æé¦åä¼è¯»åæå°ææç mapperï¼å¨åå«è§£ææ¯ä¸ª mapper\n\n    <mappers>\n        \x3c!-- xml éç½® --\x3e\n        <mapper resource="mapper/activity_mapper.xml"/>\n    </mappers>\n\n\n1\n2\n3\n4\n\n\nä¸ä¸ªå®æ´ç mapper å¤§è´åå«å¦ä¸ä¿¡æ¯ï¼æä»¥åé¨ä¼æå¤ä¸ªè§£æåå«è§£æï¼å¦ cache è§£æï¼resultmap è§£æï¼select è§£æï¼insert è§£æç­ï¼æä»¬è¿éè¯´ä¸éè¦çè§£æå¯¹è±¡åä½ç¨å³å¯ã\n\n<mapper namespace="cn.bugstack.mybatis.test.dao.iactivitydao">\n    <cache eviction="fifo" flushinterval="600000" size="512" readonly="true"/>\n    <resultmap id="activitymap" type="cn.bugstack.mybatis.test.po.activity">\n        <id column="id" property="id"/>\n        <result column="activity_id" property="activityid"/>\n        <result column="activity_name" property="activityname"/>\n        <result column="activity_desc" property="activitydesc"/>\n        <result column="create_time" property="createtime"/>\n        <result column="update_time" property="updatetime"/>\n    </resultmap>\n    <select id="queryactivitybyid" parametertype="cn.bugstack.mybatis.test.po.activity" resultmap="activitymap" flushcache="false" usecache="true">\n        select activity_id, activity_name, activity_desc, create_time, update_time\n        from activity\n        <trim prefix="where" prefixoverrides="and | or" suffixoverrides="and">\n            <if test="null != activityid">\n                activity_id = #{activityid}\n            </if>\n        </trim>\n    </select>\n</mapper>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n<cache > æ ç­¾éç½®äºäºçº§ç¼å­ï¼å¯¹äºç¼å­ä¹ä¼æåç¬çä¸ç« è®²è§£ï¼è¿éåªè®²è§£æå¾å°çéè¦ç±»åä½ç¨ï¼éè¿æ ç­¾ä¼å°è£ä¸ä¸ª cache å¯¹è±¡ï¼è¯¥å¯¹è±¡ä»¥ namespace åä¸º cache ç id ï¼å¹¶æ cache å¯¹è±¡æ·»å å° configuration ä¸­\n\n<resultmap> æ ç­¾éç½®ä¸ä¸ª <select > æ ç­¾ç resultmap å±æ§è¿åç»æå¯¹è±¡çå³ç³»æ å°ï¼ä»ä¼å¾å°å¯¹è±¡ä»¥åå¾å°æè¿°çå java å±æ§ç±»ååå¯¹åºç typehandler ç±»åå¤çå¨ï¼å¨è¿åçæ¶åä½¿ç¨ç±»åå¤çå¨ï¼å¤çæ¥è¯¢è¿åç»æçæ°æ®ç±»åå¯¹åº java çæ å°ã <resultmap> æ ç­¾å¯ä»¥æå¤ä¸ªï¼æä»¥ä¼æ·»å å°éåä¸­ï¼ç¶åç»´æ¤å° configuration ä¸­\n\n<select> or <insert> è¿éæä¸»è¦çé¨åå°±æ¯å¨è§£æå®æåä¼æ namespace.id åä¸º key ï¼æè§£æçä¿¡æ¯ mappedstatement åä¸º value ï¼ç»´æ¤å° configuration ä¸­ï¼ä»¥ä¾¿ mybatis å¨è¢«ä»£çç±»è°ç¨æ¹æ³çæ¶åå¿«éæ¾å°ï¼è¯¥æ¹æ³å¯¹åºç sql ä¿¡æ¯ç­\n\n# plugins æä»¶è§£æ\n\n# settings è®¾ç½®è§£æ\n\n\n# åå¤\n\n\n# æ§è¡',charsets:{cjk:!0}},{title:"æ ¸å¿åè½æè§£ Pluginæä»¶åè½å®ç°",frontmatter:{title:"æ ¸å¿åè½æè§£ Pluginæä»¶åè½å®ç°",date:"2023-06-25T09:22:36.000Z",permalink:"/mybatis/301/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/30.Mybatis/301.%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8B%86%E8%A7%A3%20Plugin%E6%8F%92%E4%BB%B6%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0.html",relativePath:"00.java/30.Mybatis/301.æ ¸å¿åè½æè§£ Pluginæä»¶åè½å®ç°.md",key:"v-04bb8b53",path:"/mybatis/301/",headers:[{level:2,title:"è§£æ",slug:"è§£æ",normalizedTitle:"è§£æ",charIndex:38},{level:2,title:"æ³¨å",slug:"æ³¨å",normalizedTitle:"æ³¨å",charIndex:42},{level:2,title:"æ§è¡",slug:"æ§è¡",normalizedTitle:"æ§è¡",charIndex:46},{level:2,title:"èªå®ä¹",slug:"èªå®ä¹",normalizedTitle:"èªå®ä¹",charIndex:5721}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"è§£æ æ³¨å æ§è¡ èªå®ä¹",content:'Mybatis Plugin æ¯éç Mybatis çå·¥ä½æµç¨ä¸èµ·è¢«è¿è¡ è§£æ->æ³¨å->æ§è¡ çï¼äºè§£æ¯ä¸ªæ­¥éª¤æè½æ´å¥½çå¯¹ Mybatis ææä¾ç Plugin æºå¶è¿è¡å®ç°åæ©å±ãå¨æä»¬å·²ç¥ç Mybatis çæä»¶æåé¡µæä»¶ãç¼å­æä»¶ç­ï¼ä¹æä»¥å¯ä»¥è½åå°æ©å±æ¯å ä¸ºä»å¨èªå·±æ¬èº«ç Executorï¼çäº§æ§è¡å¨ï¼ ï¼ StatementHandlerï¼è¯­å¥å¤çå¨ï¼ ï¼ ParameterHandlerï¼åæ°å¤çå¨ï¼ ï¼ ResultSetHandlerï¼ç»æéå¤çå¨ï¼ è¿åä¸ªå°æ¹åäºæ¦æªï¼å½ä»ç»å°æ§è¡æ­¥éª¤çæ¶åå°±å¯ä»¥çå°å·ä½å®ç°ã\n\n\n# è§£æ\n\nå¸¸è§ç XML éç½®\n\n<plugins>\n    <plugin interceptor="cn.mybatis.test.plugin.TestPlugin">\n        <property name="test00" value="100"/>\n        <property name="test01" value="200"/>\n    </plugin>\n</plugins>\n\n\n1\n2\n3\n4\n5\n6\n\n\næ ¸å¿è§£ææ¹æ³\n\nprivate void pluginElement(Element parent) throws Exception {\n    if (parent == null) return;\n    List<Element> elements = parent.elements();\n    for (Element element : elements) {\n        // è§£æç±»è·¯å¾\n        String interceptor = element.attributeValue("interceptor");\n        // åæ°éç½®\n        Properties properties = new Properties();\n        List<Element> propertyElementList = element.elements("property");\n        for (Element property : propertyElementList) {\n            properties.setProperty(property.attributeValue("name"), property.attributeValue("value"));\n        }\n        // è·åæä»¶å®ç°ç±»å¹¶å®ä¾åï¼cn.mybatis.test.plugin.TestPlugin \n        // éè¿ Resources.classForName(string) è·åå®ä¾\n        Interceptor interceptorInstance = (Interceptor) resolveClass(interceptor).newInstance();\n        // è®¾ç½®éç½®å±æ§\n        interceptorInstance.setProperties(properties);\n        // æ³¨åå° configuration ä¸­\n        configuration.addInterceptor(interceptorInstance);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\n\n# æ³¨å\n\nè§£æçæ¶åä¼å¨æ¹æ³åé¨æ§è¡ configuration.addInterceptor(interceptorInstance); è¿ä¸æ­¥æ¯ææä»¶ç»´æ¤å° Configuration å¨å±éç½®ä¸­ï¼ä½æä»¶å¶å®åºè¯¥æå¾å¤åï¼æä»¥æä¾çæ¯ä¸ä¸ª InterceptorChain å¯¹è±¡ç± Configuration ç»´æ¤\n\npublic class Configuration {\n    // æä»¶æ¦æªå¨é¾\n    protected final InterceptorChain interceptorChain = new InterceptorChain();\n    public void addInterceptor(Interceptor interceptorInstance) {\n        interceptorChain.addInterceptor(interceptorInstance);\n    }\n    // other å¶ä»éç½®\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nInterceptorChain éé¢ç»´æ¤çæ¯ä¸ä¸ªéåï¼ä¸é¨å­æ¾ææç Plugin\n\npublic class InterceptorChain {\n    // æä»¶æ¦æªå¨å®¹å¨\n    private final List<Interceptor> interceptors = new ArrayList<>();\n    //\n    public Object pluginAll(Object target) {\n        for (Interceptor interceptor : interceptors) {\n            target = interceptor.plugin(target);\n        }\n        return target;\n    }\n    // æ·»å å°æä»¶å®¹å¨\n    public void addInterceptor(Interceptor interceptor) {\n        interceptors.add(interceptor);\n    }\n    public List<Interceptor> getInterceptors(){\n        return Collections.unmodifiableList(interceptors);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\nä»è§£æå°æ³¨åè¿ä¸¤æ­¥å°±å¯ä»¥çåºï¼MyBatis æ¯ææä»¶ä»¥æ¦æªå¨çå½¢å¼å­æ¾å°ä¸ä¸ªæ¦æªå¨å®¹å¨éï¼è¿ä¸ªå®¹å¨æ¯ Configuration å¨å±éç½®ç±»æ¥è¿è¡ç»´æ¤ç\n\n\n# æ§è¡\n\næ§è¡æ¯å¨è°ç¨å·ä½çæ¥è¯¢æ¹æ³æ´»å¶ä»å¨ Mybatis éææè¿°ç SQL æ¹æ³æ¶è¿è¡çè§¦åï¼è§¦åä¼å¨å¦ä¸ä»£ç ä¸­çä½ç½®ä¸­è§¦åã\n\n  // åå»ºåæ°å¤çå¨\n  public ParameterHandler newParameterHandler(MappedStatement mappedStatement, Object parameterObject, BoundSql boundSql) {\n    ParameterHandler parameterHandler = mappedStatement.getLang().createParameterHandler(mappedStatement, parameterObject, boundSql);\n    parameterHandler = (ParameterHandler) interceptorChain.pluginAll(parameterHandler);\n    return parameterHandler;\n  }\n \n  // åå»ºç»æéå¤çå¨\n  public ResultSetHandler newResultSetHandler(Executor executor, MappedStatement mappedStatement, RowBounds rowBounds, ParameterHandler parameterHandler,\n      ResultHandler resultHandler, BoundSql boundSql) {\n    ResultSetHandler resultSetHandler = new DefaultResultSetHandler(executor, mappedStatement, parameterHandler, resultHandler, boundSql, rowBounds);\n    resultSetHandler = (ResultSetHandler) interceptorChain.pluginAll(resultSetHandler);\n    return resultSetHandler;\n  }\n \n  // åå»ºè¯­å¥å¤çå¨\n  public StatementHandler newStatementHandler(Executor executor, MappedStatement mappedStatement, Object parameterObject, RowBounds rowBounds, ResultHandler resultHandler, BoundSql boundSql) {\n    StatementHandler statementHandler = new RoutingStatementHandler(executor, mappedStatement, parameterObject, rowBounds, resultHandler, boundSql);\n    statementHandler = (StatementHandler) interceptorChain.pluginAll(statementHandler);\n    return statementHandler;\n  }\n\n  // çäº§æ§è¡å¨\n  public Executor newExecutor(Transaction transaction, ExecutorType executorType) {\n    executorType = executorType == null ? defaultExecutorType : executorType;\n    executorType = executorType == null ? ExecutorType.SIMPLE : executorType;\n    Executor executor;\n    if (ExecutorType.BATCH == executorType) {\n      // æ¹éå¤çå¨\n      executor = new BatchExecutor(this, transaction);\n    } else if (ExecutorType.REUSE == executorType) {\n      executor = new ReuseExecutor(this, transaction);\n    } else {\n      // ç®åå¤çå¨\n      executor = new SimpleExecutor(this, transaction);\n    }\n    // äºçº§ç¼å­å¤çå¨\n    if (cacheEnabled) {\n      executor = new CachingExecutor(executor);\n    }\n    executor = (Executor) interceptorChain.pluginAll(executor);\n    return executor;\n  }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n\n\nä¼çå°ä»ä¼è°ç¨ InterceptorChain#pluginAll æ¹æ³ï¼è¯¥ç±»å¨æ³¨åæ­¥éª¤ä¸­ææåå°ï¼éé¢ç»´æ¤äºææçæä»¶ï¼é£ä¹å¨è¿éå°±ä¼æ¶å¾ªç¯ææçæä»¶ï¼æ¯ä¸ªæä»¶è°ç¨ Interceptor#plugin\n\n// å¾ªç¯è°ç¨\npublic Object pluginAll(Object target) {\n    for (Interceptor interceptor : interceptors) {\n        target = interceptor.plugin(target);\n    }\n    return target;\n}\n\n// æ§è¡wrap\npublic interface Interceptor {\n    // æ¦æªï¼ä½¿ç¨æ¹å®ç°\n    Object intercept(Invocation invocation) throws Throwable;\n    // ä»£ç\n    default Object plugin(Object target) {\n        return Plugin.wrap(target, this);\n    }\n    // è®¾ç½®å±æ§\n    default void setProperties(Properties properties) {\n        // NOP\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\nInterceptor#plugin æ¹æ³åé¨ä¹å°±æ¯è°ç¨ Plugin#wrap éææ¹æ³ï¼è¯¥æ¹æ³éè¿è·åèªå®ä¹æä»¶çæ³¨è§£ï¼æ¥è§å¯ä½ éè¦å¯¹åªä¸ªå¤çå¨ï¼åªä¸ªæ¹æ³ä»¥ååæ°ç±»åå»å¹éæ¦æªå¯¹è±¡çå·ä½æ¹æ³ï¼å¦æå¤ä¸ä¸ªåæ°é½å¯è½æ¾ä¸å°è¦æ¦æªçæ¹æ³ãæ¾å°æ¹æ³åç¶åå»å¨æä»£çè¿ä¸ªæ¹æ³ã\n\n// \npublic class Plugin implements InvocationHandler {\n    private Object target;\n    private Interceptor interceptor;\n    private Map<Class<?>, Set<Method>> signatureMap;\n\n    private Plugin(Object target, Interceptor interceptor, Map<Class<?>, Set<Method>> signatureMap) {\n        this.target = target;\n        this.interceptor = interceptor;\n        this.signatureMap = signatureMap;\n    }\n    // å·ä½çä»£çå®ç°\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        // è·åå£°æçæ¹æ³åè¡¨\n        Set<Method> methods = signatureMap.get(method.getDeclaringClass());\n        // è¿æ»¤éè¦æ¦æªçæ¹æ³\n        if (methods != null && methods.contains(method)) {\n            // è°ç¨ Interceptor#intercept æå¥èªå·±çåå°é»è¾\n            return interceptor.intercept(new Invocation(target, method, args));\n        }\n        return method.invoke(target, args);\n    }\n    /**\n     * ç¨ä»£çæèªå®ä¹æä»¶è¡ä¸ºåè£¹å°ç®æ æ¹æ³ä¸­ï¼ä¹å°±æ¯ Plugin.invoke çè¿æ»¤è°ç¨\n     */\n    public static Object wrap(Object target, Interceptor interceptor) {\n        // åå¾ç­¾åMap\n        Map<Class<?>, Set<Method>> signatureMap = getSignatureMap(interceptor);\n        // åå¾è¦æ¹åè¡ä¸ºçç±»(ParameterHandler|ResultSetHandler|StatementHandler|Executor)\n        Class<?> type = target.getClass();\n        // åå¾æ¥å£\n        Class<?>[] interfaces = getAllInterfaces(type, signatureMap);\n        // åå»ºä»£ç(StatementHandler)\n        if (interfaces.length > 0) {\n            // ä»£ç\n            return Proxy.newProxyInstance(\n                    type.getClassLoader(),\n                    interfaces,\n                    new Plugin(target, interceptor, signatureMap));\n        }\n        return target;\n    }\n    /**\n     * è·åæ¹æ³ç­¾åç» Map\n     */\n    private static Map<Class<?>, Set<Method>> getSignatureMap(Interceptor interceptor) {\n        // å Intercepts æ³¨è§£\n        Intercepts interceptsAnnotation = interceptor.getClass().getAnnotation(Intercepts.class);\n        // å¿é¡»å¾æ Intercepts æ³¨è§£ï¼æ²¡ææ¥é\n        if (interceptsAnnotation == null) {\n            throw new RuntimeException("No @Intercepts annotation was found in interceptor " + interceptor.getClass().getName());\n        }\n        // valueæ¯æ°ç»åï¼Signatureçæ°ç»\n        Signature[] sigs = interceptsAnnotation.value();\n        // æ¯ä¸ª class ç±»æå¤ä¸ªå¯è½æå¤ä¸ª Method éè¦è¢«æ¦æª\n        Map<Class<?>, Set<Method>> signatureMap = new HashMap<>();\n        for (Signature sig : sigs) {\n            Set<Method> methods = signatureMap.computeIfAbsent(sig.type(), k -> new HashSet<>());\n            try {\n                // ä¾å¦è·åå°æ¹æ³ï¼StatementHandler.prepare(Connection connection)ãStatementHandler.parameterize(Statement statement)...\n                Method method = sig.type().getMethod(sig.method(), sig.args());\n                methods.add(method);\n            } catch (NoSuchMethodException e) {\n                throw new RuntimeException("Could not find method on " + sig.type() + " named " + sig.method() + ". Cause: " + e, e);\n            }\n        }\n        return signatureMap;\n    }\n    /**\n     * åå¾æ¥å£\n     */\n    private static Class<?>[] getAllInterfaces(Class<?> type, Map<Class<?>, Set<Method>> signatureMap) {\n        Set<Class<?>> interfaces = new HashSet<Class<?>>();\n        while (type != null) {\n            for (Class<?> c : type.getInterfaces()) {\n                // æ¦æª ParameterHandler|ResultSetHandler|StatementHandler|Executor\n                if (signatureMap.containsKey(c)) {\n                    interfaces.add(c);\n                }\n            }\n            type = type.getSuperclass();\n        }\n        return interfaces.toArray(new Class<?>[interfaces.size()]);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n\n\n\n# èªå®ä¹\n\npackage cn.mybatis.test.plugin;\n\nimport cn.mybatis.executor.statement.StatementHandler;\nimport cn.mybatis.mapping.BoundSql;\nimport cn..mybatis.plugin.Interceptor;\nimport cn.mybatis.plugin.Intercepts;\nimport cn.mybatis.plugin.Invocation;\nimport cn.mybatis.plugin.Signature;\n\nimport java.sql.Connection;\nimport java.util.Properties;\n\n@Intercepts({@Signature(type = StatementHandler.class, method = "prepare", args = {Connection.class})})\npublic class TestPlugin implements Interceptor {\n\n    @Override\n    public Object intercept(Invocation invocation) throws Throwable {\n        // è·åStatementHandler\n        StatementHandler statementHandler = (StatementHandler) invocation.getTarget();\n        // è·åSQLä¿¡æ¯\n        BoundSql boundSql = statementHandler.getBoundSql();\n        String sql = boundSql.getSql();\n        // è¾åºSQL\n        System.out.println("æ¦æªSQLï¼" + sql);\n        // æ¾è¡\n        return invocation.proceed();\n    }\n\n    @Override\n    public void setProperties(Properties properties) {\n        System.out.println("åæ°è¾åºï¼" + properties.getProperty("test00"));\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n',normalizedContent:'mybatis plugin æ¯éç mybatis çå·¥ä½æµç¨ä¸èµ·è¢«è¿è¡ è§£æ->æ³¨å->æ§è¡ çï¼äºè§£æ¯ä¸ªæ­¥éª¤æè½æ´å¥½çå¯¹ mybatis ææä¾ç plugin æºå¶è¿è¡å®ç°åæ©å±ãå¨æä»¬å·²ç¥ç mybatis çæä»¶æåé¡µæä»¶ãç¼å­æä»¶ç­ï¼ä¹æä»¥å¯ä»¥è½åå°æ©å±æ¯å ä¸ºä»å¨èªå·±æ¬èº«ç executorï¼çäº§æ§è¡å¨ï¼ ï¼ statementhandlerï¼è¯­å¥å¤çå¨ï¼ ï¼ parameterhandlerï¼åæ°å¤çå¨ï¼ ï¼ resultsethandlerï¼ç»æéå¤çå¨ï¼ è¿åä¸ªå°æ¹åäºæ¦æªï¼å½ä»ç»å°æ§è¡æ­¥éª¤çæ¶åå°±å¯ä»¥çå°å·ä½å®ç°ã\n\n\n# è§£æ\n\nå¸¸è§ç xml éç½®\n\n<plugins>\n    <plugin interceptor="cn.mybatis.test.plugin.testplugin">\n        <property name="test00" value="100"/>\n        <property name="test01" value="200"/>\n    </plugin>\n</plugins>\n\n\n1\n2\n3\n4\n5\n6\n\n\næ ¸å¿è§£ææ¹æ³\n\nprivate void pluginelement(element parent) throws exception {\n    if (parent == null) return;\n    list<element> elements = parent.elements();\n    for (element element : elements) {\n        // è§£æç±»è·¯å¾\n        string interceptor = element.attributevalue("interceptor");\n        // åæ°éç½®\n        properties properties = new properties();\n        list<element> propertyelementlist = element.elements("property");\n        for (element property : propertyelementlist) {\n            properties.setproperty(property.attributevalue("name"), property.attributevalue("value"));\n        }\n        // è·åæä»¶å®ç°ç±»å¹¶å®ä¾åï¼cn.mybatis.test.plugin.testplugin \n        // éè¿ resources.classforname(string) è·åå®ä¾\n        interceptor interceptorinstance = (interceptor) resolveclass(interceptor).newinstance();\n        // è®¾ç½®éç½®å±æ§\n        interceptorinstance.setproperties(properties);\n        // æ³¨åå° configuration ä¸­\n        configuration.addinterceptor(interceptorinstance);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\n\n# æ³¨å\n\nè§£æçæ¶åä¼å¨æ¹æ³åé¨æ§è¡ configuration.addinterceptor(interceptorinstance); è¿ä¸æ­¥æ¯ææä»¶ç»´æ¤å° configuration å¨å±éç½®ä¸­ï¼ä½æä»¶å¶å®åºè¯¥æå¾å¤åï¼æä»¥æä¾çæ¯ä¸ä¸ª interceptorchain å¯¹è±¡ç± configuration ç»´æ¤\n\npublic class configuration {\n    // æä»¶æ¦æªå¨é¾\n    protected final interceptorchain interceptorchain = new interceptorchain();\n    public void addinterceptor(interceptor interceptorinstance) {\n        interceptorchain.addinterceptor(interceptorinstance);\n    }\n    // other å¶ä»éç½®\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\ninterceptorchain éé¢ç»´æ¤çæ¯ä¸ä¸ªéåï¼ä¸é¨å­æ¾ææç plugin\n\npublic class interceptorchain {\n    // æä»¶æ¦æªå¨å®¹å¨\n    private final list<interceptor> interceptors = new arraylist<>();\n    //\n    public object pluginall(object target) {\n        for (interceptor interceptor : interceptors) {\n            target = interceptor.plugin(target);\n        }\n        return target;\n    }\n    // æ·»å å°æä»¶å®¹å¨\n    public void addinterceptor(interceptor interceptor) {\n        interceptors.add(interceptor);\n    }\n    public list<interceptor> getinterceptors(){\n        return collections.unmodifiablelist(interceptors);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\nä»è§£æå°æ³¨åè¿ä¸¤æ­¥å°±å¯ä»¥çåºï¼mybatis æ¯ææä»¶ä»¥æ¦æªå¨çå½¢å¼å­æ¾å°ä¸ä¸ªæ¦æªå¨å®¹å¨éï¼è¿ä¸ªå®¹å¨æ¯ configuration å¨å±éç½®ç±»æ¥è¿è¡ç»´æ¤ç\n\n\n# æ§è¡\n\næ§è¡æ¯å¨è°ç¨å·ä½çæ¥è¯¢æ¹æ³æ´»å¶ä»å¨ mybatis éææè¿°ç sql æ¹æ³æ¶è¿è¡çè§¦åï¼è§¦åä¼å¨å¦ä¸ä»£ç ä¸­çä½ç½®ä¸­è§¦åã\n\n  // åå»ºåæ°å¤çå¨\n  public parameterhandler newparameterhandler(mappedstatement mappedstatement, object parameterobject, boundsql boundsql) {\n    parameterhandler parameterhandler = mappedstatement.getlang().createparameterhandler(mappedstatement, parameterobject, boundsql);\n    parameterhandler = (parameterhandler) interceptorchain.pluginall(parameterhandler);\n    return parameterhandler;\n  }\n \n  // åå»ºç»æéå¤çå¨\n  public resultsethandler newresultsethandler(executor executor, mappedstatement mappedstatement, rowbounds rowbounds, parameterhandler parameterhandler,\n      resulthandler resulthandler, boundsql boundsql) {\n    resultsethandler resultsethandler = new defaultresultsethandler(executor, mappedstatement, parameterhandler, resulthandler, boundsql, rowbounds);\n    resultsethandler = (resultsethandler) interceptorchain.pluginall(resultsethandler);\n    return resultsethandler;\n  }\n \n  // åå»ºè¯­å¥å¤çå¨\n  public statementhandler newstatementhandler(executor executor, mappedstatement mappedstatement, object parameterobject, rowbounds rowbounds, resulthandler resulthandler, boundsql boundsql) {\n    statementhandler statementhandler = new routingstatementhandler(executor, mappedstatement, parameterobject, rowbounds, resulthandler, boundsql);\n    statementhandler = (statementhandler) interceptorchain.pluginall(statementhandler);\n    return statementhandler;\n  }\n\n  // çäº§æ§è¡å¨\n  public executor newexecutor(transaction transaction, executortype executortype) {\n    executortype = executortype == null ? defaultexecutortype : executortype;\n    executortype = executortype == null ? executortype.simple : executortype;\n    executor executor;\n    if (executortype.batch == executortype) {\n      // æ¹éå¤çå¨\n      executor = new batchexecutor(this, transaction);\n    } else if (executortype.reuse == executortype) {\n      executor = new reuseexecutor(this, transaction);\n    } else {\n      // ç®åå¤çå¨\n      executor = new simpleexecutor(this, transaction);\n    }\n    // äºçº§ç¼å­å¤çå¨\n    if (cacheenabled) {\n      executor = new cachingexecutor(executor);\n    }\n    executor = (executor) interceptorchain.pluginall(executor);\n    return executor;\n  }\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n\n\nä¼çå°ä»ä¼è°ç¨ interceptorchain#pluginall æ¹æ³ï¼è¯¥ç±»å¨æ³¨åæ­¥éª¤ä¸­ææåå°ï¼éé¢ç»´æ¤äºææçæä»¶ï¼é£ä¹å¨è¿éå°±ä¼æ¶å¾ªç¯ææçæä»¶ï¼æ¯ä¸ªæä»¶è°ç¨ interceptor#plugin\n\n// å¾ªç¯è°ç¨\npublic object pluginall(object target) {\n    for (interceptor interceptor : interceptors) {\n        target = interceptor.plugin(target);\n    }\n    return target;\n}\n\n// æ§è¡wrap\npublic interface interceptor {\n    // æ¦æªï¼ä½¿ç¨æ¹å®ç°\n    object intercept(invocation invocation) throws throwable;\n    // ä»£ç\n    default object plugin(object target) {\n        return plugin.wrap(target, this);\n    }\n    // è®¾ç½®å±æ§\n    default void setproperties(properties properties) {\n        // nop\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\ninterceptor#plugin æ¹æ³åé¨ä¹å°±æ¯è°ç¨ plugin#wrap éææ¹æ³ï¼è¯¥æ¹æ³éè¿è·åèªå®ä¹æä»¶çæ³¨è§£ï¼æ¥è§å¯ä½ éè¦å¯¹åªä¸ªå¤çå¨ï¼åªä¸ªæ¹æ³ä»¥ååæ°ç±»åå»å¹éæ¦æªå¯¹è±¡çå·ä½æ¹æ³ï¼å¦æå¤ä¸ä¸ªåæ°é½å¯è½æ¾ä¸å°è¦æ¦æªçæ¹æ³ãæ¾å°æ¹æ³åç¶åå»å¨æä»£çè¿ä¸ªæ¹æ³ã\n\n// \npublic class plugin implements invocationhandler {\n    private object target;\n    private interceptor interceptor;\n    private map<class<?>, set<method>> signaturemap;\n\n    private plugin(object target, interceptor interceptor, map<class<?>, set<method>> signaturemap) {\n        this.target = target;\n        this.interceptor = interceptor;\n        this.signaturemap = signaturemap;\n    }\n    // å·ä½çä»£çå®ç°\n    @override\n    public object invoke(object proxy, method method, object[] args) throws throwable {\n        // è·åå£°æçæ¹æ³åè¡¨\n        set<method> methods = signaturemap.get(method.getdeclaringclass());\n        // è¿æ»¤éè¦æ¦æªçæ¹æ³\n        if (methods != null && methods.contains(method)) {\n            // è°ç¨ interceptor#intercept æå¥èªå·±çåå°é»è¾\n            return interceptor.intercept(new invocation(target, method, args));\n        }\n        return method.invoke(target, args);\n    }\n    /**\n     * ç¨ä»£çæèªå®ä¹æä»¶è¡ä¸ºåè£¹å°ç®æ æ¹æ³ä¸­ï¼ä¹å°±æ¯ plugin.invoke çè¿æ»¤è°ç¨\n     */\n    public static object wrap(object target, interceptor interceptor) {\n        // åå¾ç­¾åmap\n        map<class<?>, set<method>> signaturemap = getsignaturemap(interceptor);\n        // åå¾è¦æ¹åè¡ä¸ºçç±»(parameterhandler|resultsethandler|statementhandler|executor)\n        class<?> type = target.getclass();\n        // åå¾æ¥å£\n        class<?>[] interfaces = getallinterfaces(type, signaturemap);\n        // åå»ºä»£ç(statementhandler)\n        if (interfaces.length > 0) {\n            // ä»£ç\n            return proxy.newproxyinstance(\n                    type.getclassloader(),\n                    interfaces,\n                    new plugin(target, interceptor, signaturemap));\n        }\n        return target;\n    }\n    /**\n     * è·åæ¹æ³ç­¾åç» map\n     */\n    private static map<class<?>, set<method>> getsignaturemap(interceptor interceptor) {\n        // å intercepts æ³¨è§£\n        intercepts interceptsannotation = interceptor.getclass().getannotation(intercepts.class);\n        // å¿é¡»å¾æ intercepts æ³¨è§£ï¼æ²¡ææ¥é\n        if (interceptsannotation == null) {\n            throw new runtimeexception("no @intercepts annotation was found in interceptor " + interceptor.getclass().getname());\n        }\n        // valueæ¯æ°ç»åï¼signatureçæ°ç»\n        signature[] sigs = interceptsannotation.value();\n        // æ¯ä¸ª class ç±»æå¤ä¸ªå¯è½æå¤ä¸ª method éè¦è¢«æ¦æª\n        map<class<?>, set<method>> signaturemap = new hashmap<>();\n        for (signature sig : sigs) {\n            set<method> methods = signaturemap.computeifabsent(sig.type(), k -> new hashset<>());\n            try {\n                // ä¾å¦è·åå°æ¹æ³ï¼statementhandler.prepare(connection connection)ãstatementhandler.parameterize(statement statement)...\n                method method = sig.type().getmethod(sig.method(), sig.args());\n                methods.add(method);\n            } catch (nosuchmethodexception e) {\n                throw new runtimeexception("could not find method on " + sig.type() + " named " + sig.method() + ". cause: " + e, e);\n            }\n        }\n        return signaturemap;\n    }\n    /**\n     * åå¾æ¥å£\n     */\n    private static class<?>[] getallinterfaces(class<?> type, map<class<?>, set<method>> signaturemap) {\n        set<class<?>> interfaces = new hashset<class<?>>();\n        while (type != null) {\n            for (class<?> c : type.getinterfaces()) {\n                // æ¦æª parameterhandler|resultsethandler|statementhandler|executor\n                if (signaturemap.containskey(c)) {\n                    interfaces.add(c);\n                }\n            }\n            type = type.getsuperclass();\n        }\n        return interfaces.toarray(new class<?>[interfaces.size()]);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n\n\n\n# èªå®ä¹\n\npackage cn.mybatis.test.plugin;\n\nimport cn.mybatis.executor.statement.statementhandler;\nimport cn.mybatis.mapping.boundsql;\nimport cn..mybatis.plugin.interceptor;\nimport cn.mybatis.plugin.intercepts;\nimport cn.mybatis.plugin.invocation;\nimport cn.mybatis.plugin.signature;\n\nimport java.sql.connection;\nimport java.util.properties;\n\n@intercepts({@signature(type = statementhandler.class, method = "prepare", args = {connection.class})})\npublic class testplugin implements interceptor {\n\n    @override\n    public object intercept(invocation invocation) throws throwable {\n        // è·åstatementhandler\n        statementhandler statementhandler = (statementhandler) invocation.gettarget();\n        // è·åsqlä¿¡æ¯\n        boundsql boundsql = statementhandler.getboundsql();\n        string sql = boundsql.getsql();\n        // è¾åºsql\n        system.out.println("æ¦æªsqlï¼" + sql);\n        // æ¾è¡\n        return invocation.proceed();\n    }\n\n    @override\n    public void setproperties(properties properties) {\n        system.out.println("åæ°è¾åºï¼" + properties.getproperty("test00"));\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n',charsets:{cjk:!0}},{title:"æ ¸å¿åè½æè§£ ä¸äºçº§ç¼å­åç",frontmatter:{title:"æ ¸å¿åè½æè§£ ä¸äºçº§ç¼å­åç",date:"2023-06-25T09:22:36.000Z",permalink:"/mybatis/302/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/30.Mybatis/302.%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8B%86%E8%A7%A3%20%E4%B8%80%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86.html",relativePath:"00.java/30.Mybatis/302.æ ¸å¿åè½æè§£ ä¸äºçº§ç¼å­åç.md",key:"v-676a4bcc",path:"/mybatis/302/",headers:[{level:2,title:"ä¸çº§ç¼å­",slug:"ä¸çº§ç¼å­",normalizedTitle:"ä¸çº§ç¼å­",charIndex:13},{level:3,title:"è§£æ",slug:"è§£æ",normalizedTitle:"è§£æ",charIndex:292},{level:3,title:"åå¤",slug:"åå¤",normalizedTitle:"åå¤",charIndex:1240},{level:3,title:"æ§è¡",slug:"æ§è¡",normalizedTitle:"æ§è¡",charIndex:1271},{level:2,title:"äºçº§ç¼å­",slug:"äºçº§ç¼å­",normalizedTitle:"äºçº§ç¼å­",charIndex:18},{level:3,title:"è§£æ",slug:"è§£æ-2",normalizedTitle:"è§£æ",charIndex:292},{level:2,title:"åå¤",slug:"åå¤-2",normalizedTitle:"åå¤",charIndex:1240},{level:2,title:"æ§è¡",slug:"æ§è¡-2",normalizedTitle:"æ§è¡",charIndex:1271}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"ä¸çº§ç¼å­ è§£æ åå¤ æ§è¡ äºçº§ç¼å­ è§£æ åå¤ æ§è¡",content:'MyBatis çç¼å­åä¸ºä¸çº§ç¼å­åäºçº§ç¼å­ï¼ç¼å­æåµå¦ä¸å¾ï¼åæå¡æ¶æä¸­ï¼æä¸ä»æåªæä¸ä¸ªç¨åºæä¾ç¸åæå¡ï¼ï¼ä¸çº§ç¼å­å¼å¯ä¸ä¼å½±åä¸å¡ï¼åªä¼æé«æ§è½ã å¾®æå¡æ¶æä¸­éè¦å³é­ä¸çº§ç¼å­ï¼åå ï¼Service1 åæ¥è¯¢æ°æ®ï¼è¥ä¹å Service2 ä¿®æ¹äºæ°æ®ï¼ä¹å Service1 ååæ¬¡ä»¥åæ ·çæ¥è¯¢æ¡ä»¶æ¥è¯¢æ°æ®ï¼å èµ°ç¼å­ä¼åºç°æ¥å¤çæ°æ®ä¸æ¯ææ°æ°æ®\n\n\n\n\n# ä¸çº§ç¼å­\n\nä¸çº§ç¼å­æ¯åºäº SQLSession çº§å«çï¼å¨åä¸ä¸ª Session çç¸åæ¥è¯¢è¯­å¥ä¼æä¼ä»ç¼å­ä¸­æ¥è¯¢ï¼æè°ç¸ååæ¬ SQL ç¸åï¼æ¡ä»¶ç¸åç­ï¼é£ä¹æä»¬çä¸å¨æºç ä¸­å·ä½æ¯æä¹ç»´æ¤åä½¿ç¨è¿ä¸ªç¼å­çã\n\n\n# è§£æ\n\næè¿°ä¸çº§ç¼å­åªéè¦å¨ <configuration> æ ç­¾ä¸­æè¿°å³å¯ï¼èä¸çº§ç¼å­ç value å¼æ SESSION å STATEMENT ä¸¤ç§ï¼å¦æè®¾ç½®ä¸º STATEMENT åºæ¬å¯ä»¥ç®æ¯å³é­ä¸çº§ç¼å­ï¼ä¸çº§ç¼å­æ¯ MyBatis æä¾çé»è®¤ç¼å­ï¼æä»¥ä¸ä¼å¨ä»£ç ä¸­çå°å¤æ­ä¸çº§ç¼å­çæ¡ä»¶\n\n<configuration>\n    <settings>\n        \x3c!--ç¼å­çº§å«ï¼SESSION/STATEMENT--\x3e\n        <setting name="localCacheScope" value="SESSION"/>\n    </settings>\n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n\n\nè§£ææ ¸å¿ä»£ç ä¼å¾å° localCacheScopeçå¼ ï¼ç»´æ¤å° configuration å¨å±éç½®ä¸­\n\nprivate void settingsElement(Element context) {\n    if (context == null) return;\n    List<Element> elements = context.elements();\n    Properties props = new Properties();\n    for (Element element : elements) {\n        props.setProperty(element.attributeValue("name"), element.attributeValue("value"));\n    }\n    // æ¯å¦å¯ç¨äºçº§ç¼å­\n    configuration.setCacheEnabled(booleanValueOf(props.getProperty("cacheEnabled"), true));\n    // ä¸çº§ç¼å­çéç½®\n    configuration.setLocalCacheScope(LocalCacheScope.valueOf(props.getProperty("localCacheScope")));\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# åå¤\n\nåå¤é¶æ®µä¸»è¦æ¯å¨ openSession æ¹æ³ï¼ä»ä¼å¨æ§è¡å¨éé¢å»ç´æ¥ new PerpetualCache æ°¸ä¹ç¼å­ï¼æ§è¡å¨å°±æ¥æäºè¿ä¸ªç¼å­å¯¹è±¡\n\n// æå¼ä¸ä¸ª session\n@Override\npublic SqlSession openSession() {\n    Transaction tx = null;\n    try {\n        final Environment environment = configuration.getEnvironment();\n        TransactionFactory transactionFactory = environment.getTransactionFactory();\n        tx = transactionFactory.newTransaction(configuration.getEnvironment().getDataSource(), TransactionIsolationLevel.READ_COMMITTED, false);\n        // åå»ºæ§è¡å¨\n        final Executor executor = configuration.newExecutor(tx);\n        // åå»ºDefaultSqlSession\n        return new DefaultSqlSession(configuration, executor);\n    } catch (Exception e) {\n        try {\n            assert tx != null;\n            tx.close();\n        } catch (SQLException ignore) {\n        }\n        throw new RuntimeException("Error opening session.  Cause: " + e);\n    }\n}\n\n// åå»ºæ§è¡å¨\npublic Executor newExecutor(Transaction transaction) {\n    Executor executor = new SimpleExecutor(this, transaction);\n    // éç½®å¼å¯äºçº§ç¼å­ï¼åå»º CachingExecutor(é»è®¤å°±æ¯æç¼å­)è£é¥°èæ¨¡å¼ï¼\n    if (cacheEnabled) {\n        executor = new CachingExecutor(executor);\n    }\n    return executor;\n}\n\n// SimpleExecutor ç®åæ§è¡å¨çæé æ¹æ³\npublic class SimpleExecutor extends BaseExecutor {\n    public SimpleExecutor(Configuration configuration, Transaction transaction) {\n        super(configuration, transaction);\n    }\n}\n\n// åºç¡æ§è¡å¨çæé æ¹æ³\nprotected BaseExecutor(Configuration configuration, Transaction transaction) {\n    this.configuration = configuration;\n    this.transaction = transaction;\n    this.wrapper = this;\n    // new ä¸ä¸ªæ°¸ä¹ç¼å­\n    this.localCache = new PerpetualCache("LocalCache");\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\nPerpetualCache ç»§æ¿äº Cache ï¼å¹¶å®ç°äºåºæ¬çå¯¹ç¼å­çæä½\n\npublic class PerpetualCache implements Cache {\n    private String id;\n    // ä½¿ç¨HashMapå­æ¾ä¸çº§ç¼å­æ°æ®ï¼session çå½å¨æè¾ç­ï¼æ­£å¸¸æåµä¸æ°æ®ä¸ä¼ä¸ç´å¨ç¼å­å­æ¾\n    private Map<Object, Object> cache = new HashMap<>();\n    public PerpetualCache(String id) {\n        this.id = id;\n    }\n    @Override\n    public String getId() {\n        return id;\n    }\n    @Override\n    public void putObject(Object key, Object value) {\n        cache.put(key, value);\n    }\n    @Override\n    public Object getObject(Object key) {\n        return cache.get(key);\n    }\n    @Override\n    public Object removeObject(Object key) {\n        return cache.remove(key);\n    }\n    @Override\n    public void clear() {\n        cache.clear();\n    }\n    @Override\n    public int getSize() {\n        return cache.size();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n\n\n\n# æ§è¡\n\nå¨åå¤é¶æ®µå·²ç»å¾å°äºæ§è¡å¨ï¼å¹¶å¨æ§è¡å¨éé¢å¾å°äº PerpetualCache ç¼å­ï¼åªéè¦ç¥éå®¢æ·ä½¿ç¨çæ¯æ¥è¯¢è¿æ¯ä¿®æ¹ç­æä½åï¼æ§è¡æ§è¡å¨éé¢å¯¹åºç query or update æ¹æ³å³å¯\n\npublic abstract class BaseExecutor implements Executor {\n\n    private org.slf4j.Logger logger = LoggerFactory.getLogger(BaseExecutor.class);\n\n    protected Configuration configuration;\n    protected Transaction transaction;\n    protected Executor wrapper;\n\n    // æ¬å°ç¼å­\n    protected PerpetualCache localCache;\n\n    private boolean closed;\n    // æ¥è¯¢å æ \n    protected int queryStack = 0;\n\n    protected BaseExecutor(Configuration configuration, Transaction transaction) {\n        this.configuration = configuration;\n        this.transaction = transaction;\n        this.wrapper = this;\n        this.localCache = new PerpetualCache("LocalCache");\n    }\n\n    @Override\n    public int update(MappedStatement ms, Object parameter) throws SQLException {\n        if (closed) {\n            throw new RuntimeException("Executor was closed.");\n        }\n        clearLocalCache();\n        return doUpdate(ms, parameter);\n    }\n\n    @Override\n    public <E> List<E> query(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler) throws SQLException {\n        // 1. è·åç»å®SQL\n        BoundSql boundSql = ms.getBoundSql(parameter);\n        // 2. åå»ºç¼å­Key\n        CacheKey key = createCacheKey(ms, parameter, rowBounds, boundSql);\n        return query(ms, parameter, rowBounds, resultHandler, key, boundSql);\n    }\n\n    @Override\n    public <E> List<E> query(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, CacheKey key, BoundSql boundSql) throws SQLException {\n        if (closed) {\n            throw new RuntimeException("Executor was closed.");\n        }\n        // æ¸çå±é¨ç¼å­ï¼æ¥è¯¢å æ ä¸º0åæ¸çãqueryStack é¿åéå½è°ç¨æ¸ç\n        if (queryStack == 0 && ms.isFlushCacheRequired()) {\n            clearLocalCache();\n        }\n        List<E> list;\n        try {\n            queryStack++;\n            // æ ¹æ®cacheKeyä»localCacheä¸­æ¥è¯¢æ°æ®\n            list = resultHandler == null ? (List<E>) localCache.getObject(key) : null;\n            if (list == null) {\n                list = queryFromDatabase(ms, parameter, rowBounds, resultHandler, key, boundSql);\n            }\n        } finally {\n            queryStack--;\n        }\n        if (queryStack == 0) {\n            if (configuration.getLocalCacheScope() == LocalCacheScope.STATEMENT) {\n                clearLocalCache();\n            }\n        }\n        return list;\n    }\n\n    private <E> List<E> queryFromDatabase(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, CacheKey key, BoundSql boundSql) throws SQLException {\n        List<E> list;\n        localCache.putObject(key, ExecutionPlaceholder.EXECUTION_PLACEHOLDER);\n        try {\n            list = doQuery(ms, parameter, rowBounds, resultHandler, boundSql);\n        } finally {\n            localCache.removeObject(key);\n        }\n        // å­å¥ç¼å­\n        localCache.putObject(key, list);\n        return list;\n    }\n\n    protected abstract int doUpdate(MappedStatement ms, Object parameter) throws SQLException;\n\n    protected abstract <E> List<E> doQuery(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, BoundSql boundSql) throws SQLException;\n\n    @Override\n    public Transaction getTransaction() {\n        if (closed) {\n            throw new RuntimeException("Executor was closed.");\n        }\n        return transaction;\n    }\n\n    @Override\n    public void commit(boolean required) throws SQLException {\n        if (closed) {\n            throw new RuntimeException("Cannot commit, transaction is already closed");\n        }\n        clearLocalCache();\n        if (required) {\n            transaction.commit();\n        }\n    }\n\n    @Override\n    public void rollback(boolean required) throws SQLException {\n        if (!closed) {\n            try {\n                clearLocalCache();\n            } finally {\n                if (required) {\n                    transaction.rollback();\n                }\n            }\n        }\n    }\n\n    @Override\n    public void clearLocalCache() {\n        if (!closed) {\n            localCache.clear();\n        }\n    }\n\n    @Override\n    public CacheKey createCacheKey(MappedStatement ms, Object parameterObject, RowBounds rowBounds, BoundSql boundSql) {\n        if (closed) {\n            throw new RuntimeException("Executor was closed.");\n        }\n        CacheKey cacheKey = new CacheKey();\n        cacheKey.update(ms.getId());\n        cacheKey.update(rowBounds.getOffset());\n        cacheKey.update(rowBounds.getLimit());\n        cacheKey.update(boundSql.getSql());\n        List<ParameterMapping> parameterMappings = boundSql.getParameterMappings();\n        TypeHandlerRegistry typeHandlerRegistry = ms.getConfiguration().getTypeHandlerRegistry();\n        for (ParameterMapping parameterMapping : parameterMappings) {\n            Object value;\n            String propertyName = parameterMapping.getProperty();\n            if (boundSql.hasAdditionalParameter(propertyName)) {\n                value = boundSql.getAdditionalParameter(propertyName);\n            } else if (parameterObject == null) {\n                value = null;\n            } else if (typeHandlerRegistry.hasTypeHandler(parameterObject.getClass())) {\n                value = parameterObject;\n            } else {\n                MetaObject metaObject = configuration.newMetaObject(parameterObject);\n                value = metaObject.getValue(propertyName);\n            }\n            cacheKey.update(value);\n        }\n        if (configuration.getEnvironment() != null) {\n            cacheKey.update(configuration.getEnvironment().getId());\n        }\n        return cacheKey;\n    }\n\n    @Override\n    public void setExecutorWrapper(Executor executor) {\n        this.wrapper = wrapper;\n    }\n\n    @Override\n    public void close(boolean forceRollback) {\n        try {\n            try {\n                rollback(forceRollback);\n            } finally {\n                transaction.close();\n            }\n        } catch (SQLException e) {\n            logger.warn("Unexpected exception on closing transaction.  Cause: " + e);\n        } finally {\n            transaction = null;\n            localCache = null;\n            closed = true;\n        }\n    }\n\n    protected void closeStatement(Statement statement) {\n        if (statement != null) {\n            try {\n                statement.close();\n            } catch (SQLException ignore) {\n            }\n        }\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n132\n133\n134\n135\n136\n137\n138\n139\n140\n141\n142\n143\n144\n145\n146\n147\n148\n149\n150\n151\n152\n153\n154\n155\n156\n157\n158\n159\n160\n161\n162\n163\n164\n165\n166\n167\n168\n169\n170\n171\n172\n173\n174\n175\n176\n177\n178\n179\n180\n181\n182\n183\n184\n185\n186\n187\n188\n\n\nå¯ä»¥çå° æ§è¡å¨éé¢ç»´æ¤äº query update commit ç­æ¹æ³ï¼å¨æ§è¡æ¥è¯¢çæ¶åä¼åçæ CacheKey ï¼ä¼æç§ namespace.id + åé¡µoffset + åé¡µlimit + æ§è¡çSQLè¯­å¥ + æ¥è¯¢æ¡ä»¶çå¼ + ç¯å¢ID çæå¯ä¸ç keyï¼ç¶ååä¸ºæ¥è¯¢ç¼å­ç keyï¼æ¥è¯¢ç»æåä¸º valueï¼å¦æåä¸å SQLSession æ§è¡ç¸åè¯­å¥åæ¡ä»¶ä»¥ååé¡µç­ï¼å°±ä¼ä»ç¼å­ä¸­å½ä¸­å¹¶è¿åç»æãç¼å­çæ¸é¤ï¼å°±æ¯å½è¯¥ SQLSession æ§è¡ updateï¼commitï¼closeï¼rollback æ¶è¯¥ SQLSession å°±æ¸é¤ç¼å­ã\n\nå¨ SQL è¯­å¥ä¸­ä¹å¯ä»¥è®¾ç½®æ¸é¤ç¼å­ï¼åªéè¦å¨ <select>ã<insert> å <update> ç­ SQL æ ç­¾ä¸­è®¾ç½® flushCache="true" å±æ§ä¼å¼ºå¶æ¸ç©ºæ¬å°ç¼å­ï¼ä½¿å¾ä¸æ¬¡æ¥è¯¢æ¶éæ°ä»æ°æ®åºä¸­è·åæ°æ®ãéç¨äºä¸çº§ç¼å­åäºçº§ç¼å­\n\n<select id="selectById" resultType="com.example.User" flushCache="true">\n  select * from user where id = #{id}\n</select>\n\n\n1\n2\n3\n\n\n\n# äºçº§ç¼å­\n\näºçº§ç¼å­æ¯ä¸º Namespace ä¹å« mapper çº§å«çç¼å­ï¼æ¯è·¨ SQLSession çï¼ä»ä¼å¨åæçæ§è¡å¨ä¸å°è£ä¸ä¸ª CachingExecutor ï¼æ¥ç®¡çç¼å­ï¼ CachingExecutor ä½¿ç¨äºè£é¥°å¨æ¨¡å¼æ¥è£é¥°åºç¡ç Executor æ§è¡å¨ã\n\n\n# è§£æ\n\nå¨äºçº§ç¼å­ä¸­çéç½®æ¹å¼å·ä½å¦ä¸\n\n\x3c!-- å¿é¡»åå¼å¯ç¼å­ --\x3e\n<configuration>\n    <settings>\n        \x3c!--  true/false äºçº§ç¼å­æ¯å¦ä½¿ç¨ --\x3e\n        <setting name="cacheEnabled" value="true"/>\n    </settings>\n</configuration>\n\n\x3c!-- æå®å¨æä¸ªmapperä¸­ä½¿ç¨ --\x3e\n<mapper namespace="com.example.MyMapper">\n    \x3c!-- è®¾ç½®è¯¥mapperçäºçº§ç¼å­ --\x3e\n    <cache eviction="LRU" flushInterval="100000" readOnly="true" size="1024"/>\n    \x3c!-- useCacheï¼è¡¨ç¤ºæ¯å¦ä½¿ç¨äºçº§ç¼å­ï¼å¦æè®¾ç½®ä¸º trueï¼åä¼ä½¿ç¨äºçº§ç¼å­ãå¯¹äº select åç´ ï¼é»è®¤å¼ä¸º trueã --\x3e\n    \x3c!-- useCache å±æ§åªè½æ§å¶æ¯å¦ä½¿ç¨äºçº§ç¼å­ï¼å®ä¸è½å³é­ä¸çº§ç¼å­ãä¸çº§ç¼å­æ¯ MyBatis çé»è®¤è¡ä¸ºï¼å®æ»æ¯å¼å¯çï¼æ æ³å³é­ã --\x3e\n    <select id="queryActivityById" parameterType="cn.bugstack.mybatis.test.po.Activity" flushCache="false" useCache="true">\n        SELECT activity_id, activity_name, activity_desc, create_time, update_time\n        FROM activity\n        <trim prefix="where" prefixOverrides="AND | OR" suffixOverrides="and">\n            <if test="null != activityId">\n                activity_id = #{activityId}\n            </if>\n        </trim>\n    </select>\n</mapper>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\nå¶ä¸­ <cache > æ ç­¾æå¤ä¸ªå±æ§ï¼è¿éä¸ä¸ä»ç»ä¸ä¸ï¼\n\n * typeï¼å¯ä»¥æå®èªå®ä¹ç¼å­ï¼ä½æ¯è¯¥ç±»å¿é¡»å®ç°ï¼èä¸æ¯å¨ç±»å\n * evictionï¼ç¼å­åæ¶ç­ç¥ï¼é»è®¤ä¸º LRUï¼Least Recently Usedï¼ï¼ç­ç¥ä»ç»å¦ä¸ï¼\n   LRUï¼æç§è®¿é®æ¶é´æåºï¼æè¿æªä½¿ç¨çæ°æ®ä¼åæ¸é¤ã\n   FIFOï¼æç§æå¥æ¶é´æåºï¼åæå¥çæ°æ®åæ¸é¤ã\n   SOFTï¼åºäºåå¾åæ¶ç®æ³ï¼å½ç³»ç»åå­ä¸è¶³æ¶ï¼ä¼ä¼åæ¸çä¸å¸¸ç¨çãå ç¨åå­è¾å¤çæ°æ®ã\n   WEAKï¼å¼±å¼ç¨æºå¶ï¼å½ JVM è¿è¡åå¾åæ¶æ¶ï¼å¦æå¤æ­ä¸ä¸ªå¯¹è±¡åªè¢«å¼±å¼ç¨æåï¼åä¼å°å¶åæ¶ã\n * flushIntervalï¼å·æ°é´éæ¶é´ï¼è¡¨ç¤ºå¤é¿æ¶é´å·æ°ä¸æ¬¡ç¼å­ï¼åä½ä¸ºæ¯«ç§ï¼é»è®¤ä¸å·æ°ã\n * sizeï¼ç¼å­çå¤§å°ï¼è¡¨ç¤ºæå¤å¯ä»¥ç¼å­å¤å°ä¸ªå¯¹è±¡ã\n * readOnlyï¼æ¯å¦åªè¯»ï¼é»è®¤ä¸º falseï¼è¡¨ç¤ºå¯ç¨ç¼å­æ´æ°æºå¶ã\n * blockingï¼æ¯å¦å¯ç¨é»å¡ï¼é»è®¤ä¸º falseï¼è¡¨ç¤ºä¸å¯ç¨ã\n\n> flushInterval é»è®¤æåµä¸ï¼MyBatis éç¨åºäº PerpetualCache (æ°¸ä¹ç¼å­) çç¼å­å®ç°æ¹å¼ï¼å³ç¼å­ä¼ä¸ç´ä¿å­å¨åå­ä¸­ï¼ç´å°ä¼è¯å³é­æ¶æè¢«æ¸é¤ãèå½æä»¬ä½¿ç¨åºäº Ehcache çç¼å­å®ç°æ¶ï¼å¯ä»¥éè¿è®¾ç½® flushInterval å±æ§æ§å¶ç¼å­çå·æ°æ¶é´ï¼å³å®æ¶å°ç¼å­ä¸­çæ°æ®åå¥å°ç£çææä¹åå­å¨ä¸­ï¼ä»¥é¿åç¼å­è¿æãå¤±ææåå­æº¢åºç­é®é¢ã\n\nå½ Mybaits å¯å¨åä¼è¯»å°äºçº§ç¼å­çéç½®ï¼åä¼è¿è¡ <cache> åºç¡çè§£æï¼å¾å° XML éé¢çå±æ§å¼ï¼å¶æ¬¡ç¨å¼ä¿¡æ¯ç»æä¸ä¸ª Cache å¯¹è±¡ï¼å¹¶æè¿ä¸ª Cache å¯¹è±¡ç»´æ¤å°å¨å±éç½® Configuration ä¸­ï¼è¯¥å¨å±éç½®éé¢æ¯ç»´æ¤ä¸ä¸ª Map ç»æçå®¹å¨\n\n// å¼å§è§£æ\nprivate void cacheElement(Element context) {\n    if (context == null) return;\n    // åºç¡éç½®ä¿¡æ¯ï¼é»è®¤æ¯æ°¸æç¼å­\n    String type = context.attributeValue("type", "PERPETUAL");\n    Class<? extends Cache> typeClass = typeAliasRegistry.resolveAlias(type);\n    // ç¼å­éå FIFO\n    String eviction = context.attributeValue("eviction", "FIFO");\n    Class<? extends Cache> evictionClass = typeAliasRegistry.resolveAlias(eviction);\n    Long flushInterval = Long.valueOf(context.attributeValue("flushInterval"));\n    Integer size = Integer.valueOf(context.attributeValue("size"));\n    boolean readWrite = !Boolean.parseBoolean(context.attributeValue("readOnly", "false"));\n    boolean blocking = !Boolean.parseBoolean(context.attributeValue("blocking", "false"));\n\n    // è§£æé¢å¤å±æ§ä¿¡æ¯ï¼<property name="cacheFile" value="/tmp/xxx-cache.tmp"/>\n    List<Element> elements = context.elements();\n    Properties props = new Properties();\n    for (Element element : elements) {\n        props.setProperty(element.attributeValue("name"), element.attributeValue("value"));\n    }\n    // æå»ºç¼å­\n    builderAssistant.useNewCache(typeClass, evictionClass, flushInterval, size, readWrite, blocking, props);\n}\n\n// æå»ºCache\npublic Cache useNewCache(Class<? extends Cache> typeClass,\n                        Class<? extends Cache> evictionClass,\n                        Long flushInterval,\n                        Integer size,\n                        boolean readWrite,\n                        boolean blocking,\n                        Properties props) {\n    // å¤æ­ä¸ºnullï¼åç¨é»è®¤å¼\n    typeClass = valueOrDefault(typeClass, PerpetualCache.class);\n    evictionClass = valueOrDefault(evictionClass, FifoCache.class);\n\n    // å»ºé èæ¨¡å¼æå»º Cache [currentNamespace=cn.bugstack.mybatis.test.dao.IActivityDao]\n    Cache cache = new CacheBuilder(currentNamespace)\n            .implementation(typeClass)\n            .addDecorator(evictionClass)\n            .clearInterval(flushInterval)\n            .size(size)\n            .readWrite(readWrite)\n            .blocking(blocking)\n            .properties(props)\n            .build();\n\n    // æ·»å ç¼å­\n    configuration.addCache(cache);\n    // ç»èªå·±ç»´æ¤ä¸ä¸ª cache ä»¥ä¾¿åç»­ MappedStatement ç¨å°\n    currentCache = cache;\n    return cache;\n}\n\n// æ·»å å° configurationå¨å±éç½®ç»´æ¤ç cachesä¸­\npublic class Configuration {\n    // ç¼å­,å­å¨Mapé\n    protected final Map<String, Cache> caches = new HashMap<>();\n    public void addCache(Cache cache) {\n        caches.put(cache.getId(), cache);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n\n\nç¼å­è§£æè¿äºï¼ä½æ¯æä¸»è¦çè¿æ¯ <select> æ ç­¾çä¸äºï¼æ ç­¾ä¸é¢æè¿°äºå·ä½çç¼å­æ¯å¦ä½¿ç¨ï¼ç¼å­æ¯å¦æ¸é¤ï¼æä»¥è¿éè¦è§£ææ ç­¾ä¸çç¼å­ä¿¡æ¯ï¼ä¸»è¦æ¯ flushCache å useCache è¿ä¸¤ä¸ªå±æ§\n\n// è§£ææä½\npublic void parseStatementNode() {\n    String id = element.attributeValue("id");\n    // åæ°ç±»å\n    String parameterType = element.attributeValue("parameterType");\n    Class<?> parameterTypeClass = resolveAlias(parameterType);\n    // å¤é¨åºç¨ resultMap\n    String resultMap = element.attributeValue("resultMap");\n    // ç»æç±»å\n    String resultType = element.attributeValue("resultType");\n    Class<?> resultTypeClass = resolveAlias(resultType);\n    // è·åå½ä»¤ç±»å(select|insert|update|delete)\n    String nodeName = element.getName();\n    SqlCommandType sqlCommandType = SqlCommandType.valueOf(nodeName.toUpperCase(Locale.ENGLISH));\n\n    boolean isSelect = sqlCommandType == SqlCommandType.SELECT;\n    boolean flushCache = Boolean.parseBoolean(element.attributeValue("flushCache", String.valueOf(!isSelect)));\n    boolean useCache = Boolean.parseBoolean(element.attributeValue("useCache", String.valueOf(isSelect)));\n\n    // è·åé»è®¤è¯­è¨é©±å¨å¨\n    Class<?> langClass = configuration.getLanguageRegistry().getDefaultDriverClass();\n    LanguageDriver langDriver = configuration.getLanguageRegistry().getDriver(langClass);\n\n    // è§£æ<selectKey> step-14 æ°å¢\n    processSelectKeyNodes(id, parameterTypeClass, langDriver);\n\n    // è§£ææSqlSourceï¼DynamicSqlSource/RawSqlSource\n    SqlSource sqlSource = langDriver.createSqlSource(configuration, element, parameterTypeClass);\n\n    // å±æ§æ è®°ãä»å¯¹ insert æç¨ã, MyBatis ä¼éè¿ getGeneratedKeys æèéè¿ insert è¯­å¥ç selectKey å­åç´ è®¾ç½®å®çå¼ step-14 æ°å¢\n    String keyProperty = element.attributeValue("keyProperty");\n\n    KeyGenerator keyGenerator = null;\n    String keyStatementId = id + SelectKeyGenerator.SELECT_KEY_SUFFIX;\n    keyStatementId = builderAssistant.applyCurrentNamespace(keyStatementId, true);\n\n    if (configuration.hasKeyGenerator(keyStatementId)) {\n        keyGenerator = configuration.getKeyGenerator(keyStatementId);\n    } else {\n        keyGenerator = configuration.isUseGeneratedKeys() && SqlCommandType.INSERT.equals(sqlCommandType) ? new Jdbc3KeyGenerator() : new NoKeyGenerator();\n    }\n    // è°ç¨å©æç±»\n    builderAssistant.addMappedStatement(id,\n            sqlSource,\n            sqlCommandType,\n            parameterTypeClass,\n            resultMap,\n            resultTypeClass,\n            flushCache,\n            useCache,\n            keyGenerator,\n            keyProperty,\n            langDriver);\n}\n\n// æä¿¡æ¯æ·»å å° MappedStatementå¯¹è±¡\npublic MappedStatement addMappedStatement(\n        String id,\n        SqlSource sqlSource,\n        SqlCommandType sqlCommandType,\n        Class<?> parameterType,\n        String resultMap,\n        Class<?> resultType,\n        boolean flushCache,\n        boolean useCache,\n        KeyGenerator keyGenerator,\n        String keyProperty,\n        LanguageDriver lang\n) {\n    // ç»idå ä¸namespaceåç¼ï¼cn.bugstack.mybatis.test.dao.IUserDao.queryUserInfoById\n    id = applyCurrentNamespace(id, false);\n    //æ¯å¦æ¯selectè¯­å¥\n    boolean isSelect = sqlCommandType == SqlCommandType.SELECT;\n\n    MappedStatement.Builder statementBuilder = new MappedStatement.Builder(configuration, id, sqlCommandType, sqlSource, resultType);\n    statementBuilder.resource(resource);\n    statementBuilder.keyGenerator(keyGenerator);\n    statementBuilder.keyProperty(keyProperty);\n\n    // ç»ææ å°ï¼ç» MappedStatement#resultMaps\n    setStatementResultMap(resultMap, resultType, statementBuilder);\n    // ç»´æ¤ç¼å­ä¿¡æ¯\n    setStatementCache(isSelect, flushCache, useCache, currentCache, statementBuilder);\n    MappedStatement statement = statementBuilder.build();\n    // æ å°è¯­å¥ä¿¡æ¯ï¼å»ºé å®å­æ¾å°éç½®é¡¹ä¸­\n    configuration.addMappedStatement(statement);\n    return statement;\n}\n\n// ç»Statementæ·»å ç¼å­ä¿¡æ¯\nprivate void setStatementCache(\n        boolean isSelect,\n        boolean flushCache,\n        boolean useCache,\n        Cache cache,\n        MappedStatement.Builder statementBuilder) {\n    flushCache = valueOrDefault(flushCache, !isSelect);\n    useCache = valueOrDefault(useCache, isSelect);\n    statementBuilder.flushCacheRequired(flushCache);\n    statementBuilder.useCache(useCache);\n    statementBuilder.cache(cache);\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n\n\nå¨å·ä½ç addMappedStatement çæ¶åï¼å¯ä»¥çå°ä¼å¾å°ä¸ä¸ª MappedStatement å¯¹è±¡ï¼è¯¥å¯¹è±¡å°±æ¯å°è£äº SQL æ ç­¾çææä¿¡æ¯ï¼å¨ setStatementCache æ¹æ³ä¸­ï¼ä¸ä»åªæ flushCacheåuseCache è¿è¡äºè®¾ç½®ï¼é¢å¤çè¿å¸¦æä¸ä¸ª cache ï¼è¯¥ cache å°±æ¯å¨è°ç¨ useNewCache æ¹æ³ï¼åé¨èµå¼ç currentCache ï¼ä»ä»¬çæ¹æ³æ¯å¨åä¸ä¸ªç±»ä¸­ï¼å æ­¤å¯ä»¥ä½¿ç¨ãè¿æ · MappedStatement å¯¹è±¡ä¹å°±æ¥æäº <cache> æ ç­¾çè½åï¼å°æ­¤è§£æå®æ¯\n\n\n# åå¤\n\nåä¸çº§ç¼å­ä¸æ ·ï¼é½æ¯å¨ openSession çæ¶åå»åå®ä¾åï¼ä½æ¯ä¸åçæ¯ï¼äºçº§ç¼å­ä¼å¨ä¸çº§ç¼å­ä¸è¿è¡ä¸ä¸ªè£é¥°ï¼å¹¶ä¸é¦è¦ä¼å¤æ­æ¯å¦åè®¸å¼å¯äºçº§ç¼å­ã\n\nif (cacheEnabled) {\n    executor = new CachingExecutor(executor);\n}\n\n\n1\n2\n3\n\n\nCachingExecutor æ¥æ¶ executor ï¼å¹¶å¯¹å¶è¿è¡åè£ï¼åé¨æ¹æ³ä¾ç¶è°ç¨çæ¯ BaseExecutor çç¸å³æ¹æ³ã CachingExecutor åé¨è¿ç»´æ¤äº TransactionalCacheManager äºå¡ç¼å­ç®¡çå¨ï¼è¯¥ç®¡çå¨åé¨ç»´æ¤ Map<Cache, TransactionalCache> ï¼ TransactionalCache åé¨åç»´æ¤äº Cache ä»¥å entriesMissedInCache å entriesToAddOnCommit\n\n\n# æ§è¡\n\npublic class CachingExecutor implements Executor {\n\n    private Logger logger = LoggerFactory.getLogger(CachingExecutor.class);\n    private Executor delegate;\n    // äºå¡ç¼å­ç®¡çå¨\n    private TransactionalCacheManager tcm = new TransactionalCacheManager();\n\n    public CachingExecutor(Executor delegate) {\n        this.delegate = delegate;\n        delegate.setExecutorWrapper(this);\n    }\n\n    @Override\n    public int update(MappedStatement ms, Object parameter) throws SQLException {\n        return delegate.update(ms, parameter);\n    }\n\n    @Override\n    public <E> List<E> query(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, CacheKey key, BoundSql boundSql) throws SQLException {\n        Cache cache = ms.getCache();\n        if (cache != null) {\n            flushCacheIfRequired(ms);\n            if (ms.isUseCache() && resultHandler == null) {\n                @SuppressWarnings("unchecked")\n                List<E> list = (List<E>) tcm.getObject(cache, key);\n                if (list == null) {\n                    list = delegate.<E>query(ms, parameter, rowBounds, resultHandler, key, boundSql);\n                    // cacheï¼ç¼å­éåå®ç°ç±»ï¼FIFO\n                    // keyï¼åå¸å¼ [mappedStatementId + offset + limit + SQL + queryParams + environment]\n                    // listï¼æ¥è¯¢çæ°æ®\n                    tcm.putObject(cache, key, list);\n                }\n                // æå°è°è¯æ¥å¿ï¼è®°å½äºçº§ç¼å­è·åæ°æ®\n                if (logger.isDebugEnabled() && cache.getSize() > 0) {\n                    logger.debug("äºçº§ç¼å­ï¼{}", JSON.toJSONString(list));\n                }\n                return list;\n            }\n        }\n        return delegate.<E>query(ms, parameter, rowBounds, resultHandler, key, boundSql);\n    }\n\n    @Override\n    public <E> List<E> query(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler) throws SQLException {\n        // 1. è·åç»å®SQL\n        BoundSql boundSql = ms.getBoundSql(parameter);\n        // 2. åå»ºç¼å­Key\n        CacheKey key = createCacheKey(ms, parameter, rowBounds, boundSql);\n        return query(ms, parameter, rowBounds, resultHandler, key, boundSql);\n    }\n\n    @Override\n    public Transaction getTransaction() {\n        return delegate.getTransaction();\n    }\n\n    @Override\n    public void commit(boolean required) throws SQLException {\n        delegate.commit(required);\n        tcm.commit();\n    }\n\n    @Override\n    public void rollback(boolean required) throws SQLException {\n        try {\n            delegate.rollback(required);\n        } finally {\n            if (required) {\n                tcm.rollback();\n            }\n        }\n    }\n\n    @Override\n    public void close(boolean forceRollback) {\n        try {\n            if (forceRollback) {\n                tcm.rollback();\n            } else {\n                tcm.commit();\n            }\n        } finally {\n            delegate.close(forceRollback);\n        }\n    }\n\n    @Override\n    public void clearLocalCache() {\n        delegate.clearLocalCache();\n    }\n\n    @Override\n    public CacheKey createCacheKey(MappedStatement ms, Object parameterObject, RowBounds rowBounds, BoundSql boundSql) {\n        return delegate.createCacheKey(ms, parameterObject, rowBounds, boundSql);\n    }\n\n    @Override\n    public void setExecutorWrapper(Executor executor) {\n        throw new UnsupportedOperationException("This method should not be called");\n    }\n\n    private void flushCacheIfRequired(MappedStatement ms) {\n        Cache cache = ms.getCache();\n        if (cache != null && ms.isFlushCacheRequired()) {\n            tcm.clear(cache);\n        }\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n\n\npublic class TransactionalCacheManager {\n\n    private Map<Cache, TransactionalCache> transactionalCaches = new HashMap<>();\n\n    public void clear(Cache cache) {\n        getTransactionalCache(cache).clear();\n    }\n\n    /**\n     * å¾å°æä¸ªTransactionalCacheçå¼\n     */\n    public Object getObject(Cache cache, CacheKey key) {\n        return getTransactionalCache(cache).getObject(key);\n    }\n\n    public void putObject(Cache cache, CacheKey key, Object value) {\n        getTransactionalCache(cache).putObject(key, value);\n    }\n\n    /**\n     * æäº¤æ¶å¨é¨æäº¤\n     */\n    public void commit() {\n        for (TransactionalCache txCache : transactionalCaches.values()) {\n            txCache.commit();\n        }\n    }\n\n    /**\n     * åæ»æ¶å¨é¨åæ»\n     */\n    public void rollback() {\n        for (TransactionalCache txCache : transactionalCaches.values()) {\n            txCache.rollback();\n        }\n    }\n\n    private TransactionalCache getTransactionalCache(Cache cache) {\n        TransactionalCache txCache = transactionalCaches.get(cache);\n        if (txCache == null) {\n            txCache = new TransactionalCache(cache);\n            transactionalCaches.put(cache, txCache);\n        }\n        return txCache;\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\npublic class TransactionalCache implements Cache {\n\n    private Cache delegate;\n    // commit æ¶è¦ä¸è¦æ¸ç¼å­\n    private boolean clearOnCommit;\n    // commit æ¶è¦æ·»å çåç´ \n    private Map<Object, Object> entriesToAddOnCommit;\n    private Set<Object> entriesMissedInCache;\n\n    public TransactionalCache(Cache delegate) {\n        // delegate = FifoCache\n        this.delegate = delegate;\n        // é»è®¤ commit æ¶ä¸æ¸ç¼å­\n        this.clearOnCommit = false;\n        this.entriesToAddOnCommit = new HashMap<>();\n        this.entriesMissedInCache = new HashSet<>();\n    }\n\n    @Override\n    public String getId() {\n        return delegate.getId();\n    }\n\n    @Override\n    public int getSize() {\n        return delegate.getSize();\n    }\n\n    @Override\n    public Object getObject(Object key) {\n        // keyï¼CacheKey æ¼è£åçåå¸ç \n        Object object = delegate.getObject(key);\n        if (object == null) {\n            entriesMissedInCache.add(key);\n        }\n        return clearOnCommit ? null : object;\n    }\n\n    @Override\n    public void putObject(Object key, Object object) {\n        entriesToAddOnCommit.put(key, object);\n    }\n\n    @Override\n    public Object removeObject(Object key) {\n        return null;\n    }\n\n    @Override\n    public void clear() {\n        clearOnCommit = true;\n        entriesToAddOnCommit.clear();\n    }\n\n    public void commit() {\n        if (clearOnCommit) {\n            delegate.clear();\n        }\n        flushPendingEntries();\n        reset();\n    }\n\n    public void rollback() {\n        unlockMissedEntries();\n        reset();\n    }\n\n    private void reset() {\n        clearOnCommit = false;\n        entriesToAddOnCommit.clear();\n        entriesMissedInCache.clear();\n    }\n\n    /**\n     * å·æ°æ°æ®å° MappedStatement#Cache ä¸­ï¼ä¹å°±æ¯ææ°æ®å¡«åå° Mapper XML çº§å«ä¸ã\n     * flushPendingEntries æ¹æ³æäºå¡ç¼å­ä¸çæ°æ®ï¼å¡«åå° FifoCache ä¸­ã\n     */\n    private void flushPendingEntries() {\n        for (Map.Entry<Object, Object> entry : entriesToAddOnCommit.entrySet()) {\n            delegate.putObject(entry.getKey(), entry.getValue());\n        }\n        for (Object entry : entriesMissedInCache) {\n            if (!entriesToAddOnCommit.containsKey(entry)) {\n                delegate.putObject(entry, null);\n            }\n        }\n    }\n\n    private void unlockMissedEntries() {\n        for (Object entry : entriesMissedInCache) {\n            delegate.putObject(entry, null);\n        }\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n\n\nå¶å®ä¸é¢é¥¶äºä¸åä¸æ¥ï¼æç»æä½çæ¯ MappedStatement ç»´æ¤ç Cache å¯¹è±¡ï¼ MappedStatement æ¯è¢«å¨å± Configuration å¨ç¼å­çï¼æä»¥æ¥è¯¢ç»æä¸ä¼æ¸é¤ MappedStatement å¯¹è±¡åç¼å­ä¿¡æ¯ï¼åªæå½è§¦å updateï¼commitï¼rollback ç­æä¼æ¸é¤ MappedStatement éç»´æ¤çç¼å­ä¿¡æ¯',normalizedContent:'mybatis çç¼å­åä¸ºä¸çº§ç¼å­åäºçº§ç¼å­ï¼ç¼å­æåµå¦ä¸å¾ï¼åæå¡æ¶æä¸­ï¼æä¸ä»æåªæä¸ä¸ªç¨åºæä¾ç¸åæå¡ï¼ï¼ä¸çº§ç¼å­å¼å¯ä¸ä¼å½±åä¸å¡ï¼åªä¼æé«æ§è½ã å¾®æå¡æ¶æä¸­éè¦å³é­ä¸çº§ç¼å­ï¼åå ï¼service1 åæ¥è¯¢æ°æ®ï¼è¥ä¹å service2 ä¿®æ¹äºæ°æ®ï¼ä¹å service1 ååæ¬¡ä»¥åæ ·çæ¥è¯¢æ¡ä»¶æ¥è¯¢æ°æ®ï¼å èµ°ç¼å­ä¼åºç°æ¥å¤çæ°æ®ä¸æ¯ææ°æ°æ®\n\n\n\n\n# ä¸çº§ç¼å­\n\nä¸çº§ç¼å­æ¯åºäº sqlsession çº§å«çï¼å¨åä¸ä¸ª session çç¸åæ¥è¯¢è¯­å¥ä¼æä¼ä»ç¼å­ä¸­æ¥è¯¢ï¼æè°ç¸ååæ¬ sql ç¸åï¼æ¡ä»¶ç¸åç­ï¼é£ä¹æä»¬çä¸å¨æºç ä¸­å·ä½æ¯æä¹ç»´æ¤åä½¿ç¨è¿ä¸ªç¼å­çã\n\n\n# è§£æ\n\næè¿°ä¸çº§ç¼å­åªéè¦å¨ <configuration> æ ç­¾ä¸­æè¿°å³å¯ï¼èä¸çº§ç¼å­ç value å¼æ session å statement ä¸¤ç§ï¼å¦æè®¾ç½®ä¸º statement åºæ¬å¯ä»¥ç®æ¯å³é­ä¸çº§ç¼å­ï¼ä¸çº§ç¼å­æ¯ mybatis æä¾çé»è®¤ç¼å­ï¼æä»¥ä¸ä¼å¨ä»£ç ä¸­çå°å¤æ­ä¸çº§ç¼å­çæ¡ä»¶\n\n<configuration>\n    <settings>\n        \x3c!--ç¼å­çº§å«ï¼session/statement--\x3e\n        <setting name="localcachescope" value="session"/>\n    </settings>\n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n\n\nè§£ææ ¸å¿ä»£ç ä¼å¾å° localcachescopeçå¼ ï¼ç»´æ¤å° configuration å¨å±éç½®ä¸­\n\nprivate void settingselement(element context) {\n    if (context == null) return;\n    list<element> elements = context.elements();\n    properties props = new properties();\n    for (element element : elements) {\n        props.setproperty(element.attributevalue("name"), element.attributevalue("value"));\n    }\n    // æ¯å¦å¯ç¨äºçº§ç¼å­\n    configuration.setcacheenabled(booleanvalueof(props.getproperty("cacheenabled"), true));\n    // ä¸çº§ç¼å­çéç½®\n    configuration.setlocalcachescope(localcachescope.valueof(props.getproperty("localcachescope")));\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# åå¤\n\nåå¤é¶æ®µä¸»è¦æ¯å¨ opensession æ¹æ³ï¼ä»ä¼å¨æ§è¡å¨éé¢å»ç´æ¥ new perpetualcache æ°¸ä¹ç¼å­ï¼æ§è¡å¨å°±æ¥æäºè¿ä¸ªç¼å­å¯¹è±¡\n\n// æå¼ä¸ä¸ª session\n@override\npublic sqlsession opensession() {\n    transaction tx = null;\n    try {\n        final environment environment = configuration.getenvironment();\n        transactionfactory transactionfactory = environment.gettransactionfactory();\n        tx = transactionfactory.newtransaction(configuration.getenvironment().getdatasource(), transactionisolationlevel.read_committed, false);\n        // åå»ºæ§è¡å¨\n        final executor executor = configuration.newexecutor(tx);\n        // åå»ºdefaultsqlsession\n        return new defaultsqlsession(configuration, executor);\n    } catch (exception e) {\n        try {\n            assert tx != null;\n            tx.close();\n        } catch (sqlexception ignore) {\n        }\n        throw new runtimeexception("error opening session.  cause: " + e);\n    }\n}\n\n// åå»ºæ§è¡å¨\npublic executor newexecutor(transaction transaction) {\n    executor executor = new simpleexecutor(this, transaction);\n    // éç½®å¼å¯äºçº§ç¼å­ï¼åå»º cachingexecutor(é»è®¤å°±æ¯æç¼å­)è£é¥°èæ¨¡å¼ï¼\n    if (cacheenabled) {\n        executor = new cachingexecutor(executor);\n    }\n    return executor;\n}\n\n// simpleexecutor ç®åæ§è¡å¨çæé æ¹æ³\npublic class simpleexecutor extends baseexecutor {\n    public simpleexecutor(configuration configuration, transaction transaction) {\n        super(configuration, transaction);\n    }\n}\n\n// åºç¡æ§è¡å¨çæé æ¹æ³\nprotected baseexecutor(configuration configuration, transaction transaction) {\n    this.configuration = configuration;\n    this.transaction = transaction;\n    this.wrapper = this;\n    // new ä¸ä¸ªæ°¸ä¹ç¼å­\n    this.localcache = new perpetualcache("localcache");\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\nperpetualcache ç»§æ¿äº cache ï¼å¹¶å®ç°äºåºæ¬çå¯¹ç¼å­çæä½\n\npublic class perpetualcache implements cache {\n    private string id;\n    // ä½¿ç¨hashmapå­æ¾ä¸çº§ç¼å­æ°æ®ï¼session çå½å¨æè¾ç­ï¼æ­£å¸¸æåµä¸æ°æ®ä¸ä¼ä¸ç´å¨ç¼å­å­æ¾\n    private map<object, object> cache = new hashmap<>();\n    public perpetualcache(string id) {\n        this.id = id;\n    }\n    @override\n    public string getid() {\n        return id;\n    }\n    @override\n    public void putobject(object key, object value) {\n        cache.put(key, value);\n    }\n    @override\n    public object getobject(object key) {\n        return cache.get(key);\n    }\n    @override\n    public object removeobject(object key) {\n        return cache.remove(key);\n    }\n    @override\n    public void clear() {\n        cache.clear();\n    }\n    @override\n    public int getsize() {\n        return cache.size();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n\n\n\n# æ§è¡\n\nå¨åå¤é¶æ®µå·²ç»å¾å°äºæ§è¡å¨ï¼å¹¶å¨æ§è¡å¨éé¢å¾å°äº perpetualcache ç¼å­ï¼åªéè¦ç¥éå®¢æ·ä½¿ç¨çæ¯æ¥è¯¢è¿æ¯ä¿®æ¹ç­æä½åï¼æ§è¡æ§è¡å¨éé¢å¯¹åºç query or update æ¹æ³å³å¯\n\npublic abstract class baseexecutor implements executor {\n\n    private org.slf4j.logger logger = loggerfactory.getlogger(baseexecutor.class);\n\n    protected configuration configuration;\n    protected transaction transaction;\n    protected executor wrapper;\n\n    // æ¬å°ç¼å­\n    protected perpetualcache localcache;\n\n    private boolean closed;\n    // æ¥è¯¢å æ \n    protected int querystack = 0;\n\n    protected baseexecutor(configuration configuration, transaction transaction) {\n        this.configuration = configuration;\n        this.transaction = transaction;\n        this.wrapper = this;\n        this.localcache = new perpetualcache("localcache");\n    }\n\n    @override\n    public int update(mappedstatement ms, object parameter) throws sqlexception {\n        if (closed) {\n            throw new runtimeexception("executor was closed.");\n        }\n        clearlocalcache();\n        return doupdate(ms, parameter);\n    }\n\n    @override\n    public <e> list<e> query(mappedstatement ms, object parameter, rowbounds rowbounds, resulthandler resulthandler) throws sqlexception {\n        // 1. è·åç»å®sql\n        boundsql boundsql = ms.getboundsql(parameter);\n        // 2. åå»ºç¼å­key\n        cachekey key = createcachekey(ms, parameter, rowbounds, boundsql);\n        return query(ms, parameter, rowbounds, resulthandler, key, boundsql);\n    }\n\n    @override\n    public <e> list<e> query(mappedstatement ms, object parameter, rowbounds rowbounds, resulthandler resulthandler, cachekey key, boundsql boundsql) throws sqlexception {\n        if (closed) {\n            throw new runtimeexception("executor was closed.");\n        }\n        // æ¸çå±é¨ç¼å­ï¼æ¥è¯¢å æ ä¸º0åæ¸çãquerystack é¿åéå½è°ç¨æ¸ç\n        if (querystack == 0 && ms.isflushcacherequired()) {\n            clearlocalcache();\n        }\n        list<e> list;\n        try {\n            querystack++;\n            // æ ¹æ®cachekeyä»localcacheä¸­æ¥è¯¢æ°æ®\n            list = resulthandler == null ? (list<e>) localcache.getobject(key) : null;\n            if (list == null) {\n                list = queryfromdatabase(ms, parameter, rowbounds, resulthandler, key, boundsql);\n            }\n        } finally {\n            querystack--;\n        }\n        if (querystack == 0) {\n            if (configuration.getlocalcachescope() == localcachescope.statement) {\n                clearlocalcache();\n            }\n        }\n        return list;\n    }\n\n    private <e> list<e> queryfromdatabase(mappedstatement ms, object parameter, rowbounds rowbounds, resulthandler resulthandler, cachekey key, boundsql boundsql) throws sqlexception {\n        list<e> list;\n        localcache.putobject(key, executionplaceholder.execution_placeholder);\n        try {\n            list = doquery(ms, parameter, rowbounds, resulthandler, boundsql);\n        } finally {\n            localcache.removeobject(key);\n        }\n        // å­å¥ç¼å­\n        localcache.putobject(key, list);\n        return list;\n    }\n\n    protected abstract int doupdate(mappedstatement ms, object parameter) throws sqlexception;\n\n    protected abstract <e> list<e> doquery(mappedstatement ms, object parameter, rowbounds rowbounds, resulthandler resulthandler, boundsql boundsql) throws sqlexception;\n\n    @override\n    public transaction gettransaction() {\n        if (closed) {\n            throw new runtimeexception("executor was closed.");\n        }\n        return transaction;\n    }\n\n    @override\n    public void commit(boolean required) throws sqlexception {\n        if (closed) {\n            throw new runtimeexception("cannot commit, transaction is already closed");\n        }\n        clearlocalcache();\n        if (required) {\n            transaction.commit();\n        }\n    }\n\n    @override\n    public void rollback(boolean required) throws sqlexception {\n        if (!closed) {\n            try {\n                clearlocalcache();\n            } finally {\n                if (required) {\n                    transaction.rollback();\n                }\n            }\n        }\n    }\n\n    @override\n    public void clearlocalcache() {\n        if (!closed) {\n            localcache.clear();\n        }\n    }\n\n    @override\n    public cachekey createcachekey(mappedstatement ms, object parameterobject, rowbounds rowbounds, boundsql boundsql) {\n        if (closed) {\n            throw new runtimeexception("executor was closed.");\n        }\n        cachekey cachekey = new cachekey();\n        cachekey.update(ms.getid());\n        cachekey.update(rowbounds.getoffset());\n        cachekey.update(rowbounds.getlimit());\n        cachekey.update(boundsql.getsql());\n        list<parametermapping> parametermappings = boundsql.getparametermappings();\n        typehandlerregistry typehandlerregistry = ms.getconfiguration().gettypehandlerregistry();\n        for (parametermapping parametermapping : parametermappings) {\n            object value;\n            string propertyname = parametermapping.getproperty();\n            if (boundsql.hasadditionalparameter(propertyname)) {\n                value = boundsql.getadditionalparameter(propertyname);\n            } else if (parameterobject == null) {\n                value = null;\n            } else if (typehandlerregistry.hastypehandler(parameterobject.getclass())) {\n                value = parameterobject;\n            } else {\n                metaobject metaobject = configuration.newmetaobject(parameterobject);\n                value = metaobject.getvalue(propertyname);\n            }\n            cachekey.update(value);\n        }\n        if (configuration.getenvironment() != null) {\n            cachekey.update(configuration.getenvironment().getid());\n        }\n        return cachekey;\n    }\n\n    @override\n    public void setexecutorwrapper(executor executor) {\n        this.wrapper = wrapper;\n    }\n\n    @override\n    public void close(boolean forcerollback) {\n        try {\n            try {\n                rollback(forcerollback);\n            } finally {\n                transaction.close();\n            }\n        } catch (sqlexception e) {\n            logger.warn("unexpected exception on closing transaction.  cause: " + e);\n        } finally {\n            transaction = null;\n            localcache = null;\n            closed = true;\n        }\n    }\n\n    protected void closestatement(statement statement) {\n        if (statement != null) {\n            try {\n                statement.close();\n            } catch (sqlexception ignore) {\n            }\n        }\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n132\n133\n134\n135\n136\n137\n138\n139\n140\n141\n142\n143\n144\n145\n146\n147\n148\n149\n150\n151\n152\n153\n154\n155\n156\n157\n158\n159\n160\n161\n162\n163\n164\n165\n166\n167\n168\n169\n170\n171\n172\n173\n174\n175\n176\n177\n178\n179\n180\n181\n182\n183\n184\n185\n186\n187\n188\n\n\nå¯ä»¥çå° æ§è¡å¨éé¢ç»´æ¤äº query update commit ç­æ¹æ³ï¼å¨æ§è¡æ¥è¯¢çæ¶åä¼åçæ cachekey ï¼ä¼æç§ namespace.id + åé¡µoffset + åé¡µlimit + æ§è¡çsqlè¯­å¥ + æ¥è¯¢æ¡ä»¶çå¼ + ç¯å¢id çæå¯ä¸ç keyï¼ç¶ååä¸ºæ¥è¯¢ç¼å­ç keyï¼æ¥è¯¢ç»æåä¸º valueï¼å¦æåä¸å sqlsession æ§è¡ç¸åè¯­å¥åæ¡ä»¶ä»¥ååé¡µç­ï¼å°±ä¼ä»ç¼å­ä¸­å½ä¸­å¹¶è¿åç»æãç¼å­çæ¸é¤ï¼å°±æ¯å½è¯¥ sqlsession æ§è¡ updateï¼commitï¼closeï¼rollback æ¶è¯¥ sqlsession å°±æ¸é¤ç¼å­ã\n\nå¨ sql è¯­å¥ä¸­ä¹å¯ä»¥è®¾ç½®æ¸é¤ç¼å­ï¼åªéè¦å¨ <select>ã<insert> å <update> ç­ sql æ ç­¾ä¸­è®¾ç½® flushcache="true" å±æ§ä¼å¼ºå¶æ¸ç©ºæ¬å°ç¼å­ï¼ä½¿å¾ä¸æ¬¡æ¥è¯¢æ¶éæ°ä»æ°æ®åºä¸­è·åæ°æ®ãéç¨äºä¸çº§ç¼å­åäºçº§ç¼å­\n\n<select id="selectbyid" resulttype="com.example.user" flushcache="true">\n  select * from user where id = #{id}\n</select>\n\n\n1\n2\n3\n\n\n\n# äºçº§ç¼å­\n\näºçº§ç¼å­æ¯ä¸º namespace ä¹å« mapper çº§å«çç¼å­ï¼æ¯è·¨ sqlsession çï¼ä»ä¼å¨åæçæ§è¡å¨ä¸å°è£ä¸ä¸ª cachingexecutor ï¼æ¥ç®¡çç¼å­ï¼ cachingexecutor ä½¿ç¨äºè£é¥°å¨æ¨¡å¼æ¥è£é¥°åºç¡ç executor æ§è¡å¨ã\n\n\n# è§£æ\n\nå¨äºçº§ç¼å­ä¸­çéç½®æ¹å¼å·ä½å¦ä¸\n\n\x3c!-- å¿é¡»åå¼å¯ç¼å­ --\x3e\n<configuration>\n    <settings>\n        \x3c!--  true/false äºçº§ç¼å­æ¯å¦ä½¿ç¨ --\x3e\n        <setting name="cacheenabled" value="true"/>\n    </settings>\n</configuration>\n\n\x3c!-- æå®å¨æä¸ªmapperä¸­ä½¿ç¨ --\x3e\n<mapper namespace="com.example.mymapper">\n    \x3c!-- è®¾ç½®è¯¥mapperçäºçº§ç¼å­ --\x3e\n    <cache eviction="lru" flushinterval="100000" readonly="true" size="1024"/>\n    \x3c!-- usecacheï¼è¡¨ç¤ºæ¯å¦ä½¿ç¨äºçº§ç¼å­ï¼å¦æè®¾ç½®ä¸º trueï¼åä¼ä½¿ç¨äºçº§ç¼å­ãå¯¹äº select åç´ ï¼é»è®¤å¼ä¸º trueã --\x3e\n    \x3c!-- usecache å±æ§åªè½æ§å¶æ¯å¦ä½¿ç¨äºçº§ç¼å­ï¼å®ä¸è½å³é­ä¸çº§ç¼å­ãä¸çº§ç¼å­æ¯ mybatis çé»è®¤è¡ä¸ºï¼å®æ»æ¯å¼å¯çï¼æ æ³å³é­ã --\x3e\n    <select id="queryactivitybyid" parametertype="cn.bugstack.mybatis.test.po.activity" flushcache="false" usecache="true">\n        select activity_id, activity_name, activity_desc, create_time, update_time\n        from activity\n        <trim prefix="where" prefixoverrides="and | or" suffixoverrides="and">\n            <if test="null != activityid">\n                activity_id = #{activityid}\n            </if>\n        </trim>\n    </select>\n</mapper>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\nå¶ä¸­ <cache > æ ç­¾æå¤ä¸ªå±æ§ï¼è¿éä¸ä¸ä»ç»ä¸ä¸ï¼\n\n * typeï¼å¯ä»¥æå®èªå®ä¹ç¼å­ï¼ä½æ¯è¯¥ç±»å¿é¡»å®ç°ï¼èä¸æ¯å¨ç±»å\n * evictionï¼ç¼å­åæ¶ç­ç¥ï¼é»è®¤ä¸º lruï¼least recently usedï¼ï¼ç­ç¥ä»ç»å¦ä¸ï¼\n   lruï¼æç§è®¿é®æ¶é´æåºï¼æè¿æªä½¿ç¨çæ°æ®ä¼åæ¸é¤ã\n   fifoï¼æç§æå¥æ¶é´æåºï¼åæå¥çæ°æ®åæ¸é¤ã\n   softï¼åºäºåå¾åæ¶ç®æ³ï¼å½ç³»ç»åå­ä¸è¶³æ¶ï¼ä¼ä¼åæ¸çä¸å¸¸ç¨çãå ç¨åå­è¾å¤çæ°æ®ã\n   weakï¼å¼±å¼ç¨æºå¶ï¼å½ jvm è¿è¡åå¾åæ¶æ¶ï¼å¦æå¤æ­ä¸ä¸ªå¯¹è±¡åªè¢«å¼±å¼ç¨æåï¼åä¼å°å¶åæ¶ã\n * flushintervalï¼å·æ°é´éæ¶é´ï¼è¡¨ç¤ºå¤é¿æ¶é´å·æ°ä¸æ¬¡ç¼å­ï¼åä½ä¸ºæ¯«ç§ï¼é»è®¤ä¸å·æ°ã\n * sizeï¼ç¼å­çå¤§å°ï¼è¡¨ç¤ºæå¤å¯ä»¥ç¼å­å¤å°ä¸ªå¯¹è±¡ã\n * readonlyï¼æ¯å¦åªè¯»ï¼é»è®¤ä¸º falseï¼è¡¨ç¤ºå¯ç¨ç¼å­æ´æ°æºå¶ã\n * blockingï¼æ¯å¦å¯ç¨é»å¡ï¼é»è®¤ä¸º falseï¼è¡¨ç¤ºä¸å¯ç¨ã\n\n> flushinterval é»è®¤æåµä¸ï¼mybatis éç¨åºäº perpetualcache (æ°¸ä¹ç¼å­) çç¼å­å®ç°æ¹å¼ï¼å³ç¼å­ä¼ä¸ç´ä¿å­å¨åå­ä¸­ï¼ç´å°ä¼è¯å³é­æ¶æè¢«æ¸é¤ãèå½æä»¬ä½¿ç¨åºäº ehcache çç¼å­å®ç°æ¶ï¼å¯ä»¥éè¿è®¾ç½® flushinterval å±æ§æ§å¶ç¼å­çå·æ°æ¶é´ï¼å³å®æ¶å°ç¼å­ä¸­çæ°æ®åå¥å°ç£çææä¹åå­å¨ä¸­ï¼ä»¥é¿åç¼å­è¿æãå¤±ææåå­æº¢åºç­é®é¢ã\n\nå½ mybaits å¯å¨åä¼è¯»å°äºçº§ç¼å­çéç½®ï¼åä¼è¿è¡ <cache> åºç¡çè§£æï¼å¾å° xml éé¢çå±æ§å¼ï¼å¶æ¬¡ç¨å¼ä¿¡æ¯ç»æä¸ä¸ª cache å¯¹è±¡ï¼å¹¶æè¿ä¸ª cache å¯¹è±¡ç»´æ¤å°å¨å±éç½® configuration ä¸­ï¼è¯¥å¨å±éç½®éé¢æ¯ç»´æ¤ä¸ä¸ª map ç»æçå®¹å¨\n\n// å¼å§è§£æ\nprivate void cacheelement(element context) {\n    if (context == null) return;\n    // åºç¡éç½®ä¿¡æ¯ï¼é»è®¤æ¯æ°¸æç¼å­\n    string type = context.attributevalue("type", "perpetual");\n    class<? extends cache> typeclass = typealiasregistry.resolvealias(type);\n    // ç¼å­éå fifo\n    string eviction = context.attributevalue("eviction", "fifo");\n    class<? extends cache> evictionclass = typealiasregistry.resolvealias(eviction);\n    long flushinterval = long.valueof(context.attributevalue("flushinterval"));\n    integer size = integer.valueof(context.attributevalue("size"));\n    boolean readwrite = !boolean.parseboolean(context.attributevalue("readonly", "false"));\n    boolean blocking = !boolean.parseboolean(context.attributevalue("blocking", "false"));\n\n    // è§£æé¢å¤å±æ§ä¿¡æ¯ï¼<property name="cachefile" value="/tmp/xxx-cache.tmp"/>\n    list<element> elements = context.elements();\n    properties props = new properties();\n    for (element element : elements) {\n        props.setproperty(element.attributevalue("name"), element.attributevalue("value"));\n    }\n    // æå»ºç¼å­\n    builderassistant.usenewcache(typeclass, evictionclass, flushinterval, size, readwrite, blocking, props);\n}\n\n// æå»ºcache\npublic cache usenewcache(class<? extends cache> typeclass,\n                        class<? extends cache> evictionclass,\n                        long flushinterval,\n                        integer size,\n                        boolean readwrite,\n                        boolean blocking,\n                        properties props) {\n    // å¤æ­ä¸ºnullï¼åç¨é»è®¤å¼\n    typeclass = valueordefault(typeclass, perpetualcache.class);\n    evictionclass = valueordefault(evictionclass, fifocache.class);\n\n    // å»ºé èæ¨¡å¼æå»º cache [currentnamespace=cn.bugstack.mybatis.test.dao.iactivitydao]\n    cache cache = new cachebuilder(currentnamespace)\n            .implementation(typeclass)\n            .adddecorator(evictionclass)\n            .clearinterval(flushinterval)\n            .size(size)\n            .readwrite(readwrite)\n            .blocking(blocking)\n            .properties(props)\n            .build();\n\n    // æ·»å ç¼å­\n    configuration.addcache(cache);\n    // ç»èªå·±ç»´æ¤ä¸ä¸ª cache ä»¥ä¾¿åç»­ mappedstatement ç¨å°\n    currentcache = cache;\n    return cache;\n}\n\n// æ·»å å° configurationå¨å±éç½®ç»´æ¤ç cachesä¸­\npublic class configuration {\n    // ç¼å­,å­å¨mapé\n    protected final map<string, cache> caches = new hashmap<>();\n    public void addcache(cache cache) {\n        caches.put(cache.getid(), cache);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n\n\nç¼å­è§£æè¿äºï¼ä½æ¯æä¸»è¦çè¿æ¯ <select> æ ç­¾çä¸äºï¼æ ç­¾ä¸é¢æè¿°äºå·ä½çç¼å­æ¯å¦ä½¿ç¨ï¼ç¼å­æ¯å¦æ¸é¤ï¼æä»¥è¿éè¦è§£ææ ç­¾ä¸çç¼å­ä¿¡æ¯ï¼ä¸»è¦æ¯ flushcache å usecache è¿ä¸¤ä¸ªå±æ§\n\n// è§£ææä½\npublic void parsestatementnode() {\n    string id = element.attributevalue("id");\n    // åæ°ç±»å\n    string parametertype = element.attributevalue("parametertype");\n    class<?> parametertypeclass = resolvealias(parametertype);\n    // å¤é¨åºç¨ resultmap\n    string resultmap = element.attributevalue("resultmap");\n    // ç»æç±»å\n    string resulttype = element.attributevalue("resulttype");\n    class<?> resulttypeclass = resolvealias(resulttype);\n    // è·åå½ä»¤ç±»å(select|insert|update|delete)\n    string nodename = element.getname();\n    sqlcommandtype sqlcommandtype = sqlcommandtype.valueof(nodename.touppercase(locale.english));\n\n    boolean isselect = sqlcommandtype == sqlcommandtype.select;\n    boolean flushcache = boolean.parseboolean(element.attributevalue("flushcache", string.valueof(!isselect)));\n    boolean usecache = boolean.parseboolean(element.attributevalue("usecache", string.valueof(isselect)));\n\n    // è·åé»è®¤è¯­è¨é©±å¨å¨\n    class<?> langclass = configuration.getlanguageregistry().getdefaultdriverclass();\n    languagedriver langdriver = configuration.getlanguageregistry().getdriver(langclass);\n\n    // è§£æ<selectkey> step-14 æ°å¢\n    processselectkeynodes(id, parametertypeclass, langdriver);\n\n    // è§£ææsqlsourceï¼dynamicsqlsource/rawsqlsource\n    sqlsource sqlsource = langdriver.createsqlsource(configuration, element, parametertypeclass);\n\n    // å±æ§æ è®°ãä»å¯¹ insert æç¨ã, mybatis ä¼éè¿ getgeneratedkeys æèéè¿ insert è¯­å¥ç selectkey å­åç´ è®¾ç½®å®çå¼ step-14 æ°å¢\n    string keyproperty = element.attributevalue("keyproperty");\n\n    keygenerator keygenerator = null;\n    string keystatementid = id + selectkeygenerator.select_key_suffix;\n    keystatementid = builderassistant.applycurrentnamespace(keystatementid, true);\n\n    if (configuration.haskeygenerator(keystatementid)) {\n        keygenerator = configuration.getkeygenerator(keystatementid);\n    } else {\n        keygenerator = configuration.isusegeneratedkeys() && sqlcommandtype.insert.equals(sqlcommandtype) ? new jdbc3keygenerator() : new nokeygenerator();\n    }\n    // è°ç¨å©æç±»\n    builderassistant.addmappedstatement(id,\n            sqlsource,\n            sqlcommandtype,\n            parametertypeclass,\n            resultmap,\n            resulttypeclass,\n            flushcache,\n            usecache,\n            keygenerator,\n            keyproperty,\n            langdriver);\n}\n\n// æä¿¡æ¯æ·»å å° mappedstatementå¯¹è±¡\npublic mappedstatement addmappedstatement(\n        string id,\n        sqlsource sqlsource,\n        sqlcommandtype sqlcommandtype,\n        class<?> parametertype,\n        string resultmap,\n        class<?> resulttype,\n        boolean flushcache,\n        boolean usecache,\n        keygenerator keygenerator,\n        string keyproperty,\n        languagedriver lang\n) {\n    // ç»idå ä¸namespaceåç¼ï¼cn.bugstack.mybatis.test.dao.iuserdao.queryuserinfobyid\n    id = applycurrentnamespace(id, false);\n    //æ¯å¦æ¯selectè¯­å¥\n    boolean isselect = sqlcommandtype == sqlcommandtype.select;\n\n    mappedstatement.builder statementbuilder = new mappedstatement.builder(configuration, id, sqlcommandtype, sqlsource, resulttype);\n    statementbuilder.resource(resource);\n    statementbuilder.keygenerator(keygenerator);\n    statementbuilder.keyproperty(keyproperty);\n\n    // ç»ææ å°ï¼ç» mappedstatement#resultmaps\n    setstatementresultmap(resultmap, resulttype, statementbuilder);\n    // ç»´æ¤ç¼å­ä¿¡æ¯\n    setstatementcache(isselect, flushcache, usecache, currentcache, statementbuilder);\n    mappedstatement statement = statementbuilder.build();\n    // æ å°è¯­å¥ä¿¡æ¯ï¼å»ºé å®å­æ¾å°éç½®é¡¹ä¸­\n    configuration.addmappedstatement(statement);\n    return statement;\n}\n\n// ç»statementæ·»å ç¼å­ä¿¡æ¯\nprivate void setstatementcache(\n        boolean isselect,\n        boolean flushcache,\n        boolean usecache,\n        cache cache,\n        mappedstatement.builder statementbuilder) {\n    flushcache = valueordefault(flushcache, !isselect);\n    usecache = valueordefault(usecache, isselect);\n    statementbuilder.flushcacherequired(flushcache);\n    statementbuilder.usecache(usecache);\n    statementbuilder.cache(cache);\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n\n\nå¨å·ä½ç addmappedstatement çæ¶åï¼å¯ä»¥çå°ä¼å¾å°ä¸ä¸ª mappedstatement å¯¹è±¡ï¼è¯¥å¯¹è±¡å°±æ¯å°è£äº sql æ ç­¾çææä¿¡æ¯ï¼å¨ setstatementcache æ¹æ³ä¸­ï¼ä¸ä»åªæ flushcacheåusecache è¿è¡äºè®¾ç½®ï¼é¢å¤çè¿å¸¦æä¸ä¸ª cache ï¼è¯¥ cache å°±æ¯å¨è°ç¨ usenewcache æ¹æ³ï¼åé¨èµå¼ç currentcache ï¼ä»ä»¬çæ¹æ³æ¯å¨åä¸ä¸ªç±»ä¸­ï¼å æ­¤å¯ä»¥ä½¿ç¨ãè¿æ · mappedstatement å¯¹è±¡ä¹å°±æ¥æäº <cache> æ ç­¾çè½åï¼å°æ­¤è§£æå®æ¯\n\n\n# åå¤\n\nåä¸çº§ç¼å­ä¸æ ·ï¼é½æ¯å¨ opensession çæ¶åå»åå®ä¾åï¼ä½æ¯ä¸åçæ¯ï¼äºçº§ç¼å­ä¼å¨ä¸çº§ç¼å­ä¸è¿è¡ä¸ä¸ªè£é¥°ï¼å¹¶ä¸é¦è¦ä¼å¤æ­æ¯å¦åè®¸å¼å¯äºçº§ç¼å­ã\n\nif (cacheenabled) {\n    executor = new cachingexecutor(executor);\n}\n\n\n1\n2\n3\n\n\ncachingexecutor æ¥æ¶ executor ï¼å¹¶å¯¹å¶è¿è¡åè£ï¼åé¨æ¹æ³ä¾ç¶è°ç¨çæ¯ baseexecutor çç¸å³æ¹æ³ã cachingexecutor åé¨è¿ç»´æ¤äº transactionalcachemanager äºå¡ç¼å­ç®¡çå¨ï¼è¯¥ç®¡çå¨åé¨ç»´æ¤ map<cache, transactionalcache> ï¼ transactionalcache åé¨åç»´æ¤äº cache ä»¥å entriesmissedincache å entriestoaddoncommit\n\n\n# æ§è¡\n\npublic class cachingexecutor implements executor {\n\n    private logger logger = loggerfactory.getlogger(cachingexecutor.class);\n    private executor delegate;\n    // äºå¡ç¼å­ç®¡çå¨\n    private transactionalcachemanager tcm = new transactionalcachemanager();\n\n    public cachingexecutor(executor delegate) {\n        this.delegate = delegate;\n        delegate.setexecutorwrapper(this);\n    }\n\n    @override\n    public int update(mappedstatement ms, object parameter) throws sqlexception {\n        return delegate.update(ms, parameter);\n    }\n\n    @override\n    public <e> list<e> query(mappedstatement ms, object parameter, rowbounds rowbounds, resulthandler resulthandler, cachekey key, boundsql boundsql) throws sqlexception {\n        cache cache = ms.getcache();\n        if (cache != null) {\n            flushcacheifrequired(ms);\n            if (ms.isusecache() && resulthandler == null) {\n                @suppresswarnings("unchecked")\n                list<e> list = (list<e>) tcm.getobject(cache, key);\n                if (list == null) {\n                    list = delegate.<e>query(ms, parameter, rowbounds, resulthandler, key, boundsql);\n                    // cacheï¼ç¼å­éåå®ç°ç±»ï¼fifo\n                    // keyï¼åå¸å¼ [mappedstatementid + offset + limit + sql + queryparams + environment]\n                    // listï¼æ¥è¯¢çæ°æ®\n                    tcm.putobject(cache, key, list);\n                }\n                // æå°è°è¯æ¥å¿ï¼è®°å½äºçº§ç¼å­è·åæ°æ®\n                if (logger.isdebugenabled() && cache.getsize() > 0) {\n                    logger.debug("äºçº§ç¼å­ï¼{}", json.tojsonstring(list));\n                }\n                return list;\n            }\n        }\n        return delegate.<e>query(ms, parameter, rowbounds, resulthandler, key, boundsql);\n    }\n\n    @override\n    public <e> list<e> query(mappedstatement ms, object parameter, rowbounds rowbounds, resulthandler resulthandler) throws sqlexception {\n        // 1. è·åç»å®sql\n        boundsql boundsql = ms.getboundsql(parameter);\n        // 2. åå»ºç¼å­key\n        cachekey key = createcachekey(ms, parameter, rowbounds, boundsql);\n        return query(ms, parameter, rowbounds, resulthandler, key, boundsql);\n    }\n\n    @override\n    public transaction gettransaction() {\n        return delegate.gettransaction();\n    }\n\n    @override\n    public void commit(boolean required) throws sqlexception {\n        delegate.commit(required);\n        tcm.commit();\n    }\n\n    @override\n    public void rollback(boolean required) throws sqlexception {\n        try {\n            delegate.rollback(required);\n        } finally {\n            if (required) {\n                tcm.rollback();\n            }\n        }\n    }\n\n    @override\n    public void close(boolean forcerollback) {\n        try {\n            if (forcerollback) {\n                tcm.rollback();\n            } else {\n                tcm.commit();\n            }\n        } finally {\n            delegate.close(forcerollback);\n        }\n    }\n\n    @override\n    public void clearlocalcache() {\n        delegate.clearlocalcache();\n    }\n\n    @override\n    public cachekey createcachekey(mappedstatement ms, object parameterobject, rowbounds rowbounds, boundsql boundsql) {\n        return delegate.createcachekey(ms, parameterobject, rowbounds, boundsql);\n    }\n\n    @override\n    public void setexecutorwrapper(executor executor) {\n        throw new unsupportedoperationexception("this method should not be called");\n    }\n\n    private void flushcacheifrequired(mappedstatement ms) {\n        cache cache = ms.getcache();\n        if (cache != null && ms.isflushcacherequired()) {\n            tcm.clear(cache);\n        }\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n\n\npublic class transactionalcachemanager {\n\n    private map<cache, transactionalcache> transactionalcaches = new hashmap<>();\n\n    public void clear(cache cache) {\n        gettransactionalcache(cache).clear();\n    }\n\n    /**\n     * å¾å°æä¸ªtransactionalcacheçå¼\n     */\n    public object getobject(cache cache, cachekey key) {\n        return gettransactionalcache(cache).getobject(key);\n    }\n\n    public void putobject(cache cache, cachekey key, object value) {\n        gettransactionalcache(cache).putobject(key, value);\n    }\n\n    /**\n     * æäº¤æ¶å¨é¨æäº¤\n     */\n    public void commit() {\n        for (transactionalcache txcache : transactionalcaches.values()) {\n            txcache.commit();\n        }\n    }\n\n    /**\n     * åæ»æ¶å¨é¨åæ»\n     */\n    public void rollback() {\n        for (transactionalcache txcache : transactionalcaches.values()) {\n            txcache.rollback();\n        }\n    }\n\n    private transactionalcache gettransactionalcache(cache cache) {\n        transactionalcache txcache = transactionalcaches.get(cache);\n        if (txcache == null) {\n            txcache = new transactionalcache(cache);\n            transactionalcaches.put(cache, txcache);\n        }\n        return txcache;\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\npublic class transactionalcache implements cache {\n\n    private cache delegate;\n    // commit æ¶è¦ä¸è¦æ¸ç¼å­\n    private boolean clearoncommit;\n    // commit æ¶è¦æ·»å çåç´ \n    private map<object, object> entriestoaddoncommit;\n    private set<object> entriesmissedincache;\n\n    public transactionalcache(cache delegate) {\n        // delegate = fifocache\n        this.delegate = delegate;\n        // é»è®¤ commit æ¶ä¸æ¸ç¼å­\n        this.clearoncommit = false;\n        this.entriestoaddoncommit = new hashmap<>();\n        this.entriesmissedincache = new hashset<>();\n    }\n\n    @override\n    public string getid() {\n        return delegate.getid();\n    }\n\n    @override\n    public int getsize() {\n        return delegate.getsize();\n    }\n\n    @override\n    public object getobject(object key) {\n        // keyï¼cachekey æ¼è£åçåå¸ç \n        object object = delegate.getobject(key);\n        if (object == null) {\n            entriesmissedincache.add(key);\n        }\n        return clearoncommit ? null : object;\n    }\n\n    @override\n    public void putobject(object key, object object) {\n        entriestoaddoncommit.put(key, object);\n    }\n\n    @override\n    public object removeobject(object key) {\n        return null;\n    }\n\n    @override\n    public void clear() {\n        clearoncommit = true;\n        entriestoaddoncommit.clear();\n    }\n\n    public void commit() {\n        if (clearoncommit) {\n            delegate.clear();\n        }\n        flushpendingentries();\n        reset();\n    }\n\n    public void rollback() {\n        unlockmissedentries();\n        reset();\n    }\n\n    private void reset() {\n        clearoncommit = false;\n        entriestoaddoncommit.clear();\n        entriesmissedincache.clear();\n    }\n\n    /**\n     * å·æ°æ°æ®å° mappedstatement#cache ä¸­ï¼ä¹å°±æ¯ææ°æ®å¡«åå° mapper xml çº§å«ä¸ã\n     * flushpendingentries æ¹æ³æäºå¡ç¼å­ä¸çæ°æ®ï¼å¡«åå° fifocache ä¸­ã\n     */\n    private void flushpendingentries() {\n        for (map.entry<object, object> entry : entriestoaddoncommit.entryset()) {\n            delegate.putobject(entry.getkey(), entry.getvalue());\n        }\n        for (object entry : entriesmissedincache) {\n            if (!entriestoaddoncommit.containskey(entry)) {\n                delegate.putobject(entry, null);\n            }\n        }\n    }\n\n    private void unlockmissedentries() {\n        for (object entry : entriesmissedincache) {\n            delegate.putobject(entry, null);\n        }\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n\n\nå¶å®ä¸é¢é¥¶äºä¸åä¸æ¥ï¼æç»æä½çæ¯ mappedstatement ç»´æ¤ç cache å¯¹è±¡ï¼ mappedstatement æ¯è¢«å¨å± configuration å¨ç¼å­çï¼æä»¥æ¥è¯¢ç»æä¸ä¼æ¸é¤ mappedstatement å¯¹è±¡åç¼å­ä¿¡æ¯ï¼åªæå½è§¦å updateï¼commitï¼rollback ç­æä¼æ¸é¤ mappedstatement éç»´æ¤çç¼å­ä¿¡æ¯',charsets:{cjk:!0}},{title:"MyBatis Plus+Spring Boot å®ç°ä¸äºçº§ç¼å­ä»¥åèªå®ä¹ç¼å­",frontmatter:{title:"MyBatis Plus+Spring Boot å®ç°ä¸äºçº§ç¼å­ä»¥åèªå®ä¹ç¼å­",date:"2023-06-25T09:22:36.000Z",permalink:"/mybatis/303/",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/00.java/30.Mybatis/303.MyBatis%20Plus+Spring%20Boot%20%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E4%BB%A5%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BC%93%E5%AD%98.html",relativePath:"00.java/30.Mybatis/303.MyBatis Plus+Spring Boot å®ç°ä¸äºçº§ç¼å­ä»¥åèªå®ä¹ç¼å­.md",key:"v-4167bf9c",path:"/mybatis/303/",headers:[{level:2,title:"ä¸çº§ç¼å­",slug:"ä¸çº§ç¼å­",normalizedTitle:"ä¸çº§ç¼å­",charIndex:2},{level:2,title:"äºçº§ç¼å­",slug:"äºçº§ç¼å­",normalizedTitle:"äºçº§ç¼å­",charIndex:667},{level:2,title:"èªå®ä¹ç¼å­",slug:"èªå®ä¹ç¼å­",normalizedTitle:"èªå®ä¹ç¼å­",charIndex:1802}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"ä¸çº§ç¼å­ äºçº§ç¼å­ èªå®ä¹ç¼å­",content:'# ä¸çº§ç¼å­\n\né¦åéè¦å¨ application.yml ä¸­è¿è¡éç½®\n\nmybatis-plus:\n  # æå®å·ä½xmlè·¯å¾ å¨è·¯å¾\n  mapper-locations: classpath*:/com/fengqianrun/mybatisplus/**/*Mapper.xml\n  # è®¾ç½®å®ä½è·¯å¾ä½ç½®\n  type-aliases-package: com.fengqianrun.mybatisplus.bean\n  configuration:\n    # å¼å¯ä¸çº§ç¼å­,é»è®¤æ¯å¼å¯ç\n    local-cache-scope: SESSION\n  GlobalConfig:\n    # å³é­ banner ææ\n    banner: false\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nå¶æ¬¡å¨æ¥è¯¢æ¹æ³ä¸ä½¿ç¨æ³¨è§£ @Transactionalï¼@Transactional ä»£è¡¨å°±åä¸ä¸ª sessionï¼æä»¬å¨è¿éé¢éå¤æ§è¡æ¥è¯¢ï¼å°±åªä¼æ¥è¯¢ä¸æ¬¡\n\n@Transactional\n@GetMapping("/testOne")\npublic UserBean testOne(){\n    UserBean userBean = cacheOneMapper.testOne();\n    userBean = null;\n    userBean = cacheOneMapper.testOne();\n    return userBean;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# äºçº§ç¼å­\n\né¦åï¼å¨ application.yml éç½®æä»¶ä¸­æ·»å å¦ä¸éç½®ï¼\n\nmybatis-plus:\n  configuration:\n    # å¼å¯äºçº§ç¼å­\n    cache-enabled: true\n\n\n1\n2\n3\n4\n\n\nå¿é¡»å®ç°è¦ç»å¯¹è±¡è¿è¡ Serializableï¼ä¾å¦ï¼\n\n@Data\n@TableName("user")\npublic class UserBean implements Serializable {\n    // ...\n}\n\n\n1\n2\n3\n4\n5\n\n\næåï¼éè¦å¨ Mapper æ¥å£ä¸­ä½¿ç¨ @CacheNamespace ï¼ä½¿ç¨è¯¥æ³¨è§£å¯ä»¥æ¹ä¾¿å°ä¸ºæ¯ä¸ª Mapper æ¥å£å®ä¹ç¬ç«çç¼å­ç©ºé´ï¼å¹¶æå®ä¸åçç¼å­å®ç°åç¼å­ç­ç¥ï¼ä»èæ´å¥½å°æ§å¶ç¼å­ææã\n\n@Mapper\n@CacheNamespace(eviction = FifoCache.class)\npublic interface CacheTwoMapper extends BaseMapper<UserBean> {\n    List<UserBean> testAll();\n    UserBean testOne();\n}\n\n\n1\n2\n3\n4\n5\n6\n\n\nä½å¦æ Mapper æ¥å£æå¯¹åºç XMLï¼åéè¦å¨ XML æè¿° cacheï¼ä½¿ç¨æ³¨è§£ @CacheNamespace å°±ä¼å¤±æï¼ä¸¤ä¸ªä¸èµ·å­å¨å°±ä¼æ¥é\n\n<mapper namespace="com.fengqianrun.mybatisplus.cache2.CacheTwoMapper">\n    <cache eviction="fifo"/>\n    <select id="testAll" resultType="com.fengqianrun.mybatisplus.bean.UserBean">\n        select * from user\n    </select>\n    <select id="testOne" resultType="com.fengqianrun.mybatisplus.bean.UserBean">\n        select * from user where id = 1\n    </select>\n</mapper>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\näºçº§ç¼å­é»è®¤æåµä¸æ¯ä½¿ç¨ MyBatis èªå¸¦ç PerpetualCache å®ç°ï¼å¯ä»¥éè¿éç½®æä»¶ä¸­çå±æ§æ¥è®¾ç½®ç¼å­å®ç°ç±»åå¶ä»åæ°ãå¦å¤ï¼å¨ä½¿ç¨äºçº§ç¼å­æ¶ï¼\néè¦æ³¨æé¿åæ°æ®å¹¶åæ´æ°å¯¼è´èæ°æ®çé®é¢ï¼å¯ä»¥éè¿è®¾ç½®ç¼å­å·æ°æ¶é´ç­æ¹å¼æ¥è§£å³è¿ä¸ªé®é¢ã\n\n\n# èªå®ä¹ç¼å­\n\nå¦æä½ æ¯ä½åºç¨ç¨åºçè¯ï¼ä½¿ç¨ä»¥ä¸çéç½®æ¹å¼æ²¡æé®é¢ï¼ä½å¦æä½ æ¯åå¸å¼æå¾®æå¡ï¼é£ä¹å°±ä¼é ææ°æ®ä¸ä¸è´çé®é¢ï¼æ­¤æ¶æä»¬éè¦åå©å¶ä»ç¼å­ï¼æ¯å¦ Redis æ¥ç¼å­æä»¬çæ¥è¯¢æ°æ®ãèªå®ä¹ç¼å­ä¹åªæ¯å¨äºçº§ç¼å­åºç¡ä¸çæ¹é ï¼æä»¥è§ååäºçº§ç¼å­ä¸æ ·ã\n\nå®ç° org.apache.ibatis.cache.Cache ç±»\n\npublic class MyCache implements Cache {\n\n    /**\n     * id ä¼æ¯ mapper æ¥å£çåç§°\n     */\n    private final String id;\n\n    /**\n     * å¯ä»¥æ¿æ¢ä¸º Redis\n     */\n    private Map<Object, Object> cache = new ConcurrentHashMap<Object, Object>();\n\n    public MyCache(String id) {\n        this.id = id;\n    }\n\n    /**\n     * ç¼å­å¯ä¸æ è¯\n     * @return\n     */\n    @Override\n    public String getId() {\n        return id;\n    }\n\n    /**\n     * å°é®å¼å¯¹æ¾å¥ç¼å­ä¸­\n     * @param key\n     * @param value\n     */\n    @Override\n    public void putObject(Object key, Object value) {\n        System.out.println("æ·»å -èªå®ä¹ç¼å­: "+key+"  "+value);\n        cache.put(key, value);\n    }\n\n    /**\n     * ä»ç¼å­ä¸­è·åæå®é®çå¼\n     * @param key\n     */\n    @Override\n    public Object getObject(Object key) {\n        System.out.println("æ¥è¯¢-èªå®ä¹ç¼å­: "+key);\n        return cache.get(key);\n    }\n\n    /**\n     * ä»ç¼å­ä¸­ç§»é¤æå®é®çå¼\n     * @param key\n     */\n    @Override\n    public Object removeObject(Object key) {\n        return cache.remove(key);\n    }\n\n    /**\n     * æ¸ç©ºç¼å­\n     */\n    @Override\n    public void clear() {\n        cache.clear();\n    }\n\n    /**\n     * è·åç¼å­ä¸­é®å¼å¯¹çæ°é\n     * @return\n     */\n    @Override\n    public int getSize() {\n        return cache.size();\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n\n\nå·ä½ç mapper\n\n@Mapper\n@CacheNamespace(implementation = MyCache.class,eviction = FifoCache.class)\npublic interface CacheThreeMapper extends BaseMapper<UserBean> {\n\n    @Select("select * from user")\n    List<UserBean> testAll();\n\n    @Select("select * from user where id = 1")\n    UserBean testOne();\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n> æä»¬è¿å¯ä»¥å¨ mapper æ¥å£ä¸å  @CacheNamespaceRef æ³¨è§£ï¼å½æä»¬å¨ä¸ä¸ª Mapper æ¥å£ä¸­éè¦ä½¿ç¨å¶ä» Mapper æ¥å£æå®ä¹çç¼å­æ¶ï¼å¯ä»¥éè¿ @CacheNamespaceRef æ³¨è§£æ¥å®ç°ãè¯¥æ³¨è§£ç¨äºæå®å¦ä¸ä¸ª Mapper æ¥å£ç Class å¯¹è±¡ï¼è¡¨ç¤ºå½å Mapper æ¥å£éè¦å¼ç¨è¯¥æ¥å£æå®ä¹çç¼å­å½åç©ºé´ã@CacheNamespaceRef (XXXXXMapper.class)',normalizedContent:'# ä¸çº§ç¼å­\n\né¦åéè¦å¨ application.yml ä¸­è¿è¡éç½®\n\nmybatis-plus:\n  # æå®å·ä½xmlè·¯å¾ å¨è·¯å¾\n  mapper-locations: classpath*:/com/fengqianrun/mybatisplus/**/*mapper.xml\n  # è®¾ç½®å®ä½è·¯å¾ä½ç½®\n  type-aliases-package: com.fengqianrun.mybatisplus.bean\n  configuration:\n    # å¼å¯ä¸çº§ç¼å­,é»è®¤æ¯å¼å¯ç\n    local-cache-scope: session\n  globalconfig:\n    # å³é­ banner ææ\n    banner: false\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nå¶æ¬¡å¨æ¥è¯¢æ¹æ³ä¸ä½¿ç¨æ³¨è§£ @transactionalï¼@transactional ä»£è¡¨å°±åä¸ä¸ª sessionï¼æä»¬å¨è¿éé¢éå¤æ§è¡æ¥è¯¢ï¼å°±åªä¼æ¥è¯¢ä¸æ¬¡\n\n@transactional\n@getmapping("/testone")\npublic userbean testone(){\n    userbean userbean = cacheonemapper.testone();\n    userbean = null;\n    userbean = cacheonemapper.testone();\n    return userbean;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# äºçº§ç¼å­\n\né¦åï¼å¨ application.yml éç½®æä»¶ä¸­æ·»å å¦ä¸éç½®ï¼\n\nmybatis-plus:\n  configuration:\n    # å¼å¯äºçº§ç¼å­\n    cache-enabled: true\n\n\n1\n2\n3\n4\n\n\nå¿é¡»å®ç°è¦ç»å¯¹è±¡è¿è¡ serializableï¼ä¾å¦ï¼\n\n@data\n@tablename("user")\npublic class userbean implements serializable {\n    // ...\n}\n\n\n1\n2\n3\n4\n5\n\n\næåï¼éè¦å¨ mapper æ¥å£ä¸­ä½¿ç¨ @cachenamespace ï¼ä½¿ç¨è¯¥æ³¨è§£å¯ä»¥æ¹ä¾¿å°ä¸ºæ¯ä¸ª mapper æ¥å£å®ä¹ç¬ç«çç¼å­ç©ºé´ï¼å¹¶æå®ä¸åçç¼å­å®ç°åç¼å­ç­ç¥ï¼ä»èæ´å¥½å°æ§å¶ç¼å­ææã\n\n@mapper\n@cachenamespace(eviction = fifocache.class)\npublic interface cachetwomapper extends basemapper<userbean> {\n    list<userbean> testall();\n    userbean testone();\n}\n\n\n1\n2\n3\n4\n5\n6\n\n\nä½å¦æ mapper æ¥å£æå¯¹åºç xmlï¼åéè¦å¨ xml æè¿° cacheï¼ä½¿ç¨æ³¨è§£ @cachenamespace å°±ä¼å¤±æï¼ä¸¤ä¸ªä¸èµ·å­å¨å°±ä¼æ¥é\n\n<mapper namespace="com.fengqianrun.mybatisplus.cache2.cachetwomapper">\n    <cache eviction="fifo"/>\n    <select id="testall" resulttype="com.fengqianrun.mybatisplus.bean.userbean">\n        select * from user\n    </select>\n    <select id="testone" resulttype="com.fengqianrun.mybatisplus.bean.userbean">\n        select * from user where id = 1\n    </select>\n</mapper>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\näºçº§ç¼å­é»è®¤æåµä¸æ¯ä½¿ç¨ mybatis èªå¸¦ç perpetualcache å®ç°ï¼å¯ä»¥éè¿éç½®æä»¶ä¸­çå±æ§æ¥è®¾ç½®ç¼å­å®ç°ç±»åå¶ä»åæ°ãå¦å¤ï¼å¨ä½¿ç¨äºçº§ç¼å­æ¶ï¼\néè¦æ³¨æé¿åæ°æ®å¹¶åæ´æ°å¯¼è´èæ°æ®çé®é¢ï¼å¯ä»¥éè¿è®¾ç½®ç¼å­å·æ°æ¶é´ç­æ¹å¼æ¥è§£å³è¿ä¸ªé®é¢ã\n\n\n# èªå®ä¹ç¼å­\n\nå¦æä½ æ¯ä½åºç¨ç¨åºçè¯ï¼ä½¿ç¨ä»¥ä¸çéç½®æ¹å¼æ²¡æé®é¢ï¼ä½å¦æä½ æ¯åå¸å¼æå¾®æå¡ï¼é£ä¹å°±ä¼é ææ°æ®ä¸ä¸è´çé®é¢ï¼æ­¤æ¶æä»¬éè¦åå©å¶ä»ç¼å­ï¼æ¯å¦ redis æ¥ç¼å­æä»¬çæ¥è¯¢æ°æ®ãèªå®ä¹ç¼å­ä¹åªæ¯å¨äºçº§ç¼å­åºç¡ä¸çæ¹é ï¼æä»¥è§ååäºçº§ç¼å­ä¸æ ·ã\n\nå®ç° org.apache.ibatis.cache.cache ç±»\n\npublic class mycache implements cache {\n\n    /**\n     * id ä¼æ¯ mapper æ¥å£çåç§°\n     */\n    private final string id;\n\n    /**\n     * å¯ä»¥æ¿æ¢ä¸º redis\n     */\n    private map<object, object> cache = new concurrenthashmap<object, object>();\n\n    public mycache(string id) {\n        this.id = id;\n    }\n\n    /**\n     * ç¼å­å¯ä¸æ è¯\n     * @return\n     */\n    @override\n    public string getid() {\n        return id;\n    }\n\n    /**\n     * å°é®å¼å¯¹æ¾å¥ç¼å­ä¸­\n     * @param key\n     * @param value\n     */\n    @override\n    public void putobject(object key, object value) {\n        system.out.println("æ·»å -èªå®ä¹ç¼å­: "+key+"  "+value);\n        cache.put(key, value);\n    }\n\n    /**\n     * ä»ç¼å­ä¸­è·åæå®é®çå¼\n     * @param key\n     */\n    @override\n    public object getobject(object key) {\n        system.out.println("æ¥è¯¢-èªå®ä¹ç¼å­: "+key);\n        return cache.get(key);\n    }\n\n    /**\n     * ä»ç¼å­ä¸­ç§»é¤æå®é®çå¼\n     * @param key\n     */\n    @override\n    public object removeobject(object key) {\n        return cache.remove(key);\n    }\n\n    /**\n     * æ¸ç©ºç¼å­\n     */\n    @override\n    public void clear() {\n        cache.clear();\n    }\n\n    /**\n     * è·åç¼å­ä¸­é®å¼å¯¹çæ°é\n     * @return\n     */\n    @override\n    public int getsize() {\n        return cache.size();\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n\n\nå·ä½ç mapper\n\n@mapper\n@cachenamespace(implementation = mycache.class,eviction = fifocache.class)\npublic interface cachethreemapper extends basemapper<userbean> {\n\n    @select("select * from user")\n    list<userbean> testall();\n\n    @select("select * from user where id = 1")\n    userbean testone();\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n> æä»¬è¿å¯ä»¥å¨ mapper æ¥å£ä¸å  @cachenamespaceref æ³¨è§£ï¼å½æä»¬å¨ä¸ä¸ª mapper æ¥å£ä¸­éè¦ä½¿ç¨å¶ä» mapper æ¥å£æå®ä¹çç¼å­æ¶ï¼å¯ä»¥éè¿ @cachenamespaceref æ³¨è§£æ¥å®ç°ãè¯¥æ³¨è§£ç¨äºæå®å¦ä¸ä¸ª mapper æ¥å£ç class å¯¹è±¡ï¼è¡¨ç¤ºå½å mapper æ¥å£éè¦å¼ç¨è¯¥æ¥å£æå®ä¹çç¼å­å½åç©ºé´ã@cachenamespaceref (xxxxxmapper.class)',charsets:{cjk:!0}},{title:"Docker æ¦å¿µãå½ä»¤åDockerfileä»ç»",frontmatter:{title:"Docker æ¦å¿µãå½ä»¤åDockerfileä»ç»",date:"2023-06-25T09:22:36.000Z",permalink:"/docker/400",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/01.%E8%BF%90%E7%BB%B4/40.Docker/400.Docker%20%E6%A6%82%E5%BF%B5%E3%80%81%E5%91%BD%E4%BB%A4%E5%8F%8ADockerfile%E4%BB%8B%E7%BB%8D.html",relativePath:"01.è¿ç»´/40.Docker/400.Docker æ¦å¿µãå½ä»¤åDockerfileä»ç».md",key:"v-7dd6a16f",path:"/docker/400/",headers:[{level:2,title:"1.dockerçæå¿µï¼dockeræ¯ä»ä¹",slug:"_1-dockerçæå¿µ-dockeræ¯ä»ä¹",normalizedTitle:"1.docker çæå¿µï¼docker æ¯ä»ä¹",charIndex:2},{level:2,title:"2.dockeråºç¡å½ä»¤",slug:"_2-dockeråºç¡å½ä»¤",normalizedTitle:"2.docker åºç¡å½ä»¤",charIndex:228},{level:2,title:"3.ä¿®æ¹å·²ç»å­å¨å®¹å¨çç«¯å£",slug:"_3-ä¿®æ¹å·²ç»å­å¨å®¹å¨çç«¯å£",normalizedTitle:"3. ä¿®æ¹å·²ç»å­å¨å®¹å¨çç«¯å£",charIndex:1900},{level:2,title:"4.å¶ä½éåçåºæ¬å½ä»¤",slug:"_4-å¶ä½éåçåºæ¬å½ä»¤",normalizedTitle:"4. å¶ä½éåçåºæ¬å½ä»¤",charIndex:2414},{level:3,title:"æ¦å¿µ",slug:"æ¦å¿µ",normalizedTitle:"æ¦å¿µ",charIndex:2431},{level:3,title:"å½ä»¤",slug:"å½ä»¤",normalizedTitle:"å½ä»¤",charIndex:239},{level:3,title:"å®ææå»ºSpringBootåºç¨",slug:"å®ææå»ºspringbootåºç¨",normalizedTitle:"å®ææå»º springboot åºç¨",charIndex:4504},{level:2,title:"5. Docker ä½¿ç¨é¿éäºä»åºæèªå»ºä»åº",slug:"_5-docker-ä½¿ç¨é¿éäºä»åºæèªå»ºä»åº",normalizedTitle:"5. docker ä½¿ç¨é¿éäºä»åºæèªå»ºä»åº",charIndex:5485},{level:3,title:"é¿éäºä»åº",slug:"é¿éäºä»åº",normalizedTitle:"é¿éäºä»åº",charIndex:5497},{level:3,title:"èªå»ºä»åº",slug:"èªå»ºä»åº",normalizedTitle:"èªå»ºä»åº",charIndex:5503},{level:2,title:"6. ä¸ä¼ DockerHub",slug:"_6-ä¸ä¼ dockerhub",normalizedTitle:"6. ä¸ä¼  dockerhub",charIndex:5889}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"1.dockerçæå¿µï¼dockeræ¯ä»ä¹ 2.dockeråºç¡å½ä»¤ 3.ä¿®æ¹å·²ç»å­å¨å®¹å¨çç«¯å£ 4.å¶ä½éåçåºæ¬å½ä»¤ æ¦å¿µ å½ä»¤ å®ææå»ºSpringBootåºç¨ 5. Docker ä½¿ç¨é¿éäºä»åºæèªå»ºä»åº é¿éäºä»åº èªå»ºä»åº 6. ä¸ä¼ DockerHub",content:'# 1.docker çæå¿µï¼docker æ¯ä»ä¹\n\ndocker åä¸ºä¸ç§æå¿µï¼éå å®¹å¨ ä»åº\néåï¼ç±»ä¼¼äºä¸ä¸ªæ¨¡æ¿ï¼éé¢åå«äºä¸äºåå®¹\nå®¹å¨ï¼å®¹å¨æ¯ä¸ä¸ªéåçå®ä¾ï¼å¦æçè§£éåä¸ºä¸ä¸ª classï¼é£ä¹å®¹å¨å°±è¢«çè§£ä¸ºæ¯ new class (); æ¯éåçå®ä¾\nä»åºï¼å°±æ¯ä¸è½½éåèµæºçå°æ¹ã\ndocker å®¹å¨ä¸æ¯èææºï¼å®¹å¨å¯ä»¥è¯´æ¯ä¸ä¸ªè¿ç¨ï¼æä»¬å¯ä»¥ç»å®¹å¨åéåå­ãå°±å windows å®è£äºèææºï¼å¯ä»¥ç»èææºåéåå­å¤§å°ï¼ç£çç©ºé´ã\n\n\n# 2.docker åºç¡å½ä»¤\n\næç´¢éåï¼ä» maven ä»åºä¸­æ¥è¯¢\n\ndocker search mysql\n\n\n1\n\n\nååºå½åç³»ç»å­å¨çéå\n\ndocker images\n\n\n1\n\n\nç»éåæ´æ¢åç§°\n\ndocker tag imageId repository:tag\n\n\n1\n\n\nå é¤éå (-f å¼ºå¶) å¿é¡»ç¥ééåç imageId\n\ndocker rmi -f imageId\n\n\n1\n\n\nrepository:tag (éåçä»åºæºï¼éåçæ ç­¾) æå\n\ndocker pull repository:tag\n\n\n1\n\n\nè¿è¡ä¸ä¸ªå®¹å¨\n\ndocker run -it  -d --name "xxx" -p port1:port2 -p port3:port4 -v home/data:/data repository:tag \n\n\n1\n\n * runï¼è¿è¡å®¹å¨å½ä»¤\n * -itï¼è¿è¡åç´æ¥ä¸ç»ç«¯äº¤äºï¼æ¯å¦è¿è¡ jar æå¶ä»åºç¨çæ¶å æ¥çä»ä»¬çå¯å¨ä¿¡æ¯\n * -dï¼åå°è¿è¡\n * -p port1:port2ï¼ç«¯å£æ å° port1 (å®¿ä¸»æº) port2 (å®¹å¨) å®¹å¨çç«¯å£æ¯å¯ä»¥éå¤çï¼æä»¥å®¹å¨åç©çæºçç«¯å£å¯ä»¥ä¸è´ãrabbitmq æä¸¤ä¸ªç«¯å£ 5672 å 15672 æä»¥ä¼ç¨å°å -p repository:tag -> å¦æä¸æå® tagï¼é»è®¤ä½¿ç¨ææ°ç\n * --name "xxx"ï¼æå®å®¹å¨åç§°\n * -v /home/data:/dataï¼/home/data (å®¿ä¸»æº):/data (å®¹å¨) æ¬å°å°ååå®¹å¨å°åäº§çæè½½å³ç³»ï¼ å¨å®¹å¨åé¨è¯¥ç®å½ä¸ï¼æèå®¿ä¸»æºåé¨è¯¥ç®å½ä¸ï¼ä¿®æ¹æä»¶ãåå»ºæä»¶ï¼å½¼æ­¤é½ä¼åæ­¥ä¿®æ¹\n * --restart=alwaysï¼æ»æ¯è¿è¡ï¼å½éå¯ docker åä¼èªå¨è¿è¡èµ·æ¥\n * repository:tagï¼æå®è¿è¡éåçåç§°\n\næ¥çè¿è¡çå®¹å¨\n\ndocker ps \n\n\n1\n\n\næ¥çææç¶æçå®¹å¨\n\ndocker ps -a\n\n\n1\n\n\næ£æ¥å®¹å¨åé¨ä¿¡æ¯\n\ndocker inspect å®¹å¨åç§°|å®¹å¨å12ä½id\n\n\n1\n\n\nåæ­¢å®¹å¨\n\ndocker stop å®¹å¨åç§°|å®¹å¨å12ä½id\n\n\n1\n\n\nå¼å¯å®¹å¨è¿è¡\n\ndocker start å®¹å¨åç§°\n\n\n1\n\n\nå é¤å®¹å¨ä¹åå¿é¡»ååæ­¢å®¹å¨è¿è¡\n\ndocker rm å®¹å¨åç§°\n\n\n1\n\n\næ¥çå®¹å¨æ¥å¿\n\ndokcer logs -f å®¹å¨id\n\n\n1\n\n\nè¿å¥å®¹å¨åé¨\n\ndocker exec -it mysql bash#  è¿å¥mysqlåé¨\nmysql -uroot -p123456#  ç»å½mysqlæå¡ æ³¨æè¿émysql -uroot -p123456 æ¯è¿èµ·æ¥ç\n\n\n1\n2\n\n\næä¸ä¸ªå®¹å¨å¶ä½ä¸ºä¸ä¸ªæ°çéå\n\ndocker commit \n -m="æäº¤ä¿¡æ¯" \n -a="ä½è" \n å®¹å¨id\n èªå®ä¹éååç§°:[èªå®ä¹æ ç­¾å]\n\n\n1\n2\n3\n4\n5\n\n\næ¥çå®¹å¨çä¿¡æ¯\n\ndocker inspect å®¹å¨ID\n\n\n1\n\n\nå¯¹äºæ²¡æç§æä»åºçè¦ä½¿æå¡å¨é´å±äº«ä¸ä¸ª docker éåï¼å¯ä»¥åææå°æºå¨ä¸çè¿è¡åå¯¼åºï¼ç¶åå¶ä»æå¡å¨å¨å¯¼å¥å³å¯\n\n# å¯¼åº\ndocker save \n éåID\n -o /æ¬å°è·¯å¾/æä»¶.tar  è¿å¥è¯ææå¯¼åºå°ä½ å®¿ä¸»æºçä¸ä¸ªå°åï¼æä»¶åéä¾¿èµ·åç¼ä¸ºtarï¼è·¯å¾è¦æåå»ºå¥½\n\n# å¯¼å¥\ndocker load < /ä¸ä¼ æä»¶çå°å/å¯¼åºçæä»¶å.tar\n\n# æ¥çå¯¼å¥çéå\ndocker images\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nå®¹å¨ä¹é´å±äº«ï¼å®¹å¨ 2 å±ç¨ å®¹å¨ 1\n\ndocker tun -it \n  -- name å®¹å¨2\n  --volumes-from å®¹å¨1(å®¹å¨1å¿é¡»å·²å¯å¨)\n  éååç§°\n\n\n1\n2\n3\n4\n\n\næ¥çå¶ä½éåæ¶å å å¶ä»éåçæä½\n\ndocker history éåID\n\n\n1\n\n\n\n# 3. ä¿®æ¹å·²ç»å­å¨å®¹å¨çç«¯å£\n\n1ãåæ­¢å®¹å¨ (docker stop d00254ce3af7)\n2ãåæ­¢ docker æå¡ (systemctl stop docker)\n3ãä¿®æ¹è¿ä¸ªå®¹å¨ç hostconfig.json æä»¶ä¸­çç«¯å£ï¼åå¸æäººæå°ï¼å¦æ config.v2.json éé¢ä¹è®°å½äºç«¯å£ï¼ä¹è¦ä¿®æ¹ï¼\n\ncd /var/lib/docker/containers/d00254ce3af7*    # è¿éæ¯CONTAINER ID\n\nvim hostconfig.json\nå¦æä¹åæ²¡æç«¯å£æ å°, åºè¯¥æè¿æ ·çä¸æ®µ:\n"PortBindings":{}\n\nå¢å ä¸ä¸ªæ å°, è¿æ ·å:\n"PortBindings":{"8080/tcp":[{"HostIp":"","HostPort":"60000"}]}\nåä¸ä¸ªæ°å­æ¯å®¹å¨ç«¯å£, åä¸ä¸ªæ¯å®¿ä¸»æºç«¯å£ãå°å®¿ä¸»æºç60000ç«¯å£æ å°å°å®¹å¨ç8080ç«¯å£\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n4ãå¯å¨ docker æå¡ (systemctl start docker)\n5ãå¯å¨å®¹å¨ (docker start d00254ce3af7)\n\n\n# 4. å¶ä½éåçåºæ¬å½ä»¤\n\n\n# æ¦å¿µ\n\n\n\nDockerfile é»è®¤ä¼æå½åæå¨æä»¶çä¸ä¸é®é½åéç» Docker Serverï¼æç»å¶ä½æä¸ä¸ªéåï¼æ¯å¦ä½ å¾ DockerFile å¨ linux çæ ¹ (/) ç®å½ï¼é£ä¹å°±ä¼éå½æ ¹ç®å½ä¸çæææä»¶ï¼åéå° Docker Server å¶ä½éåï¼æä»¥å¶ä½ Dockerfile æå¥½æ¯å¨æä¸ä¸ªå°æ¹æ°å»ºæä»¶å¤¹å»å¶ä½ãå¶ä½è¿ç¨é½æ¯ä¾èµäºä¸ä¸ªä¸ªçéåï¼æä»¥ä¼æç¼å­å éä¸æ¬¡å¶ä½ï¼å¦æä¸éè¦ä¾èµç¼å­ å¯ä»¥å¨å½ä»¤å¶ä½çæåé¢å  --no-cache\n\n.dockerIgnore æ¯ç¨æ¥å¿½ç¥åªäºæä»¶æç®å½ä¸åä¸å°å¶ä½éåä¸­\n\nå¶ä½å½ä»¤ï¼ docker build -f /home/docker/nginx/Dockerfile . -f ç¨æ¥æå® Dockerfile æå¨çä½ç½®ï¼ä¸è¬ä¼ä½¿ç¨ docker build -t nginx2 . -t å¨å½åç®å½å¶ä½éåï¼ nginx2 éåçåå­ï¼ . ä»£è¡¨ Dockerfile å°±å¨å½åç®å½\n\n\n# å½ä»¤\n\næä»¤            æè¿°\nFROM          æå»ºçæ°éåæ¯åºäºåªä¸ªéåãä¾å¦ï¼FROM centos:6ï¼ç¬¬ä¸ä¸ªæä»¤å¿é¡»æ¯ FROM\nMAINTAINER    éåç»´æ¤èå§åæé®ç®±å°åãä¾å¦ï¼MAINTAINER Mr.chen\nRUN           æå»ºéåæ¶è¿è¡ç Shell å½ä»¤ãä¾å¦ï¼RUN ["yum","install","httpd"] ä¹å¯ä»¥ç´æ¥ RUN\n              yum install httpd æè RUN yum install httpd\nCMD           å®¹å¨è¿è¡æ¶æ§è¡çShellå½ä»¤ ï¼ç¼åç dockerfile ä¸­å¤ä¸ª cmd é½ä¼æ§è¡ï¼ä½é»è®¤ä¿çæåä¸ä¸ªå½ä»¤ï¼å¦æ\n              docker run è¿è¡æ¶ä¼ é commandï¼ä¼è¦ç cmd çä¿çå½ä»¤ï¼ï¼å¯å¨å®¹å¨ä¼æ§è¡ CMD\n              çä¿çå½ä»¤ãä¾å¦ï¼CMD ["-c","/start.sh"] ä¹å¯ä»¥æ¯ CMD echo \'hello docker\'\nEXPOSE        å£°æå®¹å¨è¿è¡çæå¡ç«¯å£ãä¾å¦ï¼EXPOSE 80 443ï¼ä½æ¯é»è®¤é½æ¯ tcp åè®®ï¼å¦ææ³è¦æ´æ¼ udp åè®®ï¼åæ¯\n              EXPOSE 80/udp ï¼æ³¨æåªè½æ¯ tcp æ udp\nENV           è®¾ç½®å®¹å¨åçç¯å¢åéãä¾å¦ï¼ENV MYSQL_ROOT_PASSWORD 123456\nADD           å°å®¿ä¸»æºç®å½ä¸çæä»¶æ·è´è¿éåä¸ ADD å½ä»¤ä¼èªå¨å¤ç URL åè§£å tar å ä¾å¦ï¼ADD\n              ["src","dest"] æè ADD https://xxx.com/html.tar.gz\n              /var/www/html æèï¼ADD html.tar.gz/var/www/html\nCOPY          æ·è´æä»¶æç®å½å°éåï¼ä¸è½èªå¨è§£åç¼©ï¼ãä¾å¦ï¼COPY ./start.sh/start.sh\nENTRYPOINT    è¿è¡å®¹å¨æ¶æ§è¡ç Shell å½ä»¤ï¼ä¸è½è¢«è¿è¡æ¶ä¼ éçåæ°è¦ç)ï¼æ¯ CMD çç®ä¸äºãä¾å¦ï¼ENTRYPOINT\n              ["/bin/bash","-c","/start.sh"] æè ENTRYPOINT /bin/bash -c\n              "/start.sh"\nVOLUME        æå®å®¹å¨æè½½ç¹å°å®¿ä¸»æºèªå¨çæçç®å½æå¶ä»å®¹å¨ ä¾å¦ï¼VOLUME ["/var/lib/mysql"]\nUSER          ä¸º RUNï¼CMD å ENTRYPOINT æ§è¡å½ä»¤æå®è¿è¡ç¨æ· ä¾å¦ï¼USER Mr_chen\nWORKDIR       æå®å¨åå»ºå®¹å¨åï¼ç»ç«¯é»è®¤ç»å½è¿æ¥çå·¥ä½ç®å½ï¼ä¸ä¸ªè½èç¹ ä¾å¦ï¼WORKDIR /dataï¼ è¯¥å½ä»¤ä¹ä¼å½±å\n              ENTRYPOINT è¿è¡ä¾å¦jaråæ¶çä½ç½®ï¼é»è®¤ä¼èªå¸¦WORKDIRçè·¯å¾\nHEALTHCHECK   å¥åº·æ£æ¥ãä¾å¦ï¼HEALTHCHECK --interval=5m --timeout=3s --retries=3\n              CMD curl -f http://localhost/ exit 1\nARG           å¨æå»ºéåæ¶æå®ä¸äºåæ°ãä¾å¦ï¼ARG user\nONBUILD       å½éåè¢«ç»§æ¿åè§¦åå¨ ONBUILD éåçå½ä»¤ï¼ç»§æ¿èç´æ¥ä½¿ç¨ FROM å½ä»¤ç»§æ¿å½åéåçåç§°å³å¯ï¼å¨ build\n              çæ¶åè§¦å\n\næç¤º\n\nä» docker17.05 çæ¬å¼å§ï¼dockerfile ä¸­åè®¸ä½¿ç¨å¤ä¸ª FROM æä»¤\n\n\n# å®ææå»º SpringBoot åºç¨\n\nå¨åºç¨çæ ¹ç®å½ä¸­åå»º Dockerfileï¼å·ä½æå»ºä¹åä¸å®è¦äºè§£ SpringBoot éç½®æä»¶çå è½½è·¯å¾ä¼åçº§ï¼è¿éçµæ¯å°æä»¬å¨ä¿®æ¹éç½®æä»¶æ¶ï¼å¯ä»¥æå®æè½½å¤é¨æä»¶ä¿®æ¹ååæ­¥å°å®¹å¨ï¼å¦åï¼æ¯æ¹ä¸æ¬¡é½è¦éæ°å¶ä½éå\n\næç¤º\n\nSpringBoot éç½®æä»¶çå è½½è·¯å¾ä¼åçº§ï¼\nå·¥ç¨æ ¹ç®å½:./config/\nå·¥ç¨æ ¹ç®å½ï¼./\nclasspath:/config/\nclasspath:/\n\n# åºç¡éå\nFROM openjdk:8-jre-slim\n# ä½è\nMAINTAINER biguncle\n# éç½®\nENV PARAMS=""\nEXPOSE 8081\n# æ¶åº\nENV TZ=Asia/Shanghai\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone\n# æ·»å åºç¨\nADD ./target/tool-boot-0.0.1-SNAPSHOT.jar /server/tool-boot.jar\n# åå»ºä¸ä¸ªå·¥ä½ç®å½ï¼å¹¶å°å¤é¨éç½®æä»¶å¤å¶å°éåä¸­\nRUN mkdir /server/config\nCOPY /src/main/resources/application.yml /app/config/\nWORKDIR /server\n## å¨éåè¿è¡ä¸ºå®¹å¨åæ§è¡çå½ä»¤\nENTRYPOINT java -jar -Dpolyglot.engine.WarnInterpreterOnly=false tool-boot.jar  $PARAMS\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\næ§è¡å½ä»¤\n\n#build æå»ºåºç¨çéå\ndocker build -f ./Dockerfile -t 875730567/easy-manager-tool .\n\n\n1\n2\n\n\nè¿è¡å®¹å¨\n\n#build æå»ºåºç¨çéå\ndocker run -p 8081:8081 --name -v /opt:/server/config easy-manager-tool -d 875730567/easy-manager-tool\n\n\n1\n2\n\n\n\n# 5. Docker ä½¿ç¨é¿éäºä»åºæèªå»ºä»åº\n\n\n# é¿éäºä»åº\n\n 1. åç»å½é¿éäºéåæå¡ï¼å°å\n 2. åå»ºä¸ªäººæä¼ä¸å®ä¾\n 3. åå»ºéåä»åºï¼è¿ä¸ªä»åºå¯ä»¥å»ºå¤ä¸ªï¼çèªå·±\n 4. åå»ºå®æ¯ä¹åå¯ä»¥æ ¹æ®é¿éäºæä¾çæ­¥éª¤è¿è¡æ¨éææå\n\n\n\nå¦ææä»¬åªæ¯æ³ç¨é¿éäºçéåå éå¨ï¼å¯ä»¥æ¾å°å¦ä¸å¾æä½å³å¯ã\n\n\n\n\n# èªå»ºä»åº\n\n 1. æåä»åºéå\n\ndocker pull registry\n\n\n1\n\n 2. è¿è¡éå\n\ndocker run -d -v /edc/images/registry:/var/lib/registry \n-p 5000:5000 \n--restart=always \n--name xdp-registry registry\n\n\n1\n2\n3\n4\n\n 3. æ¥çéåä¿¡æ¯\n\ncurl http://127.0.0.1:5000/v2/_catalog\n\n\n1\n\n\n\n# 6. ä¸ä¼  DockerHub\n\n 1. é¦åä¿è¯ä½ ç»å½\n\ndocker login --username=xxxx\n\n\n1\n\n 2. æå»ºéå\n\ndocker build -t è´¦å·/åºç¨åç§° -f Dockerfile .\n\n\n1\n\n 3. å¨ DockerHub æ°å»ºä»åº https://hub.docker.com/\n 4. ç»éåæä¸ä¸ª tag æ ç­¾\n\ndocker tag è´¦å·/åºç¨åç§° è´¦å·/æ ç­¾åç§°:æ ç­¾çæ¬\n\n\n1\n\n 5. ä¸ä¼ \n\ndocker push è´¦å·/æ ç­¾åç§°:æ ç­¾çæ¬\n\n\n1\n',normalizedContent:'# 1.docker çæå¿µï¼docker æ¯ä»ä¹\n\ndocker åä¸ºä¸ç§æå¿µï¼éå å®¹å¨ ä»åº\néåï¼ç±»ä¼¼äºä¸ä¸ªæ¨¡æ¿ï¼éé¢åå«äºä¸äºåå®¹\nå®¹å¨ï¼å®¹å¨æ¯ä¸ä¸ªéåçå®ä¾ï¼å¦æçè§£éåä¸ºä¸ä¸ª classï¼é£ä¹å®¹å¨å°±è¢«çè§£ä¸ºæ¯ new class (); æ¯éåçå®ä¾\nä»åºï¼å°±æ¯ä¸è½½éåèµæºçå°æ¹ã\ndocker å®¹å¨ä¸æ¯èææºï¼å®¹å¨å¯ä»¥è¯´æ¯ä¸ä¸ªè¿ç¨ï¼æä»¬å¯ä»¥ç»å®¹å¨åéåå­ãå°±å windows å®è£äºèææºï¼å¯ä»¥ç»èææºåéåå­å¤§å°ï¼ç£çç©ºé´ã\n\n\n# 2.docker åºç¡å½ä»¤\n\næç´¢éåï¼ä» maven ä»åºä¸­æ¥è¯¢\n\ndocker search mysql\n\n\n1\n\n\nååºå½åç³»ç»å­å¨çéå\n\ndocker images\n\n\n1\n\n\nç»éåæ´æ¢åç§°\n\ndocker tag imageid repository:tag\n\n\n1\n\n\nå é¤éå (-f å¼ºå¶) å¿é¡»ç¥ééåç imageid\n\ndocker rmi -f imageid\n\n\n1\n\n\nrepository:tag (éåçä»åºæºï¼éåçæ ç­¾) æå\n\ndocker pull repository:tag\n\n\n1\n\n\nè¿è¡ä¸ä¸ªå®¹å¨\n\ndocker run -it  -d --name "xxx" -p port1:port2 -p port3:port4 -v home/data:/data repository:tag \n\n\n1\n\n * runï¼è¿è¡å®¹å¨å½ä»¤\n * -itï¼è¿è¡åç´æ¥ä¸ç»ç«¯äº¤äºï¼æ¯å¦è¿è¡ jar æå¶ä»åºç¨çæ¶å æ¥çä»ä»¬çå¯å¨ä¿¡æ¯\n * -dï¼åå°è¿è¡\n * -p port1:port2ï¼ç«¯å£æ å° port1 (å®¿ä¸»æº) port2 (å®¹å¨) å®¹å¨çç«¯å£æ¯å¯ä»¥éå¤çï¼æä»¥å®¹å¨åç©çæºçç«¯å£å¯ä»¥ä¸è´ãrabbitmq æä¸¤ä¸ªç«¯å£ 5672 å 15672 æä»¥ä¼ç¨å°å -p repository:tag -> å¦æä¸æå® tagï¼é»è®¤ä½¿ç¨ææ°ç\n * --name "xxx"ï¼æå®å®¹å¨åç§°\n * -v /home/data:/dataï¼/home/data (å®¿ä¸»æº):/data (å®¹å¨) æ¬å°å°ååå®¹å¨å°åäº§çæè½½å³ç³»ï¼ å¨å®¹å¨åé¨è¯¥ç®å½ä¸ï¼æèå®¿ä¸»æºåé¨è¯¥ç®å½ä¸ï¼ä¿®æ¹æä»¶ãåå»ºæä»¶ï¼å½¼æ­¤é½ä¼åæ­¥ä¿®æ¹\n * --restart=alwaysï¼æ»æ¯è¿è¡ï¼å½éå¯ docker åä¼èªå¨è¿è¡èµ·æ¥\n * repository:tagï¼æå®è¿è¡éåçåç§°\n\næ¥çè¿è¡çå®¹å¨\n\ndocker ps \n\n\n1\n\n\næ¥çææç¶æçå®¹å¨\n\ndocker ps -a\n\n\n1\n\n\næ£æ¥å®¹å¨åé¨ä¿¡æ¯\n\ndocker inspect å®¹å¨åç§°|å®¹å¨å12ä½id\n\n\n1\n\n\nåæ­¢å®¹å¨\n\ndocker stop å®¹å¨åç§°|å®¹å¨å12ä½id\n\n\n1\n\n\nå¼å¯å®¹å¨è¿è¡\n\ndocker start å®¹å¨åç§°\n\n\n1\n\n\nå é¤å®¹å¨ä¹åå¿é¡»ååæ­¢å®¹å¨è¿è¡\n\ndocker rm å®¹å¨åç§°\n\n\n1\n\n\næ¥çå®¹å¨æ¥å¿\n\ndokcer logs -f å®¹å¨id\n\n\n1\n\n\nè¿å¥å®¹å¨åé¨\n\ndocker exec -it mysql bash#  è¿å¥mysqlåé¨\nmysql -uroot -p123456#  ç»å½mysqlæå¡ æ³¨æè¿émysql -uroot -p123456 æ¯è¿èµ·æ¥ç\n\n\n1\n2\n\n\næä¸ä¸ªå®¹å¨å¶ä½ä¸ºä¸ä¸ªæ°çéå\n\ndocker commit \n -m="æäº¤ä¿¡æ¯" \n -a="ä½è" \n å®¹å¨id\n èªå®ä¹éååç§°:[èªå®ä¹æ ç­¾å]\n\n\n1\n2\n3\n4\n5\n\n\næ¥çå®¹å¨çä¿¡æ¯\n\ndocker inspect å®¹å¨id\n\n\n1\n\n\nå¯¹äºæ²¡æç§æä»åºçè¦ä½¿æå¡å¨é´å±äº«ä¸ä¸ª docker éåï¼å¯ä»¥åææå°æºå¨ä¸çè¿è¡åå¯¼åºï¼ç¶åå¶ä»æå¡å¨å¨å¯¼å¥å³å¯\n\n# å¯¼åº\ndocker save \n éåid\n -o /æ¬å°è·¯å¾/æä»¶.tar  è¿å¥è¯ææå¯¼åºå°ä½ å®¿ä¸»æºçä¸ä¸ªå°åï¼æä»¶åéä¾¿èµ·åç¼ä¸ºtarï¼è·¯å¾è¦æåå»ºå¥½\n\n# å¯¼å¥\ndocker load < /ä¸ä¼ æä»¶çå°å/å¯¼åºçæä»¶å.tar\n\n# æ¥çå¯¼å¥çéå\ndocker images\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\nå®¹å¨ä¹é´å±äº«ï¼å®¹å¨ 2 å±ç¨ å®¹å¨ 1\n\ndocker tun -it \n  -- name å®¹å¨2\n  --volumes-from å®¹å¨1(å®¹å¨1å¿é¡»å·²å¯å¨)\n  éååç§°\n\n\n1\n2\n3\n4\n\n\næ¥çå¶ä½éåæ¶å å å¶ä»éåçæä½\n\ndocker history éåid\n\n\n1\n\n\n\n# 3. ä¿®æ¹å·²ç»å­å¨å®¹å¨çç«¯å£\n\n1ãåæ­¢å®¹å¨ (docker stop d00254ce3af7)\n2ãåæ­¢ docker æå¡ (systemctl stop docker)\n3ãä¿®æ¹è¿ä¸ªå®¹å¨ç hostconfig.json æä»¶ä¸­çç«¯å£ï¼åå¸æäººæå°ï¼å¦æ config.v2.json éé¢ä¹è®°å½äºç«¯å£ï¼ä¹è¦ä¿®æ¹ï¼\n\ncd /var/lib/docker/containers/d00254ce3af7*    # è¿éæ¯container id\n\nvim hostconfig.json\nå¦æä¹åæ²¡æç«¯å£æ å°, åºè¯¥æè¿æ ·çä¸æ®µ:\n"portbindings":{}\n\nå¢å ä¸ä¸ªæ å°, è¿æ ·å:\n"portbindings":{"8080/tcp":[{"hostip":"","hostport":"60000"}]}\nåä¸ä¸ªæ°å­æ¯å®¹å¨ç«¯å£, åä¸ä¸ªæ¯å®¿ä¸»æºç«¯å£ãå°å®¿ä¸»æºç60000ç«¯å£æ å°å°å®¹å¨ç8080ç«¯å£\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n4ãå¯å¨ docker æå¡ (systemctl start docker)\n5ãå¯å¨å®¹å¨ (docker start d00254ce3af7)\n\n\n# 4. å¶ä½éåçåºæ¬å½ä»¤\n\n\n# æ¦å¿µ\n\n\n\ndockerfile é»è®¤ä¼æå½åæå¨æä»¶çä¸ä¸é®é½åéç» docker serverï¼æç»å¶ä½æä¸ä¸ªéåï¼æ¯å¦ä½ å¾ dockerfile å¨ linux çæ ¹ (/) ç®å½ï¼é£ä¹å°±ä¼éå½æ ¹ç®å½ä¸çæææä»¶ï¼åéå° docker server å¶ä½éåï¼æä»¥å¶ä½ dockerfile æå¥½æ¯å¨æä¸ä¸ªå°æ¹æ°å»ºæä»¶å¤¹å»å¶ä½ãå¶ä½è¿ç¨é½æ¯ä¾èµäºä¸ä¸ªä¸ªçéåï¼æä»¥ä¼æç¼å­å éä¸æ¬¡å¶ä½ï¼å¦æä¸éè¦ä¾èµç¼å­ å¯ä»¥å¨å½ä»¤å¶ä½çæåé¢å  --no-cache\n\n.dockerignore æ¯ç¨æ¥å¿½ç¥åªäºæä»¶æç®å½ä¸åä¸å°å¶ä½éåä¸­\n\nå¶ä½å½ä»¤ï¼ docker build -f /home/docker/nginx/dockerfile . -f ç¨æ¥æå® dockerfile æå¨çä½ç½®ï¼ä¸è¬ä¼ä½¿ç¨ docker build -t nginx2 . -t å¨å½åç®å½å¶ä½éåï¼ nginx2 éåçåå­ï¼ . ä»£è¡¨ dockerfile å°±å¨å½åç®å½\n\n\n# å½ä»¤\n\næä»¤            æè¿°\nfrom          æå»ºçæ°éåæ¯åºäºåªä¸ªéåãä¾å¦ï¼from centos:6ï¼ç¬¬ä¸ä¸ªæä»¤å¿é¡»æ¯ from\nmaintainer    éåç»´æ¤èå§åæé®ç®±å°åãä¾å¦ï¼maintainer mr.chen\nrun           æå»ºéåæ¶è¿è¡ç shell å½ä»¤ãä¾å¦ï¼run ["yum","install","httpd"] ä¹å¯ä»¥ç´æ¥ run\n              yum install httpd æè run yum install httpd\ncmd           å®¹å¨è¿è¡æ¶æ§è¡çshellå½ä»¤ ï¼ç¼åç dockerfile ä¸­å¤ä¸ª cmd é½ä¼æ§è¡ï¼ä½é»è®¤ä¿çæåä¸ä¸ªå½ä»¤ï¼å¦æ\n              docker run è¿è¡æ¶ä¼ é commandï¼ä¼è¦ç cmd çä¿çå½ä»¤ï¼ï¼å¯å¨å®¹å¨ä¼æ§è¡ cmd\n              çä¿çå½ä»¤ãä¾å¦ï¼cmd ["-c","/start.sh"] ä¹å¯ä»¥æ¯ cmd echo \'hello docker\'\nexpose        å£°æå®¹å¨è¿è¡çæå¡ç«¯å£ãä¾å¦ï¼expose 80 443ï¼ä½æ¯é»è®¤é½æ¯ tcp åè®®ï¼å¦ææ³è¦æ´æ¼ udp åè®®ï¼åæ¯\n              expose 80/udp ï¼æ³¨æåªè½æ¯ tcp æ udp\nenv           è®¾ç½®å®¹å¨åçç¯å¢åéãä¾å¦ï¼env mysql_root_password 123456\nadd           å°å®¿ä¸»æºç®å½ä¸çæä»¶æ·è´è¿éåä¸ add å½ä»¤ä¼èªå¨å¤ç url åè§£å tar å ä¾å¦ï¼add\n              ["src","dest"] æè add https://xxx.com/html.tar.gz\n              /var/www/html æèï¼add html.tar.gz/var/www/html\ncopy          æ·è´æä»¶æç®å½å°éåï¼ä¸è½èªå¨è§£åç¼©ï¼ãä¾å¦ï¼copy ./start.sh/start.sh\nentrypoint    è¿è¡å®¹å¨æ¶æ§è¡ç shell å½ä»¤ï¼ä¸è½è¢«è¿è¡æ¶ä¼ éçåæ°è¦ç)ï¼æ¯ cmd çç®ä¸äºãä¾å¦ï¼entrypoint\n              ["/bin/bash","-c","/start.sh"] æè entrypoint /bin/bash -c\n              "/start.sh"\nvolume        æå®å®¹å¨æè½½ç¹å°å®¿ä¸»æºèªå¨çæçç®å½æå¶ä»å®¹å¨ ä¾å¦ï¼volume ["/var/lib/mysql"]\nuser          ä¸º runï¼cmd å entrypoint æ§è¡å½ä»¤æå®è¿è¡ç¨æ· ä¾å¦ï¼user mr_chen\nworkdir       æå®å¨åå»ºå®¹å¨åï¼ç»ç«¯é»è®¤ç»å½è¿æ¥çå·¥ä½ç®å½ï¼ä¸ä¸ªè½èç¹ ä¾å¦ï¼workdir /dataï¼ è¯¥å½ä»¤ä¹ä¼å½±å\n              entrypoint è¿è¡ä¾å¦jaråæ¶çä½ç½®ï¼é»è®¤ä¼èªå¸¦workdirçè·¯å¾\nhealthcheck   å¥åº·æ£æ¥ãä¾å¦ï¼healthcheck --interval=5m --timeout=3s --retries=3\n              cmd curl -f http://localhost/ exit 1\narg           å¨æå»ºéåæ¶æå®ä¸äºåæ°ãä¾å¦ï¼arg user\nonbuild       å½éåè¢«ç»§æ¿åè§¦åå¨ onbuild éåçå½ä»¤ï¼ç»§æ¿èç´æ¥ä½¿ç¨ from å½ä»¤ç»§æ¿å½åéåçåç§°å³å¯ï¼å¨ build\n              çæ¶åè§¦å\n\næç¤º\n\nä» docker17.05 çæ¬å¼å§ï¼dockerfile ä¸­åè®¸ä½¿ç¨å¤ä¸ª from æä»¤\n\n\n# å®ææå»º springboot åºç¨\n\nå¨åºç¨çæ ¹ç®å½ä¸­åå»º dockerfileï¼å·ä½æå»ºä¹åä¸å®è¦äºè§£ springboot éç½®æä»¶çå è½½è·¯å¾ä¼åçº§ï¼è¿éçµæ¯å°æä»¬å¨ä¿®æ¹éç½®æä»¶æ¶ï¼å¯ä»¥æå®æè½½å¤é¨æä»¶ä¿®æ¹ååæ­¥å°å®¹å¨ï¼å¦åï¼æ¯æ¹ä¸æ¬¡é½è¦éæ°å¶ä½éå\n\næç¤º\n\nspringboot éç½®æä»¶çå è½½è·¯å¾ä¼åçº§ï¼\nå·¥ç¨æ ¹ç®å½:./config/\nå·¥ç¨æ ¹ç®å½ï¼./\nclasspath:/config/\nclasspath:/\n\n# åºç¡éå\nfrom openjdk:8-jre-slim\n# ä½è\nmaintainer biguncle\n# éç½®\nenv params=""\nexpose 8081\n# æ¶åº\nenv tz=asia/shanghai\nrun ln -snf /usr/share/zoneinfo/$tz /etc/localtime && echo $tz > /etc/timezone\n# æ·»å åºç¨\nadd ./target/tool-boot-0.0.1-snapshot.jar /server/tool-boot.jar\n# åå»ºä¸ä¸ªå·¥ä½ç®å½ï¼å¹¶å°å¤é¨éç½®æä»¶å¤å¶å°éåä¸­\nrun mkdir /server/config\ncopy /src/main/resources/application.yml /app/config/\nworkdir /server\n## å¨éåè¿è¡ä¸ºå®¹å¨åæ§è¡çå½ä»¤\nentrypoint java -jar -dpolyglot.engine.warninterpreteronly=false tool-boot.jar  $params\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\næ§è¡å½ä»¤\n\n#build æå»ºåºç¨çéå\ndocker build -f ./dockerfile -t 875730567/easy-manager-tool .\n\n\n1\n2\n\n\nè¿è¡å®¹å¨\n\n#build æå»ºåºç¨çéå\ndocker run -p 8081:8081 --name -v /opt:/server/config easy-manager-tool -d 875730567/easy-manager-tool\n\n\n1\n2\n\n\n\n# 5. docker ä½¿ç¨é¿éäºä»åºæèªå»ºä»åº\n\n\n# é¿éäºä»åº\n\n 1. åç»å½é¿éäºéåæå¡ï¼å°å\n 2. åå»ºä¸ªäººæä¼ä¸å®ä¾\n 3. åå»ºéåä»åºï¼è¿ä¸ªä»åºå¯ä»¥å»ºå¤ä¸ªï¼çèªå·±\n 4. åå»ºå®æ¯ä¹åå¯ä»¥æ ¹æ®é¿éäºæä¾çæ­¥éª¤è¿è¡æ¨éææå\n\n\n\nå¦ææä»¬åªæ¯æ³ç¨é¿éäºçéåå éå¨ï¼å¯ä»¥æ¾å°å¦ä¸å¾æä½å³å¯ã\n\n\n\n\n# èªå»ºä»åº\n\n 1. æåä»åºéå\n\ndocker pull registry\n\n\n1\n\n 2. è¿è¡éå\n\ndocker run -d -v /edc/images/registry:/var/lib/registry \n-p 5000:5000 \n--restart=always \n--name xdp-registry registry\n\n\n1\n2\n3\n4\n\n 3. æ¥çéåä¿¡æ¯\n\ncurl http://127.0.0.1:5000/v2/_catalog\n\n\n1\n\n\n\n# 6. ä¸ä¼  dockerhub\n\n 1. é¦åä¿è¯ä½ ç»å½\n\ndocker login --username=xxxx\n\n\n1\n\n 2. æå»ºéå\n\ndocker build -t è´¦å·/åºç¨åç§° -f dockerfile .\n\n\n1\n\n 3. å¨ dockerhub æ°å»ºä»åº https://hub.docker.com/\n 4. ç»éåæä¸ä¸ª tag æ ç­¾\n\ndocker tag è´¦å·/åºç¨åç§° è´¦å·/æ ç­¾åç§°:æ ç­¾çæ¬\n\n\n1\n\n 5. ä¸ä¼ \n\ndocker push è´¦å·/æ ç­¾åç§°:æ ç­¾çæ¬\n\n\n1\n',charsets:{cjk:!0}},{title:"Docker-Compose å½ä»¤ååºæ¬ä½¿ç¨",frontmatter:{title:"Docker-Compose å½ä»¤ååºæ¬ä½¿ç¨",date:"2023-06-25T09:22:36.000Z",permalink:"/docker/401",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/01.%E8%BF%90%E7%BB%B4/40.Docker/401.Docker-Compose%20%E5%91%BD%E4%BB%A4%E5%8F%8A%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html",relativePath:"01.è¿ç»´/40.Docker/401.Docker-Compose å½ä»¤ååºæ¬ä½¿ç¨.md",key:"v-12a39364",path:"/docker/401/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:2},{level:2,title:"å®è£ä¸å¸è½½",slug:"å®è£ä¸å¸è½½",normalizedTitle:"å®è£ä¸å¸è½½",charIndex:638},{level:2,title:"å½ä»¤",slug:"å½ä»¤",normalizedTitle:"å½ä»¤",charIndex:503},{level:2,title:"Composeæä»¶ç¼å",slug:"composeæä»¶ç¼å",normalizedTitle:"compose æä»¶ç¼å",charIndex:1790},{level:3,title:"ç¤ºä¾1",slug:"ç¤ºä¾1",normalizedTitle:"ç¤ºä¾ 1",charIndex:1807},{level:3,title:"ç¤ºä¾2",slug:"ç¤ºä¾2",normalizedTitle:"ç¤ºä¾ 2",charIndex:3203},{level:3,title:"Compose æä»¤",slug:"compose-æä»¤",normalizedTitle:"compose æä»¤",charIndex:5784},{level:3,title:"å½ä»¤éé¡¹",slug:"å½ä»¤éé¡¹",normalizedTitle:"å½ä»¤éé¡¹",charIndex:5952},{level:3,title:"å½ä»¤ä½¿ç¨è¯´æ",slug:"å½ä»¤ä½¿ç¨è¯´æ",normalizedTitle:"å½ä»¤ä½¿ç¨è¯´æ",charIndex:6176},{level:4,title:"up",slug:"up",normalizedTitle:"up",charIndex:2309},{level:4,title:"down",slug:"down",normalizedTitle:"down",charIndex:809},{level:4,title:"exec",slug:"exec",normalizedTitle:"exec",charIndex:6686},{level:4,title:"ps",slug:"ps",normalizedTitle:"ps",charIndex:769},{level:4,title:"restart",slug:"restart",normalizedTitle:"restart",charIndex:6824},{level:4,title:"rm",slug:"rm",normalizedTitle:"rm",charIndex:6925},{level:4,title:"start",slug:"start",normalizedTitle:"start",charIndex:6826},{level:4,title:"stop",slug:"stop",normalizedTitle:"stop",charIndex:7013},{level:4,title:"top",slug:"top",normalizedTitle:"top",charIndex:666},{level:4,title:"pause,unpause",slug:"pause-unpause",normalizedTitle:"pause,unpause",charIndex:7337},{level:4,title:"logs",slug:"logs",normalizedTitle:"logs",charIndex:7464}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"ç®ä» å®è£ä¸å¸è½½ å½ä»¤ Composeæä»¶ç¼å ç¤ºä¾1 ç¤ºä¾2 Compose æä»¤ å½ä»¤éé¡¹ å½ä»¤ä½¿ç¨è¯´æ up down exec ps restart rm start stop top pause,unpause logs",content:'# ç®ä»\n\nCompose é¡¹ç®æ¯ Docker å®æ¹çå¼æºé¡¹ç®ï¼è´è´£å®ç°å¯¹ Docker å®¹å¨éç¾¤çå¿«éç¼æï¼å¸®å©å®ä¹åè¿è¡å¤ä¸ª Docker å®¹å¨çåºç¨ï¼å¶åèº«æ¯å¼æºé¡¹ç® Figãæè°ç¼æå°±æ¯è½æä¸ä¸ªé¡¹ç®çä¾èµï¼å¦ mysqlï¼redisï¼æå¡é´çä¾èµç­ï¼æç§æåºçæ¹å¼å¯å¨å®¹å¨\n\nDockerFile å¯ä»¥è®©ç¨æ·å¾æ¹ä¾¿çå®ä¹ä¸ä¸ªåç¬çåºç¨å®¹å¨ï¼ç¶èå¨æ¥å¸¸å·¥ä½ä¸­ä»¬ç»å¸¸ä¼ç¢°å°éè¦å¤ä¸ªå®¹å¨ç¸äºéåæ¥å®ææé¡¹ä»»å¡çæåµãä¾å¦è¦å®ç°ä¸ä¸ª web é¡¹ç®ï¼é¤äº web æå¡å®¹å¨æ¬èº«ï¼å¾å¾è¿éè¦åå ä¸åç«¯çæ°æ®åºæå¡å¨å®¹å¨ï¼çè³è¿åæ¬è´è½½åè¡¡å®¹å¨ç­ã\n\nCompose æ°å¥½æ»¡è¶³äºè¿æ ·çéæ±ï¼å®åè®¸éè¿ä¸ä¸ªåç¬ç docker-compose.yml æ¨¡æ¿æä»¶ï¼æ¥å®ä¹ä¸ç»ç¸å³èçåºç¨å®¹å¨ä¸ºä¸ä¸ªé¡¹ç®ã\n\nCompose ä¸­æä¸¤ä¸ªéè¦çæ¦å¿µ\n\n 1. æå¡ï¼serviceï¼ï¼ä¸ä¸ªåºç¨çå®¹å¨ï¼å®éä¸å¯ä»¥åæ¬è¥å¹²è¿è¡ç¸åéåçå®¹å¨å®ä¾ã\n 2. é¡¹ç®ï¼projectï¼ï¼ç±ä¸ç»å³èçåºç¨å®¹å¨ç»æçä¸ä¸ªå®æ´ä¸å¡ååï¼å docker-compose.yml æä»¶ä¸­å®ä¹ã\n\nCompose çé»è®¤ç®¡çå¯¹è±¡æ¯é¡¹ç®ï¼éè¿å­å½ä»¤å¯¹é¡¹ç®ä¸­çä¸ç»å®¹å¨è¿è¡ä¾¿æ·å°çå½å¨æç®¡çã\n\nCompose é¡¹ç®ç± Python ç¼åï¼å®ç°ä¸è°ç¨äº Docker æå¡æä¾ç API æ¥å¯¹å®¹å¨è¿è¡ç®¡çãå æ­¤ï¼åªè¦ææä½çå¹³å°æ¯æ Docker APIï¼å°±å¯ä»¥åå¶ä¸å©ç¨ Compose æ¥è¿è¡ç¼æç®¡çã\n\n\n# å®è£ä¸å¸è½½\n\nå®è£çè¯ï¼å¯ä»¥å®è£ Docker Desktop ï¼å®åå«äº Docker ä»¥å Compose å K8sï¼ä¹å¯ä»¥åç¬å®è£ï¼ä½å»ºè®®åäºè§£æ¸æ¥å®æ¹å¯¹ Compose çä¸äºå®è£éå¶ãå®æ¹å°å\n\nlinux å®è£\n\nsudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\ndocker-compose --version\n\n\n1\n2\n3\n\n\n\n# å½ä»¤\n\nå½ä»¤            æè¿°\nversion       çæ¬ç®å 4 ä»¥ä¸çé½å¯ä»¥åï¼å¦ 3.9ï¼3.8 ç­ï¼æå¥½ä¿æå docker çæ¬å¼å®¹\nservices      å¯ä»¥éé¢æè¿°ä½ çæææå¡ï¼ä»¥åä¾èµå³ç³»ç­\nimage         æå®ä¸ºéååç§°æéå IDï¼å¦æéåå¨æ¬å°ä¸å­å¨ï¼Compose å°ä¼å°è¯æåè¿ä¸ªéå\nports         æå®ä¸å®¿ä¸»æºä¸å®¹å¨æ å°çç«¯å£ï¼æ¯ä¸ä¸ªæ°ç»ï¼æ¯ä¸ªæ°ç»çåç´ å»ºè®®ç¨å­ç¬¦å½¢å¼ï¼å¦ "80:80"\nvolumes       æè½½è·¯å¾è®¾ç½®ï¼ç±»åä¸ºæ°ç»ï¼å¯ä»¥æè½½å¤ä¸ªï¼å¨å¶ä½å®¹å¨çæ¶åå¯ä»¥æ¾ç¤ºçå£°ææè½½è·¯å¾ï¼ä¹å¯ä»¥å¨å®¹å¨è¿è¡æ¶ç´æ¥ä½¿ç¨ -v å½ä»¤ã\nnetworks      éç½®å®¹å¨è¿æ¥çç½ç» docker network ls æ¥çç½ç»åè¡¨ï¼ docker network inspect\n              <container id> å¯ä»¥æ¥çå¯¹åºç½ç»çéç½®\nenvironment   è®¾ç½®ç¯å¢åéãä½ å¯ä»¥ä½¿ç¨æ°ç»æå­å¸ä¸¤ç§æ¹å¼\nenv_file      ä»æä»¶ä¸­è·åç¯å¢åéï¼å¯ä»¥ä¸ºåç¬çæä»¶è·¯å¾æåè¡¨ï¼æä»¶åå¿é¡»æ¯å­å¸æ¹å¼ç¼å\ncommand       è¦çå®¹å¨å¯å¨åé»è®¤æ§è¡çå½ä»¤\ndepends_on    è§£å³å®¹å¨çä¾èµãå¯å¨ååçé®é¢ï¼å¡«åçå¼ä¸º æå¡åï¼ä¼ç­ä¾èµçæå¡å¯å¨ä¸å®ç¨åº¦æå¯å¨èªå·±\nhealthcheck   éè¿å½ä»¤æ£æ¥å®¹å¨æ¯å¦çæ§è¿è¡\nsysctls       éç½®å®¹å¨åæ ¸åæ°ï¼å¦ ES ç­é½éè¦ä¿®æ¹åæ ¸çç¯å¢åæ°\nulimits       æå®å®¹å¨ç ulimits éå¶å¼ï¼å¦ ESãClickhouse ä¼æä¿®æ¹éæ±\nbuild         ç¨æ¥å°æå® Dockerfile æåæå¯¹åºéåï¼ç¶ååè¿è¡è¯¥éå\n\nè¿äºå½ä»¤å¶å®å°±ç±»ä¼¼äºæä»¬å¨ Docker ä¸­å¯å¨ä¸ä¸ªå®¹å¨çå½ä»¤ã\n\n\n# Compose æä»¶ç¼å\n\n\n# ç¤ºä¾ 1\n\n### çæ¬\nversion: "3.2"\n\nservices:\n  ### æå¡åç§°\n  tomcat:\n    ### æå®å®¹å¨çåç§° ç¸å½äº --name\n    container_name: tomcat_1\n    ### ä½¿ç¨åªä¸ªéå ç¸å½äº docket run image\n    image: tomcat:8.0-jre8\n    ### æå®å®¿ä¸»æºä¸å®¹å¨ç«¯å£çæ å° ç¸å½äº -p\n    ports:\n      ### å®¿ä¸»æº:å®¹å¨\n      - "8080:8080"\n    ### å®¿ä¸»æºä¸å®¹å¨çæ°æ®å±äº« æè½½ç®å½ ç¸å½äº -v\n    volumes:\n      ### æ¹å¼1ï¼æå®ç»å¯¹æç¡®(ç»å¯¹è·¯å¾)çæè½½ç®å½\n      - /home/server:/user\n      ### æ¹å¼2ï¼å£°æäºèªå®åå»ºå·åçåé\n      - tomcatwebapps:/user\n    ### ä»£è¡¨å½åæå¡å¤äºé£ä¸ªç½ç»ï¼ä½ç¨æ¯ç½ç»éç¦»ç¨ï¼ä¼æç¸ç½ç»åç§°ç¸åçå®¹å¨çç½æ®µç»ä¸ãç¸å½äº --network\n    networks:\n      - group1\n\n  mysql:\n    image: mysql:5.7.32\n    container_name: mysql\n    ports:\n    - "3306:3306"\n    volumes:\n    - mysqldata:/var/lib/mysql\n    - mysqlconf:/etc/mysql\n    environment:\n      -MYSQL_ROOT_PASSWORD=root\n    networks:\n      group1\n\n\n### æè¿° æå¨å·éçåé\nvolumes:\n  ### æå®åé tomcatwebappsï¼å¦æä¸å externalï¼é»è®¤ä¼æ¯ docker-compose.yml æå¨å½åæä»¶å¤¹çåç§°(ä¼èªå¨åå»º)\n  tomcatwebapps:\n    ### ä½¿ç¨èªå®ä¹å·æ¯\n    external:\n      ### true ç¡®å®ä½¿ç¨æå®å·åï¼æ³¨æï¼ä¸æ¦ä½¿ç¨å¤é¨èªå®ä¹å·åï¼å¯å¨æå¡ä¹åå¿é¡»æå¨åå»º docker volume create å·å\n      false\n  mysqldata:\n  mysqlconf:\n\n### å®ä¹æå¡ç¨å°çç½ç»\nnetworks:\n  ### å®ä¹ä¸é¢çæå¡ç¨å°çç½ç»çåç§°ï¼é»è®¤æ¯é©±å¨å±äº bridgeï¼èªå®ä¹çç½ç»åç§° group1ï¼å¨å®éä¸­ä¼åä¸º é¡¹ç®å(ææå¨æä»¶ç®å½å)\n  group1:\n    ### ä½¿ç¨å¤é¨æå®çç½ç»ï¼ä¸º true å°±æ è¯ç½ç»å¿é¡»å­å¨\n    external:\n      ### docker network create -d bridge ç½ç»åç§°\n      true\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n\n\n\n# ç¤ºä¾ 2\n\n### æå®çæ¬ï¼çæ¬çå³ç³»åDocker å¼ææå³\n### https://docs.docker.com/compose/compose-file/compose-file-v3/#profiles çæ¬å³ç³»åè¯´æ\nversion: \'3.7\'\n\n### æå®æå¡\nservices:\n  ### æå¡åç§° å¯ä¸\n  monitor-web-server-service:\n    ### æå»ºéåçé¡¹ç®è·¯å¾\n    build:\n      ### æå®ä¸ä¸æè·¯å¾ï¼é»è®¤æ¯å¾®æå¡é¡¹ç®çæ ¹ç®å½\n      context: ./monitor-web/monitor-web-server/\n      ### æå®\n      dockerfile: monitor-web-server-service\n    ### æå®éååç§°\n    image: monitor-web-server-service\n    ### .envçç¯å¢åé\n    env_file:\n      - ./.env\n    ### ç½ç»éç½®\n    networks:\n      - internal_access\n      - external_access ### db access\n\n  monitor-web-socket-service:\n    build: ./monitor-web/monitor-web-socket/monitor-web-socket-service\n    image: boboweike/monitor-web-socket-service\n    env_file:\n      - ./.env\n    ### ä¾èµçé¡¹ç®ï¼å¯å¨çæ¶åæ ¹æ®ä¾èµå³ç³»å®ä¹å¯å¨é¡ºåº\n    depends_on:\n      - monitor-web-server-service\n    networks:\n      - internal_access\n      - external_access ### db access\n\n  monitor-gateway:\n    build: ./monitor-gateway\n    image: boboweike/monitor-gateway\n    ### è®¾ç½®åé¨åå¤é¨ç«¯å£\n    ports:\n    - 80:80\n    env_file:\n      - ./.env\n    ### ä¾èµçé¡¹ç®ï¼å¯å¨çæ¶åæ ¹æ®ä¾èµå³ç³»å®ä¹å¯å¨é¡ºåº\n    depends_on:\n      - monitor-web-server-service\n      - monitor-web-server-service\n    networks:\n      - internal_access\n      - external_access\n    ### å¿è·³æ£æ¥\n    healthcheck:\n      ### è®¿é® monitor-gateway ç½å³çå½ä»¤\n      test: [ "CMD","curl","-f","http://localhost:80" ]\n      ### é´éæ¶é´\n      interval: 1m30s\n      ### è¶æ¶æ¶é´\n      timeout: 10s\n      ### éè¯æ¬¡æ°\n      retries: 3\n\n  mysql:\n    image: mysql:5.7.32\n    container_name: mysql\n    ports:\n      - "3306:3306"\n    volumes:\n      - mysqldata:/var/lib/mysql\n      - mysqlconf:/etc/mysql\n    env_file:\n      - ./mysql.env\n    networks:\n      - external_access\n    ### ä¿®æ¹åæ ¸åæ°ï¼ä¹å¯ä»¥æ¯æ°ç»çæ¹å¼\n    sysctls:\n      net.core.somaxconn: 1024\n      net.ipv4.tcp_syncookies: 0\n    ### æå®å®¹å¨ç ulimits éå¶å¼ï¼ä¾å¦ ï¼\n    ulimits:\n      ### æå®æå¤§è¿ç¨æ°ä¸º 65535\n      nproc: 65535\n      ### æå®æä»¶å¥ææ°ä¸º\n      nofile:\n        ### è½¯éå¶ 200000ï¼è½¯éå¶ï¼åºç¨å¯ä»¥éæ¶ä¿®æ¹ï¼ä¸è½è¶è¿ç¡¬éå¶ï¼\n        soft: 20000\n        ### ç¡¬éå¶ï¼ç³»ç»ç¡¬éå¶ï¼åªè½rootç¨æ·æé«ï¼\n        hard: 40000\n\n\n  myaccount-service:\n    build:\n      context: ./frontend\n      dockerfile: myaccount/Dockerfile\n    image: boboweike/myaccount-spa\n    networks:\n      - internal_access\n\n\nnetworks:\n  internal_access:\n    internal: true\n  external_access:\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n\n\n\n# Compose æä»¤\n\nå¯¹äº Compose æ¥è¯´ï¼å¤§é¨åå½ä»¤çå¯¹è±¡æ¢å¯ä»¥æ¯é¡¹ç®æ¬èº«ï¼ä¹å¯ä»¥æå®ä¸ºé¡¹ç®ä¸­çæå¡æèå®¹å¨ãå¦ææ²¡æç¹å«çè¯´æï¼å½ä»¤å¯¹è±¡å°æ¯é¡¹ç®ï¼è¿æå³çé¡¹ç®ä¸­ææçæå¡é½ä¼åå°å½±åã\n\ndocker-compose [-f=<arg>...] [options] [COMMAND] [ARGS...]\n\n\n1\n\n\n\n# å½ä»¤éé¡¹\n\n * -f -> --file FILE æå®ä½¿ç¨ç Compose æ¨¡æ¿ææä»¶ï¼é»è®¤ä¸º docker-compose.ymlï¼å¯ä»¥å¤æ¬¡æå®ã\n * -p -> --project-name NAME æå®é¡¹ç®åç§°ï¼é»è®¤å°ä½¿ç¨æå¨ç®å½åç§°ä½ä¸ºé¡¹ç®å\n * --x-networking ä½¿ç¨ Docker å¯ææç½ç»åç«¯ç¹æ§\n * --verbose è¾åºæ´å¤è°è¯ä¿¡æ¯ã\n * -v -> --version æå°çæ¬å¹¶éåºã\n\n\n# å½ä»¤ä½¿ç¨è¯´æ\n\n# up\n\ndocker-compose up [options] [SERVICE...]\n\n\n1\n\n * è¯¥å½ä»¤ååå¼ºå¤§ï¼å®å°å°è¯èªå¨å®æåæ¬æå»ºéåï¼ï¼éæ°ï¼åå»ºæå¡ï¼å¯å¨æå¡ï¼å¹¶å³èæå¡ç¸å³å®¹å¨çä¸ç³»åæä½ã\n * è¿æ¥çæå¡é½å°ä¼è¢«èªå¨å¯å¨ï¼é¤éå·²ç»å¤äºè¿è¡ç¶æ\n * å¤§é¨åçæ¶åé½å¯ä»¥ç´æ¥éè¿è¯¥å½ä»¤æ¥å¯å¨ä¸ä¸ªé¡¹ç®ã\n * é»è®¤æåµï¼docker-compose up å¯å¨çå®¹å¨é½å¨åå°ï¼æ§å¶å°å°ä¼åæ¶æå°ææå®¹å¨çè¾åºä¿¡æ¯ï¼å¯ä»¥å¾æ¹ä¾¿è¿è¡è°è¯ã\n * å½éè¿ Ctrl-c åæ­¢å½ä»¤æ¶ï¼ææå®¹å¨å°ä¼åæ­¢\n * å¦æä½¿ç¨ docker-compose up -dï¼å°ä¼ååå°å¯å¨å¹¶è¿è¡ææçå®¹å¨ï¼ä¸è¬æ¨èçäº§ç¯å¢ä¸ä½¿ç¨è¯¥éé¡¹ã\n * é»è®¤æåµï¼å¦ææå¡å®¹å¨å·²ç»å­å¨ï¼docker-compose up å°ä¼å°è¯åæ­¢å®¹å¨ï¼ç¶åéæ°åå»ºï¼ä¿æä½¿ç¨ volumes-from æè½½çå·ï¼ï¼ä»¥ä¿è¯æ°å¯å¨çæå¡å¹é docker-compose.yml æä»¶çææ°åå®¹ã\n\n# down\n\ndocker-compose down\n\n\n1\n\n\næ­¤å½ä»¤å°ä¼åæ­¢ up å½ä»¤æå¯å¨çå®¹å¨ï¼å¹¶ç§»é¤ç½ç»\n\n# exec\n\ndocker-compose exec æå¡å\n\n\n1\n\n\nè¿å¥æå®çå®¹å¨\n\n# ps\n\ndocker-compose ps [options] [SERVICE...]\n\n\n1\n\n\nååºé¡¹ç®ä¸­ç®åçææå®¹å¨ã\n\n * -q ï¼å¯ä»¥ä»¥æå°å®¹å¨ç ID ä¿¡æ¯\n\n# restart\n\ndocker-compose restart [options] [service...]\n\n\n1\n\n\néå¯é¡¹ç®ä¸­çæå¡ï¼éé¡¹ -t æå®éå¯ååæ­¢å®¹çè¶æ¶æ¶é´ï¼é»è®¤ 10sï¼\n\n# rm\n\ndocker-compose rm [options] [service...]\n\n\n1\n\n\nå é¤ææï¼åæ­¢ç¶æçï¼æå¡å®¹å¨ãæ¨èåæ§è¡ docker-compose stop å½ä»¤æ¥åæ­¢å®¹å¨ã\n\n * -f å¼ºå¶ç´æ¥å é¤ï¼åæ¬éåæ­¢ç¶æçå®¹å¨ãä¸è¬å°½éä¸è¦ä½¿ç¨è¯¥éé¡¹ã\n * -v å é¤å®¹å¨ææè½½çæ°æ®å·ã\n\n# start\n\ndocker-compose start [service...]\n\n\n1\n\n\nå¯å¨å·²ç»å­å¨çæå¡å®¹å¨\n\n# stop\n\ndocker-compose stop [options] [service...]\n\n\n1\n\n\nåæ­¢å·²ç»å¤äºè¿è¡ç¶æçå®¹å¨ï¼ä½ä¸å é¤å®ãéè¿ docker-compose start å¯ä»¥åæ¬¡å¯å¨è¿äºå®¹å¨\n\n * -t åæ­¢å®¹å¨çè¶æ¶æ¶é´ï¼é»è®¤ä¸º 10sï¼\n\n# top\n\ndocker-compose top\n\n\n1\n\n\næ¥çåä¸ªæå¡å®¹å¨åè¿è¡çè¿ç¨ã\n\n# pause,unpause\n\ndocker-compose pause [service...]\n\n\n1\n\n\næåå¤äºè¿è¡ä¸­çæå¡ã\n\ndocker-compose unpause [service...]\n\n\n1\n\n\næ¢å¤å¤äºæåç¶æä¸­çæå¡ã\n\n# logs\n\ndocker-compose logs [service...]\n\n\n1\n\n\næ¥çæä¸ªæå¡çæ¥å¿',normalizedContent:'# ç®ä»\n\ncompose é¡¹ç®æ¯ docker å®æ¹çå¼æºé¡¹ç®ï¼è´è´£å®ç°å¯¹ docker å®¹å¨éç¾¤çå¿«éç¼æï¼å¸®å©å®ä¹åè¿è¡å¤ä¸ª docker å®¹å¨çåºç¨ï¼å¶åèº«æ¯å¼æºé¡¹ç® figãæè°ç¼æå°±æ¯è½æä¸ä¸ªé¡¹ç®çä¾èµï¼å¦ mysqlï¼redisï¼æå¡é´çä¾èµç­ï¼æç§æåºçæ¹å¼å¯å¨å®¹å¨\n\ndockerfile å¯ä»¥è®©ç¨æ·å¾æ¹ä¾¿çå®ä¹ä¸ä¸ªåç¬çåºç¨å®¹å¨ï¼ç¶èå¨æ¥å¸¸å·¥ä½ä¸­ä»¬ç»å¸¸ä¼ç¢°å°éè¦å¤ä¸ªå®¹å¨ç¸äºéåæ¥å®ææé¡¹ä»»å¡çæåµãä¾å¦è¦å®ç°ä¸ä¸ª web é¡¹ç®ï¼é¤äº web æå¡å®¹å¨æ¬èº«ï¼å¾å¾è¿éè¦åå ä¸åç«¯çæ°æ®åºæå¡å¨å®¹å¨ï¼çè³è¿åæ¬è´è½½åè¡¡å®¹å¨ç­ã\n\ncompose æ°å¥½æ»¡è¶³äºè¿æ ·çéæ±ï¼å®åè®¸éè¿ä¸ä¸ªåç¬ç docker-compose.yml æ¨¡æ¿æä»¶ï¼æ¥å®ä¹ä¸ç»ç¸å³èçåºç¨å®¹å¨ä¸ºä¸ä¸ªé¡¹ç®ã\n\ncompose ä¸­æä¸¤ä¸ªéè¦çæ¦å¿µ\n\n 1. æå¡ï¼serviceï¼ï¼ä¸ä¸ªåºç¨çå®¹å¨ï¼å®éä¸å¯ä»¥åæ¬è¥å¹²è¿è¡ç¸åéåçå®¹å¨å®ä¾ã\n 2. é¡¹ç®ï¼projectï¼ï¼ç±ä¸ç»å³èçåºç¨å®¹å¨ç»æçä¸ä¸ªå®æ´ä¸å¡ååï¼å docker-compose.yml æä»¶ä¸­å®ä¹ã\n\ncompose çé»è®¤ç®¡çå¯¹è±¡æ¯é¡¹ç®ï¼éè¿å­å½ä»¤å¯¹é¡¹ç®ä¸­çä¸ç»å®¹å¨è¿è¡ä¾¿æ·å°çå½å¨æç®¡çã\n\ncompose é¡¹ç®ç± python ç¼åï¼å®ç°ä¸è°ç¨äº docker æå¡æä¾ç api æ¥å¯¹å®¹å¨è¿è¡ç®¡çãå æ­¤ï¼åªè¦ææä½çå¹³å°æ¯æ docker apiï¼å°±å¯ä»¥åå¶ä¸å©ç¨ compose æ¥è¿è¡ç¼æç®¡çã\n\n\n# å®è£ä¸å¸è½½\n\nå®è£çè¯ï¼å¯ä»¥å®è£ docker desktop ï¼å®åå«äº docker ä»¥å compose å k8sï¼ä¹å¯ä»¥åç¬å®è£ï¼ä½å»ºè®®åäºè§£æ¸æ¥å®æ¹å¯¹ compose çä¸äºå®è£éå¶ãå®æ¹å°å\n\nlinux å®è£\n\nsudo curl -l "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\ndocker-compose --version\n\n\n1\n2\n3\n\n\n\n# å½ä»¤\n\nå½ä»¤            æè¿°\nversion       çæ¬ç®å 4 ä»¥ä¸çé½å¯ä»¥åï¼å¦ 3.9ï¼3.8 ç­ï¼æå¥½ä¿æå docker çæ¬å¼å®¹\nservices      å¯ä»¥éé¢æè¿°ä½ çæææå¡ï¼ä»¥åä¾èµå³ç³»ç­\nimage         æå®ä¸ºéååç§°æéå idï¼å¦æéåå¨æ¬å°ä¸å­å¨ï¼compose å°ä¼å°è¯æåè¿ä¸ªéå\nports         æå®ä¸å®¿ä¸»æºä¸å®¹å¨æ å°çç«¯å£ï¼æ¯ä¸ä¸ªæ°ç»ï¼æ¯ä¸ªæ°ç»çåç´ å»ºè®®ç¨å­ç¬¦å½¢å¼ï¼å¦ "80:80"\nvolumes       æè½½è·¯å¾è®¾ç½®ï¼ç±»åä¸ºæ°ç»ï¼å¯ä»¥æè½½å¤ä¸ªï¼å¨å¶ä½å®¹å¨çæ¶åå¯ä»¥æ¾ç¤ºçå£°ææè½½è·¯å¾ï¼ä¹å¯ä»¥å¨å®¹å¨è¿è¡æ¶ç´æ¥ä½¿ç¨ -v å½ä»¤ã\nnetworks      éç½®å®¹å¨è¿æ¥çç½ç» docker network ls æ¥çç½ç»åè¡¨ï¼ docker network inspect\n              <container id> å¯ä»¥æ¥çå¯¹åºç½ç»çéç½®\nenvironment   è®¾ç½®ç¯å¢åéãä½ å¯ä»¥ä½¿ç¨æ°ç»æå­å¸ä¸¤ç§æ¹å¼\nenv_file      ä»æä»¶ä¸­è·åç¯å¢åéï¼å¯ä»¥ä¸ºåç¬çæä»¶è·¯å¾æåè¡¨ï¼æä»¶åå¿é¡»æ¯å­å¸æ¹å¼ç¼å\ncommand       è¦çå®¹å¨å¯å¨åé»è®¤æ§è¡çå½ä»¤\ndepends_on    è§£å³å®¹å¨çä¾èµãå¯å¨ååçé®é¢ï¼å¡«åçå¼ä¸º æå¡åï¼ä¼ç­ä¾èµçæå¡å¯å¨ä¸å®ç¨åº¦æå¯å¨èªå·±\nhealthcheck   éè¿å½ä»¤æ£æ¥å®¹å¨æ¯å¦çæ§è¿è¡\nsysctls       éç½®å®¹å¨åæ ¸åæ°ï¼å¦ es ç­é½éè¦ä¿®æ¹åæ ¸çç¯å¢åæ°\nulimits       æå®å®¹å¨ç ulimits éå¶å¼ï¼å¦ esãclickhouse ä¼æä¿®æ¹éæ±\nbuild         ç¨æ¥å°æå® dockerfile æåæå¯¹åºéåï¼ç¶ååè¿è¡è¯¥éå\n\nè¿äºå½ä»¤å¶å®å°±ç±»ä¼¼äºæä»¬å¨ docker ä¸­å¯å¨ä¸ä¸ªå®¹å¨çå½ä»¤ã\n\n\n# compose æä»¶ç¼å\n\n\n# ç¤ºä¾ 1\n\n### çæ¬\nversion: "3.2"\n\nservices:\n  ### æå¡åç§°\n  tomcat:\n    ### æå®å®¹å¨çåç§° ç¸å½äº --name\n    container_name: tomcat_1\n    ### ä½¿ç¨åªä¸ªéå ç¸å½äº docket run image\n    image: tomcat:8.0-jre8\n    ### æå®å®¿ä¸»æºä¸å®¹å¨ç«¯å£çæ å° ç¸å½äº -p\n    ports:\n      ### å®¿ä¸»æº:å®¹å¨\n      - "8080:8080"\n    ### å®¿ä¸»æºä¸å®¹å¨çæ°æ®å±äº« æè½½ç®å½ ç¸å½äº -v\n    volumes:\n      ### æ¹å¼1ï¼æå®ç»å¯¹æç¡®(ç»å¯¹è·¯å¾)çæè½½ç®å½\n      - /home/server:/user\n      ### æ¹å¼2ï¼å£°æäºèªå®åå»ºå·åçåé\n      - tomcatwebapps:/user\n    ### ä»£è¡¨å½åæå¡å¤äºé£ä¸ªç½ç»ï¼ä½ç¨æ¯ç½ç»éç¦»ç¨ï¼ä¼æç¸ç½ç»åç§°ç¸åçå®¹å¨çç½æ®µç»ä¸ãç¸å½äº --network\n    networks:\n      - group1\n\n  mysql:\n    image: mysql:5.7.32\n    container_name: mysql\n    ports:\n    - "3306:3306"\n    volumes:\n    - mysqldata:/var/lib/mysql\n    - mysqlconf:/etc/mysql\n    environment:\n      -mysql_root_password=root\n    networks:\n      group1\n\n\n### æè¿° æå¨å·éçåé\nvolumes:\n  ### æå®åé tomcatwebappsï¼å¦æä¸å externalï¼é»è®¤ä¼æ¯ docker-compose.yml æå¨å½åæä»¶å¤¹çåç§°(ä¼èªå¨åå»º)\n  tomcatwebapps:\n    ### ä½¿ç¨èªå®ä¹å·æ¯\n    external:\n      ### true ç¡®å®ä½¿ç¨æå®å·åï¼æ³¨æï¼ä¸æ¦ä½¿ç¨å¤é¨èªå®ä¹å·åï¼å¯å¨æå¡ä¹åå¿é¡»æå¨åå»º docker volume create å·å\n      false\n  mysqldata:\n  mysqlconf:\n\n### å®ä¹æå¡ç¨å°çç½ç»\nnetworks:\n  ### å®ä¹ä¸é¢çæå¡ç¨å°çç½ç»çåç§°ï¼é»è®¤æ¯é©±å¨å±äº bridgeï¼èªå®ä¹çç½ç»åç§° group1ï¼å¨å®éä¸­ä¼åä¸º é¡¹ç®å(ææå¨æä»¶ç®å½å)\n  group1:\n    ### ä½¿ç¨å¤é¨æå®çç½ç»ï¼ä¸º true å°±æ è¯ç½ç»å¿é¡»å­å¨\n    external:\n      ### docker network create -d bridge ç½ç»åç§°\n      true\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n\n\n\n# ç¤ºä¾ 2\n\n### æå®çæ¬ï¼çæ¬çå³ç³»ådocker å¼ææå³\n### https://docs.docker.com/compose/compose-file/compose-file-v3/#profiles çæ¬å³ç³»åè¯´æ\nversion: \'3.7\'\n\n### æå®æå¡\nservices:\n  ### æå¡åç§° å¯ä¸\n  monitor-web-server-service:\n    ### æå»ºéåçé¡¹ç®è·¯å¾\n    build:\n      ### æå®ä¸ä¸æè·¯å¾ï¼é»è®¤æ¯å¾®æå¡é¡¹ç®çæ ¹ç®å½\n      context: ./monitor-web/monitor-web-server/\n      ### æå®\n      dockerfile: monitor-web-server-service\n    ### æå®éååç§°\n    image: monitor-web-server-service\n    ### .envçç¯å¢åé\n    env_file:\n      - ./.env\n    ### ç½ç»éç½®\n    networks:\n      - internal_access\n      - external_access ### db access\n\n  monitor-web-socket-service:\n    build: ./monitor-web/monitor-web-socket/monitor-web-socket-service\n    image: boboweike/monitor-web-socket-service\n    env_file:\n      - ./.env\n    ### ä¾èµçé¡¹ç®ï¼å¯å¨çæ¶åæ ¹æ®ä¾èµå³ç³»å®ä¹å¯å¨é¡ºåº\n    depends_on:\n      - monitor-web-server-service\n    networks:\n      - internal_access\n      - external_access ### db access\n\n  monitor-gateway:\n    build: ./monitor-gateway\n    image: boboweike/monitor-gateway\n    ### è®¾ç½®åé¨åå¤é¨ç«¯å£\n    ports:\n    - 80:80\n    env_file:\n      - ./.env\n    ### ä¾èµçé¡¹ç®ï¼å¯å¨çæ¶åæ ¹æ®ä¾èµå³ç³»å®ä¹å¯å¨é¡ºåº\n    depends_on:\n      - monitor-web-server-service\n      - monitor-web-server-service\n    networks:\n      - internal_access\n      - external_access\n    ### å¿è·³æ£æ¥\n    healthcheck:\n      ### è®¿é® monitor-gateway ç½å³çå½ä»¤\n      test: [ "cmd","curl","-f","http://localhost:80" ]\n      ### é´éæ¶é´\n      interval: 1m30s\n      ### è¶æ¶æ¶é´\n      timeout: 10s\n      ### éè¯æ¬¡æ°\n      retries: 3\n\n  mysql:\n    image: mysql:5.7.32\n    container_name: mysql\n    ports:\n      - "3306:3306"\n    volumes:\n      - mysqldata:/var/lib/mysql\n      - mysqlconf:/etc/mysql\n    env_file:\n      - ./mysql.env\n    networks:\n      - external_access\n    ### ä¿®æ¹åæ ¸åæ°ï¼ä¹å¯ä»¥æ¯æ°ç»çæ¹å¼\n    sysctls:\n      net.core.somaxconn: 1024\n      net.ipv4.tcp_syncookies: 0\n    ### æå®å®¹å¨ç ulimits éå¶å¼ï¼ä¾å¦ ï¼\n    ulimits:\n      ### æå®æå¤§è¿ç¨æ°ä¸º 65535\n      nproc: 65535\n      ### æå®æä»¶å¥ææ°ä¸º\n      nofile:\n        ### è½¯éå¶ 200000ï¼è½¯éå¶ï¼åºç¨å¯ä»¥éæ¶ä¿®æ¹ï¼ä¸è½è¶è¿ç¡¬éå¶ï¼\n        soft: 20000\n        ### ç¡¬éå¶ï¼ç³»ç»ç¡¬éå¶ï¼åªè½rootç¨æ·æé«ï¼\n        hard: 40000\n\n\n  myaccount-service:\n    build:\n      context: ./frontend\n      dockerfile: myaccount/dockerfile\n    image: boboweike/myaccount-spa\n    networks:\n      - internal_access\n\n\nnetworks:\n  internal_access:\n    internal: true\n  external_access:\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n\n\n\n# compose æä»¤\n\nå¯¹äº compose æ¥è¯´ï¼å¤§é¨åå½ä»¤çå¯¹è±¡æ¢å¯ä»¥æ¯é¡¹ç®æ¬èº«ï¼ä¹å¯ä»¥æå®ä¸ºé¡¹ç®ä¸­çæå¡æèå®¹å¨ãå¦ææ²¡æç¹å«çè¯´æï¼å½ä»¤å¯¹è±¡å°æ¯é¡¹ç®ï¼è¿æå³çé¡¹ç®ä¸­ææçæå¡é½ä¼åå°å½±åã\n\ndocker-compose [-f=<arg>...] [options] [command] [args...]\n\n\n1\n\n\n\n# å½ä»¤éé¡¹\n\n * -f -> --file file æå®ä½¿ç¨ç compose æ¨¡æ¿ææä»¶ï¼é»è®¤ä¸º docker-compose.ymlï¼å¯ä»¥å¤æ¬¡æå®ã\n * -p -> --project-name name æå®é¡¹ç®åç§°ï¼é»è®¤å°ä½¿ç¨æå¨ç®å½åç§°ä½ä¸ºé¡¹ç®å\n * --x-networking ä½¿ç¨ docker å¯ææç½ç»åç«¯ç¹æ§\n * --verbose è¾åºæ´å¤è°è¯ä¿¡æ¯ã\n * -v -> --version æå°çæ¬å¹¶éåºã\n\n\n# å½ä»¤ä½¿ç¨è¯´æ\n\n# up\n\ndocker-compose up [options] [service...]\n\n\n1\n\n * è¯¥å½ä»¤ååå¼ºå¤§ï¼å®å°å°è¯èªå¨å®æåæ¬æå»ºéåï¼ï¼éæ°ï¼åå»ºæå¡ï¼å¯å¨æå¡ï¼å¹¶å³èæå¡ç¸å³å®¹å¨çä¸ç³»åæä½ã\n * è¿æ¥çæå¡é½å°ä¼è¢«èªå¨å¯å¨ï¼é¤éå·²ç»å¤äºè¿è¡ç¶æ\n * å¤§é¨åçæ¶åé½å¯ä»¥ç´æ¥éè¿è¯¥å½ä»¤æ¥å¯å¨ä¸ä¸ªé¡¹ç®ã\n * é»è®¤æåµï¼docker-compose up å¯å¨çå®¹å¨é½å¨åå°ï¼æ§å¶å°å°ä¼åæ¶æå°ææå®¹å¨çè¾åºä¿¡æ¯ï¼å¯ä»¥å¾æ¹ä¾¿è¿è¡è°è¯ã\n * å½éè¿ ctrl-c åæ­¢å½ä»¤æ¶ï¼ææå®¹å¨å°ä¼åæ­¢\n * å¦æä½¿ç¨ docker-compose up -dï¼å°ä¼ååå°å¯å¨å¹¶è¿è¡ææçå®¹å¨ï¼ä¸è¬æ¨èçäº§ç¯å¢ä¸ä½¿ç¨è¯¥éé¡¹ã\n * é»è®¤æåµï¼å¦ææå¡å®¹å¨å·²ç»å­å¨ï¼docker-compose up å°ä¼å°è¯åæ­¢å®¹å¨ï¼ç¶åéæ°åå»ºï¼ä¿æä½¿ç¨ volumes-from æè½½çå·ï¼ï¼ä»¥ä¿è¯æ°å¯å¨çæå¡å¹é docker-compose.yml æä»¶çææ°åå®¹ã\n\n# down\n\ndocker-compose down\n\n\n1\n\n\næ­¤å½ä»¤å°ä¼åæ­¢ up å½ä»¤æå¯å¨çå®¹å¨ï¼å¹¶ç§»é¤ç½ç»\n\n# exec\n\ndocker-compose exec æå¡å\n\n\n1\n\n\nè¿å¥æå®çå®¹å¨\n\n# ps\n\ndocker-compose ps [options] [service...]\n\n\n1\n\n\nååºé¡¹ç®ä¸­ç®åçææå®¹å¨ã\n\n * -q ï¼å¯ä»¥ä»¥æå°å®¹å¨ç id ä¿¡æ¯\n\n# restart\n\ndocker-compose restart [options] [service...]\n\n\n1\n\n\néå¯é¡¹ç®ä¸­çæå¡ï¼éé¡¹ -t æå®éå¯ååæ­¢å®¹çè¶æ¶æ¶é´ï¼é»è®¤ 10sï¼\n\n# rm\n\ndocker-compose rm [options] [service...]\n\n\n1\n\n\nå é¤ææï¼åæ­¢ç¶æçï¼æå¡å®¹å¨ãæ¨èåæ§è¡ docker-compose stop å½ä»¤æ¥åæ­¢å®¹å¨ã\n\n * -f å¼ºå¶ç´æ¥å é¤ï¼åæ¬éåæ­¢ç¶æçå®¹å¨ãä¸è¬å°½éä¸è¦ä½¿ç¨è¯¥éé¡¹ã\n * -v å é¤å®¹å¨ææè½½çæ°æ®å·ã\n\n# start\n\ndocker-compose start [service...]\n\n\n1\n\n\nå¯å¨å·²ç»å­å¨çæå¡å®¹å¨\n\n# stop\n\ndocker-compose stop [options] [service...]\n\n\n1\n\n\nåæ­¢å·²ç»å¤äºè¿è¡ç¶æçå®¹å¨ï¼ä½ä¸å é¤å®ãéè¿ docker-compose start å¯ä»¥åæ¬¡å¯å¨è¿äºå®¹å¨\n\n * -t åæ­¢å®¹å¨çè¶æ¶æ¶é´ï¼é»è®¤ä¸º 10sï¼\n\n# top\n\ndocker-compose top\n\n\n1\n\n\næ¥çåä¸ªæå¡å®¹å¨åè¿è¡çè¿ç¨ã\n\n# pause,unpause\n\ndocker-compose pause [service...]\n\n\n1\n\n\næåå¤äºè¿è¡ä¸­çæå¡ã\n\ndocker-compose unpause [service...]\n\n\n1\n\n\næ¢å¤å¤äºæåç¶æä¸­çæå¡ã\n\n# logs\n\ndocker-compose logs [service...]\n\n\n1\n\n\næ¥çæä¸ªæå¡çæ¥å¿',charsets:{cjk:!0}},{title:"ä»ç»åä½¿ç¨",frontmatter:{title:"ä»ç»åä½¿ç¨",date:"2023-06-25T09:22:36.000Z",permalink:"/easy-security/2100",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/06.%E4%BD%9C%E5%93%81/2100.Easy-Security/2100.index.html",relativePath:"06.ä½å/2100.Easy-Security/2100.index.md",key:"v-9d7b0978",path:"/easy-security/2100/",lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:null,content:"easy-security åºäºè¿æ»¤å¨å®ç°çä¸æ¬¾éå spring å¿«éå¼åçå®å¨è®¤è¯æ¡æ¶ï¼ææ³æ¯å¸æéè¿ç®åçéç½®ï¼å¹¶ä¸å®ç°æ ¸å¿çæ¹æ³è¾¾å°è®¤è¯åé´æçç®çï¼easy-security å¤©ç¶æ¯æå¾®æå¡ æ éé¢å¤éç½®ã\n\neasy-security ä¸éå¶å­å token æ¹å¼ï¼æ è®ºæ¯ä¿å­å°æå¡ç«¯è¿æ¯ä½¿ç¨ JWT ç­é½å¯ä»¥ï¼å ä¸ºè¿é¨åæ¯ç±å¼åèèªå·±æ¥å®ä¹çï¼åªéè¦åè¯ easy-security è¯¥å¦ä½è·åç¨æ·ä¿¡æ¯å³å¯ã\n\nå¦æä½ ä½¿ç¨äº easy-security èªèº«æå¸¦ç Req è¯·æ±å°è£ï¼é£ä¹ææçæ¥å£è¯·æ±åä»¥ POST æ¹å¼ï¼Req ä¼æè®¤è¯åçç¨æ·ææºå¸¦å¨æ¯æ¬¡è¯·æ±ä¸­ï¼å½éè¦è·åç¨æ·çæ¶åå¯ä»¥éè¿ Req ç´æ¥è·åï¼è§£è¦å¼åèè·åè®¤è¯ç¨æ·ã\n\neasy-security ç»åäº Yapi çä½¿ç¨ï¼å¦æä½ ä½¿ç¨ Yapi éè¦å¨èªå·±çé¡¹ç®ä¸­æè¿°è§åã\n\nå·ä½åå®¹è§å®ç½ä»ç»",normalizedContent:"easy-security åºäºè¿æ»¤å¨å®ç°çä¸æ¬¾éå spring å¿«éå¼åçå®å¨è®¤è¯æ¡æ¶ï¼ææ³æ¯å¸æéè¿ç®åçéç½®ï¼å¹¶ä¸å®ç°æ ¸å¿çæ¹æ³è¾¾å°è®¤è¯åé´æçç®çï¼easy-security å¤©ç¶æ¯æå¾®æå¡ æ éé¢å¤éç½®ã\n\neasy-security ä¸éå¶å­å token æ¹å¼ï¼æ è®ºæ¯ä¿å­å°æå¡ç«¯è¿æ¯ä½¿ç¨ jwt ç­é½å¯ä»¥ï¼å ä¸ºè¿é¨åæ¯ç±å¼åèèªå·±æ¥å®ä¹çï¼åªéè¦åè¯ easy-security è¯¥å¦ä½è·åç¨æ·ä¿¡æ¯å³å¯ã\n\nå¦æä½ ä½¿ç¨äº easy-security èªèº«æå¸¦ç req è¯·æ±å°è£ï¼é£ä¹ææçæ¥å£è¯·æ±åä»¥ post æ¹å¼ï¼req ä¼æè®¤è¯åçç¨æ·ææºå¸¦å¨æ¯æ¬¡è¯·æ±ä¸­ï¼å½éè¦è·åç¨æ·çæ¶åå¯ä»¥éè¿ req ç´æ¥è·åï¼è§£è¦å¼åèè·åè®¤è¯ç¨æ·ã\n\neasy-security ç»åäº yapi çä½¿ç¨ï¼å¦æä½ ä½¿ç¨ yapi éè¦å¨èªå·±çé¡¹ç®ä¸­æè¿°è§åã\n\nå·ä½åå®¹è§å®ç½ä»ç»",charsets:{cjk:!0}},{title:"ä»ç»åå®è£",frontmatter:{title:"ä»ç»åå®è£",date:"2023-06-25T09:22:36.000Z",permalink:"/easy-manager-tool/2200",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/06.%E4%BD%9C%E5%93%81/2200.Easy-Manager-Tool/2200.%E4%BB%8B%E7%BB%8D%E5%8F%8A%E5%AE%89%E8%A3%85.html",relativePath:"06.ä½å/2200.Easy-Manager-Tool/2200.ä»ç»åå®è£.md",key:"v-068ae18c",path:"/easy-manager-tool/2200/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:2},{level:2,title:"å®è£",slug:"å®è£",normalizedTitle:"å®è£",charIndex:187},{level:2,title:"äº¤æµ",slug:"äº¤æµ",normalizedTitle:"äº¤æµ",charIndex:737}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"ç®ä» å®è£ äº¤æµ",content:'# ç®ä»\n\nEasy-Manager-Tool æ¯ä¸ä¸ªç¨åºåä½¿ç¨çå¼åç®¡çå·¥å·ï¼å¨æ¥å¸¸å¼åä¸­ä½¿ç¨çå·¥å·å¨è¿éé½å¯ä»¥æ¾å°å¹¶ä½¿ç¨ï¼éå¸¸æä»¬å¨å¼åçæ¶åæ¢éè¦ ssh è¿æ¥å·¥å·ï¼è¿éè¦ sftp è¿æ¥å·¥å·ä»¥åçæ§å·¥å·ï¼æ°æ®åºè¿æ¥å·¥å·ç­ï¼Easy-Manager-Tool å°±æ¯è¦æè¿äºå·¥å·éè¿æç®åçï¼æææçæ¹å¼éæå°ä¸èµ·ï¼å¹¶å½¢æèå¨ï¼ä¸ºå¼åèåå°å·¥å·çä¸è½½ä¸ç®¡çå·¥ä½\n\n\n# å®è£\n\næä»¬æä¾äºæç®åç docker å®è£æ¹å¼\n\næ³¨æ\n\nè¿éç«¯å£ç®ååªè½æ¯ 8081 æä»¥ç«¯å£ä¸éè¦æ¹ï¼\nconfig.database.url éè¦æ¹æä½ èªå·±çæ°æ®åºè¿æ¥å°åï¼æ°æ®åºä»¥åè¡¨ä¼èªå¨åå»ºï¼\n--config.file.ip è¿ä¸ªå°åéè¦æ¹æä½ å®¿ä¸»æºç IP å°å\n\n# æåéå\ndocker pull 875730567/easy-manager-tool:latest\n\n# è¿è¡å®¹å¨\ndocker run -d -p 8081:8081 \\\n--name easy-manager-tool \\\n-e JAVA_ARGS="--config.database.url=127.0.0.1:3306/easy-manager-tool\n--config.database.name=root\n--config.database.password=Dev@root2021\n--config.file.ip=127.0.0.1" \\\n875730567/easy-manager-tool\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nè¿è¡æååè®¿é®éè¦å¨ç«¯å£åé¢å  /easy æè½è®¿é®æå\n\nhttp://127.0.0.1:8081/easy\n\n\n1\n\n\n\n# äº¤æµ\n\n\n',normalizedContent:'# ç®ä»\n\neasy-manager-tool æ¯ä¸ä¸ªç¨åºåä½¿ç¨çå¼åç®¡çå·¥å·ï¼å¨æ¥å¸¸å¼åä¸­ä½¿ç¨çå·¥å·å¨è¿éé½å¯ä»¥æ¾å°å¹¶ä½¿ç¨ï¼éå¸¸æä»¬å¨å¼åçæ¶åæ¢éè¦ ssh è¿æ¥å·¥å·ï¼è¿éè¦ sftp è¿æ¥å·¥å·ä»¥åçæ§å·¥å·ï¼æ°æ®åºè¿æ¥å·¥å·ç­ï¼easy-manager-tool å°±æ¯è¦æè¿äºå·¥å·éè¿æç®åçï¼æææçæ¹å¼éæå°ä¸èµ·ï¼å¹¶å½¢æèå¨ï¼ä¸ºå¼åèåå°å·¥å·çä¸è½½ä¸ç®¡çå·¥ä½\n\n\n# å®è£\n\næä»¬æä¾äºæç®åç docker å®è£æ¹å¼\n\næ³¨æ\n\nè¿éç«¯å£ç®ååªè½æ¯ 8081 æä»¥ç«¯å£ä¸éè¦æ¹ï¼\nconfig.database.url éè¦æ¹æä½ èªå·±çæ°æ®åºè¿æ¥å°åï¼æ°æ®åºä»¥åè¡¨ä¼èªå¨åå»ºï¼\n--config.file.ip è¿ä¸ªå°åéè¦æ¹æä½ å®¿ä¸»æºç ip å°å\n\n# æåéå\ndocker pull 875730567/easy-manager-tool:latest\n\n# è¿è¡å®¹å¨\ndocker run -d -p 8081:8081 \\\n--name easy-manager-tool \\\n-e java_args="--config.database.url=127.0.0.1:3306/easy-manager-tool\n--config.database.name=root\n--config.database.password=dev@root2021\n--config.file.ip=127.0.0.1" \\\n875730567/easy-manager-tool\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nè¿è¡æååè®¿é®éè¦å¨ç«¯å£åé¢å  /easy æè½è®¿é®æå\n\nhttp://127.0.0.1:8081/easy\n\n\n1\n\n\n\n# äº¤æµ\n\n\n',charsets:{cjk:!0}},{title:"åè½æ¼ç¤º",frontmatter:{title:"åè½æ¼ç¤º",date:"2023-06-25T09:22:36.000Z",permalink:"/easy-manager-tool/2201",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/06.%E4%BD%9C%E5%93%81/2200.Easy-Manager-Tool/2201.%E5%8A%9F%E8%83%BD%E6%BC%94%E7%A4%BA.html",relativePath:"06.ä½å/2200.Easy-Manager-Tool/2201.åè½æ¼ç¤º.md",key:"v-5526dc2f",path:"/easy-manager-tool/2201/",headers:[{level:2,title:"æå¡å¨ç®¡ç",slug:"æå¡å¨ç®¡ç",normalizedTitle:"æå¡å¨ç®¡ç",charIndex:2},{level:2,title:"çæ§ç®¡ç",slug:"çæ§ç®¡ç",normalizedTitle:"çæ§ç®¡ç",charIndex:339},{level:2,title:"Easy-Manager-Tool AI",slug:"easy-manager-tool-ai",normalizedTitle:"easy-manager-tool ai",charIndex:1182}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"æå¡å¨ç®¡ç çæ§ç®¡ç Easy-Manager-Tool AI",content:"# æå¡å¨ç®¡ç\n\næå¡å¨ç®¡çå¯ä»¥å¸®å©ä½ ç®¡çä½ ç°æçæå¡å¨ï¼å¹¶æä¾ ssh ä»¥å sftp æ¯æï¼åæ¬ windows ä¹å¯ä»¥ï¼ä½éè¦èªå·±æå¼æ¯æã\n\né¦åæä»¬åå»éç½®ä¸ä¸ ' æå¡å¨ç» ', å¯ä»¥å¨ ' æå¡å¨è®¾ç½® ' ä¸­éç½®\n\n\n\néç½®å¥½åå°±å¯ä»¥å¨æå¡å¨ç®¡çéé¢æ·»å èªå·±çæå¡å¨\n\næç¤º\n\nå®å©ä¸ä¸ªå°åè½ç¹ï¼å¦æå¤§å®¶ç¨è¿ç­ä¿çè¯ç¥éï¼æå¡å¨çå¯ç éè¦ä¸ä¸ªæä¸æ¢ï¼è¿éæä¾äºå¿«éæ¹éæ´æ¢åè½ï¼åªéè¦å¨ç¼è¾å¯¹è¿ç¨ç IP åé¢æ·»å å¤ä¸ªå°±è¡ï¼å¦ï¼\n127.0.0.1;127.0.0.2;127.0.0.3;127.0.0.4\nè¿æ ·å°±è¾¾å°äºæ¹éä¿®æ¹è´¦å·å¯ç ï¼ä¸ä¼æ¹å¶ä»ä¿¡æ¯\n\n\n\n\n\næ·»å å¥½æå¡å¨æä»¬å°±å¯ä»¥å¼å§è¿ç¨è¿æ¥\n\n\n\nè¿æ¥åå¯ä»¥å¨æä½æ¥å¿ä¸­æ¥çä½ ä¸æ¬¡æä½çåå®¹\n\n\n\n\n# çæ§ç®¡ç\n\nçæ§ç®¡çåä¸ºæ°æ®æºç®¡çï¼èªå®ä¹çæ§ï¼åè­¦ä¿¡æ¯ç®¡çï¼éè¦ä½¿ç¨ä»¥ä¸åè½é¦åéè¦éç½®æ°æ®æºã\n\n\n\n\n\næç¤º\n\næ°æ®æºå°åå¯ä»¥æ¯ Prometheus çæ¯ä¸ä¸ª agentï¼ä¹å¯ä»¥æ¯ä½ èªå·±é¡¹ç®éæä¾çä¸ä¸ª json æ¥å£ï¼ä»ä¼ä¸å®æ¶é´åè®¿é®ä½ çæ¥å£å¹¶ééå°ä½ çæ°æ®\n\nå½ç¹å»æµè¯è¿æ¥çæ¶åï¼å¯ä»¥çä¸æ¯å¦è§£ææ­£ç¡®ï¼è§£ææ­£ç¡®æç»ä¼ä»¥ Json æ°æ®æ ¼å¼å±ç¤º\n\n\n\næ·»å å®æ°æ®æºä»¥åæä»¬éè¦ç»´æ¤ææ ï¼ææ å°±æ¯æä»¬éè¦çæ§ Json éå·ä½çé£äºææ ï¼å ä¸ºå¯è½æäºææ å¹¶ä¸éè¦çæ§ï¼æèå Prometheus æä¾ç metrics ææ å¤ªå¤ï¼å¹¶è¿éè¦å¤æçè®¡ç®ã\n\næä»¬å¨æ·»å ææ çæ¶åï¼å¯ä»¥ä¸ºæ¯ä¸ªææ è®¾ç½®åè­¦éå¼ä»¥åè¿ç»­æ¬¡æ°ï¼å½ééå°çæ°æ®è¿ç»­å æ¬¡è¶è¿è¿ä¸ªéå¼ï¼åä¼ä¸ºä½ è¿è¡åè­¦ã\n\n\n\nå·ä½çææ ç»´æ¤å¨ææ è®¾ç½®ä¸­ï¼å®ä¸ºä½ å±ç¤ºäºä½ å½å JSON ééçæ°æ®æ ¼å¼ãå½æéè¦æ·»å ä¸ä¸ªææ ï¼åªéè¦å¨å³ä¾§å¡«åæçææ åç§°ï¼ä»¥åè¡¨è¾¾å¼å³å¯ï¼ï¼è¡¨è¾¾å¼å°±æ¯å¯¹ JSON éçæ°æ®è¿è¡è¿ç®å¾å°ææ³è¦ççæ§æ°æ®ï¼å¦ææ¯é¡¹ç®èªå·±æ´æ¼çæ¥å£ï¼ä¸è¬ä¸éè¦å¨è¿è¡è®¡ç®ï¼ç´æ¥æ·»å ï¼å½è¡¨è¾¾å¼æè¿°å®æ¯åï¼å¯ä»¥å°è¯è¿è¡ï¼æ¥çç»ææ¯å¦æ­£ç¡®ï¼æ­£ç¡®åæ·»å å³å¯ï¼å½ä¸åå®æ¯åç¹å»ä¿å­ï¼ææ ç»´æ¤åç»æã\n\nè¿éæç¤ºä»¥ä¸ï¼ä½ ä¼çå°ææ å¨è¿éå¯ä»¥æ·»å å¤ä¸ªï¼è¿éé¢å¶ä¸­æä¸ä¸ªç»çæ¦å¿µï¼ä¸ºäºæ¯æ¯å¦æè¦æ·»å ç£çææ ï¼ç£çä¸è¬ä¼æå¤ä¸ªï¼ä¸ä»çåè­¦éå¼ä¸è¬ä¹ä¼æ¯ä¸æ ·çï¼æä»¥ä¸ºäºé¿åéå¤ï¼æä»¬å¤äºä¸ä¸ªç»çæ¦å¿µã\n\n\n\nææ æ·»å ç»æåæ¥ä¸æ¥æä»¬å°±å¯ä»¥èªå®ä¹çæ§é¢æ¿ï¼ç¸ä¿¡èªæçä½ åºè¯¥ä¸ç©å°±ä¼ï¼ç¹å»å¶ä½æä»¬å°±å¼å§è¿å¥èªå®ä¹ï¼èªå®ä¹å®ææä»¬å°±å¯ä»¥çæ§äº\n\n\n\næ³¨æ\n\næ¯ç§å¾å½¢æè¡¨ç¤ºçæ°æ®ç»æææåºå«ï¼ä½åªè¦çè§£ï¼æå»ºèªå·±çå¯è§åè½»èæä¸¾ï¼\næçº¿å¾å¤ç¨æ¥è¡¨ç¤ºæ¶é´è½´çæ°æ®\næ±ç¶å¾å¤ç¨æ¥è¡¨ç¤ºä¸åé¡¹ç®é´å±åé¡¹å¯¹æ¯æ°æ®\né¥¼ç¶å¾å¤ç¨æ¥è¡¨ç¤ºå æ¯\n\n\n\n\n\nå½åè­¦åä¼å¨åè­¦ä¿¡æ¯ä¸­å±ç¤ºï¼æä»¬å¯ä»¥å»å¤çè¿æ¡åè­¦å¹¶çä¸è®°å½ï¼ä»¥åç¸åé®é¢åè¦ç¾åº¦\n\n\n\n\n\n\n# Easy-Manager-Tool AI\n\nå¨ç»éç³»ç»åä½ å°±ä¼åç°å³ä¸è§çå°å¯ç±ï¼ç¹å»ä»å°±ä¼å±ç¤ºæä»¬ç AI äº¤äºè½åã\n\n\n\n\n\nä½å¨è¿è¡äº¤äºåï¼åè¦ç¡®ä¿ä½ ç GPT ç»è¿è®¾ç½®ï¼ä½ æçï¼å¦åä¸è½ä½¿ç¨ï¼æä»¬å¯ä»¥å¨ AI çå·¦ä¸è§é½¿è½®è¿è¡è®¾ç½®ï¼ç®åæä»¬åªæ¯æäº openAIï¼å¶ä» AI ä¼éç»­æ¯æã\n\næ¯å¦ä»£çæå¼ï¼ä¼è®©ä½ è¿è¡è®¾ç½®æå¡å¨ä»£çç IP å ç«¯å£ï¼å¦æä½ åå½å¤æå¡å¨ï¼å¯ä»¥å®è£ä¸ä¸ªä»£çå·¥å·ä¿ç IP åç«¯å£è¿è¡è½¬åã\n\nååä»£çä¸è¬æ¶ openAI å®ç½å°åï¼ä½ä¸äºèªæçå¤§ä½¬è½æ¾å°éè¿ååååä»£ç openAI å®ç½ï¼æ³äºè§£å¯ä»¥å¨è¯¢åä¸»ãæ¥ä¸æ¥å°±æ¯ key è¿ä¸ª key åºæ¬ä¸è±é±ä¸å¯è½ãè®¾ç½®å®ååå°±å¯ä»¥ä¸ AI è¿è¡äº¤äºäº\n\n",normalizedContent:"# æå¡å¨ç®¡ç\n\næå¡å¨ç®¡çå¯ä»¥å¸®å©ä½ ç®¡çä½ ç°æçæå¡å¨ï¼å¹¶æä¾ ssh ä»¥å sftp æ¯æï¼åæ¬ windows ä¹å¯ä»¥ï¼ä½éè¦èªå·±æå¼æ¯æã\n\né¦åæä»¬åå»éç½®ä¸ä¸ ' æå¡å¨ç» ', å¯ä»¥å¨ ' æå¡å¨è®¾ç½® ' ä¸­éç½®\n\n\n\néç½®å¥½åå°±å¯ä»¥å¨æå¡å¨ç®¡çéé¢æ·»å èªå·±çæå¡å¨\n\næç¤º\n\nå®å©ä¸ä¸ªå°åè½ç¹ï¼å¦æå¤§å®¶ç¨è¿ç­ä¿çè¯ç¥éï¼æå¡å¨çå¯ç éè¦ä¸ä¸ªæä¸æ¢ï¼è¿éæä¾äºå¿«éæ¹éæ´æ¢åè½ï¼åªéè¦å¨ç¼è¾å¯¹è¿ç¨ç ip åé¢æ·»å å¤ä¸ªå°±è¡ï¼å¦ï¼\n127.0.0.1;127.0.0.2;127.0.0.3;127.0.0.4\nè¿æ ·å°±è¾¾å°äºæ¹éä¿®æ¹è´¦å·å¯ç ï¼ä¸ä¼æ¹å¶ä»ä¿¡æ¯\n\n\n\n\n\næ·»å å¥½æå¡å¨æä»¬å°±å¯ä»¥å¼å§è¿ç¨è¿æ¥\n\n\n\nè¿æ¥åå¯ä»¥å¨æä½æ¥å¿ä¸­æ¥çä½ ä¸æ¬¡æä½çåå®¹\n\n\n\n\n# çæ§ç®¡ç\n\nçæ§ç®¡çåä¸ºæ°æ®æºç®¡çï¼èªå®ä¹çæ§ï¼åè­¦ä¿¡æ¯ç®¡çï¼éè¦ä½¿ç¨ä»¥ä¸åè½é¦åéè¦éç½®æ°æ®æºã\n\n\n\n\n\næç¤º\n\næ°æ®æºå°åå¯ä»¥æ¯ prometheus çæ¯ä¸ä¸ª agentï¼ä¹å¯ä»¥æ¯ä½ èªå·±é¡¹ç®éæä¾çä¸ä¸ª json æ¥å£ï¼ä»ä¼ä¸å®æ¶é´åè®¿é®ä½ çæ¥å£å¹¶ééå°ä½ çæ°æ®\n\nå½ç¹å»æµè¯è¿æ¥çæ¶åï¼å¯ä»¥çä¸æ¯å¦è§£ææ­£ç¡®ï¼è§£ææ­£ç¡®æç»ä¼ä»¥ json æ°æ®æ ¼å¼å±ç¤º\n\n\n\næ·»å å®æ°æ®æºä»¥åæä»¬éè¦ç»´æ¤ææ ï¼ææ å°±æ¯æä»¬éè¦çæ§ json éå·ä½çé£äºææ ï¼å ä¸ºå¯è½æäºææ å¹¶ä¸éè¦çæ§ï¼æèå prometheus æä¾ç metrics ææ å¤ªå¤ï¼å¹¶è¿éè¦å¤æçè®¡ç®ã\n\næä»¬å¨æ·»å ææ çæ¶åï¼å¯ä»¥ä¸ºæ¯ä¸ªææ è®¾ç½®åè­¦éå¼ä»¥åè¿ç»­æ¬¡æ°ï¼å½ééå°çæ°æ®è¿ç»­å æ¬¡è¶è¿è¿ä¸ªéå¼ï¼åä¼ä¸ºä½ è¿è¡åè­¦ã\n\n\n\nå·ä½çææ ç»´æ¤å¨ææ è®¾ç½®ä¸­ï¼å®ä¸ºä½ å±ç¤ºäºä½ å½å json ééçæ°æ®æ ¼å¼ãå½æéè¦æ·»å ä¸ä¸ªææ ï¼åªéè¦å¨å³ä¾§å¡«åæçææ åç§°ï¼ä»¥åè¡¨è¾¾å¼å³å¯ï¼ï¼è¡¨è¾¾å¼å°±æ¯å¯¹ json éçæ°æ®è¿è¡è¿ç®å¾å°ææ³è¦ççæ§æ°æ®ï¼å¦ææ¯é¡¹ç®èªå·±æ´æ¼çæ¥å£ï¼ä¸è¬ä¸éè¦å¨è¿è¡è®¡ç®ï¼ç´æ¥æ·»å ï¼å½è¡¨è¾¾å¼æè¿°å®æ¯åï¼å¯ä»¥å°è¯è¿è¡ï¼æ¥çç»ææ¯å¦æ­£ç¡®ï¼æ­£ç¡®åæ·»å å³å¯ï¼å½ä¸åå®æ¯åç¹å»ä¿å­ï¼ææ ç»´æ¤åç»æã\n\nè¿éæç¤ºä»¥ä¸ï¼ä½ ä¼çå°ææ å¨è¿éå¯ä»¥æ·»å å¤ä¸ªï¼è¿éé¢å¶ä¸­æä¸ä¸ªç»çæ¦å¿µï¼ä¸ºäºæ¯æ¯å¦æè¦æ·»å ç£çææ ï¼ç£çä¸è¬ä¼æå¤ä¸ªï¼ä¸ä»çåè­¦éå¼ä¸è¬ä¹ä¼æ¯ä¸æ ·çï¼æä»¥ä¸ºäºé¿åéå¤ï¼æä»¬å¤äºä¸ä¸ªç»çæ¦å¿µã\n\n\n\nææ æ·»å ç»æåæ¥ä¸æ¥æä»¬å°±å¯ä»¥èªå®ä¹çæ§é¢æ¿ï¼ç¸ä¿¡èªæçä½ åºè¯¥ä¸ç©å°±ä¼ï¼ç¹å»å¶ä½æä»¬å°±å¼å§è¿å¥èªå®ä¹ï¼èªå®ä¹å®ææä»¬å°±å¯ä»¥çæ§äº\n\n\n\næ³¨æ\n\næ¯ç§å¾å½¢æè¡¨ç¤ºçæ°æ®ç»æææåºå«ï¼ä½åªè¦çè§£ï¼æå»ºèªå·±çå¯è§åè½»èæä¸¾ï¼\næçº¿å¾å¤ç¨æ¥è¡¨ç¤ºæ¶é´è½´çæ°æ®\næ±ç¶å¾å¤ç¨æ¥è¡¨ç¤ºä¸åé¡¹ç®é´å±åé¡¹å¯¹æ¯æ°æ®\né¥¼ç¶å¾å¤ç¨æ¥è¡¨ç¤ºå æ¯\n\n\n\n\n\nå½åè­¦åä¼å¨åè­¦ä¿¡æ¯ä¸­å±ç¤ºï¼æä»¬å¯ä»¥å»å¤çè¿æ¡åè­¦å¹¶çä¸è®°å½ï¼ä»¥åç¸åé®é¢åè¦ç¾åº¦\n\n\n\n\n\n\n# easy-manager-tool ai\n\nå¨ç»éç³»ç»åä½ å°±ä¼åç°å³ä¸è§çå°å¯ç±ï¼ç¹å»ä»å°±ä¼å±ç¤ºæä»¬ç ai äº¤äºè½åã\n\n\n\n\n\nä½å¨è¿è¡äº¤äºåï¼åè¦ç¡®ä¿ä½ ç gpt ç»è¿è®¾ç½®ï¼ä½ æçï¼å¦åä¸è½ä½¿ç¨ï¼æä»¬å¯ä»¥å¨ ai çå·¦ä¸è§é½¿è½®è¿è¡è®¾ç½®ï¼ç®åæä»¬åªæ¯æäº openaiï¼å¶ä» ai ä¼éç»­æ¯æã\n\næ¯å¦ä»£çæå¼ï¼ä¼è®©ä½ è¿è¡è®¾ç½®æå¡å¨ä»£çç ip å ç«¯å£ï¼å¦æä½ åå½å¤æå¡å¨ï¼å¯ä»¥å®è£ä¸ä¸ªä»£çå·¥å·ä¿ç ip åç«¯å£è¿è¡è½¬åã\n\nååä»£çä¸è¬æ¶ openai å®ç½å°åï¼ä½ä¸äºèªæçå¤§ä½¬è½æ¾å°éè¿ååååä»£ç openai å®ç½ï¼æ³äºè§£å¯ä»¥å¨è¯¢åä¸»ãæ¥ä¸æ¥å°±æ¯ key è¿ä¸ª key åºæ¬ä¸è±é±ä¸å¯è½ãè®¾ç½®å®ååå°±å¯ä»¥ä¸ ai è¿è¡äº¤äºäº\n\n",charsets:{cjk:!0}},{title:"åå®¹æ´æ°",frontmatter:{title:"åå®¹æ´æ°",date:"2023-06-25T09:22:36.000Z",permalink:"/easy-manager-tool/2202",sidebar:!0,article:!1,comment:!1,editLink:!1},regularPath:"/06.%E4%BD%9C%E5%93%81/2200.Easy-Manager-Tool/2202.%E5%86%85%E5%AE%B9%E6%9B%B4%E6%96%B0.html",relativePath:"06.ä½å/2200.Easy-Manager-Tool/2202.åå®¹æ´æ°.md",key:"v-05550a82",path:"/easy-manager-tool/2202/",headers:[{level:2,title:"2023.8.18",slug:"_2023-8-18",normalizedTitle:"2023.8.18",charIndex:2}],lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:"2023.8.18",content:"# 2023.8.18\n\n 1. è§£å³ ssh å¤å¶åå®¹å¤±è´¥é®é¢\n 2. è§£å³ sftp å é¤æä»¶æç¤ºå¤±è´¥ï¼ä½æ¯æä»¶å·²å é¤é®é¢\n 3. è§£å³æ³¨åè´¦å·éå¤æ¥éé®é¢\n 4. è§£å³æ³¨åè½¬ç»å½ 404 é®é¢\n 5. è§£å³æ³¨ååéæç¤ºé®é¢",normalizedContent:"# 2023.8.18\n\n 1. è§£å³ ssh å¤å¶åå®¹å¤±è´¥é®é¢\n 2. è§£å³ sftp å é¤æä»¶æç¤ºå¤±è´¥ï¼ä½æ¯æä»¶å·²å é¤é®é¢\n 3. è§£å³æ³¨åè´¦å·éå¤æ¥éé®é¢\n 4. è§£å³æ³¨åè½¬ç»å½ 404 é®é¢\n 5. è§£å³æ³¨ååéæç¤ºé®é¢",charsets:{cjk:!0}},{title:"Home",frontmatter:{home:!0,heroImage:"/assets/img/logo.png",heroText:"BigUncleææ¯åå®¢",tagline:"é ææ¯æä¹èµé±ï¼é¤äºæå·¥ï¼ä¸ç´å¨ç ç©¶",bannerBg:"none",features:[{title:"ä»ä¹æ¯å¨æ ",details:"çå³ä¸æ¹å°±ç¥éï¼é½æä½é½ä¸ç²¾éï¼å«å­¦æ"},{title:"èªå·±çé¡¹ç®",details:"å¼æºé¡¹ç® easy-securityï¼æ¶è´¹é¡¹ç® easy-manager-tool"},{title:"çæ³å°±æ¯èµé±",details:"å­¦é£ä¹å¤æä»ä¹ç¨ï¼èµé±ææ¯ç¡¬éçï¼æå´è¶£å æç ç©¶"}],postList:"none",simplePostListLength:0,hideRightBar:!0},regularPath:"/",relativePath:"index.md",key:"v-59de6d20",path:"/",lastUpdated:"8/21/2023, 9:59:17 AM",lastUpdatedTimestamp:1692583157e3,headersStr:null,content:"",normalizedContent:"",charsets:{}}],themeConfig:{nav:[{text:"é¦é¡µ",link:"/"},{text:"Java",items:[{text:"Java",link:"/java/100/"},{text:"Spring",link:"/spring/200/"},{text:"Mybatis",link:"/mybatis/300/"},{text:"Maven",link:"/maven/2300/"}]},{text:"è¿ç»´",items:[{text:"Docker",link:"/docker/400/"},{text:"Jenkins",link:"/jenkins/500/"},{text:"Kubernetes",link:"/kubernetes/600/"}]},{text:"å¤§æ°æ®",items:[{text:"Hadoop",link:"/hadoop/700/"},{text:"ClickHouse",link:"/clickhouse/800/"},{text:"Hbase",link:"/hbase/900/"},{text:"Hive",link:"/hive/1000/"},{text:"Flume",link:"/flume/1100/"},{text:"Flink",link:"/flink/1200/"}]},{text:"æ°æ®åº",items:[{text:"MySQL",link:"/mysql/1300/"},{text:"MongoDB",link:"/mongodb/1800/"}]},{text:"ä¸­é´ä»¶",items:[{text:"KAFKA",link:"/kafka/1400/"},{text:"RabbitMQ",link:"/rabbitmq/1500/"},{text:"Redis",link:"/redis/1600/"},{text:"Nginx",link:"/nginx/1700/"}]},{text:"åç«¯",items:[{text:"VUE3",link:"/vue3/1900/"},{text:"å¾®ä¿¡å°ç¨åº",link:"/wx/2000/"}]},{text:"ä½å",items:[{text:"Easy-Security",link:"/easy-security/2100/"},{text:"Easy-Manager-Tool",link:"/easy-manager-tool/2200/"}]}],sidebarDepth:2,logo:"/assets/img/logo.png",repo:"landashu?tab=repositories",searchMaxSuggestions:10,lastUpdated:"ä¸æ¬¡æ´æ°",docsDir:"docs",editLinks:!1,editLinkText:"ç¼è¾",pageStyle:"line",category:!1,tag:!1,archive:!1,sidebarOpen:!0,sidebar:{"/00.java/":[{title:"java",collapsable:!1,children:[["10.java/100.java1.md","JVM","/java/100/"]]},{title:"Spring",collapsable:!1,children:[["20.Spring/200.æ ¸å¿åè½æè§£ IOC.md","æ ¸å¿åè½æè§£ IOC","/spring/200/"],["20.Spring/201.æ ¸å¿åè½æè§£ AOP.md","æ ¸å¿åè½æè§£ AOP","/spring/201/"],["20.Spring/202.æ ¸å¿åè½æè§£ äºä»¶éç¥.md","æ ¸å¿åè½æè§£ äºä»¶éç¥","/spring/202/"],["20.Spring/203.æ ¸å¿åè½æè§£ ä¸çº§ç¼å­.md","æ ¸å¿åè½æè§£ ä¸çº§ç¼å­","/spring/203/"],["20.Spring/204.æ ¸å¿åè½æè§£ FactoryBean.md","æ ¸å¿åè½æè§£ FactoryBean","/spring/204/"],["20.Spring/205.æ³¨è§£æ¿ä»£Springçå½å¨æå®ç°ç±».md","æ³¨è§£æ¿ä»£Springçå½å¨æå®ç°ç±»","/spring/205/"]]},{title:"Mybatis",collapsable:!1,children:[["30.Mybatis/300.æ ¸å¿åè½æè§£ å·¥ä½æµç¨.md","æ ¸å¿åè½æè§£ å·¥ä½æµç¨","/mybatis/300/"],["30.Mybatis/301.æ ¸å¿åè½æè§£ Pluginæä»¶åè½å®ç°.md","æ ¸å¿åè½æè§£ Pluginæä»¶åè½å®ç°","/mybatis/301/"],["30.Mybatis/302.æ ¸å¿åè½æè§£ ä¸äºçº§ç¼å­åç.md","æ ¸å¿åè½æè§£ ä¸äºçº§ç¼å­åç","/mybatis/302/"],["30.Mybatis/303.MyBatis Plus+Spring Boot å®ç°ä¸äºçº§ç¼å­ä»¥åèªå®ä¹ç¼å­.md","MyBatis Plus+Spring Boot å®ç°ä¸äºçº§ç¼å­ä»¥åèªå®ä¹ç¼å­","/mybatis/303/"]]},{title:"maven",collapsable:!1,children:[["2300.maven/2300.pom æä»¶ä»ç»å parentãproperties æ ç­¾è¯¦è§£.md","pom æä»¶ä»ç»å parentãproperties æ ç­¾è¯¦è§£","/maven/2300/"],["2300.maven/2301.dependencies æ ç­¾è¯¦è§£.md","dependencies æ ç­¾è¯¦è§£","/maven/2301/"],["2300.maven/2302.ä½¿ç¨ Nexus3.x æ­å»ºç§æ.md","ä½¿ç¨ Nexus3.x æ­å»ºç§æ","/maven/2302/"]]}],catalogue:{},"/01.è¿ç»´/":[{title:"Docker",collapsable:!1,children:[["40.Docker/400.Docker æ¦å¿µãå½ä»¤åDockerfileä»ç».md","Docker æ¦å¿µãå½ä»¤åDockerfileä»ç»","/docker/400"],["40.Docker/401.Docker-Compose å½ä»¤ååºæ¬ä½¿ç¨.md","Docker-Compose å½ä»¤ååºæ¬ä½¿ç¨","/docker/401"]]}],"/06.ä½å/":[{title:"Easy-Security",collapsable:!1,children:[["2100.Easy-Security/2100.index.md","ä»ç»åä½¿ç¨","/easy-security/2100"]]},{title:"Easy-Manager-Tool",collapsable:!1,children:[["2200.Easy-Manager-Tool/2200.ä»ç»åå®è£.md","ä»ç»åå®è£","/easy-manager-tool/2200"],["2200.Easy-Manager-Tool/2201.åè½æ¼ç¤º.md","åè½æ¼ç¤º","/easy-manager-tool/2201"],["2200.Easy-Manager-Tool/2202.åå®¹æ´æ°.md","åå®¹æ´æ°","/easy-manager-tool/2202"]]}]},extendFrontmatter:{article:!1},updateBar:{showToArticle:!1,moreArticle:"/archives"},social:{icons:[{iconClass:"icon-gitee",title:"gitee",link:"https://gitee.com/dashboard"},{iconClass:"icon-github",title:"GitHub",link:"https://github.com/landashu?tab=repositories"},{iconClass:"icon-youjian",title:"åé®ä»¶",link:"mailto:875730567@qq.com"}]},footer:{createYear:2023,copyrightInfo:"\n\x3c!--      <a href='https://doc.xugaoyi.com/' target='_blank'>Theme by Vdoing</a> | <a href='http://doc.aizuda.com/' rel='external nofollow' target='_blank'>Copyright Â© 2022-2023 AiZuDa</a>--\x3e\n\x3c!--      <br>--\x3e\n\x3c!--      <a href=\"http://beian.miit.gov.cn/\" target=\"_blank\">é²ICPå¤2021041554å·-1</a>--\x3e\n    "}}},Js=(t(116),t(213),t(111),t(223)),Qs=t(224),Ys=(t(377),t(158),t(52));var Zs={computed:{$filterPosts:function(){return this.$site.pages.filter((function(n){var e=n.frontmatter,t=e.pageComponent,r=e.article,a=e.home;return!(t||!1===r||!0===a)}))},$sortPosts:function(){return(n=this.$filterPosts).sort((function(n,e){var t=n.frontmatter.sticky,r=e.frontmatter.sticky;return t&&r?t==r?Object(Ys.a)(n,e):t-r:t&&!r?-1:!t&&r?1:Object(Ys.a)(n,e)})),n;var n},$sortPostsByDate:function(){return(n=this.$filterPosts).sort((function(n,e){return Object(Ys.a)(n,e)})),n;var n},$groupPosts:function(){return function(n){for(var e={},t={},r=function(r,a){var o=n[r].frontmatter,i=o.categories,s=o.tags;"array"===Object(Ys.n)(i)&&i.forEach((function(t){t&&(e[t]||(e[t]=[]),e[t].push(n[r]))})),"array"===Object(Ys.n)(s)&&s.forEach((function(e){e&&(t[e]||(t[e]=[]),t[e].push(n[r]))}))},a=0,o=n.length;a<o;a++)r(a);return{categories:e,tags:t}}(this.$sortPosts)},$categoriesAndTags:function(){return function(n){var e=[],t=[];for(var r in n.categories)e.push({key:r,length:n.categories[r].length});for(var a in n.tags)t.push({key:a,length:n.tags[a].length});return{categories:e,tags:t}}(this.$groupPosts)}}};Ia.component(Js.default),Ia.component(Qs.default);function nc(n){return n.toString().padStart(2,"0")}t(381);Ia.component("Badge",(function(){return Promise.all([t.e(1),t.e(12)]).then(t.bind(null,512))})),Ia.component("CodeBlock",(function(){return Promise.resolve().then(t.bind(null,223))})),Ia.component("CodeGroup",(function(){return Promise.resolve().then(t.bind(null,224))}));t(382);var ec=Ia.extend({props:{bvid:{type:String,default:{page:1,danmaku:!0,allowfullscreen:"allowfullscreen",sandbox:"allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups",width:"100%",height:[.5625,70]}.bvid,required:!0},danmaku:{type:Boolean,default:!0,required:!1},page:{type:Number,default:1,required:!1},sandbox:{type:String,default:"allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups",required:!1},allowfullscreen:{type:[String,Boolean],default:"allowfullscreen",required:!1},width:{type:String,default:"100%",required:!1},height:{type:Array,default:function(){return[.5625,70]},required:!1}},render:function(){var n=arguments[0];return n("div",{class:"smplayer"},[n("iframe",{ref:"sbplayer",style:"width: ".concat(this.width),attrs:{src:"//player.bilibili.com/player.html?bvid=".concat(this.bvid,"&page=").concat(this.page,"&danmaku=").concat(this.danmaku),allowfullscreen:(this.allowfullscreen,!0),scrolling:"no",frameborder:"0",sandbox:this.sandbox}})])},mounted:function(){var n=this;this.$nextTick((function(){var e=n.$refs.sbplayer;e.style.height="".concat(e.scrollWidth*n.height[0]+n.height[1],"px")}))}}),tc=Ia.extend({props:{xid:{type:String,default:null,required:!0},id:{type:String,default:null,required:!1},autoplay:{type:Boolean,default:!1,required:!1},startTime:{type:Number,default:0,required:!1},sandbox:{type:String,default:"allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups",required:!1},allowfullscreen:{type:[String,Boolean],default:"allowfullscreen",required:!1},width:{type:String,default:"100%",required:!1},height:{type:Array,default:function(){return[.5625,0]},required:!1}},render:function(){var n=arguments[0];return n("div",{class:"smplayer"},[n("iframe",{ref:"sbplayer",style:"width: ".concat(this.width),attrs:{src:"//www.ixigua.com/iframe/".concat(this.xid,"?").concat(this.id?"id="+this.id+"&":"","autoplay=").concat(this.autoplay?1:0,"&startTime=").concat(this.startTime),allowfullscreen:(this.allowfullscreen,!0),scrolling:"no",frameborder:"0",sandbox:this.sandbox}})])},mounted:function(){var n=this;this.$nextTick((function(){var e=n.$refs.sbplayer;e.style.height="".concat(e.scrollWidth*n.height[0]+n.height[1],"px")}))}}),rc=t(23),ac=t(17),oc=(t(106),t(151),function(){function n(e){ls(this,n),Object(ac.a)(this,"src",void 0),Object(ac.a)(this,"player",void 0),e&&(this.src=e)}var e;return ps(n,[{key:"InitPlayer",value:(e=Object(r.a)(regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.src){n.next=4;break}return n.next=3,t.e(6).then(t.t.bind(null,475,7)).then(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(r){var a,o,i,s,c,l,u,p,d,f,m,h,v,g,b,y,x,w,k,j,S,O,C,E,A,_,B,P,T,I,M;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(f=r.default,m=!1,h=!1,v=!1,g=!1,b=!1,e.src.video.customType=(null===(a=e.src)||void 0===a||null===(o=a.video)||void 0===o?void 0:o.customType)||{},null!==(i=e.src)&&void 0!==i&&null!==(s=i.video)&&void 0!==s&&s.type||(null!==(y=e.src)&&void 0!==y&&null!==(x=y.video)&&void 0!==x&&x.url.toLowerCase().endsWith(".m3u8")?e.src.video.type="hls":null!==(w=e.src)&&void 0!==w&&null!==(k=w.video)&&void 0!==k&&k.url.toLowerCase().endsWith(".flv")?e.src.video.type="flv":null!==(j=e.src)&&void 0!==j&&null!==(S=j.video)&&void 0!==S&&S.url.toLowerCase().endsWith(".mpd")&&(e.src.video.type="shakaDash")),null===(c=e.src)||void 0===c||null===(l=c.video)||void 0===l||!l.type||"string"!=typeof e.src.video.type){n.next=27;break}n.t0=e.src.video.type.toLowerCase(),n.next="hls"===n.t0||"m3u8"===n.t0?12:"flv"===n.t0?15:"dash"===n.t0?18:"shakadash"===n.t0||"shaka"===n.t0||"shaka-dash"===n.t0?21:"webtorrent"===n.t0?24:27;break;case 12:return e.src.video.type="smplayerDplayerHls",m=!0,n.abrupt("break",27);case 15:return e.src.video.type="smplayerDplayerFlv",h=!0,n.abrupt("break",27);case 18:return e.src.video.type="smplayerDplayerDash",v=!0,n.abrupt("break",27);case 21:return e.src.video.type="smplayerDplayerShakaDash",g=!0,n.abrupt("break",27);case 24:return e.src.video.type="smplayerDplayerWebtorrent",b=!0,n.abrupt("break",27);case 27:if(null!=(null===(u=e.src)||void 0===u||null===(p=u.video)||void 0===p?void 0:p.quality)&&e.src.video.quality.length>0&&e.src.video.quality.forEach((function(n){if(null==n.type&&(n.url.toLowerCase().endsWith(".m3u8")?n.type="m3u8":n.url.toLowerCase().endsWith(".flv")?n.type="flv":n.url.toLowerCase().endsWith(".mpd")&&(n.type="shakaDash")),null!=n.type&&"string"==typeof n.type)switch(n.type.toLowerCase()){case"hls":case"m3u8":n.type="smplayerDplayerHls",m=!0;break;case"flv":n.type="smplayerDplayerFlv",h=!0;break;case"dash":n.type="smplayerDplayerDash",v=!0;break;case"shakadash":case"shaka":case"shaka-dash":n.type="smplayerDplayerShakaDash",g=!0;break;case"webtorrent":n.type="smplayerDplayerWebtorrent",b=!0}})),m&&Object.assign(null===(O=e.src)||void 0===O||null===(C=O.video)||void 0===C?void 0:C.customType,{smplayerDplayerHls:function(n,e){t.e(7).then(t.t.bind(null,476,7)).then((function(t){var r=t.default,a=n.src,o=new r;o.attachMedia(n),o.on(r.Events.MEDIA_ATTACHED,(function(){o.loadSource(a)})),e.on("destroy",(function(){o.destroy()}))}))}}),h&&Object.assign(null===(E=e.src)||void 0===E||null===(A=E.video)||void 0===A?void 0:A.customType,{smplayerDplayerFlv:function(n,e){t.e(8).then(t.t.bind(null,477,7)).then((function(t){var r=t.default.createPlayer({type:"flv",url:n.src});r.attachMediaElement(n),r.load(),e.on("destroy",(function(){r.destroy()}))}))}}),v&&Object.assign(null===(_=e.src)||void 0===_||null===(B=_.video)||void 0===B?void 0:B.customType,{smplayerDplayerDash:function(n,e){t.e(5).then(t.t.bind(null,478,7)).then((function(t){var r=t.default.MediaPlayer().create();r.initialize(n,n.src,!1),e.on("destroy",(function(){r.reset()}))}))}}),g&&Object.assign(null===(P=e.src)||void 0===P||null===(T=P.video)||void 0===T?void 0:T.customType,{smplayerDplayerShakaDash:function(n,e){t.e(9).then(t.t.bind(null,479,7)).then((function(t){var r=new t.default.Player(n);r.load(n.src).then((function(){e.on("destroy",(function(){r.destroy()}))}))}))}}),b&&Object.assign(null===(I=e.src)||void 0===I||null===(M=I.video)||void 0===M?void 0:M.customType,{smplayerDplayerWebtorrent:function(n,e){t.e(10).then(t.t.bind(null,480,7)).then((function(t){var r=new(0,t.default);r.add(n.src,(function(t){t.files.find((function(n){return n.name.endsWith(".mp4")})).renderTo(n),e.on("destroy",(function(){r.destroy()}))}))}))}}),null===(d=e.src)||void 0===d||!d.customInit){n.next=39;break}return n.next=36,e.src.customInit(f,e.src).then((function(n){return e.player=n,e.player}));case 36:n.t1=n.sent,n.next=40;break;case 39:n.t1=new f(e.src);case 40:return e.player=n.t1,n.abrupt("return",e.player);case 42:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n,this)}))),function(){return e.apply(this,arguments)})},{key:"DestroyPlayer",value:function(){var n;null===(n=this.player)||void 0===n||n.destroy()}},{key:"AddOnEvent",value:function(n){var e=this;n&&this.player&&Object.keys(n).forEach((function(t){e.player.on(t,(function(){return n[t](e.player,e.src)}))}))}}]),n}()),ic=t(24),sc=t.n(ic),cc=Ia.extend({props:{src:{type:Object,required:!0},on:{type:Object,default:function(){return{}},required:!1},width:{type:String,default:"100%",required:!1},height:{type:Array,default:function(){return{src:{container:null},width:"100%",on:{}}.height},required:!1}},render:function(){var n=arguments[0];return n("div",{class:"smplayer"},[n("div",{ref:"sbplayer",style:"width: ".concat(this.width)})])},data:function(){return{player:{}}},mounted:function(){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sc()({},n.on),r=Object(rc.a)(Object(rc.a)({},sc()({container:null},n.src)),{},{container:n.$refs.sbplayer}),n.player=new oc(r),e.next=5,n.player.InitPlayer();case 5:n.player.AddOnEvent(t);case 6:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){var n;null===(n=this.player)||void 0===n||n.DestroyPlayer()}}),lc=(t(107),function(){function n(e){ls(this,n),Object(ac.a)(this,"src",void 0),Object(ac.a)(this,"player",void 0),e&&(this.src=e)}var e;return ps(n,[{key:"InitPlayer",value:(e=Object(r.a)(regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.src){n.next=4;break}return n.next=3,Promise.all([Promise.all([t.e(1),t.e(3)]).then(t.t.bind(null,481,7)),Promise.all([t.e(1),t.e(3)]).then(t.t.bind(null,482,7))]).then(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(r){var a,o,i,s,c,l,u,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=Object(Ki.a)(r,1),l=c[0].default,e.src.customAudioType=(null===(a=e.src)||void 0===a?void 0:a.customAudioType)||{},u=!1,null===(o=e.src)||void 0===o||null===(i=o.audio)||void 0===i||i.forEach((function(n){if(n.type||n.url.toLowerCase().endsWith(".m3u8")&&(n.type="hls"),n.type&&"string"==typeof n.type)switch(n.type.toLowerCase()){case"hls":case"m3u8":n.type="smplayerAplayerHls",u=!0}})),u&&Object.assign(null===(p=e.src)||void 0===p?void 0:p.customAudioType,{smplayerAplayerHls:function(n,e,r){t.e(7).then(t.t.bind(null,476,7)).then((function(t){var a=t.default,o=!1===r.audio.paused;if(n.canPlayType("application/x-mpegURL")||n.canPlayType("application/vnd.apple.mpegURL"))n.src=e.url;else if(a.isSupported()){var i=new a;i.attachMedia(n),i.on(a.Events.MEDIA_ATTACHED,(function(){i.loadSource(e.url)})),r.on("destroy",(function(){i.destroy()}))}else r.notice("Error: HLS is not supported.");o&&r.play()}))}}),null===(s=e.src)||void 0===s||!s.customInit){n.next=11;break}return n.next=8,e.src.customInit(l,e.src).then((function(n){return e.player=n,e.player}));case 8:n.t0=n.sent,n.next=12;break;case 11:n.t0=new l(e.src);case 12:return e.player=n.t0,n.abrupt("return",e.player);case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n,this)}))),function(){return e.apply(this,arguments)})},{key:"DestroyPlayer",value:function(){var n;!this.player||null!==(n=this.src)&&void 0!==n&&n.fixed||this.player.destroy()}},{key:"AddOnEvent",value:function(n){var e=this;n&&this.player&&Object.keys(n).forEach((function(t){e.player.on(t,(function(){return n[t](e.player,e.src)}))}))}}]),n}()),uc=Ia.extend({props:{src:{type:Object,required:!0},on:{type:Object,default:function(){return{}},required:!1}},render:function(){var n=arguments[0];return n("div",{class:"smplayer"},[n("div",{ref:"sbplayer"})])},data:function(){return{player:{}}},mounted:function(){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sc()({},n.on),r=Object(rc.a)(Object(rc.a)({},sc()({lrcType:3},n.src)),{},{container:n.$refs.sbplayer}),n.player=new lc(r),e.next=5,n.player.InitPlayer();case 5:n.player.AddOnEvent(t),n.$nextTick((function(){if(n.src.fixed){var e=document.querySelector("#app");null==e||e.append(n.$el)}}));case 7:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){var n;null===(n=this.player)||void 0===n||n.DestroyPlayer()}}),pc=function(){function n(e){ls(this,n),Object(ac.a)(this,"src",void 0),Object(ac.a)(this,"player",void 0),e&&(this.src=e)}var e;return ps(n,[{key:"InitPlayer",value:(e=Object(r.a)(regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.src){n.next=4;break}return n.next=3,t.e(4).then(t.t.bind(null,483,7)).then(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(r){var a,o,i,s,c,l,u,p,d,f,m,h,v,g,b,y,x,w,k,j,S,O;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=r.default,u=!1,p=!1,d=!1,f=!1,m=!1,e.src.customType=(null===(a=e.src)||void 0===a?void 0:a.customType)||{},null!==(o=e.src)&&void 0!==o&&o.type||(null!==(h=e.src)&&void 0!==h&&null!==(v=h.url)&&void 0!==v&&v.toLowerCase().endsWith(".m3u8")?e.src.type="hls":null!==(g=e.src)&&void 0!==g&&null!==(b=g.url)&&void 0!==b&&b.toLowerCase().endsWith(".flv")?e.src.type="flv":null!==(y=e.src)&&void 0!==y&&null!==(x=y.url)&&void 0!==x&&x.toLowerCase().endsWith(".mpd")&&(e.src.type="shakaDash")),null===(i=e.src)||void 0===i||!i.type||"string"!=typeof e.src.type){n.next=27;break}n.t0=e.src.type.toLowerCase(),n.next="hls"===n.t0||"m3u8"===n.t0?12:"flv"===n.t0?15:"dash"===n.t0?18:"shakadash"===n.t0||"shaka"===n.t0||"shaka-dash"===n.t0?21:"webtorrent"===n.t0?24:27;break;case 12:return e.src.type="smplayerArtplayerHls",u=!0,n.abrupt("break",27);case 15:return e.src.type="smplayerArtplayerFlv",p=!0,n.abrupt("break",27);case 18:return e.src.type="smplayerArtplayerDash",d=!0,n.abrupt("break",27);case 21:return e.src.type="smplayerArtplayerShakaDash",f=!0,n.abrupt("break",27);case 24:return e.src.type="smplayerArtplayerWebtorrent",m=!0,n.abrupt("break",27);case 27:if(null!=(null===(s=e.src)||void 0===s?void 0:s.quality)&&e.src.quality.length>0&&e.src.quality.forEach((function(n){if(null==n.type&&(n.url.toLowerCase().endsWith(".m3u8")?n.type="m3u8":n.url.toLowerCase().endsWith(".flv")?n.type="flv":n.url.toLowerCase().endsWith(".mpd")&&(n.type="shakaDash")),null!=n.type&&"string"==typeof n.type)switch(n.type.toLowerCase()){case"hls":case"m3u8":n.type="smplayerArtplayerHls",u=!0;break;case"flv":n.type="smplayerArtplayerFlv",p=!0;break;case"dash":n.type="smplayerArtplayerDash",d=!0;break;case"shakadash":case"shaka":case"shaka-dash":n.type="smplayerArtplayerShakaDash",f=!0;break;case"webtorrent":n.type="smplayerArtplayerWebtorrent",m=!0}})),u&&Object.assign(null===(w=e.src)||void 0===w?void 0:w.customType,{smplayerArtplayerHls:function(n,e,r){t.e(7).then(t.t.bind(null,476,7)).then((function(t){var a=t.default,o=new a;o.attachMedia(n),o.on(a.Events.MEDIA_ATTACHED,(function(){o.loadSource(e)})),r.on("destroy",(function(){o.destroy()}))}))}}),p&&Object.assign(null===(k=e.src)||void 0===k?void 0:k.customType,{smplayerArtplayerFlv:function(n,e,r){t.e(8).then(t.t.bind(null,477,7)).then((function(t){var a=t.default.createPlayer({type:"flv",url:e});a.attachMediaElement(n),a.load(),r.on("destroy",(function(){a.destroy()}))}))}}),d&&Object.assign(null===(j=e.src)||void 0===j?void 0:j.customType,{smplayerArtplayerDash:function(n,e,r){t.e(5).then(t.t.bind(null,478,7)).then((function(t){var a=t.default.MediaPlayer().create();a.initialize(n,e,!1),r.on("destroy",(function(){a.reset()}))}))}}),f&&Object.assign(null===(S=e.src)||void 0===S?void 0:S.customType,{smplayerArtplayerShakaDash:function(n,e,r){t.e(9).then(t.t.bind(null,479,7)).then((function(t){var a=new t.default.Player(n);a.load(e).then((function(){r.on("destroy",(function(){a.destroy()}))}))}))}}),m&&Object.assign(null===(O=e.src)||void 0===O?void 0:O.customType,{smplayerArtplayerWebtorrent:function(n,e,r){t.e(10).then(t.t.bind(null,480,7)).then((function(t){var a=new(0,t.default);a.add(e,(function(e){e.files.find((function(n){return n.name.endsWith(".mp4")})).renderTo(n),r.on("destroy",(function(){a.destroy()}))}))}))}}),null===(c=e.src)||void 0===c||!c.customInit){n.next=39;break}return n.next=36,e.src.customInit(l,e.src).then((function(n){return e.player=n,e.player}));case 36:n.t1=n.sent,n.next=40;break;case 39:n.t1=new l(e.src);case 40:return e.player=n.t1,n.abrupt("return",e.player);case 42:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n,this)}))),function(){return e.apply(this,arguments)})},{key:"DestroyPlayer",value:function(){var n;null===(n=this.player)||void 0===n||n.destroy()}},{key:"AddOnEvent",value:function(n){var e=this;n&&this.player&&Object.keys(n).forEach((function(t){e.player.on(t,(function(){return n[t](e.player,e.src)}))}))}}]),n}(),dc=Ia.extend({props:{src:{type:Object,required:!0},on:{type:Object,default:function(){return{}},required:!1},width:{type:String,default:"100%",required:!1},height:{type:Array,default:function(){return[.5625,0]},required:!1}},render:function(){var n=arguments[0];return n("div",{class:"smplayer"},[n("div",{ref:"sbplayer",style:"width: ".concat(this.width)})])},data:function(){return{player:{}}},mounted:function(){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.$refs.sbplayer,r=sc()({},n.on),a=Object(rc.a)(Object(rc.a)({},sc()({url:"",fullscreen:!0,autoSize:!0,setting:!0,playbackRate:!0,whitelist:["*"],moreVideoAttr:{preload:"auto"}},n.src)),{},{container:t}),n.player=new pc(a),e.next=6,n.player.InitPlayer();case 6:n.player.AddOnEvent(r),t.style.height=t.scrollWidth*n.height[0]+n.height[1]+"px";case 8:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){var n;null===(n=this.player)||void 0===n||n.DestroyPlayer()}});t(216);function fc(n,e){return(fc=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function mc(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&fc(n,e)}t(217),t(218);function hc(n){return(hc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function vc(n,e){if(e&&("object"===Ci(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function gc(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=hc(n);if(e){var a=hc(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return vc(this,t)}}t(238),t(239);var bc=function(n){mc(a,n);var e,t=gc(a);function a(){return ls(this,a),t.call(this)}return ps(a,[{key:"InitMeting",value:(e=Object(r.a)(regeneratorRuntime.mark((function n(){var e,t,a,o,i,s,c=this,l=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t=l.length>1?l[1]:void 0,a=[],o=e.audio||[],i=e.list||[],(e.id||e.auto)&&(i=[{id:e.id,server:e.server,type:e.type,auth:e.auth,auto:e.auto}].concat(i.map((function(n){return{id:n.id,server:n.server,type:n.type,auth:n.auth,auto:n.auto}})))),i&&i.length>0&&i.map((function(n){if(n.id||n.auto){var t=c.ParseMeting({id:n.id,server:n.server,type:n.type,auth:n.auth,auto:n.auto},e.api);t&&a.push(t)}})),s=a.map(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e);case 2:return n.abrupt("return",n.sent.json());case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n.next=10,Promise.all(s).then(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(r){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.map((function(n){o=o.concat(n.map((function(n){return{name:(null==n?void 0:n.name)||(null==n?void 0:n.title)||"Audio name",artist:(null==n?void 0:n.artist)||(null==n?void 0:n.author)||"Audio artist",url:null==n?void 0:n.url,cover:(null==n?void 0:n.cover)||(null==n?void 0:n.pic),lrc:(null==n?void 0:n.lrc)||(null==n?void 0:n.lyric)||"",type:(null==n?void 0:n.type)||"auto"}})))})),a={container:t,audio:o,fixed:e.fixed,mini:e.mini,autoplay:e.autoplay,loop:e.loop,order:e.order,preload:e.preload,volume:e.volume,mutex:e.mutex,lrcType:e.lrcType,listFolded:e.listFolded,listMaxHeight:e.listMaxHeight,storageName:e.storageName},c.src=a,n.abrupt("return",c.InitPlayer());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 10:return n.abrupt("return",n.sent);case 11:case"end":return n.stop()}}),n)}))),function(){return e.apply(this,arguments)})},{key:"ParseMeting",value:function(n,e){return n&&n.auto&&(n=this.ParseLink(n.auto)),n&&n.server&&n.type&&n.id?e.replace(":server",n.server).replace(":type",n.type).replace(":id",n.id).replace(":auth",n.auth).replace(":r",Math.random().toString()):""}},{key:"ParseLink",value:function(n){for(var e=0,t=[["music.163.com.*song.*id=(\\d+)","netease","song"],["music.163.com.*album.*id=(\\d+)","netease","album"],["music.163.com.*artist.*id=(\\d+)","netease","artist"],["music.163.com.*playlist.*id=(\\d+)","netease","playlist"],["music.163.com.*discover/toplist.*id=(\\d+)","netease","playlist"],["y.qq.com.*song/(\\w+).html","tencent","song"],["y.qq.com.*songDetail/(\\w+)","tencent","song"],["y.qq.com.*album/(\\w+).html","tencent","album"],["y.qq.com.*singer/(\\w+).html","tencent","artist"],["y.qq.com.*playsquare/(\\w+).html","tencent","playlist"],["y.qq.com.*playlist/(\\w+).html","tencent","playlist"],["xiami.com.*song/(\\w+)","xiami","song"],["xiami.com.*album/(\\w+)","xiami","album"],["xiami.com.*artist/(\\w+)","xiami","artist"],["xiami.com.*collect/(\\w+)","xiami","playlist"]];e<t.length;e++){var r=t[e],a=new RegExp(r[0]).exec(n);if(a)return{server:r[1],type:r[2],id:a[1]}}return console.error("æ æ³è§£æçé¾æ¥: ".concat(n,"ï¼è¯·æ£æ¥é¾æ¥æ¯å¦ä¹¦åæ­£ç¡®")),{}}}]),a}(lc),yc=Ia.extend({props:{id:{required:!1,type:String,default:""},server:{required:!1,type:String,default:"tencent"},type:{required:!1,type:String,default:"song"},auto:{required:!1,type:String,default:""},fixed:{required:!1,type:Boolean,default:!1},mini:{required:!1,type:Boolean,default:!1},autoplay:{required:!1,type:Boolean,default:!1},theme:{required:!1,type:String,default:"#2980b9"},loop:{required:!1,type:String,default:"all"},order:{required:!1,type:String,default:"list"},preload:{required:!1,type:String,default:"auto"},volume:{required:!1,type:Number,default:.7},mutex:{required:!1,type:Boolean,default:!0},lrcType:{required:!1,type:Number,default:3},listFolded:{required:!1,type:Boolean,default:!1},listMaxHeight:{required:!1,type:String,default:"340px"},storageName:{required:!1,type:String,default:"vuepress-plugin-smplayer"},api:{required:!1,type:String,default:"https://api.i-meto.com/meting/api?server=:server&type=:type&id=:id&r=:r"},audio:{required:!1,type:Array},list:{required:!1,type:Array}},render:function(){var n=arguments[0];return n("div",{class:"smplayer"},[n("div",{ref:"sbplayer"})])},data:function(){return{meting:{}}},mounted:function(){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.$props,n.meting=new bc,e.next=4,n.meting.InitMeting(t,n.$refs.sbplayer);case 4:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){var n;null===(n=this.meting)||void 0===n||n.DestroyPlayer()}}),xc=function(){function n(e){ls(this,n),Object(ac.a)(this,"src",void 0),Object(ac.a)(this,"player",void 0),e&&(this.src=e)}var e;return ps(n,[{key:"InitPlayer",value:(e=Object(r.a)(regeneratorRuntime.mark((function n(){var e,a,o,i,s,c=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.src){n.next=24;break}if(null!==(e=this.src)&&void 0!==e&&e.type||"string"!=typeof(null===(a=this.src)||void 0===a?void 0:a.url)||(this.src.url.toLowerCase().endsWith(".m3u8")?this.src.type="hls":this.src.url.toLowerCase().endsWith(".flv")?this.src.type="flv":this.src.url.toLowerCase().endsWith(".mpd")&&(this.src.type="shaka")),s=t.e(0).then(t.t.bind(null,389,7)),null===(o=this.src)||void 0===o||!o.type||"string"!=typeof this.src.type){n.next=20;break}n.t0=this.src.type.toLowerCase(),n.next="hls"===n.t0||"m3u8"===n.t0?7:"flv"===n.t0?9:"dash"===n.t0?11:"shakadash"===n.t0||"shaka"===n.t0||"shaka-dash"===n.t0?13:"music"===n.t0?15:17;break;case 7:return i=Promise.all([Promise.all([t.e(0),t.e(37)]).then(t.t.bind(null,484,7)),s]),n.abrupt("break",18);case 9:return i=Promise.all([Promise.all([t.e(0),t.e(36)]).then(t.t.bind(null,485,7)),s]),n.abrupt("break",18);case 11:return i=Promise.all([Promise.all([t.e(0),t.e(35)]).then(t.t.bind(null,486,7)),s]),n.abrupt("break",18);case 13:return i=Promise.all([Promise.all([t.e(0),t.e(39)]).then(t.t.bind(null,487,7)),s]),n.abrupt("break",18);case 15:return i=Promise.all([Promise.all([t.e(0),t.e(38)]).then(t.t.bind(null,488,7)),s]),n.abrupt("break",18);case 17:i=t.e(0).then(t.t.bind(null,389,7));case 18:n.next=21;break;case 20:i=Promise.all([s]);case 21:return n.next=23,i.then(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(e){var t,r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=Object(Ki.a)(e,1),a=r[0].default,null===(t=c.src)||void 0===t||!t.customInit){n.next=7;break}return n.next=4,c.src.customInit(a,c.src).then((function(n){return n}));case 4:n.t0=n.sent,n.next=8;break;case 7:n.t0=new a(c.src);case 8:return c.player=n.t0,n.abrupt("return",c.player);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 23:return n.abrupt("return",n.sent);case 24:case"end":return n.stop()}}),n,this)}))),function(){return e.apply(this,arguments)})},{key:"DestroyPlayer",value:function(){var n;null===(n=this.player)||void 0===n||n.destroy()}},{key:"AddOnEvent",value:function(n){var e=this;n&&this.player&&Object.keys(n).forEach((function(t){e.player.on(t,(function(){return n[t](e.player,e.src)}))}))}}]),n}(),wc=Ia.extend({props:{src:{type:Object,required:!0},on:{type:Object,default:function(){return{}},required:!1},width:{type:String,default:"100%",required:!1},height:{type:Array,default:function(){return{src:{url:"",fluid:!0,fitVideoSize:"auto"},width:"100%",on:{}}.height},required:!1}},render:function(){var n=arguments[0];return n("div",{class:"smplayer"},[n("div",{ref:"sbplayer",style:"width: ".concat(this.width)})])},data:function(){return{player:{}}},mounted:function(){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sc()({},n.on),r=Object(rc.a)(Object(rc.a)({},sc()({url:"",fluid:!0,fitVideoSize:"auto"},n.src)),{},{el:n.$refs.sbplayer}),n.player=new xc(r),e.next=5,n.player.InitPlayer();case 5:n.player.AddOnEvent(t);case 6:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){var n;null===(n=this.player)||void 0===n||n.DestroyPlayer()}}),kc=[function(n){var e=n.Vue,t=(n.options,n.router,n.siteData);t.pages.map((function(n){var e=n.frontmatter,r=e.date,a=e.author;"string"==typeof r&&"Z"===r.charAt(r.length-1)&&(n.frontmatter.date=function(n){n instanceof Date||(n=new Date(n));return"".concat(n.getUTCFullYear(),"-").concat(nc(n.getUTCMonth()+1),"-").concat(nc(n.getUTCDate())," ").concat(nc(n.getUTCHours()),":").concat(nc(n.getUTCMinutes()),":").concat(nc(n.getUTCSeconds()))}(r)),a?n.author=a:t.themeConfig.author&&(n.author=t.themeConfig.author)})),e.mixin(Zs)},{},function(n){n.Vue.mixin({computed:{$dataBlock:function(){return this.$options.__data__block__}}})},{},{},function(n){var e=n.Vue;e.component("Bilibili",ec),e.component("Xigua",tc),e.component("DPlayer",cc),e.component("APlayer",uc),e.component("Artplayer",dc),e.component("Meting",yc),e.component("metingJs",yc),e.component("Xgplayer",wc)}],jc=[];t(148);var Sc=function(n){mc(t,n);var e=gc(t);function t(){return ls(this,t),e.apply(this,arguments)}return ps(t)}(function(){function n(){ls(this,n),this.store=new Ia({data:{state:{}}})}return ps(n,[{key:"$get",value:function(n){return this.store.state[n]}},{key:"$set",value:function(n,e){Ia.set(this.store.state,n,e)}},{key:"$emit",value:function(){var n;(n=this.store).$emit.apply(n,arguments)}},{key:"$on",value:function(){var n;(n=this.store).$on.apply(n,arguments)}}]),n}());Object.assign(Sc.prototype,{getPageAsyncComponent:Fi,getLayoutAsyncComponent:Ui,getAsyncComponent:Vi,getVueComponent:Hi});var Oc={install:function(n){var e=new Sc;n.$vuepress=e,n.prototype.$vuepress=e}};function Cc(n){n.beforeEach((function(e,t,r){if(Ec(n,e.path))r();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){var a=e.path.replace(/\/$/,"")+".html";Ec(n,a)?r(a):r()}else r();else{var o=e.path+"/",i=e.path+".html";Ec(n,i)?r(i):Ec(n,o)?r(o):r()}}))}function Ec(n,e){var t=e.toLowerCase();return n.options.routes.some((function(n){return n.path.toLowerCase()===t}))}var Ac={props:{pageKey:String,slotKey:{type:String,default:"default"}},render:function(n){var e=this.pageKey||this.$parent.$page.key;return Gi("pageKey",e),Ia.component(e)||Ia.component(e,Fi(e)),Ia.component(e)?n(e):n("")}},_c={functional:!0,props:{slotKey:String,required:!0},render:function(n,e){var t=e.props,r=e.slots;return n("div",{class:["content__".concat(t.slotKey)]},r()[t.slotKey])}},Bc={computed:{openInNewWindowTitle:function(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Pc=(t(386),t(387),Object(Ws.a)(Bc,(function(){var n=this.$createElement,e=this._self._c||n;return e("span",[e("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[e("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),e("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),e("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports);function Tc(){return(Tc=Object(r.a)(regeneratorRuntime.mark((function n(e){var t,r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:Xs.routerBase||Xs.base,Cc(r=new Si({base:t,mode:"history",fallback:!1,routes:Ks,scrollBehavior:function(n,e,t){return t||(n.hash?!Ia.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})}})),a={},n.prev=4,n.next=7,Promise.all(kc.filter((function(n){return"function"==typeof n})).map((function(n){return n({Vue:Ia,options:a,router:r,siteData:Xs,isServer:e})})));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.error(n.t0);case 12:return o=new Ia(Object.assign(a,{router:r,render:function(n){return n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},jc.map((function(e){return n(e)})))])}})),n.abrupt("return",{app:o,router:r});case 14:case"end":return n.stop()}}),n,null,[[4,9]])})))).apply(this,arguments)}Ia.config.productionTip=!1,Ia.use(Si),Ia.use(Oc),Ia.mixin(function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ia;Oi(e),t.$vuepress.$set("siteData",e);var r=n(t.$vuepress.$get("siteData")),a=new r,o=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(a)),i={};return Object.keys(o).reduce((function(n,e){return e.startsWith("$")&&(n[e]=o[e].get),n}),i),{computed:i}}((function(n){return function(){function e(){ls(this,e)}return ps(e,[{key:"setPage",value:function(n){this.__page=n}},{key:"$site",get:function(){return n}},{key:"$themeConfig",get:function(){return this.$site.themeConfig}},{key:"$frontmatter",get:function(){return this.$page.frontmatter}},{key:"$localeConfig",get:function(){var n,e,t=this.$site.locales,r=void 0===t?{}:t;for(var a in r)"/"===a?e=r[a]:0===this.$page.path.indexOf(a)&&(n=r[a]);return n||e||{}}},{key:"$siteTitle",get:function(){return this.$localeConfig.title||this.$site.title||""}},{key:"$canonicalUrl",get:function(){var n=this.$page.frontmatter.canonicalUrl;return"string"==typeof n&&n}},{key:"$title",get:function(){var n=this.$page,e=this.$page.frontmatter.metaTitle;if("string"==typeof e)return e;var t=this.$siteTitle,r=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?r?r+" | "+t:t:r||"VuePress"}},{key:"$description",get:function(){var n=function(n){if(n){var e=n.filter((function(n){return"description"===n.name}))[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}},{key:"$lang",get:function(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}},{key:"$localePath",get:function(){return this.$localeConfig.path||"/"}},{key:"$themeLocaleConfig",get:function(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}},{key:"$page",get:function(){return this.__page?this.__page:function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.path.toLowerCase()===e.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}}]),e}()}),Xs)),Ia.component("Content",Ac),Ia.component("ContentSlotsDistributor",_c),Ia.component("OutboundLink",Pc),Ia.component("ClientOnly",{functional:!0,render:function(n,e){var t=e.parent,r=e.children;if(t._isMounted)return r;t.$once("hook:mounted",(function(){t.$forceUpdate()}))}}),Ia.component("Layout",Ui("Layout")),Ia.component("NotFound",Ui("NotFound")),Ia.prototype.$withBase=function(n){var e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.7",hash:"25fc7f3"},function(n){return Tc.apply(this,arguments)}(!1).then((function(n){var e=n.app;n.router.onReady((function(){e.$mount("#app")}))}))}]);