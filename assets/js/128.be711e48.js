(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{604:function(a,s,t){"use strict";t.r(s);var n=t(41),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("blockquote",[t("p",[a._v("本文及后续所有文章都以 1.8.0 做为版本讲解和入门学习")])]),a._v(" "),t("h2",{attrs:{id:"memory-channel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#memory-channel"}},[a._v("#")]),a._v(" Memory Channel")]),a._v(" "),t("p",[a._v("事件将被存储在内存中（指定大小的队列里），非适合和那些需要高吞吐量且允许数据丢失的场景下。")]),a._v(" "),t("h3",{attrs:{id:"memory-channel配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#memory-channel配置"}},[a._v("#")]),a._v(" Memory Channel 配置")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# a1 代表一个flume 给每个组件匿名")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("r1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("c1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sinks")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("s1")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定source 的数据来源以及堆外开放的端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sources.r1.type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("avro")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sources.r1.bind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("node113")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sources.r1.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("8888")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定a1的channels基于内存")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.c1.type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("memory")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 事件存储在信道中最大数量，默认100，根据event字节大小调整")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.c1.capacity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("100000")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 每个事务中最大事件数(实际处理数据一批一批)，默认100")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.c1.transactionCapacity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1500")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定a1的sinks 输出到控制台")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sinks.s1.type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("logger")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 绑定a1 sources和channle 的关系")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sources.r1.channels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("c1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 绑定a1 sinks 和 channel 的关系")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sinks.s1.channel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("c1")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br")])]),t("h2",{attrs:{id:"jdbc-channel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdbc-channel"}},[a._v("#")]),a._v(" JDBC Channel")]),a._v(" "),t("p",[a._v("事件会持久化 (存储) 到可靠的数据库里，目前支持嵌入式 Derby 数据库。即 source->channel->sink，在传输过程中，会先把事件存到关系型数据库里。但是 Derby 数据库不太好用，所以  JDBC Channel 目前仅用于测试，不用于生产环境。")]),a._v(" "),t("h2",{attrs:{id:"file-channel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file-channel"}},[a._v("#")]),a._v(" File Channel")]),a._v(" "),t("p",[a._v("性能比较低，但是即使程序出错数据不会丢失。")]),a._v(" "),t("h3",{attrs:{id:"file-channel配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file-channel配置"}},[a._v("#")]),a._v(" File Channel 配置")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# a1 代表一个flume 给每个组件匿名")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("r1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("c1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sinks")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("s1")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定source 的数据来源以及堆外开放的端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sources.r1.type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("avro")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sources.r1.bind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("node113")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sources.r1.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("8888")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定a1的channels基于文件")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.c1.type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("file")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 存数据地址，逗号分割的目录列表，用以存放日志文件。")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用单独的磁盘上的多个目录可以提高文件通道效率。")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.c1.dataDirs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("/home/tmp")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定a1的sinks 输出到控制台")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sinks.s1.type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("logger")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 绑定a1 sources和channle 的关系")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sources.r1.channels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("c1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 绑定a1 sinks 和 channel 的关系")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.sinks.s1.channel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("c1")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br")])]),t("h2",{attrs:{id:"内存溢出通道"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内存溢出通道"}},[a._v("#")]),a._v(" 内存溢出通道")]),a._v(" "),t("p",[a._v("优先把 Event 存到内存中，如果存不下，在溢出到文件中，目前处于测试阶段，还未能用于生产环境")]),a._v(" "),t("h2",{attrs:{id:"kafka-channel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-channel"}},[a._v("#")]),a._v(" Kafka Channel")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.channel1.type")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("org.apache.flume.channel.kafka.KafkaChannel")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.channel1.kafka.bootstrap.servers")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("kafka-1:9093,kafka-2:9093,kafka-3:9093")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.channel1.kafka.topic")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("channel1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.channel1.kafka.consumer.group.id")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("flume-consumer")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# optional, the global truststore can be used alternatively")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.channel1.kafka.producer.security.protocol")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("SSL")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.channel1.kafka.producer.ssl.truststore.location")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("/path/to/truststore.jks")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.channel1.kafka.producer.ssl.truststore.password")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("<password to access the truststore>")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# optional, the global truststore can be used alternatively")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.channel1.kafka.consumer.security.protocol")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("SSL")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.channel1.kafka.consumer.ssl.truststore.location")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("/path/to/truststore.jks")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("a1.channels.channel1.kafka.consumer.ssl.truststore.password")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("<password to access the truststore>")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("p",[t("a",{attrs:{href:"https://github.com/apache/flume/blob/trunk/flume-ng-doc/sphinx/FlumeUserGuide.rst",target:"_blank",rel:"noopener noreferrer"}},[a._v("文档地址"),t("OutboundLink")],1),t("br"),a._v("\n Kafka Channel 可以用于：")]),a._v(" "),t("ol",[t("li",[a._v("source -> Kafka Channel -> Sink")]),a._v(" "),t("li",[a._v("source -> Kafka Channel")]),a._v(" "),t("li",[a._v("Kafka Channel -> Sink")])])])}),[],!1,null,null,null);s.default=e.exports}}]);