(window.webpackJsonp=window.webpackJsonp||[]).push([[195],{671:function(s,a,t){"use strict";t.r(a);var n=t(41),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"ollama"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ollama"}},[s._v("#")]),s._v(" ollama")]),s._v(" "),t("p",[s._v("ollama 是一个简明易用的本地大模型运行框架，只需一条命令即可在本地跑大模型。开源项目，专注于开发和部署先进的大型语言模型（LLM）。与 docker 类似")]),s._v(" "),t("h2",{attrs:{id:"ollama命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ollama命令"}},[s._v("#")]),s._v(" ollama 命令")]),s._v(" "),t("p",[s._v("查看 ollama 所有命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ollama -h\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("拉去大模型")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ollama pull codellama\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("运行本地大模型")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ollama run xxx\nollama run xxx:xxb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("查看本地大模型")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ollama list\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("查看模型信息")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ollama show xxxx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("删除大模型")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ollama "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" xxxx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("停止大模型")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ollama stop xxxx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"spring-ai"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-ai"}},[s._v("#")]),s._v(" spring ai")]),s._v(" "),t("h3",{attrs:{id:"fine-tuning"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fine-tuning"}},[s._v("#")]),s._v(" fine-tuning")]),s._v(" "),t("p",[s._v("微调，当有了数据之后，我们需要让大模型回答时附带我们自己的数据，那么就需要微调")]),s._v(" "),t("h3",{attrs:{id:"function-call"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-call"}},[s._v("#")]),s._v(" function-call")]),s._v(" "),t("p",[s._v("函数调用，解决一些实时性的问题，比如你问大模型今天天气怎么样？大模型此时数据比较久，可以调用函数")]),s._v(" "),t("h3",{attrs:{id:"角色"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#角色"}},[s._v("#")]),s._v(" 角色")]),s._v(" "),t("p",[s._v("角色分为用户 (user)，系统 (system), 函数 (function), 助手 (Assistant)")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ChatClient")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chatClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ChatClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Builder")]),s._v(" builder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" builder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defaultSystem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"你现在是一个法务部主任，有关于所有的法律问题都能知晓，是世界顶级人物，回答的及专业又通俗易懂"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"基本api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本api"}},[s._v("#")]),s._v(" 基本 api")]),s._v(" "),t("h4",{attrs:{id:"model"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#model"}},[s._v("#")]),s._v(" model")]),s._v(" "),t("h5",{attrs:{id:"chatclient"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#chatclient"}},[s._v("#")]),s._v(" ChatClient")]),s._v(" "),t("p",[s._v("用于聊天对话，流式对话，是所有大预言模型的通用组件，因为所有大语言模型基本都有对话功能，所以 spring ai 就封装了这么一个 API")]),s._v(" "),t("h5",{attrs:{id:"chatmodel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#chatmodel"}},[s._v("#")]),s._v(" chatModel")]),s._v(" "),t("p",[s._v("为每个不同大模型建立的，不同大模型有可能在对话方面有些区别，可以用 charmodel 对象来，设置")]),s._v(" "),t("h5",{attrs:{id:"imagemodel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#imagemodel"}},[s._v("#")]),s._v(" imageModel")]),s._v(" "),t("p",[s._v("生成图片的")]),s._v(" "),t("h5",{attrs:{id:"audiomodel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#audiomodel"}},[s._v("#")]),s._v(" audioModel")]),s._v(" "),t("p",[s._v("生成语音或识别的大模型 api")]),s._v(" "),t("h5",{attrs:{id:"embeddingsmodel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#embeddingsmodel"}},[s._v("#")]),s._v(" EmbeddingsModel")]),s._v(" "),t("p",[s._v("嵌入的工作原理是将文本、图像和视频转换成浮点数数组，称为向量。这些向量旨在捕获文本、图像和视频的含义。嵌入数组的长度称为向量维数。"),t("br"),s._v("\n在 Spring AI 配置中指定嵌入模型，意味着在应用程序中进行文本嵌入操作时，将使用这个模型来生成文本的向量表示。"),t("br"),s._v("\n具体来说，嵌入模型会对输入文本进行一系列复杂的处理，包括对文本进行分词、编码以及基于其预训练的权重和架构来生成一个固定维度的向量。这个向量能够捕捉到输入句子的语义特征，使得语义相近的句子生成的向量在向量空间中距离较近，而语义差异较大的句子生成的向量距离较远。"),t("br"),s._v("\n例如，假设有两句话：“我喜欢美丽的花朵” 和 “我喜爱漂亮的鲜花”，这两句话语义相近。使用嵌入模型将它们转换为向量后，这两个向量在向量空间中的距离会相对较近，通过计算向量之间的相似度（如余弦相似度），就可以量化这种语义上的相近程度。"),t("br"),s._v("\n在实际应用中，比如在一个问答系统里，当用户提出问题时，嵌入模型会将问题转换为向量，然后系统可以将这个向量与知识库中已有问题的向量表示进行比较，找出最相似的问题及其对应的答案，从而回答用户的问题。又如在文档检索系统中，嵌入模型将用户的查询语句和文档库中的文档分别转换为向量，通过向量相似度来找到与查询相关的文档。")]),s._v(" "),t("h5",{attrs:{id:"moderationmodel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#moderationmodel"}},[s._v("#")]),s._v(" moderationModel")]),s._v(" "),t("p",[s._v("敏感词检测模型")]),s._v(" "),t("h4",{attrs:{id:"multimodality"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#multimodality"}},[s._v("#")]),s._v(" Multimodality")]),s._v(" "),t("p",[s._v("多模态 APi，可以接受语音，文本，图片等信息进行对话回复，比如你可以 上传一张图片，并问关于图片的内容，此时就包含了图片和文本两个信息")]),s._v(" "),t("h4",{attrs:{id:"function-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-api"}},[s._v("#")]),s._v(" function api")]),s._v(" "),t("p",[t("img",{attrs:{src:"/assets/img/ai/1/img.png",alt:""}}),t("br"),s._v("\n对于实时性的可以使用 function api。流程：把函数注册，然后用户提问，大模型会提取关键字传入 Request，调用注册方法，返回信息给大模型总结，使用方法如下：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查询天气，比我想知道一个地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MockWeatherService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Function")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Response")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// C 是摄氏度(C°)， F 是 华氏度(°F)")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enum")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Unit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("C")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("F")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必须要写一个 Request，用于获取关键参数")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JsonClassDescription")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Get the weather in location"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 和 @Description 功能一样")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("record")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" location"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Unit")]),s._v(" unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必须要写一个 Response，返回给大模型相关信息参数")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("record")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Response")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("double")]),s._v(" temp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Unit")]),s._v(" unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Response")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apply")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Request")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行api调用")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可以从 request 获取地点和单位")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Response")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("C")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * @Description 注解是可选的，它提供了一个函数描述，帮助模型了解何时调用函数。这是一个重要的属性，可帮助 AI 模型确定要调用的客户端函数。\n * @return\n */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Get the weather in location"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 想要让大模型知道什么时候调用函数，这里就要写好，以便大模型知道什么时候调用，比如要获取天气，可以是：某地区的当前天气")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Function")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MockWeatherService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MockWeatherService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Response")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentWeather")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MockWeatherService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br")])]),t("p",[s._v("还有两一种注册方式")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FunctionCallback")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("weatherFunctionInfo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FunctionCallback")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CurrentWeather"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MockWeatherService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (1) function name")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Get the weather in location"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (2) function description")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("inputType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MockWeatherService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (3) function signature")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("具体使用，比如我们问：旧金山、东京和巴黎的气候有什么特征？")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserMessage")]),s._v(" userMessage "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"What\'s the weather like in San Francisco, Tokyo, and Paris?"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ChatResponse")]),s._v(" response "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("chatModel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("call")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Prompt")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("userMessage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OllamaOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CurrentWeather"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Enable the function")]),s._v("\nlog"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Response: {}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("回复可能是：以下是申请城市的当前天气：- 加利福尼亚州旧金山：30.0°C - 日本东京：10.0°C - 法国巴黎：15.0°C")]),s._v(" "),t("h4",{attrs:{id:"etl-pipeline"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#etl-pipeline"}},[s._v("#")]),s._v(" ETL Pipeline")]),s._v(" "),t("p",[s._v("ETL 管道，对文本，图片，视频，音频等读取，转换为 List"),t("Document")],1),s._v(" "),t("h4",{attrs:{id:"structured-output-converter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#structured-output-converter"}},[s._v("#")]),s._v(" Structured Output Converter")]),s._v(" "),t("p",[s._v("结构化输出转换器")]),s._v(" "),t("h4",{attrs:{id:"ai-evaluation-testing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ai-evaluation-testing"}},[s._v("#")]),s._v(" AI Evaluation Testing")]),s._v(" "),t("p",[s._v("ai 评估测试，测试对加载到 Vector Store 中的 PDF 文档执行 RAG 查询，然后评估响应是否与用户文本相关。")]),s._v(" "),t("h4",{attrs:{id:"observability"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#observability"}},[s._v("#")]),s._v(" Observability")]),s._v(" "),t("p",[s._v("可观测性")]),s._v(" "),t("h2",{attrs:{id:"微调"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#微调"}},[s._v("#")]),s._v(" 微调")]),s._v(" "),t("p",[s._v("微调并不完全是对已有大模型内容进行简单的替换或修改，而是在已有大模型基础上，通过特定方式让模型学习新的知识和模式，以更好地适配所需业务。本质上微调是在预训练大模型的基础上，使用特定领域或任务的数据集对模型的参数进行进一步的调整和优化。预训练大模型已经在大规模的通用数据上学习到了丰富的语言知识、模式和特征表示。微调的目的是让模型在特定的任务或领域数据上进行学习，从而能够捕捉到这些数据的独特特征和规律，使模型在该特定场景下表现得更好"),t("br"),s._v("\n微调和 RAG 是两个概念，一个是微调原有基础大模型参数，已达到更好的效果；RAG 是依赖于外部数据，偏向实时一些的数据。")]),s._v(" "),t("h2",{attrs:{id:"rag-检索增强生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rag-检索增强生成"}},[s._v("#")]),s._v(" rag 检索增强生成")]),s._v(" "),t("p",[s._v("RAG 的核心作用是在大语言模型生成回答时，引入外部数据源中的相关信息，以提高回答的准确性和相关性。他和 function api 容易混淆，function api 是为了获取精确的结果和执行特定的任务，比如：我们可以通过 function api 查询数据库（给与查询所需要特定的字段），或实时天气，数学计算等。"),t("br"),s._v("\nRAG 被称为检索增强生成，适用于需要准确回答特定问题、提供专业知识或最新信息的场景，如智能客服、知识问答系统等。可以把你的文本信息，资料等存储到数据库中，这个数据库可不是我们以前用的关系型数据库，而是向量数据库，这种名词叫做  "),t("code",[s._v("Embedding(绑定)")]),s._v(" 。")]),s._v(" "),t("h3",{attrs:{id:"数据切块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据切块"}},[s._v("#")]),s._v(" 数据切块")]),s._v(" "),t("p",[s._v("获取文件，数据切块")]),s._v(" "),t("h3",{attrs:{id:"存向量库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#存向量库"}},[s._v("#")]),s._v(" 存向量库")]),s._v(" "),t("p",[s._v("转换为文档，存向量库")]),s._v(" "),t("h3",{attrs:{id:"差向量库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#差向量库"}},[s._v("#")]),s._v(" 差向量库")]),s._v(" "),t("p",[s._v("把查询问题转换为向量，然后去数据库中查询最相似的向量，转换为文档")]),s._v(" "),t("h3",{attrs:{id:"构建提示词"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建提示词"}},[s._v("#")]),s._v(" 构建提示词")]),s._v(" "),t("p",[s._v("查询出来的文档内容拼接上下问，构建提示词，调用大模型")])])}),[],!1,null,null,null);a.default=e.exports}}]);