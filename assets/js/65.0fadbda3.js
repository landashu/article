(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{542:function(s,a,n){"use strict";n.r(a);var t=n(41),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"介绍及安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#介绍及安装"}},[s._v("#")]),s._v(" 介绍及安装")]),s._v(" "),n("p",[s._v("公司内部使用码云或是 github 不是一个很好的选择，为了代码安全和不被网络限制而随时随地的编码和提交，我们也可以搭建一个自己的 git 仓库来管理我们的代码，市面上有很多 git 仓库 的管理工具，这里我是用的是 Gitea，官网地址 https://docs.gitea.io/zh-cn/email-setup/")]),s._v(" "),n("p",[s._v("Gitea 提供众多的安装方式，有 docker、二进制安装、包管理器安装等，附带较为全面的文档教程。以二进制包说明，操作如下：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -O gitea https://dl.gitea.io/gitea/1.16.9/gitea-1.16.9-linux-amd64\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给文件权限")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x gitea\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 建立gitea并设置密码，这个必须做，否则其他用户启动报错")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -m gitea\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" gitea\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有用户")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/passwd "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" -d: -f "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-3\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("下载完成并且配置好权限后，需要对 gitea 的数据库，服务地址等进行配置才可以启动，进入 /git/custom/conf 编辑 app.ini 文件，修改内容如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("APP_NAME = 公司名称\n# 这个运行用户\nRUN_USER = gitea\nRUN_MODE = prod\n\n# 这里配置你的数据库\n[database]\nDB_TYPE  = mysql\nHOST     = 127.0.0.1:3306\nNAME     = gitea\nUSER     = root\nPASSWD   = xxxxxxxx\nSCHEMA   =\nSSL_MODE = disable\nCHARSET  = utf8mb4\nPATH     = /opt/software/git/data/gitea.db\nLOG_SQL  = false\n\n# 不用管\n[repository]\nROOT = /opt/software/git/data/gitea-repositories\n\n# 服务器配置\n[server]\n# ssh域配置自己的服务器IP最好\nSSH_DOMAIN       = xx.24x.x0.9x\n# 这里也是服务器IP\nDOMAIN           = xx.24x.x0.9x\n# 端口\nHTTP_PORT        = 3000\n# 访问地址\nROOT_URL         = http://xx.24x.x0.9x:3000/\nDISABLE_SSH      = false\nSSH_PORT         = 22\nLFS_START_SERVER = true\nLFS_CONTENT_PATH = /opt/software/git/data/lfs\nLFS_JWT_SECRET   = 3SGYDlqNRv50x2yR4TJS3-TywPSt6ZpFErNHPY0ySJ8\nOFFLINE_MODE     = false\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("p",[s._v("以上的基础配置完成后，就可以尝试启动了，记得启动时切换到你为此添加的新用户")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("./gitea web\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"邮件配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#邮件配置"}},[s._v("#")]),s._v(" 邮件配置")]),s._v(" "),n("p",[s._v("当创一个工单得时候，我想通知跟工单有关系的人，gitea 是提供这样的配置，首先我们需要配置邮件服务，然后在服务中启用 工单 操作提醒。邮件需要在  /git/custom/conf 编辑 app.ini 文件进行修改配置：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[mailer]\nENABLED        = true\nFROM           = gitea@mydomain.com\nMAILER_TYPE    = smtp\nHOST           = mail.mydomain.com:587\nIS_TLS_ENABLED = true\nUSER           = gitea@mydomain.com\nPASSWD         = `password`\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("一些其他邮箱协议配置可以参考 https://docs.gitea.io/zh-cn/email-setup/，password 是需要进行申请认证的一串字符。")]),s._v(" "),n("p",[s._v("接着我们需要在服务中开启工单操作提醒")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[service]\nREGISTER_EMAIL_CONFIRM            = false\n# 工单服务提醒\nENABLE_NOTIFY_MAIL                = true\nDISABLE_REGISTRATION              = false\nALLOW_ONLY_EXTERNAL_REGISTRATION  = false\nENABLE_CAPTCHA                    = false\nREQUIRE_SIGNIN_VIEW               = false\nDEFAULT_KEEP_EMAIL_PRIVATE        = false\nDEFAULT_ALLOW_CREATE_ORGANIZATION = true\nDEFAULT_ENABLE_TIMETRACKING       = true\nNO_REPLY_ADDRESS                  = noreply.localhost\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("关于服务配置可以参考这里：https://docs.gitea.io/zh-cn/config-cheat-sheet/#service-service，配置完成后重新启动，新加工单就可以让对方收到邮件了，注意如果是自己建的工单，自己是收不到的。")])])}),[],!1,null,null,null);a.default=e.exports}}]);