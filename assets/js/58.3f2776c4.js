(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{534:function(t,e,a){"use strict";a.r(e);var s=a(41),l=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"资源管理介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资源管理介绍"}},[t._v("#")]),t._v(" 资源管理介绍")]),t._v(" "),a("p",[t._v("在 kubernetes 中，所有的内容都抽象为资源，用户需要通过操作资源来管理 kubernetes。")]),t._v(" "),a("blockquote",[a("p",[t._v("kubernetes 的本质上就是一个集群系统，用户可以在集群中部署各种服务，所谓的部署服务，其实就是在 kubernetes 集群中运行一个个的容器，并将指定的程序跑在容器中。")]),t._v(" "),a("p",[t._v("kubernetes 的最小管理单元是 pod 而不是容器，所以只能将容器放在 "),a("code",[t._v("Pod")]),t._v("  中，而 kubernetes 一般也不会直接管理 Pod，而是通过 "),a("code",[t._v("Pod控制器")]),t._v(" 来管理 Pod 的。")]),t._v(" "),a("p",[t._v("Pod 可以提供服务之后，就要考虑如何访问 Pod 中服务，kubernetes 提供了 "),a("code",[t._v("Service")]),t._v("  资源实现这个功能。")]),t._v(" "),a("p",[t._v("当然，如果 Pod 中程序的数据需要持久化，kubernetes 还提供了各种 "),a("code",[t._v("存储")]),t._v(" 系统。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/kubernetes/602/img.png",alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("学习 kubernetes 的核心，就是学习如何对集群上的 "),a("code",[t._v("Pod、Pod控制器、Service、存储")]),t._v(" 等各种资源进行操作")])]),t._v(" "),a("h2",{attrs:{id:"yaml语言介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yaml语言介绍"}},[t._v("#")]),t._v(" YAML 语言介绍")]),t._v(" "),a("p",[t._v("YAML 是一个类似 XML、JSON 的标记性语言。它强调以"),a("strong",[t._v("数据")]),t._v('为中心，并不是以标识语言为重点。因而 YAML 本身的定义比较简单，号称 "一种人性化的数据格式语言"。')]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# xml 语法 或 html语法\n<heima>\n    <age>15</age>\n    <address>Beijing</address>\n</heima>\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# yaml 语法\nheima:\n  age: 15\n  address: Beijing\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("YAML 的语法比较简单，主要有下面几个：")]),t._v(" "),a("ul",[a("li",[t._v("大小写敏感")]),t._v(" "),a("li",[t._v("使用缩进表示层级关系")]),t._v(" "),a("li",[t._v("缩进不允许使用 tab，只允许空格 (低版本限制)")]),t._v(" "),a("li",[t._v("缩进的空格数不重要，只要相同层级的元素左对齐即可")]),t._v(" "),a("li",[t._v("'#' 表示注释")])]),t._v(" "),a("p",[t._v("YAML 支持以下几种数据类型：")]),t._v(" "),a("ul",[a("li",[t._v("纯量：单个的、不可再分的值")]),t._v(" "),a("li",[t._v("对象：键值对的集合，又称为映射（mapping）/ 哈希（hash） / 字典（dictionary）")]),t._v(" "),a("li",[t._v("数组：一组按次序排列的值，又称为序列（sequence） / 列表（list）")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 纯量, 就是指的一个简单的值，字符串、布尔值、整数、浮点数、Null、时间、日期\n# 1 布尔类型\nc1: true (或者True)\n# 2 整型\nc2: 234\n# 3 浮点型\nc3: 3.14\n# 4 null类型 \nc4: ~  # 使用~表示null\n# 5 日期类型\nc5: 2018-02-17    # 日期必须使用ISO 8601格式，即yyyy-MM-dd\n# 6 时间类型\nc6: 2018-02-17T15:02:31+08:00  # 时间使用ISO 8601格式，时间和日期之间使用T连接，最后使用+代表时区\n# 7 字符串类型\nc7: heima     # 简单写法，直接写值 , 如果字符串中间有特殊字符，必须使用双引号或者单引号包裹 \nc8: line1\n    line2     # 字符串过多的情况可以拆成多行，每一行会被转化成一个空格\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 对象\n# 形式一(推荐):\nheima:\n  age: 15\n  address: Beijing\n# 形式二(了解):\nheima: {age: 15,address: Beijing}\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 数组\n# 形式一(推荐):\naddress:\n  - 顺义\n  - 昌平  \n# 形式二(了解):\naddress: [顺义,昌平]\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("blockquote",[a("p",[t._v("小提示："),a("br"),t._v("\n1 书写 yaml 切记 "),a("code",[t._v(":")]),t._v("  后面要加一个空格"),a("br"),t._v("\n 2 如果需要将多段 yaml 配置放在一个文件中，中间要使用 "),a("code",[t._v("---")]),t._v("  分隔"),a("br"),t._v("\n 3 下面是一个 yaml 转 json 的网站，可以通过它验证 yaml 是否书写正确")])]),t._v(" "),a("h2",{attrs:{id:"资源管理方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资源管理方式"}},[t._v("#")]),t._v(" 资源管理方式")]),t._v(" "),a("ul",[a("li",[t._v("命令式对象管理：直接使用命令去操作 kubernetes 资源"),a("br"),t._v(" "),a("code",[t._v("kubectl run nginx-pod --image=nginx:1.17.1 --port=80")])]),t._v(" "),a("li",[t._v("命令式对象配置：通过命令配置和配置文件去操作 kubernetes 资源"),a("br"),t._v(" "),a("code",[t._v("kubectl create/patch -f nginx-pod.yaml")])]),t._v(" "),a("li",[t._v("声明式对象配置：通过 apply 命令和配置文件去操作 kubernetes 资源"),a("br"),t._v(" "),a("code",[t._v("kubectl apply -f nginx-pod.yaml")])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("操作对象")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("适用环境")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("优点")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("缺点")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("命令式对象管理")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("对象")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("测试")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("简单")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("只能操作活动对象，无法审计、跟踪")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("命令式对象配置")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("文件")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("开发")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("可以审计、跟踪")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("项目大时，配置文件多，操作麻烦")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("声明式对象配置")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("目录")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("开发")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("支持目录操作")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("意外情况下难以调试")])])])]),t._v(" "),a("h3",{attrs:{id:"命令式对象管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令式对象管理"}},[t._v("#")]),t._v(" 命令式对象管理")]),t._v(" "),a("h4",{attrs:{id:"kubectl命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kubectl命令"}},[t._v("#")]),t._v(" kubectl 命令")]),t._v(" "),a("p",[t._v("kubectl 是 kubernetes 集群的命令行工具，通过它能够对集群本身进行管理，并能够在集群上进行容器化应用的安装部署。kubectl 命令的语法如下：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("kubectl [command] [type] [name] [flags]\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[a("strong",[t._v("command")]),t._v("：指定要对资源执行的操作，例如 create、get、delete")]),t._v(" "),a("li",[a("strong",[t._v("type")]),t._v("：指定资源类型，比如 deployment、pod、service")]),t._v(" "),a("li",[a("strong",[t._v("name")]),t._v("：指定资源的名称，名称大小写敏感")]),t._v(" "),a("li",[a("strong",[t._v("flags")]),t._v("：指定额外的可选参数")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 查看所有pod\nkubectl get pod \n\n# 查看某个pod\nkubectl get pod pod_name\n\n# 查看某个pod,以yaml格式展示结果\nkubectl get pod pod_name -o yaml\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h4",{attrs:{id:"资源类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资源类型"}},[t._v("#")]),t._v(" 资源类型")]),t._v(" "),a("p",[t._v("kubernetes 中所有的内容都抽象为资源，可以通过下面的命令进行查看:")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("kubectl api-resources\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("经常使用的资源有下面这些：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("资源分类")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("资源名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("缩写")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("资源作用")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("集群级别资源")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("nodes")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("集群组成部分")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("namespaces")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ns")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("隔离 Pod")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("pod 资源")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("pods")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("po")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("装载容器")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("pod 资源控制器")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("replicationcontrollers")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("rc")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("控制 pod 资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("replicasets")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("rs")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("控制 pod 资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("deployments")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("deploy")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("控制 pod 资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("daemonsets")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ds")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("控制 pod 资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("jobs")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("控制 pod 资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("cronjobs")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("cj")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("控制 pod 资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("horizontalpodautoscalers")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("hpa")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("控制 pod 资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("statefulsets")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("sts")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("控制 pod 资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("服务发现资源")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("services")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("svc")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("统一 pod 对外接口")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ingress")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ing")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("统一 pod 对外接口")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("存储资源")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("volumeattachments")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("存储")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("persistentvolumes")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("pv")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("存储")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("persistentvolumeclaims")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("pvc")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("存储")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("配置资源")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("configmaps")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("cm")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("配置")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("secrets")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("配置")])])])]),t._v(" "),a("h4",{attrs:{id:"操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作"}},[t._v("#")]),t._v(" 操作")]),t._v(" "),a("p",[t._v("kubernetes 允许对资源进行多种操作，可以通过 --help 查看详细的操作命令")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("kubectl --help\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("经常使用的操作有下面这些：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("命令分类")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("翻译")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("命令作用")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("基本命令")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("create")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("创建")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("创建一个资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("edit")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("编辑")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("编辑一个资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("get")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("获取")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("获取一个资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("patch")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("更新")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("更新一个资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("delete")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("删除")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("删除一个资源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("explain")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("解释")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("展示资源文档")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("运行和调试")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("run")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("运行")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("在集群中运行一个指定的镜像")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("expose")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("暴露")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("暴露资源为 Service")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("describe")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("描述")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("显示资源内部信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("logs")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("日志输出容器在 pod 中的日志")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("输出容器在 pod 中的日志")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("attach")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("缠绕进入运行中的容器")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("进入运行中的容器")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("exec")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("执行容器中的一个命令")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("执行容器中的一个命令")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("cp")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("复制")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("在 Pod 内外复制文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("rollout")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("首次展示")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("管理资源的发布")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("scale")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("规模")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("扩 (缩) 容 Pod 的数量")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("autoscale")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("自动调整")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("自动调整 Pod 的数量")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("高级命令")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("apply")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("rc")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("通过文件对资源进行配置")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("label")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("标签")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("更新资源上的标签")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("其他命令")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("cluster-info")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("集群信息")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("显示集群信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("version")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("版本")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("显示当前 Server 和 Client 的版本")])])])]),t._v(" "),a("p",[t._v("下面以一个 namespace /pod 的创建和删除简单演示下命令的使用：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('# 创建一个namespace\n[root@master ~]# kubectl create namespace dev\nnamespace/dev created\n\n# 获取namespace\n[root@master ~]# kubectl get ns\nNAME              STATUS   AGE\ndefault           Active   21h\ndev               Active   21s\nkube-node-lease   Active   21h\nkube-public       Active   21h\nkube-system       Active   21h\n\n# 在此namespace下创建并运行一个nginx的Pod\n[root@master ~]# kubectl run pod --image=nginx:latest -n dev\nkubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead.\ndeployment.apps/pod created\n\n# 查看新创建的pod\n[root@master ~]# kubectl get pod -n dev\nNAME  READY   STATUS    RESTARTS   AGE\npod   1/1     Running   0          21s\n\n# 删除指定的pod\n[root@master ~]# kubectl delete pod pod-864f9875b9-pcw7x\npod "pod" deleted\n\n# 删除指定的namespace\n[root@master ~]# kubectl delete ns dev\nnamespace "dev" deleted\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br")])]),a("h3",{attrs:{id:"命令式对象配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令式对象配置"}},[t._v("#")]),t._v(" 命令式对象配置")]),t._v(" "),a("p",[t._v("命令式对象配置就是使用命令配合配置文件一起来操作 kubernetes 资源。"),a("br"),t._v("\n1） 创建一个 nginxpod.yaml，内容如下：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 版本\napiVersion: v1\n# 类型\nkind: Namespace\n# 元数据\nmetadata:\n  # 名称\n  name: dev\n\n---\n\napiVersion: v1\nkind: Pod\nmetadata:\n  # 名称\n  name: nginxpod\n  # 所在命名空间\n  namespace: dev\n# 详细描述\nspec:\n  containers:\n  # 容器的名字\n  - name: nginx-containers\n    # 容器所用的镜像\n    image: nginx:latest\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br")])]),a("p",[t._v("2）执行 create 命令，创建资源：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[root@master ~]# kubectl create -f nginxpod.yaml\nnamespace/dev created\npod/nginxpod created\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("此时发现创建了两个资源对象，分别是 namespace 和 pod")]),t._v(" "),a("p",[t._v("3）执行 get 命令，查看资源：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[root@master ~]#  kubectl get -f nginxpod.yaml\nNAME            STATUS   AGE\nnamespace/dev   Active   18s\n\nNAME            READY   STATUS    RESTARTS   AGE\npod/nginxpod    1/1     Running   0          17s\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("这样就显示了两个资源对象的信息")]),t._v(" "),a("p",[t._v("4）执行 delete 命令，删除资源：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('[root@master ~]# kubectl delete -f nginxpod.yaml\nnamespace "dev" deleted\npod "nginxpod" deleted\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("此时发现两个资源对象被删除了")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("总结:\n    命令式对象配置的方式操作资源，可以简单的认为：命令  +  yaml配置文件（里面是命令需要的各种参数）\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"声明式对象配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#声明式对象配置"}},[t._v("#")]),t._v(" 声明式对象配置")]),t._v(" "),a("p",[t._v("声明式对象配置跟命令式对象配置很相似，但是它只有一个命令 apply。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 首先执行一次kubectl apply -f yaml文件，发现创建了资源\n[root@master ~]#  kubectl apply -f nginxpod.yaml\nnamespace/dev created\npod/nginxpod created\n\n# 再次执行一次kubectl apply -f yaml文件，发现说资源没有变动\n[root@master ~]#  kubectl apply -f nginxpod.yaml\nnamespace/dev unchanged\npod/nginxpod unchanged\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("总结:\n    其实声明式对象配置就是使用apply描述一个资源最终的状态（在yaml中定义状态）\n    使用apply操作资源：\n        如果资源不存在，就创建，相当于 kubectl create\n        如果资源已存在，就更新，相当于 kubectl patch\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("blockquote",[a("p",[t._v("扩展：kubectl 可以在 node 节点上运行吗？")])]),t._v(" "),a("p",[t._v("kubectl 的运行是需要进行配置的，它的配置文件是 $HOME/.kube，如果想要在 node 节点运行此命令，需要将 master 上的.kube 文件复制到 node 节点上，即在 master 节点上执行下面操作：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("scp  -r  ~/.kube   node102:~/\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("blockquote",[a("p",[t._v("使用推荐：三种方式应该怎么用？"),a("br"),t._v("\n 创建 / 更新资源 使用声明式对象配置 kubectl apply -f XXX.yaml"),a("br"),t._v("\n 删除资源 使用命令式对象配置 kubectl delete -f XXX.yaml"),a("br"),t._v("\n 查询资源 使用命令式对象管理 kubectl get (describe) 资源名称")])])])}),[],!1,null,null,null);e.default=l.exports}}]);