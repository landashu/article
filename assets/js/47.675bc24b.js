(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{524:function(s,a,n){"use strict";n.r(a);var e=n(41),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("在 Jenkins 集成服务器上，我们需要安装 Maven 来编译和打包项目。")]),s._v(" "),n("h2",{attrs:{id:"安装maven"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装maven"}},[s._v("#")]),s._v(" 安装 Maven")]),s._v(" "),n("p",[s._v("先上传 Maven 软件到服务器")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 解压\ntar -xzf apache-maven-3.6.2-bin.tar.gz \n# 移动文件\nmv apache-maven-3.6.2 /opt/software/maven\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"配置环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置环境变量"}},[s._v("#")]),s._v(" 配置环境变量")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/profile\nexport JAVA_HOME=/opt/software/java8\nexport MAVEN_HOME=/opt/software/maven\nexport PATH=$PATH:$JAVA_HOME/bin:$MAVEN_HOME/bin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 配置生效\nsource /etc/profile \n# 查找Maven版本\nmvn -v \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"全局工具配置关联jdk和maven"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#全局工具配置关联jdk和maven"}},[s._v("#")]),s._v(" 全局工具配置关联 JDK 和 Maven")]),s._v(" "),n("p",[s._v("Jenkins->Global Tool Configuration->JDK-> 新增 JDK，配置如下：")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/jenkins/503/img.png",alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/jenkins/503/img_1.png",alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/jenkins/503/img_2.png",alt:""}})]),s._v(" "),n("h3",{attrs:{id:"添加jenkins全局变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#添加jenkins全局变量"}},[s._v("#")]),s._v(" 添加 Jenkins 全局变量")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/jenkins/503/img_3.png",alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/jenkins/503/img_4.png",alt:""}})]),s._v(" "),n("h3",{attrs:{id:"修改maven的settings-xml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改maven的settings-xml"}},[s._v("#")]),s._v(" 修改 Maven 的 settings.xml")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 创建本地仓库目录\nmkdir /opt/software/maven/repo \n# 修改文件内容\nvi /opt/software/maven/conf/settings.xml\n<localRepository>/opt/software/maven/repo</localRepository>\n<mirror>\n\t<id>alimaven</id>\n\t<name>aliyun maven</name>\n\t<url>https://maven.aliyun.com/nexus/content/groups/public/</url>\n\t<mirrorOf>central</mirrorOf>\n</mirror> \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h3",{attrs:{id:"测试maven是否配置成功"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试maven是否配置成功"}},[s._v("#")]),s._v(" 测试 Maven 是否配置成功")]),s._v(" "),n("p",[s._v("使用之前的 gitlab 密码测试项目，修改 jenkins 项目配置")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/jenkins/503/img_5.png",alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/jenkins/503/img_6.png",alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/jenkins/503/img_7.png",alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/jenkins/503/img_8.png",alt:""}})]),s._v(" "),n("p",[s._v("我们到 jenkins 服务器的  /var/lib/jenkins/workspace/test01/target/ 下面就可以看到我们打的 jar 包")]),s._v(" "),n("blockquote",[n("p",[s._v("这里反馈一个问题，我这里使用的是 maven 私服（nexus），maven 配置成功但项目就是没办法拉取到自己发布的 jar，原因是我下载的是 maven3.8.x，换成 3.6 就可以了，看到原因说是因为 3.8.x 新加了 jar 的安全阻塞问题。")])])])}),[],!1,null,null,null);a.default=t.exports}}]);