<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker-Compose 命令及基本使用 | 技术博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="人民万岁">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/1.styles.014bf4fe.css" as="style"><link rel="preload" href="/assets/js/app.79fb1ec8.js" as="script"><link rel="preload" href="/assets/js/11.5871899e.js" as="script"><link rel="preload" href="/assets/js/72.1bf4dcdc.js" as="script">
    <link rel="stylesheet" href="/assets/css/1.styles.014bf4fe.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo1.png" alt="技术博客" class="logo"> <span class="site-name can-hide">技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><!----> <span class="title" style="display:;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/java/jvm/100/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/language/cj/100/" class="nav-link">仓颉</a></li><li class="dropdown-item"><!----> <a href="/language/mode/100/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring/spring/200/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/mybatis/mybatis/300/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/maven/2300/" class="nav-link">Maven</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kafka/1400/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/rabbitmq/1500/" class="nav-link">RabbitMQ</a></li><li class="dropdown-item"><!----> <a href="/redis/1600/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/nginx/1700/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/es/1800/" class="nav-link">Elasticsearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hadoop/700/" class="nav-link">Hadoop</a></li><li class="dropdown-item"><!----> <a href="/clickhouse/800/" class="nav-link">ClickHouse</a></li><li class="dropdown-item"><!----> <a href="/hbase/900/" class="nav-link">Hbase</a></li><li class="dropdown-item"><!----> <a href="/hive/1000/" class="nav-link">Hive</a></li><li class="dropdown-item"><!----> <a href="/flume/1100/" class="nav-link">Flume</a></li><li class="dropdown-item"><!----> <a href="/flink/1200/" class="nav-link">Flink</a></li><li class="dropdown-item"><!----> <a href="/mysql/1300/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/mongodb/1800/" class="nav-link">MongoDB</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><!----> <span class="title" style="display:;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue3/1900/" class="nav-link">VUE3</a></li><li class="dropdown-item"><!----> <a href="/wx/2000/" class="nav-link">微信小程序</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/2300/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/docker/400/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/jenkins/500/" class="nav-link">Jenkins</a></li><li class="dropdown-item"><!----> <a href="/kubernetes/600/" class="nav-link">Kubernetes</a></li></ul></div></div> <a href="https://github.com/landashu?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><!----> <span class="title" style="display:;">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/java/jvm/100/" class="nav-link">JAVA</a></li><li class="dropdown-item"><!----> <a href="/language/cj/100/" class="nav-link">仓颉</a></li><li class="dropdown-item"><!----> <a href="/language/mode/100/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring/spring/200/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/mybatis/mybatis/300/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/maven/2300/" class="nav-link">Maven</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kafka/1400/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/rabbitmq/1500/" class="nav-link">RabbitMQ</a></li><li class="dropdown-item"><!----> <a href="/redis/1600/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/nginx/1700/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/es/1800/" class="nav-link">Elasticsearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hadoop/700/" class="nav-link">Hadoop</a></li><li class="dropdown-item"><!----> <a href="/clickhouse/800/" class="nav-link">ClickHouse</a></li><li class="dropdown-item"><!----> <a href="/hbase/900/" class="nav-link">Hbase</a></li><li class="dropdown-item"><!----> <a href="/hive/1000/" class="nav-link">Hive</a></li><li class="dropdown-item"><!----> <a href="/flume/1100/" class="nav-link">Flume</a></li><li class="dropdown-item"><!----> <a href="/flink/1200/" class="nav-link">Flink</a></li><li class="dropdown-item"><!----> <a href="/mysql/1300/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/mongodb/1800/" class="nav-link">MongoDB</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><!----> <span class="title" style="display:;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue3/1900/" class="nav-link">VUE3</a></li><li class="dropdown-item"><!----> <a href="/wx/2000/" class="nav-link">微信小程序</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/2300/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/docker/400/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/jenkins/500/" class="nav-link">Jenkins</a></li><li class="dropdown-item"><!----> <a href="/kubernetes/600/" class="nav-link">Kubernetes</a></li></ul></div></div> <a href="https://github.com/landashu?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docker/400/" class="sidebar-link">Docker 概念、命令及Dockerfile介绍</a></li><li><a href="/docker/401/" aria-current="page" class="active sidebar-link">Docker-Compose 命令及基本使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/docker/401/#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header level2"><a href="/docker/401/#安装与卸载" class="sidebar-link">安装与卸载</a></li><li class="sidebar-sub-header level2"><a href="/docker/401/#命令" class="sidebar-link">命令</a></li><li class="sidebar-sub-header level2"><a href="/docker/401/#compose文件编写" class="sidebar-link">Compose文件编写</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/docker/401/#示例1" class="sidebar-link">示例1</a></li><li class="sidebar-sub-header level3"><a href="/docker/401/#示例2" class="sidebar-link">示例2</a></li><li class="sidebar-sub-header level3"><a href="/docker/401/#compose-指令" class="sidebar-link">Compose 指令</a></li><li class="sidebar-sub-header level3"><a href="/docker/401/#命令选项" class="sidebar-link">命令选项</a></li><li class="sidebar-sub-header level3"><a href="/docker/401/#命令使用说明" class="sidebar-link">命令使用说明</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#up" class="sidebar-link">up</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#down" class="sidebar-link">down</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#exec" class="sidebar-link">exec</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#ps" class="sidebar-link">ps</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#restart" class="sidebar-link">restart</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#rm" class="sidebar-link">rm</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#start" class="sidebar-link">start</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#stop" class="sidebar-link">stop</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#top" class="sidebar-link">top</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#pause-unpause" class="sidebar-link">pause,unpause</a></li><li class="sidebar-sub-header level4"><a href="/docker/401/#logs" class="sidebar-link">logs</a></li></ul></li></ul></li><li><a href="/docker/402/" class="sidebar-link">Docker私有库的开发</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Jenkins</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jenkins/500/" class="sidebar-link">Jenkins(一) 持续集成及Jenkins介绍</a></li><li><a href="/jenkins/501/" class="sidebar-link">Jenkins(二) Jenkins安装和环境配置</a></li><li><a href="/jenkins/502/" class="sidebar-link">Jenkins(三) Jenkins用户管理及凭证</a></li><li><a href="/jenkins/503/" class="sidebar-link">Jenkins(四) Maven安装和配置</a></li><li><a href="/jenkins/504/" class="sidebar-link">Jenkins(五) Jenkins构建Maven项目</a></li><li><a href="/jenkins/505/" class="sidebar-link">Jenkins(六) Jenkins项目构建细节</a></li><li><a href="/jenkins/506/" class="sidebar-link">Jenkins(七) Jenkins+Docker+SpringCloud微服务持续集成（上）</a></li><li><a href="/jenkins/507/" class="sidebar-link">Jenkins(八) Jenkins+Docker+SpringCloud微服务持续集成（下）</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Kubernetes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kubernetes/600/" class="sidebar-link">kubernetes(一) 概念及介绍</a></li><li><a href="/kubernetes/601/" class="sidebar-link">kubernetes(二) 集群环境搭建</a></li><li><a href="/kubernetes/602/" class="sidebar-link">kubernetes(三) 资源管理</a></li><li><a href="/kubernetes/603/" class="sidebar-link">kubernetes(四) Namespace、Pod、Lable、Deployment、Service 的资源介绍</a></li><li><a href="/kubernetes/604/" class="sidebar-link">kubernetes(五) Pod 介绍及配置</a></li><li><a href="/kubernetes/605/" class="sidebar-link">kubernetes(六) Pod 生命周期</a></li><li><a href="/kubernetes/606/" class="sidebar-link">kubernetes(七) Pod 调度</a></li><li><a href="/kubernetes/607/" class="sidebar-link">kubernetes(八) Pod 控制器详解</a></li><li><a href="/kubernetes/608/" class="sidebar-link">kubernetes(九) Service介绍、类型及使用</a></li><li><a href="/kubernetes/609/" class="sidebar-link">kubernetes(十) Ingress介绍及使用</a></li><li><a href="/kubernetes/610/" class="sidebar-link">kubernetes(十一) 数据存储（挂载卷管理）</a></li><li><a href="/kubernetes/611/" class="sidebar-link">kubernetes(十二) 安全认证</a></li><li><a href="/kubernetes/612/" class="sidebar-link">kubernetes(十三) DashBoard</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linux/2300/" class="sidebar-link">linux 创建用户及权限操作</a></li><li><a href="/linux/2301/" class="sidebar-link">Linux 磁盘操作相关命令</a></li><li><a href="/linux/2302/" class="sidebar-link">Linux 文本数据处理工具awk命令</a></li><li><a href="/linux/2303/" class="sidebar-link">Linux 定时任务</a></li><li><a href="/linux/2304/" class="sidebar-link">Linux 命令总结</a></li><li><a href="/linux/2305/" class="sidebar-link">Linux 22端口对外攻击解决</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="placeholder"></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Docker-Compose 命令及基本使用<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>Compose 项目是 Docker 官方的开源项目，负责实现对 Docker 容器集群的快速编排，帮助定义和运行多个 Docker 容器的应用，其前身是开源项目 Fig。所谓编排就是能把一个项目的依赖（如 mysql，redis，服务间的依赖等）按照有序的方式启动容器</p> <p>DockerFile 可以让用户很方便的定义一个单独的应用容器，然而在日常工作中们经常会碰到需要多个容器相互配合来完成某项任务的情况。例如要实现一个 web 项目，除了 web 服务容器本身，往往还需要再加上后端的数据库服务器容器，甚至还包括负载均衡容器等。</p> <p>Compose 恰好满足了这样的需求，它允许通过一个单独的 docker-compose.yml 模板文件，来定义一组相关联的应用容器为一个项目。</p> <p>Compose 中有两个重要的概念</p> <ol><li>服务（service），一个应用的容器，实际上可以包括若干运行相同镜像的容器实例。</li> <li>项目（project），由一组关联的应用容器组成的一个完整业务单元，再 docker-compose.yml 文件中定义。</li></ol> <p>Compose 的默认管理对象是项目，通过子命令对项目中的一组容器进行便捷地生命周期管理。</p> <p>Compose 项目由 Python 编写，实现上调用了 Docker 服务提供的 API 来对容器进行管理。因此，只要所操作的平台支持 Docker API，就可以再其上利用 Compose 来进行编排管理。</p> <h2 id="安装与卸载"><a href="#安装与卸载" class="header-anchor">#</a> 安装与卸载</h2> <p>安装的话，可以安装 Docker Desktop ，它包含了 Docker 以及 Compose 和 K8s，也可以单独安装，但建议先了解清楚官方对 Compose 的一些安装限制。<a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">官方地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>linux 安装</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">curl</span> -L <span class="token string">&quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -s<span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -m<span class="token variable">)</span></span>&quot;</span> -o /usr/local/bin/docker-compose
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
<span class="token function">docker-compose</span> --version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="命令"><a href="#命令" class="header-anchor">#</a> 命令</h2> <table><thead><tr><th>命令</th> <th>描述</th></tr></thead> <tbody><tr><td>version</td> <td>版本目前 4 以下的都可以写，如 3.9，3.8 等，最好保持和 docker <a href="https://docs.docker.com/compose/compose-file/compose-file-v3/#profiles" target="_blank" rel="noopener noreferrer">版本兼容<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td>services</td> <td>可以里面描述你的所有服务，以及依赖关系等</td></tr> <tr><td>image</td> <td>指定为镜像名称或镜像 ID，如果镜像在本地不存在，Compose 将会尝试拉取这个镜像</td></tr> <tr><td>ports</td> <td>指定与宿主机与容器映射的端口，是一个数组，每个数组的元素建议用字符形式，如 &quot;80:80&quot;</td></tr> <tr><td>volumes</td> <td>挂载路径设置，类型为数组，可以挂载多个，在制作容器的时候可以显示的声明挂载路径，也可以在容器运行时直接使用 -v 命令。</td></tr> <tr><td>networks</td> <td>配置容器连接的网络 docker network ls 查看网络列表， <code>docker network inspect &lt;container id&gt;</code>  可以查看对应网络的配置</td></tr> <tr><td>environment</td> <td>设置环境变量。你可以使用数组或字典两种方式</td></tr> <tr><td>env_file</td> <td>从文件中获取环境变量，可以为单独的文件路径或列表，文件内必须是字典方式编写</td></tr> <tr><td>command</td> <td>覆盖容器启动后默认执行的命令</td></tr> <tr><td>depends_on</td> <td>解决容器的依赖、启动先后的问题，填写的值为 服务名，会等依赖的服务启动一定程度才启动自己</td></tr> <tr><td>healthcheck</td> <td>通过命令检查容器是否监控运行</td></tr> <tr><td>sysctls</td> <td>配置容器内核参数，如 ES 等都需要修改内核的环境参数</td></tr> <tr><td>ulimits</td> <td>指定容器的 ulimits 限制值，如 ES、Clickhouse 会有修改需求</td></tr> <tr><td>build</td> <td>用来将指定 Dockerfile 打包成对应镜像，然后再运行该镜像</td></tr></tbody></table> <p>这些命令其实就类似于我们在 Docker 中启动一个容器的命令。</p> <h2 id="compose文件编写"><a href="#compose文件编写" class="header-anchor">#</a> Compose 文件编写</h2> <h3 id="示例1"><a href="#示例1" class="header-anchor">#</a> 示例 1</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">### 版本</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.2&quot;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token comment">### 服务名称</span>
  <span class="token key atrule">tomcat</span><span class="token punctuation">:</span>
    <span class="token comment">### 指定容器的名称 相当于 --name</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> tomcat_1
    <span class="token comment">### 使用哪个镜像 相当于 docket run image</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>8.0<span class="token punctuation">-</span>jre8
    <span class="token comment">### 指定宿主机与容器端口的映射 相当于 -p</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token comment">### 宿主机:容器</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8080:8080&quot;</span>
    <span class="token comment">### 宿主机与容器的数据共享 挂载目录 相当于 -v</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token comment">### 方式1：指定绝对明确(绝对路径)的挂载目录</span>
      <span class="token punctuation">-</span> /home/server<span class="token punctuation">:</span>/user
      <span class="token comment">### 方式2：声明了自定创建卷名的变量</span>
      <span class="token punctuation">-</span> tomcatwebapps<span class="token punctuation">:</span>/user
    <span class="token comment">### 代表当前服务处于那个网络，作用是网络隔离用，会把相网络名称相同的容器的网段统一。相当于 --network</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> group1

  <span class="token key atrule">mysql</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span>5.7.32
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mysql
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;3306:3306&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> mysqldata<span class="token punctuation">:</span>/var/lib/mysql
    <span class="token punctuation">-</span> mysqlconf<span class="token punctuation">:</span>/etc/mysql
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span>MYSQL_ROOT_PASSWORD=root
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      group1


<span class="token comment">### 描述 挂在卷里的变量</span>
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token comment">### 指定变量 tomcatwebapps，如果不写 external，默认会是 docker-compose.yml 所在当前文件夹的名称(会自动创建)</span>
  <span class="token key atrule">tomcatwebapps</span><span class="token punctuation">:</span>
    <span class="token comment">### 使用自定义卷毛</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span>
      <span class="token comment">### true 确定使用指定卷名，注意：一旦使用外部自定义卷名，启动服务之前必须手动创建 docker volume create 卷名</span>
      false
  <span class="token key atrule">mysqldata</span><span class="token punctuation">:</span>
  <span class="token key atrule">mysqlconf</span><span class="token punctuation">:</span>

<span class="token comment">### 定义服务用到的网络</span>
<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token comment">### 定义上面的服务用到的网络的名称，默认是驱动属于 bridge，自定义的网络名称 group1，在实际中会变为 项目名(或所在文件目录名)</span>
  <span class="token key atrule">group1</span><span class="token punctuation">:</span>
    <span class="token comment">### 使用外部指定的网络，为 true 就标识网络必须存在</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span>
      <span class="token comment">### docker network create -d bridge 网络名称</span>
      true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h3 id="示例2"><a href="#示例2" class="header-anchor">#</a> 示例 2</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">### 指定版本，版本的关系和Docker 引擎有关</span>
<span class="token comment">### https://docs.docker.com/compose/compose-file/compose-file-v3/#profiles 版本关系及说明</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.7'</span>

<span class="token comment">### 指定服务</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token comment">### 服务名称 唯一</span>
  <span class="token key atrule">monitor-web-server-service</span><span class="token punctuation">:</span>
    <span class="token comment">### 构建镜像的项目路径</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token comment">### 指定上下文路径，默认是微服务项目的根目录</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./monitor<span class="token punctuation">-</span>web/monitor<span class="token punctuation">-</span>web<span class="token punctuation">-</span>server/
      <span class="token comment">### 指定</span>
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> monitor<span class="token punctuation">-</span>web<span class="token punctuation">-</span>server<span class="token punctuation">-</span>service
    <span class="token comment">### 指定镜像名称</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> monitor<span class="token punctuation">-</span>web<span class="token punctuation">-</span>server<span class="token punctuation">-</span>service
    <span class="token comment">### .env的环境变量</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./.env
    <span class="token comment">### 网络配置</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> internal_access
      <span class="token punctuation">-</span> external_access <span class="token comment">### db access</span>

  <span class="token key atrule">monitor-web-socket-service</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./monitor<span class="token punctuation">-</span>web/monitor<span class="token punctuation">-</span>web<span class="token punctuation">-</span>socket/monitor<span class="token punctuation">-</span>web<span class="token punctuation">-</span>socket<span class="token punctuation">-</span>service
    <span class="token key atrule">image</span><span class="token punctuation">:</span> boboweike/monitor<span class="token punctuation">-</span>web<span class="token punctuation">-</span>socket<span class="token punctuation">-</span>service
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./.env
    <span class="token comment">### 依赖的项目，启动的时候根据依赖关系定义启动顺序</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> monitor<span class="token punctuation">-</span>web<span class="token punctuation">-</span>server<span class="token punctuation">-</span>service
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> internal_access
      <span class="token punctuation">-</span> external_access <span class="token comment">### db access</span>

  <span class="token key atrule">monitor-gateway</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./monitor<span class="token punctuation">-</span>gateway
    <span class="token key atrule">image</span><span class="token punctuation">:</span> boboweike/monitor<span class="token punctuation">-</span>gateway
    <span class="token comment">### 设置内部和外部端口</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token datetime number">80:80</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./.env
    <span class="token comment">### 依赖的项目，启动的时候根据依赖关系定义启动顺序</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> monitor<span class="token punctuation">-</span>web<span class="token punctuation">-</span>server<span class="token punctuation">-</span>service
      <span class="token punctuation">-</span> monitor<span class="token punctuation">-</span>web<span class="token punctuation">-</span>server<span class="token punctuation">-</span>service
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> internal_access
      <span class="token punctuation">-</span> external_access
    <span class="token comment">### 心跳检查</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token comment">### 访问 monitor-gateway 网关的命令</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;http://localhost:80&quot;</span> <span class="token punctuation">]</span>
      <span class="token comment">### 间隔时间</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 1m30s
      <span class="token comment">### 超时时间</span>
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token comment">### 重试次数</span>
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

  <span class="token key atrule">mysql</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span>5.7.32
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mysql
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;3306:3306&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> mysqldata<span class="token punctuation">:</span>/var/lib/mysql
      <span class="token punctuation">-</span> mysqlconf<span class="token punctuation">:</span>/etc/mysql
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./mysql.env
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> external_access
    <span class="token comment">### 修改内核参数，也可以是数组的方式</span>
    <span class="token key atrule">sysctls</span><span class="token punctuation">:</span>
      <span class="token key atrule">net.core.somaxconn</span><span class="token punctuation">:</span> <span class="token number">1024</span>
      <span class="token key atrule">net.ipv4.tcp_syncookies</span><span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token comment">### 指定容器的 ulimits 限制值，例如 ，</span>
    <span class="token key atrule">ulimits</span><span class="token punctuation">:</span>
      <span class="token comment">### 指定最大进程数为 65535</span>
      <span class="token key atrule">nproc</span><span class="token punctuation">:</span> <span class="token number">65535</span>
      <span class="token comment">### 指定文件句柄数为</span>
      <span class="token key atrule">nofile</span><span class="token punctuation">:</span>
        <span class="token comment">### 软限制 200000（软限制，应用可以随时修改，不能超过硬限制）</span>
        <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">20000</span>
        <span class="token comment">### 硬限制（系统硬限制，只能root用户提高）</span>
        <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">40000</span>


  <span class="token key atrule">myaccount-service</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./frontend
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> myaccount/Dockerfile
    <span class="token key atrule">image</span><span class="token punctuation">:</span> boboweike/myaccount<span class="token punctuation">-</span>spa
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> internal_access


<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">internal_access</span><span class="token punctuation">:</span>
    <span class="token key atrule">internal</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">external_access</span><span class="token punctuation">:</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br></div></div><h3 id="compose-指令"><a href="#compose-指令" class="header-anchor">#</a> Compose 指令</h3> <p>对于 Compose 来说，大部分命令的对象既可以是项目本身，也可以指定为项目中的服务或者容器。如果没有特别的说明，命令对象将是项目，这意味着项目中所有的服务都会受到影响。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> <span class="token punctuation">[</span>-f<span class="token operator">=</span><span class="token operator">&lt;</span>arg<span class="token operator">&gt;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARGS<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="命令选项"><a href="#命令选项" class="header-anchor">#</a> 命令选项</h3> <ul><li>-f -&gt; --file FILE 指定使用的 Compose 模板把文件，默认为 docker-compose.yml，可以多次指定。</li> <li>-p -&gt; --project-name NAME 指定项目名称，默认将使用所在目录名称作为项目名</li> <li>--x-networking 使用 Docker 可插拔网络后端特性</li> <li>--verbose 输出更多调试信息。</li> <li>-v -&gt; --version 打印版本并退出。</li></ul> <h3 id="命令使用说明"><a href="#命令使用说明" class="header-anchor">#</a> 命令使用说明</h3> <h4 id="up"><a href="#up" class="header-anchor">#</a> up</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> up <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>SERVICE<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>该命令十分强大，它将尝试自动完成包括构建镜像，（重新）创建服务，启动服务，并关联服务相关容器的一系列操作。</li> <li>连接的服务都将会被自动启动，除非已经处于运行状态</li> <li>大部分的时候都可以直接通过该命令来启动一个项目。</li> <li>默认情况，docker-compose up 启动的容器都在前台，控制台将会同时打印所有容器的输出信息，可以很方便进行调试。</li> <li>当通过 Ctrl-c 停止命令时，所有容器将会停止</li> <li>如果使用 docker-compose up -d，将会再后台启动并运行所有的容器，一般推荐生产环境下使用该选项。</li> <li>默认情况，如果服务容器已经存在，docker-compose up 将会尝试停止容器，然后重新创建（保持使用 volumes-from 挂载的卷），以保证新启动的服务匹配 docker-compose.yml 文件的最新内容。</li></ul> <h4 id="down"><a href="#down" class="header-anchor">#</a> down</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> down
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此命令将会停止 up 命令所启动的容器，并移除网络</p> <h4 id="exec"><a href="#exec" class="header-anchor">#</a> exec</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> <span class="token builtin class-name">exec</span> 服务名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>进入指定的容器</p> <h4 id="ps"><a href="#ps" class="header-anchor">#</a> ps</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> <span class="token function">ps</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>SERVICE<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>列出项目中目前的所有容器。</p> <ul><li>-q ，可以以打印容器的 ID 信息</li></ul> <h4 id="restart"><a href="#restart" class="header-anchor">#</a> restart</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> restart <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>service<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>重启项目中的服务，选项 -t 指定重启前停止容的超时时间（默认 10s）</p> <h4 id="rm"><a href="#rm" class="header-anchor">#</a> rm</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> <span class="token function">rm</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>service<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除所有（停止状态的）服务容器。推荐先执行 docker-compose stop 命令来停止容器。</p> <ul><li>-f 强制直接删除，包括非停止状态的容器。一般尽量不要使用该选项。</li> <li>-v 删除容器所挂载的数据卷。</li></ul> <h4 id="start"><a href="#start" class="header-anchor">#</a> start</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> start <span class="token punctuation">[</span>service<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动已经存在的服务容器</p> <h4 id="stop"><a href="#stop" class="header-anchor">#</a> stop</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> stop <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>service<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>停止已经处于运行状态的容器，但不删除它。通过 docker-compose start 可以再次启动这些容器</p> <ul><li>-t 停止容器的超时时间（默认为 10s）</li></ul> <h4 id="top"><a href="#top" class="header-anchor">#</a> top</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> <span class="token function">top</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看各个服务容器内运行的进程。</p> <h4 id="pause-unpause"><a href="#pause-unpause" class="header-anchor">#</a> pause,unpause</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> pause <span class="token punctuation">[</span>service<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>暂停处于运行中的服务。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> unpause <span class="token punctuation">[</span>service<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>恢复处于暂停状态中的服务。</p> <h4 id="logs"><a href="#logs" class="header-anchor">#</a> logs</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> logs <span class="token punctuation">[</span>service<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看某个服务的日志</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/24/2024, 4:09:13 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/docker/400/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Docker 概念、命令及Dockerfile介绍</div></a> <a href="/docker/402/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Docker私有库的开发</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docker/400/" class="prev">Docker 概念、命令及Dockerfile介绍</a></span> <span class="next"><a href="/docker/402/">Docker私有库的开发</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://gitee.com/dashboard" title="gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://github.com/landashu?tab=repositories" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="mailto:875730567@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>
<!--      <a href='https://doc.xugaoyi.com/' target='_blank'>Theme by Vdoing</a> | <a href='http://doc.aizuda.com/' rel='external nofollow' target='_blank'>Copyright © 2022-2023 AiZuDa</a>-->
<!--      <br>-->
<!--      <a href="http://beian.miit.gov.cn/" target="_blank">鲁ICP备2021041554号-1</a>-->
    </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.79fb1ec8.js" defer></script><script src="/assets/js/11.5871899e.js" defer></script><script src="/assets/js/72.1bf4dcdc.js" defer></script>
  </body>
</html>
